(window.webpackJsonp=window.webpackJsonp||[]).push([[1662],{3e3:function(e,t,a){"use strict";a.r(t);var s=a(19),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"自主避障"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自主避障"}},[e._v("#")]),e._v(" 自主避障")]),e._v(" "),a("p",[a("em",[e._v("Obstacle Avoidance")]),e._v(" enables a vehicle to navigate around obstacles when following a preplanned path.")]),e._v(" "),a("p",[e._v("该功能需要运行计算机视觉软件的机载计算机。 该软件对期望路线重新规划，在导航绕开障碍物，并选取最佳路径。")]),e._v(" "),a("p",[e._v("自主避障适用于自动化模式，目前仅支持多旋翼飞行器的 "),a("a",{attrs:{href:"#mission_mode"}},[e._v("任务Missions")]),e._v(" 和 "),a("a",{attrs:{href:"#offboard_mode"}},[e._v("Offboard")]),e._v(" 模式。")]),e._v(" "),a("p",[e._v("本文将阐述怎样在这两种模式中设置自主避障功能。")]),e._v(" "),a("p"),a("div",{staticClass:"embed-responsive embed-responsive-16by9"},[a("iframe",{staticClass:"embed-responsive-item youtube-player",attrs:{type:"text/html",width:"640",height:"390",src:"https://www.youtube.com/embed/PrGt7pKj3tI",frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:""}})]),a("p"),e._v(" "),a("h2",{attrs:{id:"局限-能力"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#局限-能力"}},[e._v("#")]),e._v(" 局限 / 能力")]),e._v(" "),a("ul",[a("li",[e._v("自主避障的最大速度当前约为 3m/s（由于计算避障路径的开销）。")])]),e._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[e._v("注解")]),e._v(" "),a("p",[e._v("Obstacle avoidance can use the "),a("em",[e._v("local planner")]),e._v(" planner emits messages at ~30Hz and can move at around 3 m/s) or global planner (emits messages at ~10Hz and mission speed with obstacle avoidance is around 1-1.5 m/s).")])]),e._v(" "),a("p",[a("span",{attrs:{id:"offboard_mode"}})]),e._v(" "),a("h2",{attrs:{id:"offboard模式避障"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#offboard模式避障"}},[e._v("#")]),e._v(" Offboard模式避障")]),e._v(" "),a("p",[e._v("PX4 在 "),a("RouterLink",{attrs:{to:"/zh/flight_modes/offboard.html"}},[e._v("Offboard 模式")]),e._v("中支持自主避障功能。")],1),e._v(" "),a("p",[e._v("期望路径来自在配套计算机上运行的一个 "),a("RouterLink",{attrs:{to:"/zh/ros/"}},[e._v("ROS")]),e._v(" 节点。 并传递给自主避障模块（另一个 ROS 节点）。 避障软件将规划路径通过 "),a("code",[e._v("SET_POSITION_TARGET_LOCAL_NED")]),e._v(" 消息流发送给飞行控制栈。")],1),e._v(" "),a("p",[e._v("The only required PX4-side setup is to put PX4 into "),a("em",[e._v("Offboard mode")]),e._v(".")]),e._v(" "),a("p",[e._v("Companion-side hardware setup and hardware/software configuration is provided in the "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Avoidance",target:"_blank",rel:"noopener noreferrer"}},[e._v("PX4/PX4-Avoidance"),a("OutboundLink")],1),e._v(" Github repo.")]),e._v(" "),a("p",[a("span",{attrs:{id:"mission_mode"}})]),e._v(" "),a("h2",{attrs:{id:"任务模式避障"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#任务模式避障"}},[e._v("#")]),e._v(" 任务模式避障")]),e._v(" "),a("p",[e._v("PX4支持 "),a("RouterLink",{attrs:{to:"/zh/flight_modes/mission.html"}},[e._v("任务模式")]),e._v(" 避障，需要使用一台独立的运行避障软件的机载计算机配合。")],1),e._v(" "),a("h3",{attrs:{id:"任务模式的变化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#任务模式的变化"}},[e._v("#")]),e._v(" 任务模式的变化")]),e._v(" "),a("p",[e._v("Mission behaviour with obstacle avoidance enabled is "),a("em",[e._v("slightly different")]),e._v(" to the original plan.")]),e._v(" "),a("p",[e._v("激活避障之后的不同之处有：")]),e._v(" "),a("ul",[a("li",[e._v("飞机距离目标航点小于阈值半径，即判定为抵达，不考虑航向。\n"),a("ul",[a("li",[e._v("在普通任务模式下，飞机必须沿某一航向抵达目标航点（比如从上一航点沿直线靠近）。 开启自主避障后该约束失效，因为避障算法完全控制了飞机的航向，并且飞机始终在当前视野中移动。")])])]),e._v(" "),a("li",[e._v("一旦判定为到达某航点（即距离航点小于阈值半径），PX4 就开始切换新的当前航点与下一个航点。")]),e._v(" "),a("li",[e._v("If a waypoint is "),a("em",[e._v("inside")]),e._v(" an obstacle it may unreachable (and the mission will be stuck).\n"),a("ul",[a("li",[e._v("如果飞机在上一航点与当前航点连线上的投影经过了当前航点，阈值半径将被放大，当前航点将被标记为抵达。")]),e._v(" "),a("li",[e._v("如果载具只能进入x-y方向的阈值半径，高度方向的可接受阈值将被修改，然后任务将继续（即使无法进入高度的可接受半径）。")])])]),e._v(" "),a("li",[e._v("The original mission speed (as set in "),a("em",[e._v("QGroundControl")]),e._v("/PX4) is ignored. 速度将由避障软件决定：\n"),a("ul",[a("li",[a("em",[e._v("local planner")]),e._v(" mission speed is around 3 m/s.")]),e._v(" "),a("li",[a("em",[e._v("global planner")]),e._v(" mission speed is around 1-1.5 m/s.")])])])]),e._v(" "),a("p",[e._v("如果 PX4 停止接收设定点更新超过半秒钟， 将切换到 "),a("RouterLink",{attrs:{to:"/zh/flight_modes/hold.html"}},[e._v("保持Hold 模式")]),e._v("。")],1),e._v(" "),a("h3",{attrs:{id:"px4-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#px4-配置"}},[e._v("#")]),e._v(" PX4 配置")]),e._v(" "),a("p",[e._v("PX4 通过 "),a("RouterLink",{attrs:{to:"/zh/advanced_config/parameters.html"}},[e._v("设置")]),e._v(" 参数 "),a("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#COM_OBS_AVOID"}},[e._v("COM_OBS_AVOID")]),e._v(" 为1 来使能自主避障功能。")],1),e._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[e._v("注解")]),e._v(" "),a("p",[a("code",[e._v("COM_OBS_AVOID")]),e._v(" 还使能了 "),a("RouterLink",{attrs:{to:"/zh/computer_vision/safe_landing.html"}},[e._v("安全着陆")]),e._v("，以及使用了 PX4 "),a("RouterLink",{attrs:{to:"/zh/computer_vision/path_planning_interface.html"}},[e._v("Path Planning Offboard Interface")]),e._v(" （轨迹接口）将外部路径规划服务与 PX4 集成的其他功能。")],1)]),e._v(" "),a("h2",{attrs:{id:"机载计算机设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#机载计算机设置"}},[e._v("#")]),e._v(" 机载计算机设置")]),e._v(" "),a("p",[e._v("Companion-side hardware setup and hardware/software configuration is provided in the "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Avoidance",target:"_blank",rel:"noopener noreferrer"}},[e._v("PX4/PX4-Avoidance"),a("OutboundLink")],1),e._v(" Github repo.")]),e._v(" "),a("p",[e._v("Obstacle avoidance in missions can use either the "),a("em",[e._v("local planner")]),e._v(" or "),a("em",[e._v("global planner")]),e._v(" (the local planner is recommended/better performing).")]),e._v(" "),a("p",[a("span",{attrs:{id:"interface"}})]),e._v(" "),a("h2",{attrs:{id:"自主避障接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自主避障接口"}},[e._v("#")]),e._v(" 自主避障接口")]),e._v(" "),a("p",[e._v("PX4 使用 "),a("RouterLink",{attrs:{to:"/zh/computer_vision/path_planning_interface.html"}},[e._v("Path Planning Offboard Interface")]),e._v(" 集成机载计算机中的路径规划服务（包括 "),a("RouterLink",{attrs:{to:"/zh/computer_vision/obstacle_avoidance.html#mission_mode"}},[e._v("任务中自主避障")]),e._v("，"),a("RouterLink",{attrs:{to:"/zh/computer_vision/safe_landing.html"}},[e._v("安全着陆")]),e._v(" 以及更多的服务）。")],1),e._v(" "),a("p",[e._v("The interface (messages sent) between PX4 and the companion are "),a("em",[e._v("exactly")]),e._v(" the same as for any other path planning services.")]),e._v(" "),a("h2",{attrs:{id:"支持的硬件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持的硬件"}},[e._v("#")]),e._v(" 支持的硬件")]),e._v(" "),a("p",[e._v("Tested companion computers and cameras are listed in "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Avoidance#run-on-hardware",target:"_blank",rel:"noopener noreferrer"}},[e._v("PX4/PX4-Avoidance"),a("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=r.exports}}]);