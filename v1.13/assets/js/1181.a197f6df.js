(window.webpackJsonp=window.webpackJsonp||[]).push([[1181],{2125:function(t,a,s){"use strict";s.r(a);var n=s(19),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"payloads-and-cameras"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#payloads-and-cameras"}},[t._v("#")]),t._v(" Payloads and Cameras")]),t._v(" "),s("p",[t._v("PX4 supports a wide range of payloads and cameras.")]),t._v(" "),s("p",[t._v("Payloads are connected to "),s("RouterLink",{attrs:{to:"/en/getting_started/px4_basic_concepts.html#outputs-motors-servos-actuators"}},[t._v("Fight Controller outputs")]),t._v(", and can generally be triggered automatically in missions, or manually using RC passthrough or MAVLink/MAVSDK commands.")],1),t._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("Payloads (actuators) can be tested in the "),s("RouterLink",{attrs:{to:"/en/getting_started/px4_basic_concepts.html#arming-and-disarming"}},[t._v("pre-arm state")]),t._v(", which disables motors but allows actuators to move.\nThis may be safer than testing when the vehicle is armed.")],1)]),t._v(" "),s("h2",{attrs:{id:"mapping-drones"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mapping-drones"}},[t._v("#")]),t._v(" Mapping Drones")]),t._v(" "),s("p",[t._v("Mapping drones use cameras to capture images at time or distance intervals during surveys.")]),t._v(" "),s("p",[t._v("MAVLink cameras that support the "),s("a",{attrs:{href:"https://mavlink.io/en/services/camera.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAVLink Camera Protocol"),s("OutboundLink")],1),t._v(" provide the best integration with PX4 and QGroundControl.\nThe MAVSDK provides simple APIs to use this protocol for both "),s("a",{attrs:{href:"https://mavsdk.mavlink.io/main/en/cpp/api_reference/classmavsdk_1_1_camera.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("standalone camera operations"),s("OutboundLink")],1),t._v(" and in "),s("a",{attrs:{href:"https://mavsdk.mavlink.io/main/en/cpp/api_reference/structmavsdk_1_1_mission_1_1_mission_item.html#structmavsdk_1_1_mission_1_1_mission_item_1a0299fbbe7c7b03bc43eb116f96b48df4",target:"_blank",rel:"noopener noreferrer"}},[t._v("missions"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Cameras can also be connected directly to a flight controller using PWM or GPI outputs.\nPX4 supports the following set of MAVLink commands/mission items for cameras that are connected to the flight controller:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_CMD_DO_SET_CAM_TRIGG_INTERVAL",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_CMD_DO_SET_CAM_TRIGG_INTERVAL"),s("OutboundLink")],1),t._v(" - set time interval between captures.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_CMD_DO_SET_CAM_TRIGG_DIST",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_CMD_DO_SET_CAM_TRIGG_DIST"),s("OutboundLink")],1),t._v(" - set distance between captures")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_CMD_DO_TRIGGER_CONTROL",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_CMD_DO_TRIGGER_CONTROL"),s("OutboundLink")],1),t._v(" - start/stop capturing (using distance or time, as defined using above messages).")])]),t._v(" "),s("p",[t._v("The following topics show how to "),s("em",[t._v("connect")]),t._v(" and configure a camera:")]),t._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/en/peripherals/camera.html"}},[t._v("Camera triggering")]),t._v(" from flight controller PWM or GPIO outputs, or via MAVLink.")],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/en/peripherals/camera.html#camera-capture"}},[t._v("Camera timing feedback")]),t._v(" via hotshoe input.")],1)]),t._v(" "),s("h2",{attrs:{id:"cargo-drones-actuator-payloads"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cargo-drones-actuator-payloads"}},[t._v("#")]),t._v(' Cargo Drones ("Actuator" Payloads)')]),t._v(" "),s("p",[t._v("Cargo drones commonly use servos/actuators to trigger cargo release, control winches, etc.\nPX4 supports actuator triggering via both RC and MAVLink commands.")]),t._v(" "),s("h3",{attrs:{id:"payload-outputs-control-allocation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#payload-outputs-control-allocation"}},[t._v("#")]),t._v(" Payload Outputs: Control Allocation")]),t._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("Control allocation is supported from PX4 v1.13 but disabled by default.")])]),t._v(" "),s("p",[t._v("If control allocation is enabled ("),s("RouterLink",{attrs:{to:"/en/advanced_config/parameter_reference.html#SYS_CTRL_ALLOC"}},[t._v("SYS_CTRL_ALLOC=1")]),t._v(") you can specify up to 6 outputs to be controlled from RC channels and up to 6 outputs to be controlled from MAVLink.")],1),t._v(" "),s("p",[t._v("This is done in the "),s("RouterLink",{attrs:{to:"/en/config/actuators.html#actuator-outputs"}},[t._v("Actuators")]),t._v(" configuration screen by assigning the appropriate functions to any free payload outputs (in the "),s("RouterLink",{attrs:{to:"/en/config/actuators.html#actuator-outputs"}},[t._v("actuator outputs")]),t._v(" section).")],1),t._v(" "),s("p",[t._v("The functions are:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("RC AUX 1")]),t._v(" to "),s("code",[t._v("RC AUX 6")]),t._v(": Outputs for "),s("a",{attrs:{href:"#rc-payload-control"}},[t._v("RC Control")])]),t._v(" "),s("li",[s("code",[t._v("Offboard Actuator Set 1")]),t._v(" to "),s("code",[t._v("Offboard Actuator Set 6")]),t._v(": Outputs to set using "),s("a",{attrs:{href:"#mavlink-payload-control"}},[t._v("MAVLink commands")])])]),t._v(" "),s("h3",{attrs:{id:"payload-outputs-mixer-allocation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#payload-outputs-mixer-allocation"}},[t._v("#")]),t._v(" Payload Outputs: Mixer Allocation")]),t._v(" "),s("p",[t._v("The "),s("RouterLink",{attrs:{to:"/en/concept/mixing.html"}},[t._v("mixer file")]),t._v(" for the current airframe is used to specify the payload outputs for RC and MAVLink passthrough when control allocation is disabled.")],1),t._v(" "),s("p",[t._v("Usually just three outputs are mapped to the "),s("code",[t._v("AUX1")]),t._v(", "),s("code",[t._v("AUX2")]),t._v(", "),s("code",[t._v("AUX3")]),t._v(" outputs of the flight controller.\nYou can confirm which outputs are used for RC AUX passthrough on your vehicle in the "),s("RouterLink",{attrs:{to:"/en/airframes/airframe_reference.html"}},[t._v("Airframe Reference")]),t._v(".")],1),t._v(" "),s("p",[t._v("For example, "),s("RouterLink",{attrs:{to:"/en/airframes/airframe_reference.html#quadrotor-x"}},[t._v("Quadrotor-X")]),t._v(" has the normal mapping:")],1),t._v(" "),s("ul",[s("li",[t._v('"'),s("strong",[t._v("AUX1:")]),t._v(' feed-through of RC AUX1 channel"')]),t._v(" "),s("li",[t._v('"'),s("strong",[t._v("AUX2:")]),t._v(' feed-through of RC AUX2 channel"')]),t._v(" "),s("li",[t._v('"'),s("strong",[t._v("AUX3:")]),t._v(' feed-through of RC AUX3 channel"')])]),t._v(" "),s("p",[t._v("If your vehicle doesn't specify RC AUX feed-through outputs, then you can add them using using a custom "),s("RouterLink",{attrs:{to:"/en/concept/mixing.html"}},[t._v("Mixer File")]),t._v(" that maps "),s("RouterLink",{attrs:{to:"/en/concept/mixing.html#control-group-3-manual-passthrough"}},[t._v("Control group 3")]),t._v(" outputs 5-7 to your desired port(s).\nAn example of such a mixer is the default passthrough mixer: "),s("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/release/1.13/ROMFS/px4fmu_common/mixers/pass.aux.mix",target:"_blank",rel:"noopener noreferrer"}},[t._v("pass.aux.mix"),s("OutboundLink")],1),t._v(".")],1),t._v(" "),s("h3",{attrs:{id:"rc-payload-control"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rc-payload-control"}},[t._v("#")]),t._v(" RC Payload Control")]),t._v(" "),s("p",[t._v("RC channels are mapped to specific outputs using the "),s("RouterLink",{attrs:{to:"/en/advanced_config/parameter_reference.html#RC_MAP_AUX1"}},[t._v("RC_MAP_AUXn")]),t._v(" parameters.")],1),t._v(" "),s("p",[t._v("If control allocation is used then "),s("code",[t._v("RC_MAP_AUXn")]),t._v(" maps a selected RC channel to the output with the assigned function "),s("code",[t._v("RC AUX n")]),t._v(", where "),s("code",[t._v("n")]),t._v(" is 1 to 6 (e.g. "),s("code",[t._v("RC_MAP_AUX2")]),t._v(" maps the selected RC channel to the actuator output that has been assigned function "),s("code",[t._v("RC AUX 2")]),t._v(").")]),t._v(" "),s("p",[t._v("If a mixer is used, "),s("code",[t._v("RC_MAP_AUXn")]),t._v(" maps to the passthrough output of the same number defined in the mixer file (e.g. "),s("code",[t._v("RC_MAP_AUX2")]),t._v(" maps a selected channel to the output defined by "),s("code",[t._v("AUX2")]),t._v(" in the mixer file).")]),t._v(" "),s("h3",{attrs:{id:"mavlink-payload-control"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mavlink-payload-control"}},[t._v("#")]),t._v(" MAVLink Payload Control")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_CMD_DO_SET_ACTUATOR",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_CMD_DO_SET_ACTUATOR"),s("OutboundLink")],1),t._v(" can be used in a command or mission to set the value of up to 6 actuators (at a time).")]),t._v(" "),s("p",[t._v("If control allocation is used then the command's param index (1 to 6) maps to the output with the assigned "),s("code",[t._v("Offboard Actuator Set n")]),t._v(" output function that has the same "),s("code",[t._v("n")]),t._v(" index (e.g. the value in "),s("code",[t._v("param 5")]),t._v(" is set on the output mapped by function "),s("code",[t._v("Offboard Actuator Set 5")]),t._v(").")]),t._v(" "),s("p",[t._v("If a mixer file is used, then the command's param index (1 to 6) maps to the corresponding passthrough "),s("code",[t._v("AUXn")]),t._v(" value in the mixer file.")]),t._v(" "),s("h3",{attrs:{id:"mavsdk-example-script"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mavsdk-example-script"}},[t._v("#")]),t._v(" MAVSDK (Example script)")]),t._v(" "),s("p",[t._v("The following "),s("a",{attrs:{href:"https://mavsdk.mavlink.io/main/en/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAVSDK"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/mavlink/MAVSDK/blob/main/examples/set_actuator/set_actuator.cpp",target:"_blank",rel:"noopener noreferrer"}},[t._v("example code"),s("OutboundLink")],1),t._v(" shows how to trigger payload release using the MAVSDK Action plugin's "),s("a",{attrs:{href:"https://mavsdk.mavlink.io/main/en/cpp/api_reference/classmavsdk_1_1_action.html#classmavsdk_1_1_action_1ad30beac27f05c62dcf6a3d0928b86e4c",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("set_actuator()")]),s("OutboundLink")],1),t._v(" method.")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("set_actuator()")]),t._v(" index values map to the MAVLink payload outputs defined for your airframe.")]),t._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("MAVSDK sends the "),s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_CMD_DO_SET_ACTUATOR",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_CMD_DO_SET_ACTUATOR"),s("OutboundLink")],1),t._v(" MAVLink command under the hood.")])]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<mavsdk/mavsdk.h>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<mavsdk/plugins/action/action.h>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<chrono>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<cstdint>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<iostream>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<future>")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" mavsdk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("usage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("string"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" bin_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("cerr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Usage :"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" bin_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" <connection_url> <actuator_index> <actuator_value>\\n"')]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Connection URL format should be :\\n"')]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" For TCP : tcp://[server_host][:server_port]\\n"')]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" For UDP : udp://[bind_host][:bind_port]\\n"')]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" For Serial : serial:///path/to/serial/dev[:baudrate]\\n"')]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"For example, to connect to the simulator use URL: udp://:14540\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" argc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" argv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("argc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("usage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("argv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("string connection_url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" argv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" index "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("argv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),t._v(" value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("argv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    Mavsdk mavsdk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ConnectionResult connection_result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mavsdk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add_any_connection")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection_result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" ConnectionResult"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Success"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("cerr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Connection failed: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" connection_result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\n'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("cout "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Waiting to discover system...\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auto")]),t._v(" prom "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("promise"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("shared_ptr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("System"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auto")]),t._v(" fut "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" prom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_future")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// We wait for new systems to be discovered, once we find one that has an")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// autopilot, we decide to use it.")]),t._v("\n    mavsdk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe_on_new_system")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("mavsdk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("prom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auto")]),t._v(" system "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mavsdk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("systems")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("back")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("system"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("has_autopilot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("cout "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Discovered autopilot\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Unsubscribe again as we only want to find one system.")]),t._v("\n            mavsdk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe_on_new_system")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("nullptr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            prom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set_value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("system"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// We usually receive heartbeats at 1Hz, therefore we should find a")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// system after around 3 seconds max, surely.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fut"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wait_for")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("chrono"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("seconds")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("future_status"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("timeout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("cerr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"No autopilot found, exiting.\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Get discovered system now.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auto")]),t._v(" system "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fut"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Instantiate plugins.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auto")]),t._v(" action "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Action"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("system"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("cout "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Setting actuator...\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Action"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Result set_actuator_result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" action"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set_actuator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("set_actuator_result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" Action"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Result"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Success"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("cerr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Setting actuator failed:"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" set_actuator_result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\n'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"surveillance-search-rescue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#surveillance-search-rescue"}},[t._v("#")]),t._v(" Surveillance, Search & Rescue")]),t._v(" "),s("p",[t._v("Surveillance and Search & Rescue drones have similar requirements to mapping drones.\nThe main differences are that, in addition to flying a planned survey area, they typically need good standalone control over the camera for image and video capture, and they may need to be able to work during both day and night")]),t._v(" "),s("p",[t._v("Use a camera that supports the "),s("a",{attrs:{href:"https://mavlink.io/en/services/camera.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAVLink Camera Protocol"),s("OutboundLink")],1),t._v(" as this supports image and video capture, zooming, storage management, multiple cameras on the same vehicle and switching between them, etc.\nThese cameras can be controlled either manually from QGroundControl or via MAVSDK (for both "),s("a",{attrs:{href:"https://mavsdk.mavlink.io/main/en/cpp/api_reference/classmavsdk_1_1_camera.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("standalone camera operations"),s("OutboundLink")],1),t._v(" and in "),s("a",{attrs:{href:"https://mavsdk.mavlink.io/main/en/cpp/api_reference/structmavsdk_1_1_mission_1_1_mission_item.html#structmavsdk_1_1_mission_1_1_mission_item_1a0299fbbe7c7b03bc43eb116f96b48df4",target:"_blank",rel:"noopener noreferrer"}},[t._v("missions"),s("OutboundLink")],1),t._v(").\nSee "),s("RouterLink",{attrs:{to:"/en/peripherals/camera.html"}},[t._v("Camera triggering")]),t._v(" for information on how to configure your camera to work with MAVLink.")],1),t._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("Cameras connected directly to the flight control "),s("em",[t._v("only")]),t._v(" support camera triggering, and are unlikely to be suitable for most surveillance/search work.")])]),t._v(" "),s("p",[t._v("A search and rescue drone may also need to carry cargo, for example, emergency supplies for a stranded hiker.\nSee "),s("a",{attrs:{href:"#cargo-drones-actuator-payloads"}},[t._v("Cargo Drones")]),t._v(" above for information about payload delivery.")])])}),[],!1,null,null,null);a.default=e.exports}}]);