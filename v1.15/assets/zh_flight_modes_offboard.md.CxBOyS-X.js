import{_ as e}from"./chunks/position_fixed.t2m3lWVy.js";import{_ as t,c as o,o as a,ab as l}from"./chunks/framework.CUflZczI.js";const u=JSON.parse('{"title":"Offboard 模式","description":"","frontmatter":{},"headers":[],"relativePath":"zh/flight_modes/offboard.md","filePath":"zh/flight_modes/offboard.md"}'),d={name:"zh/flight_modes/offboard.md"},r=l('<h1 id="offboard-模式" tabindex="-1">Offboard 模式 <a class="header-anchor" href="#offboard-模式" aria-label="Permalink to &quot;Offboard 模式&quot;">​</a></h1><img src="'+e+`" title="需要定位修复（例如GPS）" width="30px"><p>飞行器根据飞行控制栈外部（如机载计算机）提供的设定值控制位置、速度、加速度、姿态以及推力/力矩。 The setpoints may be provided using MAVLink (or a MAVLink API such as <a href="https://mavsdk.mavlink.io/" target="_blank" rel="noreferrer">MAVSDK</a>) or by <a href="./../ros2/">ROS 2</a>.</p><p>PX4要求外部控制器提供2Hz连续的“有效存在”信号，该信号可由任意支持的 MAVLink 设置点消息或ROS 2 <a href="./../msg_docs/OffboardControlMode.html">OffboardControlMode</a> 消息提供。 PX4只有在收到该种信号超过1秒后才有效，如果该种信号停止飞行控制栈将重新获得控制权（脱离Offboard模式）。</p><p>:::note</p><ul><li>此模式需要位置或位/姿信息 - 例如 GPS、光流、视觉惯性里程计、mocap 等。</li><li>RC control is disabled except to change modes (you can also fly without any manual controller at all by setting the parameter <a href="./../advanced_config/parameter_reference.html#COM_RC_IN_MODE">COM_RC_IN_MODE</a> to 4: Stick input disabled).</li><li>飞行器必须已经收到一条 MAVLink 设置点消息或 ROS 2 <a href="./../msg_docs/OffboardControlMode.html">OffboardControlMode</a> 消息，才允许在Offboard模式下解锁或者在飞行中切换至Offboard模式。</li><li>如果没有以 &gt; 2Hz 的速度收到MAVLink 设置点消息或 <code>OffboardControlMode</code> ，飞行器将退出Offboard模式。</li><li>并非所有 MAVLink 支持的坐标系和字段值都被设定值消息和飞行器支持。 请_仔细_阅读以下章节，确保仅使用其支持的值。</li></ul><p>:::</p><h2 id="描述" tabindex="-1">描述 <a class="header-anchor" href="#描述" aria-label="Permalink to &quot;描述&quot;">​</a></h2><p>Offboard模式通过设置位置、速度、加速、姿态、姿态角速率或力/扭矩设定值来控制飞行器的位置和姿态。</p><p>PX4 必须能够以2Hz的速率连续收到 MAVLink 设定值消息或 ROS 2 <a href="./../msg_docs/OffboardControlMode.html">OffboardControlMode</a> 消息以确保外部控制器正常运行。 该消息必须持续发送1秒以上PX4才能在Offboard模式下解锁或在飞行中切换至Offboard模式。 如果在外部控制器给出的指令速率低于2Hz，PX4将在超时(<a href="#COM_OF_LOSS_T">COM_OF_LOSS_T</a>) 后退出Offboard模式，并尝试降落或执行其他一些失效保护行为。 失效保护行为取决于遥控器是否可用，它根据参数 <a href="#COM_OBL_RC_ACT">COM_OBL_RC_ACT</a> 设定。</p><p>当使用 MAVLink 时，设定值消息既传达了外部控制器&quot;正常运行&quot;的信号也传达了设定值本身。 Offboard模式下要保持位置，飞行器必须接收到一个包含当前位置设定值的消息指令。</p><p>当使用 ROS 2 时，通过监测 <a href="./../msg_docs/OffboardControlMode.html">OffboardControlMode</a> 消息流来确保外部控制器运行正常，实际设定值由uORB消息发布的任一设定值提供，例如 <a href="./../msg_docs/TrajectorySetpoint.html">TrajectorySetpoint</a> 为了在这种情况下保持当前位置，飞行器必须收到连续的 <code>OffboardControlMode</code> 消息，但只需要收到 <code>TrajectorySetpoint</code> 消息一次。</p><p>请注意，Offboard模式只支持比较有限的 MAVLink 指令和消息。 其他操作如起飞、降落、返航，最好使用适当的模式来处理。 像上传、下载任务这样的操作可以在任何模式下执行。</p><h2 id="ros-2-消息" tabindex="-1">ROS 2 消息 <a class="header-anchor" href="#ros-2-消息" aria-label="Permalink to &quot;ROS 2 消息&quot;">​</a></h2><p>以下 ROS 2 消息及其特定字段和字段值在特定的框架下是允许的。 除了提供心跳功能外， <code>OffboardControlMode</code> 还有另外两个主要目的：</p><ol><li>控制Offboard设定值在 <a href="./../flight_stack/controller_diagrams.html">PX4 控制架构</a> 中的哪个等级上被注入执行，并禁止绕过控制器。</li><li>确定需要哪种有效估计(位置或速度)，以及应该使用哪种设定值消息。</li></ol><p><code>OffboardControlmode</code> 消息定义如下所示。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Off-board control mode</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uint64</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> timestamp</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 系统开始的时间 (微秒)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> position</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> velocity</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> acceleration</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> attitude</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> body_rate</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> actuator</span></span></code></pre></div><p>消息中的字段按优先级排序， <code>位置</code> 优于 <code>速度</code> 及以后的字段。 <code>速度</code> 优于 <code>加速度</code>，等等。 第一个非零字段(从上到下) 定义了Offboard模式所需的有效估计以及可用的设定值消息。 例如，如果 <code>加速度</code> 字段是第一个非零字段，PX4 就需要一个有效的 <code>速度估计</code>, 并且设定值必须使用 <code>TrajectorySetpoint</code> 消息指定。</p><table><thead><tr><th>期望控制对象</th><th>位置</th><th>速度</th><th>加速度</th><th>姿态</th><th>姿态角速率</th><th>执行器字段</th><th>直接给电机</th><th>所需状态估计</th><th>所需消息</th></tr></thead><tbody><tr><td>位置 (NED)</td><td>✓</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>位置</td><td><a href="./../msg_docs/TrajectorySetpoint.html">TrajectorySetpoint</a></td></tr><tr><td>速度 (NED)</td><td>✗</td><td>✓</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>速度</td><td><a href="./../msg_docs/TrajectorySetpoint.html">TrajectorySetpoint</a></td></tr><tr><td>加速度（NED）</td><td>✗</td><td>✗</td><td>✓</td><td>-</td><td>-</td><td>-</td><td>-</td><td>速度</td><td><a href="./../msg_docs/TrajectorySetpoint.html">TrajectorySetpoint</a></td></tr><tr><td>姿态(FRD)</td><td>✗</td><td>✗</td><td>✗</td><td>✓</td><td>-</td><td>-</td><td>-</td><td>无</td><td><a href="./../msg_docs/VehicleAttitudeSetpoint.html">VehicleAttitudeSetpoint</a></td></tr><tr><td>体轴角速率 (FRD)</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✓</td><td>-</td><td>-</td><td>无</td><td><a href="./../msg_docs/VehicleRatesSetpoint.html">VehicleRatesSetpoint</a></td></tr><tr><td>推力和力矩(FRD)</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✓</td><td>-</td><td>无</td><td><a href="./../msg_docs/VehicleThrustSetpoint.html">VehicleThrustSetpoint</a> 和 <a href="./../msg_docs/VehicleTorqueSetpoint.html">VehicleTorqueSetpoint</a></td></tr><tr><td>直接给电机和舵机</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✓</td><td>无</td><td><a href="./../msg_docs/ActuatorMotors.html">ActuatorMotors</a> and <a href="./../msg_docs/ActuatorServos.html">ActuatorServos</a></td></tr></tbody></table><p>✓ 代表该位设置为有效， ✗ 代表该值未设置， <code>-</code> 表示该值无关紧要。</p><div class="info custom-block"><p class="custom-block-title">Before using offboard mode with ROS 2, please spend a few minutes understanding the different <a href="./../ros2/user_guide.html#ros-2-px4-frame-conventions">frame conventions</a> that PX4 and ROS 2 use.</p></div><h3 id="旋翼机" tabindex="-1">旋翼机 <a class="header-anchor" href="#旋翼机" aria-label="Permalink to &quot;旋翼机&quot;">​</a></h3><ul><li><p><a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/msg/TrajectorySetpoint.msg" target="_blank" rel="noreferrer">px4_msgs::msg::TrajectorySetpoint</a></p><ul><li><p>支持以下输入组合：</p><ul><li>位置设定值(<code>position</code> 不为 <code>NaN</code>)。 非<code>NaN</code> 的速度和加速度值被用作内环控制器的前馈项。</li><li>速度设定值(<code>velocity</code> 不为 <code>NaN</code> 同时 <code>position</code> 为 <code>NaN</code>). 非<code>NaN</code> 的加速度值被用于内环控制器的前馈项。</li><li>加速度设定值(<code>acceleration</code> 不为 <code>NaN</code> 同时 <code>position</code> 和 <code>velocity</code> 为 <code>NaN</code>)。</li></ul></li><li><p>所有值都是基于NED(北, 东, 地)坐标系，位置、速度和加速的单位分别为[m], [m/s] 和[m/s^2] 。</p></li></ul></li><li><p><a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/msg/VehicleAttitudeSetpoint.msg" target="_blank" rel="noreferrer">px4_msgs::msg::VehicleAttitudeSetpoint</a></p><ul><li><p>支持以下输入组合：</p><ul><li>姿态四元数 <code>q_d</code> + 推力设定值 <code>thrust_body</code>。 非-<code>NaN</code> 值的 <code>yaw_sp_move_rate</code> 被用作大地坐标系下的偏航角前馈使用，单位为[rad/s]。</li></ul></li><li><p>姿态四元数表示无人机机体坐标系FRD(前、右、下) 与NED坐标系之间的旋转。 这个推力是在无人机体轴FRD坐标系下，并归一化为 [-1, 1] 。</p></li></ul></li><li><p><a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/msg/VehicleRatesSetpoint.msg" target="_blank" rel="noreferrer">px4_msgs::msg::VehicleRatesSetpoint</a></p><ul><li><p>支持以下输入组合：</p><ul><li><code>roll</code>, <code>pitch</code>, <code>yaw</code> and <code>thrust_body</code>.</li></ul></li><li><p>所有值都表示在无人机体轴FRD坐标系下。 角速率(roll, pitch, yaw) 单位为[rad/s] ，thrust_body归一化为 [-1, 1]。</p></li></ul></li></ul><h3 id="generic-vehicle" tabindex="-1">Generic Vehicle <a class="header-anchor" href="#generic-vehicle" aria-label="Permalink to &quot;Generic Vehicle&quot;">​</a></h3><p>下面的offboard控制模式会绕过所有PX4内部的控制环，应当非常谨慎地使用。</p><ul><li><p><a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/msg/VehicleThrustSetpoint.msg" target="_blank" rel="noreferrer">px4_msgs::msg::VehicleThrustSetpoint</a> + <a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/msg/VehicleTorqueSetpoint.msg" target="_blank" rel="noreferrer">px4_msgs::msg::VehicleTorqueSetpoint</a></p><ul><li>支持以下输入组合： <ul><li><code>xyz</code> 用于推力和 <code>xyz</code> 用于力矩。</li></ul></li><li>所有值都在无人机体轴 FRD 坐标系中表示，并且归一化为[-1, 1]。</li></ul></li><li><p><a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/msg/ActuatorMotors.msg" target="_blank" rel="noreferrer">px4_msgs::msg::ActuatorMotors</a> + <a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/msg/ActuatorServos.msg" target="_blank" rel="noreferrer">px4_msgs::msg::ActuatorServos</a></p><ul><li>直接控制电机输出和/或伺服系统（舵机）输出。</li><li>所有值归一化为[-1, 1]。 对于不支持负数值的输出，负数项将映射到<code>NaN</code>。</li><li><code>NaN</code>映射到上锁</li></ul></li></ul><h2 id="mavlink-消息" tabindex="-1">MAVLink 消息 <a class="header-anchor" href="#mavlink-消息" aria-label="Permalink to &quot;MAVLink 消息&quot;">​</a></h2><p>下面的 MAVLink 消息及其特定字段和字段值在特定的帧下是允许的。</p><h3 id="直升机-垂直起降" tabindex="-1">直升机/垂直起降 <a class="header-anchor" href="#直升机-垂直起降" aria-label="Permalink to &quot;直升机/垂直起降&quot;">​</a></h3><ul><li><p><a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED" target="_blank" rel="noreferrer">SET_POSITION_TARGET_LOCAL_NED</a></p><ul><li><p>支持以下输入组合： </p><ul><li>位置设置值 （仅 <code>x</code>，<code>y</code>，<code>z</code>）</li><li>速度设定值（仅<code>vx</code>，<code>yy</code>，<code>vz</code>）</li><li>加速度设定值（仅 <code>afx</code>，<code>afy</code>，<code>afz</code>）</li><li>位置设定值<strong>和</strong>速度设定值（速度设定值和加速度设定值被作为前馈使用；被叠加到位置控制器的输出上，结果作为速度控制器的输入使用）。</li><li>位置设定值<strong>和</strong>速度设定值<strong>以及</strong>加速度（速度和加速度设定值用作前馈；速度设定值叠加至位置控制器输出，并将结果作为速度控制器的输入；加速度设定值被叠加至速度控制器的输出中，输出结果用于计算推力矢量）。</li></ul></li><li><p>PX4 supports the following <code>coordinate_frame</code> values (only): <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_NED" target="_blank" rel="noreferrer">MAV_FRAME_LOCAL_NED</a> and <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_BODY_NED" target="_blank" rel="noreferrer">MAV_FRAME_BODY_NED</a>.</p></li></ul></li><li><p><a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_GLOBAL_INT" target="_blank" rel="noreferrer">SET_POSITION_TARGET_GLOBAL_INT</a></p><ul><li><p>支持以下输入组合： </p><ul><li><p>位置设定值（仅<code>lat_int</code>，<code>lon_int</code>，<code>alt</code>）</p></li><li><p>速度设定值（仅<code>vx</code>，<code>vy</code>，<code>vz</code>）</p></li><li><p><em>Thrust</em> setpoint (only <code>afx</code>, <code>afy</code>, <code>afz</code>)</p><p>:::note 加速度设定值被用来生成归一化的推力设定值（即不支持加速度设定值）。 :::</p></li><li><p>位置设定值<strong>和</strong>速度设定值（速度设定值被作为前馈使用；被叠加到位置控制器的输出上，结果作为速度控制器的输入使用）。</p></li></ul></li><li><p>PX4 supports the following <code>coordinate_frame</code> values (only): <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_GLOBAL" target="_blank" rel="noreferrer">MAV_FRAME_GLOBAL</a>.</p></li></ul></li><li><p><a href="https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET" target="_blank" rel="noreferrer">SET_ATTITUDE_TARGET</a></p><ul><li>支持以下输入组合： <ul><li>带有推力设定值（<code>SET_ATTITUDE_TARGET.thrust</code>）的姿态和方向（<code>SET_ATTITUDE_TARGET.q</code>）。</li><li>Body rate (<code>SET_ATTITUDE_TARGET</code> <code>.body_roll_rate</code> ,<code>.body_pitch_rate</code>, <code>.body_yaw_rate</code>) with thrust setpoint (<code>SET_ATTITUDE_TARGET.thrust</code>).</li></ul></li></ul></li></ul><h3 id="fixed-wing" tabindex="-1">Fixed-wing <a class="header-anchor" href="#fixed-wing" aria-label="Permalink to &quot;Fixed-wing&quot;">​</a></h3><ul><li><p><a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED" target="_blank" rel="noreferrer">SET_POSITION_TARGET_LOCAL_NED</a></p><ul><li><p>支持以下输入组合（通过 <code>type_mask</code>）： </p><ul><li><p>位置设定值（仅<code>x</code>，<code>y</code>，<code>z</code>；速度和加速度设定值被忽略）。</p><ul><li><p>Specify the <em>type</em> of the setpoint in <code>type_mask</code> (if these bits are not set the vehicle will fly in a flower-like pattern): ::: info Some of the <em>setpoint type</em> values below are not part of the MAVLink standard for the <code>type_mask</code> field. :::</p><p>值为：</p><ul><li>292：滑动设定值。 这会将 TECS 配置为空速优先于高度，以便在没有推力时使无人机滑行（即控制俯仰以调节空速）。 这相当于设置 <code>type_mask</code> 为 <code>POSITION_TARGET_TYPEMASK_Z_IGNORE</code>，<code>POSITION_TARGET_TYPEMASK_VZ_IGNORE</code>，<code>POSITION_TARGET_TYPEMASK_AZ_IGNORE</code>。</li><li>4096：起飞设定值。</li><li>8192：降落设定值。</li><li>12288：悬停设定值（以设定值为中心绕圈飞行）。</li><li>16384：空闲设定值（油门为0， 横滚 / 俯仰为0）。</li></ul></li></ul></li></ul></li><li><p>PX4 supports the coordinate frames (<code>coordinate_frame</code> field): <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_NED" target="_blank" rel="noreferrer">MAV_FRAME_LOCAL_NED</a> and <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_BODY_NED" target="_blank" rel="noreferrer">MAV_FRAME_BODY_NED</a>.</p></li></ul></li><li><p><a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_GLOBAL_INT" target="_blank" rel="noreferrer">SET_POSITION_TARGET_GLOBAL_INT</a></p><ul><li><p>支持以下输入组合（通过 <code>type_mask</code>）： </p><ul><li><p>位置设定值（仅<code>lat_int</code>，<code>lon_int</code>，<code>alt</code>）</p><ul><li><p>Specify the <em>type</em> of the setpoint in <code>type_mask</code> (if these bits are not set the vehicle will fly in a flower-like pattern):</p><div class="info custom-block"><p class="custom-block-title">The <em>setpoint type</em> values below are not part of the MAVLink standard for the <code>type_mask</code> field.</p></div></li></ul></li></ul></li></ul></li></ul><p>:::</p><pre><code>    The values are:

    - 4096：起飞设定值。
    - 8192：降落设定值。
    - 12288：悬停设定值（以设定值为中心绕圈飞行）。
    - 16384：空闲设定值（油门为0， 横滚 / 俯仰为0）。
</code></pre><ul><li><p>PX4 supports the following <code>coordinate_frame</code> values (only): <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_GLOBAL" target="_blank" rel="noreferrer">MAV_FRAME_GLOBAL</a>.</p></li><li><p><a href="https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET" target="_blank" rel="noreferrer">SET_ATTITUDE_TARGET</a></p><ul><li>支持以下输入组合： <ul><li>带有推力设定值（<code>SET_ATTITUDE_TARGET.thrust</code>）的姿态和方向（<code>SET_ATTITUDE_TARGET.q</code>）。</li><li>Body rate (<code>SET_ATTITUDE_TARGET</code> <code>.body_roll_rate</code> ,<code>.body_pitch_rate</code>, <code>.body_yaw_rate</code>) with thrust setpoint (<code>SET_ATTITUDE_TARGET.thrust</code>).</li></ul></li></ul></li></ul><h3 id="无人车" tabindex="-1">无人车 <a class="header-anchor" href="#无人车" aria-label="Permalink to &quot;无人车&quot;">​</a></h3><ul><li><p><a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED" target="_blank" rel="noreferrer">SET_POSITION_TARGET_LOCAL_NED</a></p><ul><li><p>支持以下输入组合(在 <code>type_mask</code> 中)： </p><ul><li><p>位置设置值 （仅 <code>x</code>，<code>y</code>，<code>z</code>）</p><ul><li><p>Specify the <em>type</em> of the setpoint in <code>type_mask</code>:</p><div class="info custom-block"><p class="custom-block-title">The <em>setpoint type</em> values below are not part of the MAVLink standard for the <code>type_mask</code> field. ::</p><p>值为：</p><ul><li>12288：悬停设定值（无人机足够接近设定值时会停止）。</li></ul></div></li></ul></li><li><p>Velocity setpoint (only <code>vx</code>, <code>vy</code>, <code>vz</code>)</p></li></ul></li><li><p>PX4 supports the coordinate frames (<code>coordinate_frame</code> field): <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_NED" target="_blank" rel="noreferrer">MAV_FRAME_LOCAL_NED</a> and <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_BODY_NED" target="_blank" rel="noreferrer">MAV_FRAME_BODY_NED</a>.</p></li></ul></li><li><p><a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_GLOBAL_INT" target="_blank" rel="noreferrer">SET_POSITION_TARGET_GLOBAL_INT</a></p><ul><li><p>支持以下输入组合(在 <code>type_mask</code> 中)： </p><ul><li>位置设定值（仅<code>lat_int</code>，<code>lon_int</code>，<code>alt</code>）</li></ul></li><li><p>Specify the <em>type</em> of the setpoint in <code>type_mask</code> (not part of the MAVLink standard). The values are:</p><ul><li>下面的比特位没有置位，是正常表现。</li><li>12288：悬停设定值（无人机足够接近设定值时会停止）。</li></ul></li><li><p>PX4 supports the coordinate frames (<code>coordinate_frame</code> field): <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_GLOBAL" target="_blank" rel="noreferrer">MAV_FRAME_GLOBAL</a>.</p></li></ul></li><li><p><a href="https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET" target="_blank" rel="noreferrer">SET_ATTITUDE_TARGET</a></p><ul><li>支持以下输入组合： <ul><li>带有推力设定值（<code>SET_ATTITUDE_TARGET.thrust</code>）的姿态和方向（<code>SET_ATTITUDE_TARGET.q</code>）。 :::note 实际仅使用/提取了偏航设置。 :::</li></ul></li></ul></li></ul><h2 id="offboard参数" tabindex="-1">Offboard参数 <a class="header-anchor" href="#offboard参数" aria-label="Permalink to &quot;Offboard参数&quot;">​</a></h2><p>_Offboard模式_受以下参数影响：</p><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td><a id="COM_OF_LOSS_T"></a><a href="./../advanced_config/parameter_reference.html#COM_OF_LOSS_T">COM_OF_LOSS_T</a></td><td>Offboard 连接超时时间（以秒为单位），超过该时间未检测到offboard连接后将触发 offboard 连接丢失的失效保护措施 ( <code>COM_OBL_RC_ACT</code>)</td></tr><tr><td><a id="COM_OBL_RC_ACT"></a><a href="./../advanced_config/parameter_reference.html#COM_OBL_RC_ACT">COM_OBL_RC_ACT</a></td><td>当offboard模式控制丢失时切换到的飞行模式(值为 - <code>0</code>: <em>位置</em>, <code>1</code>: <em>高度</em>, <code>2</code>: <em>手动</em>, <code>3</code>: *返航, <code>4</code>: *降落*).</td></tr><tr><td><a id="COM_RC_OVERRIDE"></a><a href="./../advanced_config/parameter_reference.html#COM_RC_OVERRIDE">COM_RC_OVERRIDE</a></td><td>遥控器打杆时多旋翼（或者多旋翼模式下的 VOTL）会切换到 <a href="./../flight_modes_mc/position.html">位置模式</a>。 默认情况下未启用此功能。</td></tr><tr><td><a id="COM_RC_STICK_OV"></a><a href="./../advanced_config/parameter_reference.html#COM_RC_STICK_OV">COM_RC_STICK_OV</a></td><td>遥控器打杆多少会切换到 <a href="./../flight_modes_mc/position.html">位置模式</a> （如果 <a href="#COM_RC_OVERRIDE">COM_RC_OVERRIDE</a> 已启用）。</td></tr><tr><td><a id="COM_RCL_EXCEPT"></a><a href="./../advanced_config/parameter_reference.html#COM_RCL_EXCEPT">COM_RCL_EXCEPT</a></td><td>该参数指定一种模式，在该模式下将忽略RC丢失及不会触发RC丢失的失效保护动作。 将位 <code>2</code> 置1将在Offboard模式下忽略RC丢失。</td></tr></tbody></table><h2 id="开发者资源" tabindex="-1">开发者资源 <a class="header-anchor" href="#开发者资源" aria-label="Permalink to &quot;开发者资源&quot;">​</a></h2><p>通常，开发人员不直接在 MAVLink 层开发，而是使用机器人的API接口，例如 <a href="https://mavsdk.mavlink.io/" target="_blank" rel="noreferrer"> MAVSDK </a> 或 <a href="http://www.ros.org/" target="_blank" rel="noreferrer"> ROS </a>（它们为开发人员提供了友好的 API，并负责管理和维护连接，发送消息和响应监视 - <em>Offboard 模式</em> 和 MAVLink的细节）。</p><p>以下资源可能对开发者有用：</p><ul><li><a href="./../ros/offboard_control.html">Linux 的Offboard控制模式</a></li><li><a href="./../ros/mavros_offboard_cpp.html">ROS/MAVROS Offboard例程(C++)</a></li><li><a href="./../ros/mavros_offboard_python.html">ROS/MAVROS Offboard例程(Python)</a></li></ul>`,45),i=[r];function s(c,n,h,p,_,f){return a(),o("div",null,i)}const b=t(d,[["render",s]]);export{u as __pageData,b as default};
