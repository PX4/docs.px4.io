import{_ as a,a as e}from"./chunks/px4flow_offset.HQ2vTBh8.js";import{_ as t,c as r,o,ab as d}from"./chunks/framework.CUflZczI.js";const P=JSON.parse('{"title":"Оптичний потік","description":"","frontmatter":{},"headers":[],"relativePath":"uk/sensor/optical_flow.md","filePath":"uk/sensor/optical_flow.md"}'),l={name:"uk/sensor/optical_flow.md"},h=d('<h1 id="оптичнии-потік" tabindex="-1">Оптичний потік <a class="header-anchor" href="#оптичнии-потік" aria-label="Permalink to &quot;Оптичний потік&quot;">​</a></h1><p><em>Датчики оптичного потоку</em> використовують камеру та датчик відстані направлені вниз для оцінки швидкості.</p><p>@<a href="https://youtu.be/aPQKgUof3Pc" target="_blank" rel="noreferrer">youtube</a> <em>Відео: PX4 утримує позицію за допомогою датчика потоку ARK для оцінки швидкості (у <a href="./../flight_modes_mc/position.html">Режим позиції</a>).</em></p><h2 id="установка" tabindex="-1">Установка <a class="header-anchor" href="#установка" aria-label="Permalink to &quot;Установка&quot;">​</a></h2><p>Налаштування оптичного потоку вимагає камери, спрямованої вниз, та <a href="./../sensor/rangefinders.html">датчика відстані</a> (найкраще LiDAR). Ці можуть бути підключені через MAVLink, I2C або будь-яку іншу шину, яка підтримує периферійні пристрої.</p><p>:::note Якщо підключено до PX4 через MAVLink, пристрій оптичного потоку повинен публікувати в тему <a href="https://mavlink.io/en/messages/common.html#OPTICAL_FLOW_RAD" target="_blank" rel="noreferrer">OPTICAL_FLOW_RAD</a>, а датчик відстані повинен публікувати в тему <a href="https://mavlink.io/en/messages/common.html#DISTANCE_SENSOR" target="_blank" rel="noreferrer">DISTANCE_SENSOR</a>. :::</p><p>Вихід потоку при руху в різних напрямках повинен бути наступним:</p><table><thead><tr><th>Рух транспортного засобу</th><th>Інтегрований потік</th></tr></thead><tbody><tr><td>Вперед</td><td>+ Y</td></tr><tr><td>Назад</td><td>- Y</td></tr><tr><td>Справа</td><td>- X</td></tr><tr><td>Зліва</td><td>+ X</td></tr></tbody></table><p>Для чистих обертань <code>integrated_xgyro</code> та <code>integrated_x</code> (відповідно <code>integrated_ygyro</code> та <code>integrated_y</code>) повинні бути однаковими.</p><p>Популярним варіантом є <a href="./../sensor/px4flow.html">PX4Flow</a> та <a href="./../sensor/lidar_lite.html">Lidar-Lite</a>, як показано нижче.</p><p><img src="'+a+'" alt="Optical flow lidar attached"></p><p>Дані сенсора від пристрою оптичного потоку об&#39;єднуються з іншими джерелами даних швидкості. Підхід, який використовується для об&#39;єднання даних сенсора та будь-яких зміщень від центру транспортного засобу, повинен бути налаштований в <a href="#estimators">оцінювачі</a>.</p><h2 id="датчики-потоку-камери" tabindex="-1">Датчики потоку/Камери <a class="header-anchor" href="#датчики-потоку-камери" aria-label="Permalink to &quot;Датчики потоку/Камери&quot;">​</a></h2><h3 id="ark-flow" tabindex="-1">ARK Flow <a class="header-anchor" href="#ark-flow" aria-label="Permalink to &quot;ARK Flow&quot;">​</a></h3><p><a href="./../dronecan/ark_flow.html">ARK Flow</a> є оптичним датчиком потоку для <a href="./../dronecan/">DroneCAN</a>, датчиком відстані та ІНС. В ньому є оптичний датчик потоку PAW3902, оптичний датчик відстані Broadcom AFBR-S50LV85D на відстані 30 метрів та ІМП-датчик BMI088.</p><h3 id="датчики-на-основі-pmw3901" tabindex="-1">Датчики на основі PMW3901 <a class="header-anchor" href="#датчики-на-основі-pmw3901" aria-label="Permalink to &quot;Датчики на основі PMW3901&quot;">​</a></h3><p><a href="./../sensor/pmw3901.html">PMW3901</a> є оптичним сенсором відстеження потоку, схожим на те, що ви знайдете в комп&#39;ютерній мишці, але адаптованим для роботи від 80 мм і безмежжя. Він використовується в ряді продуктів, включаючи деякі від: Bitcraze, Tindie, Hex, Thone та Alientek.</p><h3 id="інші-камери-сенсори" tabindex="-1">Інші Камери/Сенсори <a class="header-anchor" href="#інші-камери-сенсори" aria-label="Permalink to &quot;Інші Камери/Сенсори&quot;">​</a></h3><p>Також можна використовувати дошку/квадрокоптер, яка має вбудовану камеру. Для цього можна використовувати репозиторій <a href="https://github.com/PX4/OpticalFlow" target="_blank" rel="noreferrer">Optical Flow</a> (див. також <a href="https://github.com/PX4/snap_cam" target="_blank" rel="noreferrer">snap_cam</a>).</p><h2 id="далекомір" tabindex="-1">Далекомір <a class="header-anchor" href="#далекомір" aria-label="Permalink to &quot;Далекомір&quot;">​</a></h2><p>Ви можете використовувати будь-який підтримуваний <a href="./../sensor/rangefinders.html">датчик відстані</a>. Проте ми рекомендуємо використовувати LIDAR замість зондів сонар, через їхню надійність та точність.</p><h2 id="оцінювач" tabindex="-1">Оцінювач <a class="header-anchor" href="#оцінювач" aria-label="Permalink to &quot;Оцінювач&quot;">​</a></h2><p>Оцінювачі об&#39;єднують дані з датчика оптичного потоку та інших джерел. Налаштування для виконання злиття, а також відносні зсуви до центру транспортного засобу повинні бути вказані для використаного оцінювача.</p><p>Зміщення обчислюються відносно орієнтації транспортного засобу та центру, як показано нижче:</p><p><img src="'+e+'" alt="Optical Flow offsets"></p><p>Оптична навігація на основі потоку даних активована обома доступними оцінювачами: EKF2 та LPE (застарілий).</p><p><a id="ekf2"></a></p><h3 id="розширении-фільтр-калмана-ekf2" tabindex="-1">Розширений фільтр Калмана (EKF2) <a class="header-anchor" href="#розширении-фільтр-калмана-ekf2" aria-label="Permalink to &quot;Розширений фільтр Калмана (EKF2)&quot;">​</a></h3><p>Для об&#39;єднання оптичного потоку за допомогою EKF2 встановіть <a href="./../advanced_config/parameter_reference.html#EKF2_OF_CTRL">EKF2_OF_CTRL</a>.</p><p>Якщо ваш оптичний датчик потоку зміщений від центру транспортного засобу, ви можете встановити це за допомогою наступних параметрів.</p><table><thead><tr><th>Параметр</th><th>Опис</th></tr></thead><tbody><tr><td><a id="EKF2_OF_POS_X"></a><a href="./../advanced_config/parameter_reference.html#EKF2_OF_POS_X">EKF2_OF_POS_X</a></td><td>Позиція X оптичного потоку фокусної точки в системі тіла (за замовчуванням 0.0 м).</td></tr><tr><td><a id="EKF2_OF_POS_Y"></a><a href="./../advanced_config/parameter_reference.html#EKF2_OF_POS_Y">EKF2_OF_POS_Y</a></td><td>Позиція Y оптичного потоку фокусної точки в системі тіла (за замовчуванням 0.0 м).</td></tr><tr><td><a id="EKF2_OF_POS_Z"></a><a href="./../advanced_config/parameter_reference.html#EKF2_OF_POS_Z">EKF2_OF_POS_Z</a></td><td>Позиція Z оптичного потоку фокусної точки в системі тіла (за замовчуванням 0.0 м).</td></tr></tbody></table>',31),n=[h];function i(_,s,c,p,f,m){return o(),r("div",null,n)}const u=t(l,[["render",i]]);export{P as __pageData,u as default};
