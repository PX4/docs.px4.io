import{_ as e,a as i,b as a}from"./chunks/dbesp32_webinterface.Cj0rG1ae.js";import{_ as t,c as s,o,ab as n}from"./chunks/framework.CUflZczI.js";const b=JSON.parse('{"title":"ESP32 WiFi Module","description":"","frontmatter":{},"headers":[],"relativePath":"ko/telemetry/esp32_wifi_module.md","filePath":"ko/telemetry/esp32_wifi_module.md"}'),r={name:"ko/telemetry/esp32_wifi_module.md"},l=n('<h1 id="esp32-wifi-module" tabindex="-1">ESP32 WiFi Module <a class="header-anchor" href="#esp32-wifi-module" aria-label="Permalink to &quot;ESP32 WiFi Module&quot;">​</a></h1><p>ESP32 are readily available WiFi modules with dedicated UART, SPI and I2C interfaces, and full TCP/IP stack and microcontroller capability. They come without firmware, but <em>DroneBridge for ESP32</em> can be installed to enable them as a transparent and bi-directional serial to WiFi bridge. They can then be used as a WiFi telemetry module with any Pixhawk series controller.</p><p>No configuration is generally required if connected to <code>TELEM2</code>. The typical range is approximately 50m-200m (depending on the antenna used).</p><p><img src="'+e+'" alt="DroneBridge for ESP32 connection concept"></p><h2 id="recommended-hardware" tabindex="-1">Recommended Hardware <a class="header-anchor" href="#recommended-hardware" aria-label="Permalink to &quot;Recommended Hardware&quot;">​</a></h2><p><em>DroneBridge for ESP32</em> can run on almost every ESP32 development board. Boards and modules with an external antenna connector are recommended, since these will offer more range.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Many ESP32 modules support 3.3V and 5V power supply input, while some flight controllers (e.g. Pixhawk 4) output at 5V. You will need to check compatibility and step down the voltage if needed.</p></div><p>Modules and DevKits that accept 3.3V or 5V power supply:</p><ul><li><a href="https://www.az-delivery.de/en/products/esp-32-dev-kit-c-v4" target="_blank" rel="noreferrer">AZ-Delivery — ESP-32 DevKit C</a></li><li><a href="https://www.adafruit.com/product/4335" target="_blank" rel="noreferrer">TinyPICO — ESP32 Development Board - V2</a></li><li><a href="https://www.adafruit.com/product/3405" target="_blank" rel="noreferrer">Adafruit HUZZAH32 — ESP32 Feather Board</a></li><li><a href="https://www.adafruit.com/product/4201" target="_blank" rel="noreferrer">Adafruit AirLift — ESP32 WiFi Co-Processor Breakout Board</a> (requires FTDI adapter for flashing firmware)</li><li><a href="https://www.adafruit.com/product/4172" target="_blank" rel="noreferrer">Adafruit — HUZZAH32</a> (requires FTDI adapter for flashing firmware)</li></ul><h2 id="downloading-and-flashing-the-firmware" tabindex="-1">Downloading and Flashing the Firmware <a class="header-anchor" href="#downloading-and-flashing-the-firmware" aria-label="Permalink to &quot;Downloading and Flashing the Firmware&quot;">​</a></h2><p><a href="https://github.com/DroneBridge/ESP32/releases" target="_blank" rel="noreferrer">Download the firmware from the GitHub repository</a> and then <a href="https://github.com/DroneBridge/ESP32#installationflashing-using-precompiled-binaries" target="_blank" rel="noreferrer">follow these flashing instructions</a>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The instructions on Github are recommended because they are always up to date. Note that the parameters may differ between releases of <em>DroneBridge for ESP32</em>.</p></div><p>The main steps are:</p><ol><li><a href="https://github.com/DroneBridge/ESP32/releases" target="_blank" rel="noreferrer">Download the pre-compiled firmware binaries</a></li><li>Connect your DEVKit to your computer via USB/Serial bridge (most DevKits already offer a USB port for flashing and debugging)</li><li>Erase the flash and flash the DroneBridge for ESP32 firmware onto your ESP32 <ul><li>Using <a href="https://www.espressif.com/en/support/download/other-tools" target="_blank" rel="noreferrer">Espressif Flash Download Tool</a> (Windows only)</li><li>Using esp-idf/esptool (all platforms)</li></ul></li><li>Power Cycle the ESP32</li><li><a href="#configuring-dronebridge-for-esp32">Connect to the &quot;DroneBridge for ESP32&quot; WiFi network and configure the firmware for your application</a></li></ol><h2 id="wiring" tabindex="-1">Wiring <a class="header-anchor" href="#wiring" aria-label="Permalink to &quot;Wiring&quot;">​</a></h2><p>Wiring is very simple, and similar for all devices when connecting to the Pixhawk TELEM1/2 ports. You can use 2.54mm pitch header connectors or solder the PX4 telemetry cables directly to the board.</p><p><img src="'+i+'" alt="Example for wiring an ESP32 to the TELEM port"></p><ol><li>Connect UART of ESP32 to a UART of your flight controller (e.g. TELEM 1 or TELEM 2 port). Make sure the voltage levels match: most ESP32 DevKits can only take 3.3V! <ul><li>TX to RX</li><li>RX to TX</li><li>GND to GND</li><li>Provide a stable 3.3V or 5V power supply to the ESP32 (depending on the available inputs of your DevKit)</li></ul></li><li>Set the flight controller port to the desired protocol.</li><li>Boards with an IPEX port for an external antenna often also offer an onboard antenna that is activated by default. You may need to resolder a resistor to activate the external antenna port.</li></ol><div class="info custom-block"><p class="custom-block-title">INFO</p><ul><li>Follow the ESP32 board manufacturers recommendations on power supply. Some boards might have issues if they are simultaneously connected to a 5V power source and have a USB cable connected to the USB/Serial bridge (USB socket of the ESP32 dev board).</li><li>Some ESP32 DevKits manufacturers use the wrong labels for the pins on their products. Make sure that the PINs on your board are labeled correctly if you encounter issues.</li></ul></div><h2 id="configuring-qgroundcontrol" tabindex="-1">Configuring QGroundControl <a class="header-anchor" href="#configuring-qgroundcontrol" aria-label="Permalink to &quot;Configuring QGroundControl&quot;">​</a></h2><p>QGroundControl should auto-detect the connection and no further actions should be necessary (<em>DroneBridge for ESP32</em> automatically forwards data from all connected WiFi devices via UDP to port 14550).</p><p>The following connection options are available:</p><ul><li>UDP unicast on port <code>14550</code> to all connected devices.</li><li>TCP on port <code>5760</code></li></ul><h2 id="configuring-dronebridge-for-esp32" tabindex="-1">Configuring DroneBridge for ESP32 <a class="header-anchor" href="#configuring-dronebridge-for-esp32" aria-label="Permalink to &quot;Configuring DroneBridge for ESP32&quot;">​</a></h2><p>The <em>DroneBridge for ESP32</em> default configuration should work for connecting to PX4 &quot;out of the box&quot;. The only configuration that may be required is ensuring that the baud rates of the ESP32 and flight controller match.</p><p>You will want to change these settings if you want to use different pins on the ESP32, a different WiFi configuration, or to tweak the packet size. Lower packet size means more overhead and load on the system but also less latency and faster recovery from a lost packet.</p><h3 id="default-configuration" tabindex="-1">Default Configuration <a class="header-anchor" href="#default-configuration" aria-label="Permalink to &quot;Default Configuration&quot;">​</a></h3><ul><li>SSID: <code>DroneBridge for ESP32</code></li><li>Password: <code>dronebridge</code></li><li>Transparent/MAVLink</li><li>UART baud rate <code>115200</code></li><li>UART TX pin <code>17</code></li><li>UART RX pin <code>16</code></li><li>Gateway IP: <code>192.168.2.1</code></li></ul><h3 id="custom-settings-webinterface" tabindex="-1">Custom Settings &amp; Webinterface <a class="header-anchor" href="#custom-settings-webinterface" aria-label="Permalink to &quot;Custom Settings &amp; Webinterface&quot;">​</a></h3><p>You can change the default configuration via the Webinterface. Connect to the ESP32 via WiFi and enter <code>dronebridge.local</code>, <code>http://dronebridge.local</code> or <code>192.168.2.1</code> in the address bar of your browser.</p><p><img src="'+a+`" alt="DroneBridge for ESP32 Webinterface"></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Some settings require you to reboot the ESP32 to take effect.</p></div><h3 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-label="Permalink to &quot;API&quot;">​</a></h3><p>DroneBridge for ESP32 offers a REST:API that allows you to read and write configuration options. You are not limited to the options presented by the Webinterface (e.g. baud rates). You can use the API to set custom baud rates or to integrate the system into your own setup.</p><p><strong>To request the settings</strong></p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://dronebridge.local/api/settings/request</span></span></code></pre></div><p><strong>To request stats</strong></p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://dronebridge.local/api/system/stats</span></span></code></pre></div><p><strong>Trigger a reboot</strong></p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://dronebridge.local/api/system/reboot</span></span></code></pre></div><p><strong>Trigger a settings change:</strong> Send a valid JSON</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;wifi_ssid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DroneBridge ESP32&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;wifi_pass&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dronebridge&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ap_channel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;tx_pin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">17</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;rx_pin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;telem_proto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;baud&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">115200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;msp_ltm_port&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ltm_pp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;trans_pack_size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ap_ip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;192.168.2.1&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>to</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://dronebridge.local/api/settings/change</span></span></code></pre></div><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><ul><li>Always erase the flash of the ESP32 before flashing a new release/firmware</li><li>Check if the pins on your ESP board are labeled correctly.</li><li>Enter the IP address in your browsers address bar <code>http://192.168.2.1</code>. No https supported! You may need to disconnect from the cellular network when using a phone to be able to access the webinterface.</li><li>If your network is operating in the same IP range as DB for ESP32 you need to change the Gateway IP address in the Webinterface to something like <code>192.168.5.1</code>.</li></ul>`,46),h=[l];function d(p,c,u,g,k,f){return o(),s("div",null,h)}const y=t(r,[["render",d]]);export{b as __pageData,y as default};
