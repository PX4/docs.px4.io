import{_ as e}from"./chunks/tfrpm01_electronics.CjU-uRr0.js";import{_ as a,a as t}from"./chunks/transmissive_probe.C3GzqVuq.js";import{_ as r,c as s,o as i,ab as l}from"./chunks/framework.CUflZczI.js";const F=JSON.parse('{"title":"Датчик тахометра ThunderFly TFRPM01","description":"","frontmatter":{},"headers":[],"relativePath":"uk/sensor/thunderfly_tachometer.md","filePath":"uk/sensor/thunderfly_tachometer.md"}'),n={name:"uk/sensor/thunderfly_tachometer.md"},o=l('<h1 id="датчик-тахометра-thunderfly-tfrpm01" tabindex="-1">Датчик тахометра ThunderFly TFRPM01 <a class="header-anchor" href="#датчик-тахометра-thunderfly-tfrpm01" aria-label="Permalink to &quot;Датчик тахометра ThunderFly TFRPM01&quot;">​</a></h1><p>Тахометр <a href="https://github.com/ThunderFly-aerospace/TFRPM01" target="_blank" rel="noreferrer">TFRPM01</a> - це невеликий та низькосистемний вимірювач обертів.</p><p>Сама плата не містить фактичного датчика, але може бути використана з багатьма різними типами датчиків/зондів для підрахунку обертів. Він має роз&#39;єм I²C для підключення до PX4 та підключений до фактичного датчика через 3-контактний роз&#39;єм. Також він має світлодіод, який надає базову діагностичну інформацію.</p><p><img src="'+e+'" alt="TFRPM01A"></p><div class="info custom-block"><p class="custom-block-title">Датчик TFRPM01 є апаратним засобом з відкритим вихідним кодом, який комерційно доступний на веб-сайті <a href="https://www.thunderfly.cz/" target="_blank" rel="noreferrer">ThunderFly s.r.o.</a> (виробничі дані доступні на <a href="https://github.com/ThunderFly-aerospace/TFRPM01" target="_blank" rel="noreferrer">GitHub</a>).</p></div><h2 id="налаштування-обладнання" tabindex="-1">Налаштування обладнання <a class="header-anchor" href="#налаштування-обладнання" aria-label="Permalink to &quot;Налаштування обладнання&quot;">​</a></h2><p>Плата обладнана (двома крізь прохідними) роз&#39;ємами I²C для підключення до PX4 та має 3-контактний роз&#39;єм, який можна використовувати для підключення до різних датчиків:</p><ul><li>TFRPM01 може бути підключений до будь-якого порту I²C.</li><li>TFRPM01 має роз&#39;єм з 3 контактами (з входом з підтяжкою), який може бути підключений до різних типів зондів. <ul><li>Апаратне забезпечення датчика/зонда потребує імпульсного сигналу. Вхідний сигнал приймає логіку TTL зі значенням +5V або <a href="https://en.wikipedia.org/wiki/Open_collector" target="_blank" rel="noreferrer">відкриті вихідні</a> колектори. Максимальна частота пульса - 20 кГц з циклом роботи 50%.</li><li>Раз&#39;єм зонду забезпечує живлення +5V від шини I²C, максимальна потужність, яку можна використовувати, обмежена фільтром RC (див. схеми для деталей).</li></ul></li></ul><p>Електроніка TFRPM01A обладнана сигнальним світлодіодом, який може бути використаний для перевірки правильного підключення датчика. Світлодіод загоряється, коли вхід імпульсу заземлений або відкритий для логічного 0, тому ви можете перевірити, що датчик працює правильно, просто обертаючи ротор вручну.</p><h3 id="зонд-сенсора-ефекту-холла" tabindex="-1">Зонд сенсора ефекту Холла <a class="header-anchor" href="#зонд-сенсора-ефекту-холла" aria-label="Permalink to &quot;Зонд сенсора ефекту Холла&quot;">​</a></h3><p>Датчики Холла (магнітно-оперовані) ідеально підходять для жорстких умов, де бруд, пил і вода можуть контактувати з відчуваним ротором.</p><p>Багато різних датчиків ефекту Холла є комерційно доступними. Наприклад, гарним вибором є <a href="https://m.littelfuse.com/media?resourcetype=datasheets&amp;itemid=6d69d457-770e-46ba-9998-012c5e0aedd7&amp;filename=littelfuse-hall-effect-sensors-55100-datasheet" target="_blank" rel="noreferrer">мініатюрний датчик наближення з фланцевим кріпленням 55100</a>.</p><p><img src="'+a+'" alt="Example of Hall effect probe"></p><h3 id="оптичнии-датчик-зонду" tabindex="-1">Оптичний датчик зонду <a class="header-anchor" href="#оптичнии-датчик-зонду" aria-label="Permalink to &quot;Оптичний датчик зонду&quot;">​</a></h3><p>Оптичний сенсор також може бути використаний (і може бути кращим варіантом, залежно від вимог до вимірювань). Як трансмісивний, так і рефлекторний типи сенсорів можуть бути використані для генерації імпульсів.</p><p><img src="'+t+'" alt="Example of optical transmissive probe"></p><h2 id="налаштування-програмного-забезпечення" tabindex="-1">Налаштування програмного забезпечення <a class="header-anchor" href="#налаштування-програмного-забезпечення" aria-label="Permalink to &quot;Налаштування програмного забезпечення&quot;">​</a></h2><h3 id="запуск-драивера" tabindex="-1">Запуск драйвера <a class="header-anchor" href="#запуск-драивера" aria-label="Permalink to &quot;Запуск драйвера&quot;">​</a></h3><p>Драйвер не запускається автоматично (в будь-якій конструкції). Вам потрібно буде запустити його вручну, використовуючи <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/analyze_view/mavlink_console.html" target="_blank" rel="noreferrer">QGroundControl MAVLink Console</a> або додавши драйвер до <a href="./../concept/system_startup.html#customizing-the-system-startup">скрипту запуску</a> на SD-картку.</p><h4 id="запустіть-драивер-з-консолі" tabindex="-1">Запустіть драйвер з консолі <a class="header-anchor" href="#запустіть-драивер-з-консолі" aria-label="Permalink to &quot;Запустіть драйвер з консолі&quot;">​</a></h4><p>Запустіть драйвер з <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/analyze_view/mavlink_console.html" target="_blank" rel="noreferrer">консолі</a> за допомогою команди:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pcf8583</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> numbe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>де:</p><ul><li><code>-X</code> означає, що це зовнішня шина.</li><li><code>&lt;bus number&gt;</code> - це номер шини, до якого підключений пристрій</li></ul><div class="info custom-block"><p class="custom-block-title">Номер шини в коді <code>-b &lt;номер шини&gt;</code> може не відповідати міткам автобусів на автопілоті. Наприклад, при використанні CUAV V5+ або CUAV Nano:</p><table><thead><tr><th>Мітка автопілоту</th><th>-b номер</th></tr></thead><tbody><tr><td>I2C1</td><td>-X -b 4</td></tr><tr><td>I2C2</td><td>-X -b 2</td></tr><tr><td>I2C3</td><td>-X -b 1</td></tr></tbody></table><p>Команда <code>pcf8583 start</code> виводить відповідну назву / мітку автопілота для кожного номера шини.</p></div><h3 id="тестування" tabindex="-1">Тестування <a class="header-anchor" href="#тестування" aria-label="Permalink to &quot;Тестування&quot;">​</a></h3><p>Ви можете перевірити, що лічильник працює, використовуючи кілька методів</p><h4 id="px4-nuttx-консоль-mavlink" tabindex="-1">PX4 (NuttX) Консоль MAVLink <a class="header-anchor" href="#px4-nuttx-консоль-mavlink" aria-label="Permalink to &quot;PX4 (NuttX) Консоль MAVLink&quot;">​</a></h4><p>Консоль <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/analyze_view/mavlink_console.html" target="_blank" rel="noreferrer">QGroundControl MAVLink</a> також може використовуватися для перевірки роботи драйвера і теми UORB, які він виводить.</p><p>Щоб перевірити статус драйвера TFRPM01, виконайте команду:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pcf8583</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span></code></pre></div><p>Якщо драйвер працює, порт I²C буде надруковано разом з іншими основними параметрами запущеного екземпляру. Якщо драйвер не працює, його можна запустити за допомогою процедури, описаної вище.</p><p>Команда <a href="./../modules/modules_command.html#listener">listener</a> дозволяє відстежувати повідомлення RPM UORB від працюючого драйвера.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">listener</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpm</span></span></code></pre></div><p>Для періодичного відображення ви можете додати параметр <code>-n 50</code> після команди, яка виводить наступні 50 повідомлень.</p><h4 id="консоль-qgroundcontrol-mavlink-інспектор" tabindex="-1">Консоль QGroundControl MAVLink Інспектор <a class="header-anchor" href="#консоль-qgroundcontrol-mavlink-інспектор" aria-label="Permalink to &quot;Консоль QGroundControl MAVLink Інспектор&quot;">​</a></h4><p>Інспектор QGroundControl <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/analyze_view/mavlink_inspector.html" target="_blank" rel="noreferrer">Mavlink</a> може бути використаний для спостереження повідомлень MAVLink від PX4, включаючи <a href="https://mavlink.io/en/messages/common.html#RAW_RPM" target="_blank" rel="noreferrer">RAW_RPM</a>, випромінюваних драйвером:</p><ol><li>Запустіть інспектор з меню QGC: <strong>Аналіз інструментів &gt; Mavlink Інспектор</strong></li><li>Перевірте, чи <code>RAW_RPM</code> присутній у списку повідомлень (якщо він відсутній, перевірте, чи працює драйвер).</li></ol><h3 id="налаштування-параметрів" tabindex="-1">Налаштування параметрів <a class="header-anchor" href="#налаштування-параметрів" aria-label="Permalink to &quot;Налаштування параметрів&quot;">​</a></h3><p>Зазвичай, сенсори можуть бути використані без конфігурації, але значення обертів на хвилину повинні відповідати кратними реальним обертам. Це через те, що параметр <code>PCF8583_MAGNET</code> повинен відповідати реальній кількості імпульсів на один оберт відчутого ротора. Якщо потрібно, наступні параметри слід налаштувати:</p><ul><li><a href="./../advanced_config/parameter_reference.html#PCF8583_POOL">PCF8583_POOL</a> — інтервал об&#39;єднання між переліком зарахованого номера</li><li><a href="./../advanced_config/parameter_reference.html#PCF8583_RESET">СБРОС_PC8583</a> — Значення лічильника, де підраховане число повинно бути скинуто на нуль.</li><li><a href="./../advanced_config/parameter_reference.html#PCF8583_MAGNET">PCF8583_MAGNET</a> — Кількість імпульсів на обертання, наприклад, кількість магнітів на диску ротора.</li></ul><div class="info custom-block"><p class="custom-block-title">Параметри вище з&#39;являються в QGC після перезапуску драйвера/PX4.</p><p>Якщо параметри конфігурації не доступні після перезапуску, то вам слід перевірити, чи відбувся запуск драйвера. Можливо, що <a href="./../peripherals/serial_configuration.html#configuration-parameter-missing-from-qgroundcontrol">драйвер відсутній в прошивці</a>, у такому випадку його потрібно додати до конфігурації плати:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drivers/rpm/pcf8583</span></span></code></pre></div></div>',42),h=[o];function p(d,c,u,m,k,g){return i(),s("div",null,h)}const C=r(n,[["render",p]]);export{F as __pageData,C as default};
