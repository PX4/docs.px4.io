import{_ as e}from"./chunks/jerk_limited_trajectory_1d.5k404LYe.js";import{_ as a,c as r,o as t,ab as o}from"./chunks/framework.CUflZczI.js";const C=JSON.parse('{"title":"Jerk-limited Type Trajectory for Multicopters","description":"","frontmatter":{},"headers":[],"relativePath":"en/config_mc/mc_jerk_limited_type_trajectory.md","filePath":"en/config_mc/mc_jerk_limited_type_trajectory.md"}'),i={name:"en/config_mc/mc_jerk_limited_type_trajectory.md"},_=o('<h1 id="jerk-limited-type-trajectory-for-multicopters" tabindex="-1">Jerk-limited Type Trajectory for Multicopters <a class="header-anchor" href="#jerk-limited-type-trajectory-for-multicopters" aria-label="Permalink to &quot;Jerk-limited Type Trajectory for Multicopters&quot;">​</a></h1><p>The Jerk-limited trajectory type provides smooth motion in response to user stick input or mission changes (e.g.: for filming, mapping, cargo). It generates symmetric smooth S-curves where the jerk and acceleration limits are always guaranteed.</p><p>This trajectory type is always enabled in <a href="./../flight_modes_mc/mission.html">Mission mode</a>. To enable it in <a href="./../flight_modes_mc/position.html">Position mode</a> set the parameter: <a href="./../advanced_config/parameter_reference.html#MPC_POS_MODE">MPC_POS_MODE=3</a>.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The jerk-limited type is not used <em>by default</em> in position mode. It may not be suitable for vehicles/use-cases that require a faster response - e.g. racer quads.</p></div><h2 id="trajectory-generator" tabindex="-1">Trajectory Generator <a class="header-anchor" href="#trajectory-generator" aria-label="Permalink to &quot;Trajectory Generator&quot;">​</a></h2><p>The graph below shows a typical jerk-limited profile with the following constraints:</p><ul><li><code>jMax</code>: maximum jerk</li><li><code>a0</code>: initial acceleration</li><li><code>aMax</code>: maximum acceleration</li><li><code>a3</code>: final acceleration (always 0)</li><li><code>v0</code>: initial velocity</li><li><code>vRef</code>: desired velocity</li></ul><p>The constraints <code>jMax</code>, <code>aMax</code> are configurable by the user via parameters and can be different in manual position control and auto mode.</p><p>The resulting velocity profile is often called &quot;S-Curve&quot;.</p><p><img src="'+e+'" alt="Jerk-limited trajectory"></p><h2 id="manual-mode" tabindex="-1">Manual Mode <a class="header-anchor" href="#manual-mode" aria-label="Permalink to &quot;Manual Mode&quot;">​</a></h2><p>In manual position mode, the sticks are mapped to velocity where a full XY-stick deflection corresponds to <a href="./../advanced_config/parameter_reference.html#MPC_VEL_MANUAL">MPC_VEL_MANUAL</a> and a full Z-stick deflection corresponds to <a href="./../advanced_config/parameter_reference.html#MPC_Z_VEL_MAX_UP">MPC_Z_VEL_MAX_UP</a> (upward motion) or <a href="./../advanced_config/parameter_reference.html#MPC_Z_VEL_MAX_DN">MPC_Z_VEL_MAX_DN</a> (downward motion).</p><h3 id="constraints" tabindex="-1">Constraints <a class="header-anchor" href="#constraints" aria-label="Permalink to &quot;Constraints&quot;">​</a></h3><p>XY-plane:</p><ul><li><code>jMax</code>: <a href="./../advanced_config/parameter_reference.html#MPC_JERK_MAX">MPC_JERK_MAX</a></li><li><code>aMax</code>: <a href="./../advanced_config/parameter_reference.html#MPC_ACC_HOR_MAX">MPC_ACC_HOR_MAX</a></li></ul><p>Z-axis:</p><ul><li><code>jMax</code>: <a href="./../advanced_config/parameter_reference.html#MPC_JERK_MAX">MPC_JERK_MAX</a></li><li><code>aMax</code> (upward motion): <a href="./../advanced_config/parameter_reference.html#MPC_ACC_UP_MAX">MPC_ACC_UP_MAX</a></li><li><code>aMax</code> (downward motion): <a href="./../advanced_config/parameter_reference.html#MPC_ACC_DOWN_MAX">MPC_ACC_DOWN_MAX</a></li></ul><h2 id="auto-mode" tabindex="-1">Auto Mode <a class="header-anchor" href="#auto-mode" aria-label="Permalink to &quot;Auto Mode&quot;">​</a></h2><p>In auto mode, the desired velocity is <a href="./../advanced_config/parameter_reference.html#MPC_XY_CRUISE">MPC_XY_CRUISE</a> but this value is automatically adjusted depending on the distance to the next waypoint, the maximum possible velocity in the waypoint and the maximum desired acceleration and jerk. The vertical speed is defined by <a href="./../advanced_config/parameter_reference.html#MPC_Z_V_AUTO_UP">MPC_Z_V_AUTO_UP</a> (upward motion) and <a href="./../advanced_config/parameter_reference.html#MPC_Z_V_AUTO_DN">MPC_Z_V_AUTO_DN</a> (downward motion).</p><h3 id="constraints-1" tabindex="-1">Constraints <a class="header-anchor" href="#constraints-1" aria-label="Permalink to &quot;Constraints&quot;">​</a></h3><p>XY-plane:</p><ul><li><code>jMax</code>: <a href="./../advanced_config/parameter_reference.html#MPC_JERK_AUTO">MPC_JERK_AUTO</a></li><li><code>aMax</code>: <a href="./../advanced_config/parameter_reference.html#MPC_ACC_HOR">MPC_ACC_HOR</a></li></ul><p>Z-axis:</p><ul><li><code>jMax</code>: <a href="./../advanced_config/parameter_reference.html#MPC_JERK_AUTO">MPC_JERK_AUTO</a></li><li><code>aMax</code> (upward motion): <a href="./../advanced_config/parameter_reference.html#MPC_ACC_UP_MAX">MPC_ACC_UP_MAX</a></li><li><code>aMax</code> (downward motion): <a href="./../advanced_config/parameter_reference.html#MPC_ACC_DOWN_MAX">MPC_ACC_DOWN_MAX</a></li></ul><p>Distance to velocity gains when close to a waypoint:</p><ul><li><a href="./../advanced_config/parameter_reference.html#MPC_XY_TRAJ_P">MPC_XY_TRAJ_P</a></li></ul><h3 id="related-parameters" tabindex="-1">Related Parameters <a class="header-anchor" href="#related-parameters" aria-label="Permalink to &quot;Related Parameters&quot;">​</a></h3><ul><li><a href="./../advanced_config/parameter_reference.html#MPC_XY_VEL_MAX">MPC_XY_VEL_MAX</a></li><li><a href="./../advanced_config/parameter_reference.html#MPC_Z_VEL_MAX_UP">MPC_Z_VEL_MAX_UP</a></li><li><a href="./../advanced_config/parameter_reference.html#MPC_Z_VEL_MAX_DN">MPC_Z_VEL_MAX_DN</a></li><li><a href="./../advanced_config/parameter_reference.html#MPC_TKO_SPEED">MPC_TKO_SPEED</a></li><li><a href="./../advanced_config/parameter_reference.html#MPC_LAND_SPEED">MPC_LAND_SPEED</a></li><li><a href="./../advanced_config/parameter_reference.html#MPC_LAND_ALT1">MPC_LAND_ALT1</a></li><li><a href="./../advanced_config/parameter_reference.html#MPC_LAND_ALT2">MPC_LAND_ALT2</a></li></ul>',28),c=[_];function n(l,d,m,s,h,f){return t(),r("div",null,c)}const u=a(i,[["render",n]]);export{C as __pageData,u as default};
