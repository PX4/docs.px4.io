import{_ as e,c as t,o as i,ab as a}from"./chunks/framework.CUflZczI.js";const f=JSON.parse('{"title":"Static Pressure Buildup","description":"","frontmatter":{},"headers":[],"relativePath":"en/advanced_config/static_pressure_buildup.md","filePath":"en/advanced_config/static_pressure_buildup.md"}'),o={name:"en/advanced_config/static_pressure_buildup.md"},s=a('<h1 id="static-pressure-buildup" tabindex="-1">Static Pressure Buildup <a class="header-anchor" href="#static-pressure-buildup" aria-label="Permalink to &quot;Static Pressure Buildup&quot;">​</a></h1><p>Air flowing over an enclosed vehicle can cause the <em>static pressure</em> to change within the canopy/hull. Depending on the location of holes/leaks in the hull, you can end up with under or overpressure (similar to a wing).</p><p>The change in pressure can affect barometer measurements, leading to an inaccurate altitude estimate. This might manifest as the vehicle losing altitude when it stops moving in <a href="./../flight_modes_mc/altitude.html">Altitude</a>, <a href="./../flight_modes_mc/position.html">Position</a> or <a href="./../flight_modes_mc/mission.html">Mission</a> modes (when the vehicle stops moving the static pressure drops, the sensor reports a higher altitude, and the vehicle compensates by descending). The problem is particularly visible on multicopters because fixed wing vehicles move with a more constant airspeed (and it is the airspeed deltas that are noticeable).</p><p>One solution is to use foam-filled venting holes to reduce the buildup (as much as possible) and then attempt dynamic calibration to remove any remaining effects.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Before &quot;fixing&quot; the problem you should first check that the Z setpoint tracks the estimated altitude (to verify that there are no controller issues).</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>While it is possible to remove the barometer from the altitude estimate (i.e. only use altitude from the GPS), this is not recommended. GPS is inaccurate in many environments, and particularly in urban environments where you have signal reflections off buildings.</p></div><h2 id="airflow-analysis" tabindex="-1">Airflow Analysis <a class="header-anchor" href="#airflow-analysis" aria-label="Permalink to &quot;Airflow Analysis&quot;">​</a></h2><p>You can modify the hull by drilling holes or filling them with foam.</p><p>One way to analyse the effects of these changes is to mount the drone on a car and drive around (on a relatively level surface) with the hull exposed to air/wind. By looking at the ground station you can review the effects of movement-induced static pressure changes on the measured altitude (using the road as &quot;ground truth).</p><p>This process allows rapid iteration without draining batteries: modify drone, drive/review, repeat!</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Aim for a barometer altitude drop of less than 2 metres at maximum horizontal speed before attempting software-based calibration below.</p></div><h2 id="dynamic-calibration" tabindex="-1">Dynamic Calibration <a class="header-anchor" href="#dynamic-calibration" aria-label="Permalink to &quot;Dynamic Calibration&quot;">​</a></h2><p>After modifying the hardware, you can then use the <a href="./../advanced_config/parameter_reference.html#EKF2_PCOEF_XN">EKF2_PCOEF_*</a> parameters to tune for expected barometer variation based on relative air velocity. For more information see <a href="./../advanced_config/tuning_the_ecl_ekf.html#correction-for-static-pressure-position-error">ECL/EKF Overview &amp; Tuning &gt; Correction for Static Pressure Position Error</a>.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The approach works well if the relationship between the error due to static pressure and the velocity varies linearly. If the vehicle has a more complex aerodynamic model it will be less effective.</p></div>',14),r=[s];function n(l,c,h,d,u,p){return i(),t("div",null,r)}const _=e(o,[["render",n]]);export{f as __pageData,_ as default};
