import{_ as e,c as t,o as a,ab as s}from"./chunks/framework.CUflZczI.js";const g=JSON.parse('{"title":"DShot ESCs","description":"","frontmatter":{},"headers":[],"relativePath":"en/peripherals/dshot.md","filePath":"en/peripherals/dshot.md"}'),o={name:"en/peripherals/dshot.md"},n=s(`<h1 id="dshot-escs" tabindex="-1">DShot ESCs <a class="header-anchor" href="#dshot-escs" aria-label="Permalink to &quot;DShot ESCs&quot;">​</a></h1><p>DShot is an alternative ESC protocol that has several advantages over <a href="./../peripherals/pwm_escs_and_servo.html">PWM</a> or <a href="./../peripherals/oneshot.html">OneShot</a>:</p><ul><li>Reduced latency.</li><li>Increased robustness via a checksum.</li><li>No need for ESC calibration as the protocol uses digital encoding.</li><li>Telemetry feedback is available/supported on some ESCs.</li><li>Can reverse motor spin directions via commands when needed (rather than physically moving wires/re-soldering).</li><li>Other useful commands are supported.</li></ul><p>This topic shows how to connect and configure DShot ESCs.</p><p><a id="wiring"></a></p><h2 id="wiring-connections" tabindex="-1">Wiring/Connections <a class="header-anchor" href="#wiring-connections" aria-label="Permalink to &quot;Wiring/Connections&quot;">​</a></h2><p>DShot ESC are wired the same way as <a href="./pwm_escs_and_servo.html">PWM ESCs</a>. The only difference is that they can only be connected to the FMU, and usually only to some subset of pins.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>You may want to check the actuator configuration screen to see what pins are available for DShot on your controller before wiring up!</p></div><p>Pixhawk controllers with both an FMU and an IO board usually label them as <code>AUX</code> (FMU) and <code>MAIN</code> (IO), respectively. These match the <code>PWM AUX</code> and <code>PWM MAIN</code> output tabs on the actuator configuration screen. For these controllers connect the DShot ESC to the <code>AUX</code> port.</p><p>Controllers that don&#39;t have an IO board usually label the (single) output port as <code>MAIN</code>, and this is where you will connect your DShot ESC. If the controller without IO has its own firmware, the actuator assignment will be to the matching <code>PWM MAIN</code> outputs. However if the same firmware is used for hardware with/without the IO board, such as for the Pixhawk 4 and Pixhawk 4 Mini, then actuator assignment tab used is the same in both cases: <code>PWM AUX</code> (i.e. not matching the port label <code>MAIN</code> in the &quot;mini&quot; case).</p><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Remove propellers before changing ESC configuration parameters!</p></div><p>Enable DShot for your required outputs in the <a href="./../config/actuators.html">Actuator Configuration</a>.</p><p>DShot comes with different speed options: <em>DShot150</em>, <em>DShot300</em>, <em>DShot600</em> and <em>DShot1200</em>, where the number indicates the speed in kilo-bits/second. You should set the parameter to the highest speed supported by your ESC (according to its datasheet).</p><p>Then connect the battery and arm the vehicle. The ESCs should initialize and the motors turn in the correct directions.</p><ul><li>If the motors do not spin in the correct direction (for the <a href="./../airframes/airframe_reference.html">selected airframe</a>) you can reverse them in the UI using the <strong>Set Spin Direction</strong> option (this option appears after you select DShot and assign motors). You can also reverse motors by sending an <a href="#commands">ESC Command</a>.</li></ul><p><a id="commands"></a></p><h2 id="esc-commands" tabindex="-1">ESC Commands <a class="header-anchor" href="#esc-commands" aria-label="Permalink to &quot;ESC Commands&quot;">​</a></h2><p>Commands can be sent to the ESC via the <a href="./../debug/mavlink_shell.html">MAVLink shell</a>. See <a href="./../modules/modules_driver.html#dshot">here</a> for a full reference of the supported commands.</p><p>The most important ones are:</p><ul><li><p>Make the first motor beep (helps with identifying motors):</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>dshot beep1 -m 1</span></span></code></pre></div></li><li><p>Retrieve ESC information (requires telemetry, see below):</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>nsh&gt; dshot esc_info -m 2</span></span>
<span class="line"><span>INFO  [dshot] ESC Type: #TEKKO32_4in1#</span></span>
<span class="line"><span>INFO  [dshot] MCU Serial Number: xxxxxx-xxxxxx-xxxxxx-xxxxxx</span></span>
<span class="line"><span>INFO  [dshot] Firmware version: 32.60</span></span>
<span class="line"><span>INFO  [dshot] Rotation Direction: normal</span></span>
<span class="line"><span>INFO  [dshot] 3D Mode: off</span></span>
<span class="line"><span>INFO  [dshot] Low voltage Limit: off</span></span>
<span class="line"><span>INFO  [dshot] Current Limit: off</span></span>
<span class="line"><span>INFO  [dshot] LED 0: unsupported</span></span>
<span class="line"><span>INFO  [dshot] LED 1: unsupported</span></span>
<span class="line"><span>INFO  [dshot] LED 2: unsupported</span></span>
<span class="line"><span>INFO  [dshot] LED 3: unsupported</span></span></code></pre></div><ul><li>Permanently reverse the spin direction of the first motor:</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>dshot reverse -m 1</span></span>
<span class="line"><span>dshot save -m 1</span></span></code></pre></div><p>Retrieving ESC information after the <code>dshot reverse -m 1</code> command without the <code>dshot save -m 1</code> command will show:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>Rotation Direction: reversed</span></span></code></pre></div><p>after saving it with <code>dshot save -m 1</code> command, reversed direction will become new normal direction:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>Rotation Direction: normal</span></span></code></pre></div><p>To change direction again new <code>dshot reverse -m 1</code> command needs to be sent.</p></li></ul><h2 id="telemetry" tabindex="-1">Telemetry <a class="header-anchor" href="#telemetry" aria-label="Permalink to &quot;Telemetry&quot;">​</a></h2><p>Some ESCs are capable of sending telemetry back to the flight controller, including:</p><ul><li>temperature</li><li>voltage</li><li>current</li><li>accumulated current consumption</li><li>RPM values</li></ul><p>These DShot ESCs will have an additional telemetry wire.</p><p>To enable this feature (on ESCs that support it):</p><ol><li>Join all the telemetry wires from all the ESCs together, and then connect them to one of the RX pins on an unused flight controller serial port.</li><li>Enable telemetry on that serial port using <a href="./../advanced_config/parameter_reference.html#DSHOT_TEL_CFG">DSHOT_TEL_CFG</a>.</li></ol><p>After a reboot you can check if telemetry is working (make sure the battery is connected) using:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>dshot esc_info -m 1</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You may have to configure <a href="./../advanced_config/parameter_reference.html#MOT_POLE_COUNT">MOT_POLE_COUNT</a> to get the correct RPM values.</p></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Not all DSHOT-capable ESCs support <code>[esc_info]</code>(e.g. APD 80F3x), even when telemetry is supported and enabled. The resulting error is:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ERROR [dshot] No data received. If telemetry is setup correctly, try again.</span></span></code></pre></div><p>Check manufacturer documentation for confirmation/details.</p></div>`,31),i=[n];function r(l,c,p,h,d,u){return a(),t("div",null,i)}const f=e(o,[["render",r]]);export{g as __pageData,f as default};
