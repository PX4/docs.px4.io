import{_ as a}from"./chunks/autotune.EOQH3DT_.js";import{_ as i,c as n,o,ab as t,m as e}from"./chunks/framework.CUflZczI.js";const y=JSON.parse('{"title":"자동 튜닝","description":"","frontmatter":{},"headers":[],"relativePath":"ko/config/autotune.md","filePath":"ko/config/autotune.md"}'),l={name:"ko/config/autotune.md"},r=t('<h1 id="자동-튜닝" tabindex="-1">자동 튜닝 <a class="header-anchor" href="#자동-튜닝" aria-label="Permalink to &quot;자동 튜닝&quot;">​</a></h1><p>자동 튜닝은 안정적이고 반응성은 높은 비행에 탁월한 컨트롤러인 PX4의 속도와 자세를 자동으로 튜닝합니다(다른 튜닝은 &quot;선택 사항&quot;에 가깝습니다). It is currently enabled for multicopter, fixed-wing, and hybrid VTOL fixed-wing vehicles.</p><p>Tuning only needs to be done once, and is recommended unless you&#39;re using a vehicle that has already been tuned by the manufacturer (and not modified since).</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>비행 중에 자동 튜닝이 수행됩니다. The airframe must fly well enough to handle moderate disturbances, and should be closely attended:</p><ul><li>기체가 <a href="#pre-tuning-test">자동 튜닝을 할 만큼 충분히 안정적인지</a> 테스트합니다.</li><li>Be ready to abort the autotuning process. You can do this by changing flight modes or using an auto-tune enable/disable switch (<a href="#enable-disable-autotune-switch-fixed-wing">if configured</a>).</li><li>Verify that the vehicle flies well after tuning.</li></ul></div>',4),s=e("p",null,[e("div",{class:"embed-responsive embed-responsive-16by9"},[e("iframe",{class:"embed-responsive-item youtube-player",type:"text/html",width:"640",height:"390",src:"https://www.youtube.com/embed/5xswOhhqrIQ",frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:""})])],-1),h=t('<h2 id="사전-튜닝-테스트" tabindex="-1">사전 튜닝 테스트 <a class="header-anchor" href="#사전-튜닝-테스트" aria-label="Permalink to &quot;사전 튜닝 테스트&quot;">​</a></h2><p>The vehicle must be able to fly and adequately stabilize itself before running auto-tune. This test ensures that the vehicle can fly safely in position controlled modes.</p><div class="info custom-block"><p class="custom-block-title">During <a href="./../config/airframe.html">Airframe Setup</a> you should have selected the frame that most closely matches your vehicle. This may fly well enough to run autotuning.</p></div><p>To make sure the vehicle is stable enough for auto-tuning:</p><ol><li>비행 구역이 깨끗하고 공간이 충분한 지 확인하기 위하여, 일반적인 비행 전 안전 점검을 실시합니다.</li><li>이륙 및 시험 준비 <ul><li><strong>Multicopters:</strong> Take off and hover at 1m above ground in <a href="./../flight_modes_mc/altitude.html">Altitude mode</a> or Stabilized mode.</li><li><strong>Fixed-wing:</strong> Take off and fly at cruise speed in <a href="./../flight_modes_mc/position.html">Position mode</a> or <a href="./../flight_modes_mc/altitude.html">Altitude mode</a>.</li></ul></li><li>RC 송신기 롤 스틱을 사용하여 기체를 몇 도만 기울여 다음 기동을 수행하십시오. <em>좌회전 &gt; 오른쪽 롤 &gt; 중심</em> (전체 기동은 약 3초가 소요됩니다). 기체는 2번의 진동 이내에서 안정화되어야 합니다.</li><li>각각의 시도에서 더 큰 진폭으로 기울이면서 기동을 반복합니다. 기체가 ~20도에서 2번의 진동 내에서 안정화될 수 있으면 다음 단계로 이동합니다.</li><li>피치 축에서 동일한 동작을 반복합니다. As above, start with small angles and confirm that the vehicle can stabilise itself within 2 oscillations before increasing the tilt.</li></ol><p>If the drone can stabilize itself within 2 oscillations it is ready for the auto-tuning procedure.</p><p>If not, go to the <a href="#troubleshooting">troubleshooting</a> section, which explains the minimal manual tuning to prepare the vehicle for auto-tuning.</p><h3 id="auto-tuning-procedure" tabindex="-1">Auto-tuning Procedure <a class="header-anchor" href="#auto-tuning-procedure" aria-label="Permalink to &quot;Auto-tuning Procedure&quot;">​</a></h3><p>The auto-tuning sequence must be performed in a <strong>safe flight zone, with enough space</strong>. It takes about 40 seconds (<a href="#how-long-does-autotuning-take">between 19 and 68 seconds</a>). For best results, we recommend running the test in calm weather conditions.</p><p>The recommended modes for autotuning are <a href="./../flight_modes_fw/hold.html">Hold mode</a> (FW) and <a href="./../flight_modes_mc/altitude.html">Altitude mode</a> (MC), but any other flight mode can be used. During auto tuning, the RC sticks can still be used to fly the vehicle.</p><div class="info custom-block"><p class="custom-block-title">The auto-tuning sequence can be aborted at any time by changing flight modes or using the <a href="#enable-disable-autotune-switch-fixed-wing">enable/disable Autotune switch</a> (if configured).</p></div><p>The test steps are:</p><ol><li><a href="#pre-tuning-test">사전 튜닝 테스트</a>를 수행합니다.</li><li>RC를 사용하여 이륙 및 테스트 준비합니다: <ul><li><strong>Multicopters:</strong> Takeoff using the remote controller in <a href="./../flight_modes_mc/altitude.html">Altitude mode</a>. 안전한 거리와 지상에서 4~20m에서 기체를 호버링하십시오.</li><li><strong>Fixed-wing:</strong> Once flying at cruise speed, activate <a href="./../flight_modes_mc/hold.html">Hold mode</a>. 이렇게 하면 비행기가 일정한 고도와 속도로 원을 그리며 선회 비행합니다.</li></ul></li><li>Enable autotune.</li></ol><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>If an <a href="#enable-disable-autotune-switch-fixed-wing">Enable/Disable Autotune Switch</a> is configured you can just toggle the switch to the &quot;enabled&quot; position.</p></div><ol><li><p>QGroundControl에서 메뉴(<strong>차량 설정 &gt; PID 조정</strong>)를 클릭합니다.</p><p><img src="'+a+'" alt="튜닝 설정 &gt; 자동 튜닝 활성화"></p></li><li><p>Select either the <em>Rate Controller</em> or <em>Attitude Controller</em> tabs.</p></li><li><p><strong>자동 튜닝 활성화</strong> 버튼이 활성화 여부를 확인합니다(이렇게 하면 <strong>자동 튜닝</strong> 버튼이 표시되고 수동 튜닝 선택기가 제거됨).</p></li><li><p>경고 팝업을 읽고 <strong>확인</strong>을 클릭하여 튜닝을 시작합니다.</p></li><li><p>드론은 먼저 빠른 롤 동작을 수행한 후 피치 및 요 동작을 수행합니다. 진행률은 <em>자동 조정</em> 버튼 옆의 진행률 표시줄에 표시됩니다.</p></li><li><p>튜닝 적용:</p><ul><li><strong>Fixed-Wing:</strong> The tuning will be immediately/automatically be applied and tested in flight (by default). 그런 다음, PX4는 4초 테스트를 실행하고 문제가 감지되면 튜닝 작업의 이전 상태로 복원합니다.</li><li><strong>멀티콥터:</strong> 새로운 조정 매개변수를 적용을 위하여 수동으로 착륙하고 시동을 해제합니다. 주의하여 이륙하고 차량이 안정성을 수동으로 테스트하십시오.</li></ul></li><li><p>강한 진동이 발생하면, 즉시 착륙하고 아래 <a href="#troubleshooting">문제 해결</a> 섹션의 지침을 따르십시오.</p></li></ol><p>Additional notes:</p><ul><li><strong>VTOL:</strong> Hybrid VTOL fixed-wing vehicles must be tuned twice, following multicopter instructions in MC mode and fixed-wing instructions in FW mode.</li><li><strong>Multicopter:</strong> The instructions above tune the vehicle in <a href="./../flight_modes_mc/altitude.html">Altitude mode</a>. You can instead takeoff in <a href="./../flight_modes_mc/takeoff.html">Takeoff mode</a> and tune in <a href="./../flight_modes_mc/position.html">Position mode</a> if the vehicle is is <em>known</em> to be stable in these modes.</li><li><strong>Fixed-wing:</strong> Autotuning can also be run in <a href="./../flight_modes_fw/altitude.html">Altitude mode</a> or <a href="./../flight_modes_fw/position.html">Position mode</a>. 그러나 직선으로 비행하면서 테스트를 실행하면 더 큰 튜닝 안전 영역이 필요하며, 더 좋은 튜닝 결과를 보장하지 않습니다.</li><li>Whether tuning is applied in-air or after landing can be <a href="#apply-parameters-when-in-air-landed">configured using parameters</a>.</li></ul><h2 id="문제-해결" tabindex="-1">문제 해결 <a class="header-anchor" href="#문제-해결" aria-label="Permalink to &quot;문제 해결&quot;">​</a></h2><h4 id="자동-튜닝-시작전에-테스트-기동시-드론이-진동합니다" tabindex="-1">자동 튜닝 시작전에 테스트 기동시 드론이 진동합니다. <a class="header-anchor" href="#자동-튜닝-시작전에-테스트-기동시-드론이-진동합니다" aria-label="Permalink to &quot;자동 튜닝 시작전에 테스트 기동시 드론이 진동합니다.&quot;">​</a></h4><ul><li>느린 진동(초당 1회 또는 더 느린 진동): 이는 종종 대형 플랫폼에서 발생하며 자세 루프가 속도 루프에 비해 너무 빠르기 때문입니다. <ul><li><strong>Multicopter:</strong> decrease <a href="./../advanced_config/parameter_reference.html#MC_ROLL_P">MC_ROLL_P</a> and <a href="./../advanced_config/parameter_reference.html#MC_PITCH_P">MC_PITCH_P</a> by steps of 1.0.</li><li><strong>Fixed-wing:</strong> increase <a href="./../advanced_config/parameter_reference.html#FW_R_TC">FW_R_TC</a> and <a href="./../advanced_config/parameter_reference.html#FW_P_TC">FW_P_TC</a> by steps of 0.1.</li></ul></li><li>빠른 진동(초당 1회 이상): 이는 속도 루프의 이득이 너무 높기 때문입니다. <ul><li><strong>멀티콥터:</strong> 0.02씩 <code>MC_[ROLL|PITCH|YAW]RATE_K</code> 감소</li><li><strong>Fixed-wing:</strong> decrease <a href="./../advanced_config/parameter_reference.html#FW_RR_P">FW_RR_P</a>, <a href="./../advanced_config/parameter_reference.html#FW_PR_P">FW_PR_P</a>, <a href="./../advanced_config/parameter_reference.html#FW_YR_P">FW_YR_P</a> by steps of 0.01.</li></ul></li></ul><h4 id="자동-튜닝-실패" tabindex="-1">자동 튜닝 실패 <a class="header-anchor" href="#자동-튜닝-실패" aria-label="Permalink to &quot;자동 튜닝 실패&quot;">​</a></h4><p>If the drone was not moving enough during auto-tuning, the system identification algorithm might have issues to find the correct coefficients. Increase the <a href="./../advanced_config/parameter_reference.html#FW_AT_SYSID_AMP">FW_AT_SYSID_AMP</a>, <a href="./../advanced_config/parameter_reference.html#MC_AT_SYSID_AMP">MC_AT_SYSID_AMP</a> by steps of 1 and trigger the auto-tune again.</p><h4 id="드론이-자동-튜닝-후-진동합니다" tabindex="-1">드론이 자동 튜닝 후 진동합니다. <a class="header-anchor" href="#드론이-자동-튜닝-후-진동합니다" aria-label="Permalink to &quot;드론이 자동 튜닝 후 진동합니다.&quot;">​</a></h4><p>Due to effects not included in the mathematical model such as delays, saturation, slew-rate, airframe flexibility, the loop gain can be too high. To fix this, follow the same steps described <a href="#the-drone-oscillates-when-performing-the-testing-maneuvers-prior-to-the-auto-tuning">when the drone oscillates in the pre-tuning test</a>.</p><h4 id="여전히-정상-작동하지-않는-경우" tabindex="-1">여전히 정상 작동하지 않는 경우: <a class="header-anchor" href="#여전히-정상-작동하지-않는-경우" aria-label="Permalink to &quot;여전히 정상 작동하지 않는 경우:&quot;">​</a></h4><p>Attempt manual tuning using the appropriate guides:</p><ul><li><a href="./../config_mc/pid_tuning_guide_multicopter_basic.html">Multicopter PID 튜닝 가이드</a>(수동/간단)</li><li><a href="./../config_mc/pid_tuning_guide_multicopter.html">Multicopter PID 튜닝 가이드</a>(고급/상세)</li><li><a href="./../config_fw/pid_tuning_guide_fixedwing.html">고정익 PID 튜닝 가이드</a></li></ul><h2 id="optional-configuration" tabindex="-1">Optional Configuration <a class="header-anchor" href="#optional-configuration" aria-label="Permalink to &quot;Optional Configuration&quot;">​</a></h2><h3 id="apply-parameters-when-in-air-landed" tabindex="-1">Apply Parameters When In-Air/Landed <a class="header-anchor" href="#apply-parameters-when-in-air-landed" aria-label="Permalink to &quot;Apply Parameters When In-Air/Landed&quot;">​</a></h3><p>By default MC vehicles land before parameters are applied, while FW vehicles apply the parameters in-air and then test that the controllers work properly. This behaviour can be configured using the <a href="./../advanced_config/parameter_reference.html#MC_AT_APPLY">MC_AT_APPLY</a> and <a href="./../advanced_config/parameter_reference.html#FW_AT_APPLY">FW_AT_APPLY</a> parameters respectively:</p><ul><li><code>0</code>: 게인이 적용되지 않습니다. 자동 튜닝의 결과를 직접적으로 사용하지 않은 체로 검사하는 경우에 사용합니다.</li><li><code>1</code>: 무장 해제 후 게인을 적용합니다(멀티콥터의 경우 기본값). 이후, 조종자는 주의하여 이륙하면서 튜닝 결과를 테스트할 수 있습니다.</li><li><code>2</code>: 즉시 적용됩니다(고정익의 경우 기본값). 새로운 튜닝이 적용되고, 교란이 컨트롤러로 전송된 후, 다음 4초 동안 안정성이 모니터링됩니다. 제어 루프가 불안정한 경우, 제어 게인을 즉시 이전 값으로 복원합니다. 테스트를 통과하면, 조종자는 새로운 튜닝 결과를 사용할 수 있습니다.</li></ul><h3 id="enable-disable-autotune-switch-fixed-wing" tabindex="-1">Enable/Disable Autotune Switch (Fixed-Wing) <a class="header-anchor" href="#enable-disable-autotune-switch-fixed-wing" aria-label="Permalink to &quot;Enable/Disable Autotune Switch (Fixed-Wing)&quot;">​</a></h3><p>A remote control switch can be configured to enable/disable autotune (in any mode) using an RC AUX channel.</p><p>To map a switch:</p><ol><li>Select an RC channel on your controller to use for the autotune enable/disable switch.</li><li>Set <a href="./../advanced_config/parameter_reference.html#RC_MAP_AUX1">RC_MAP_AUX1</a> to match the RC channel for your switch (you can use any of <code>RC_MAP_AUX1</code> to <code>RC_MAP_AUX6</code>).</li><li>Set <a href="./../advanced_config/parameter_reference.html#FW_AT_MAN_AUX">FW_AT_MAN_AUX</a> to the selected channel (i.e. <code>1: Aux 1</code> if you mapped <code>RC_MAP_AUX1</code>).</li></ol><p>The auto tuner will be disabled when the switch is below <code>0.5</code> (on the manual control setpoint range of of <code>[-1, 1]</code> and enabled when the switch channel is above <code>0.5</code>.</p><p>If using an RC AUX switch to enable autotuning, make sure to <a href="#select-tuning-axis-fixed-wing">select the tuning axes</a> before flight.</p><h3 id="select-tuning-axis-fixed-wing" tabindex="-1">Select Tuning Axis (Fixed-Wing) <a class="header-anchor" href="#select-tuning-axis-fixed-wing" aria-label="Permalink to &quot;Select Tuning Axis (Fixed-Wing)&quot;">​</a></h3><p>Fixed-wing vehicles (only) can select which axes are tuned using the <a href="./../advanced_config/parameter_reference.html#FW_AT_AXES">FW_AT_AXES</a> bitmask parameter:</p><ul><li>비트 <code>0</code>: 롤(기본값)</li><li>비트 <code>1</code>: 피치(기본값)</li><li>비트 <code>2</code>: 요</li></ul><h2 id="개발자-sdk" tabindex="-1">개발자 SDK <a class="header-anchor" href="#개발자-sdk" aria-label="Permalink to &quot;개발자 SDK&quot;">​</a></h2><p>Autotuning is started using <a href="https://mavlink.io/en/messages/common.html#MAV_CMD_DO_AUTOTUNE_ENABLE" target="_blank" rel="noreferrer">MAV_CMD_DO_AUTOTUNE_ENABLE</a> MAVLink command.</p><p>At time of writing the message is resent at regular intervals to poll PX4 for progress: the <code>COMMAND_ACK</code> includes result that the operation is in progress, and also the progress as a percentage. The operation completes when the progress is 100% or the vehicle lands and disarms.</p><div class="info custom-block"><p class="custom-block-title">This is not a MAVLink-compliant implementation of a <a href="https://mavlink.io/en/services/command.html#long_running_commands" target="_blank" rel="noreferrer">command protocol long running command</a>. PX4 should stream progress as the protocol does not allow polling.</p></div><p>The feature is not yet supported by MAVSDK.</p><h2 id="배경-및-세부-사항" tabindex="-1">배경 및 세부 사항 <a class="header-anchor" href="#배경-및-세부-사항" aria-label="Permalink to &quot;배경 및 세부 사항&quot;">​</a></h2><p>PX4 uses <a href="./../flight_stack/controller_diagrams.html">PID controllers</a> (rate, attitude, velocity, and position) to calculate the outputs required to move a vehicle from its current estimated state to match a desired setpoint. The controllers must be well tuned in order to get the best performance out of a vehicle. In particular, a poorly tuned rate controller results in less stable flight in all modes, and takes longer to recover from disturbances.</p><p>Generally if you use a <a href="./../config/airframe.html">frame configuration</a> that is similar to your vehicle then the vehicle will be able to fly. However unless the configuration precisely matches your hardware you should tune the rate and attitude controllers. Tuning the velocity and position controllers is less important because they are less affected by vehicle dynamics, and the default tuning configuration for a similar airframe is often sufficient.</p><p>Autotuning provides an automatic mechanism to tune the rate and attitude controllers. It can be used to tune fixed-wing and multicopter vehicles, and VTOL vehicles when flying as a multicopter or as a fixed-wing (transition between modes must be manually tuned). In theory it should work for other vehicle types that have a rate controller, but currently only the above types are supported.</p><p>Automatic tuning works well for the multicopter and fixed-wing vehicle configurations supported by PX4, provided the frame is not too flexible (see <a href="#does-autotuning-work-for-all-supported-airframes">below for more information</a>).</p><p>The vehicle must be flying in an altitude-stabilized mode (such as <a href="./../flight_modes_mc/altitude.html">Altitude mode</a>, <a href="./../flight_modes_mc/hold.html">Hold mode</a>, or <a href="./../flight_modes_mc/position.html">Position mode</a>). The flight stack will apply a small disturbance to the vehicle in each axis and then attempt to calculate the new tuning parameters. For fixed-wing vehicles the new tuning is applied in-air by default, after which the vehicle tests the new settings and reverts the tuning if the controllers are not stable. For multicopter, the vehicle lands and applies the new tuning parameters after disarming; the pilot is expected to then take off carefully and test the tuning.</p><p>The tuning process takes about 40 seconds (<a href="#how-long-does-autotuning-take">between 19 and 68 seconds</a>). The default behaviour can be configured using <a href="#optional-configuration">parameters</a>.</p><h3 id="자주-묻는-질문" tabindex="-1">자주 묻는 질문 <a class="header-anchor" href="#자주-묻는-질문" aria-label="Permalink to &quot;자주 묻는 질문&quot;">​</a></h3><h4 id="어떤-기체-유형이-지원됩니까" tabindex="-1">어떤 기체 유형이 지원됩니까? <a class="header-anchor" href="#어떤-기체-유형이-지원됩니까" aria-label="Permalink to &quot;어떤 기체 유형이 지원됩니까?&quot;">​</a></h4><p>Autotuning is enabled for multicopter, fixed-wing, and hybrid VTOL fixed-wing vehicles.</p><p>While it is not yet enabled for other frame types, in theory it an be used with any frame that uses a rate controller.</p><h4 id="지원되는-모든-기체에-대해-자동-튜닝이-작동됩니까" tabindex="-1">지원되는 모든 기체에 대해 자동 튜닝이 작동됩니까? <a class="header-anchor" href="#지원되는-모든-기체에-대해-자동-튜닝이-작동됩니까" aria-label="Permalink to &quot;지원되는 모든 기체에 대해 자동 튜닝이 작동됩니까?&quot;">​</a></h4><p>The mathematical model used by autotuning to estimate the dynamics of the drone assumes this it is a linear system with no coupling between the axes (SISO), and with a limited complexity (2 poles and 2 zeros). If the real drone is too far from those conditions, the model will not be able to represent the real dynamics of the drone.</p><p>In practise, autotuning generally works well for fixed-wing and multicopter, provided the frame is not too flexible.</p><h4 id="자동-튜닝은-얼마나-걸립니까" tabindex="-1">자동 튜닝은 얼마나 걸립니까? <a class="header-anchor" href="#자동-튜닝은-얼마나-걸립니까" aria-label="Permalink to &quot;자동 튜닝은 얼마나 걸립니까?&quot;">​</a></h4><p>Tuning takes 5s-20s per axis (aborted if tuning could not be established in 20s) + 2s pause between each axis + 4s of testing if the new gains are applied in air.</p><p>A multicopter must tune all three axes, and by default does not test the new gains in-air. Tuning will therefore take between 19s (<code>5 + 2 + 5 + 2 + 5</code>) and 64s (<code>20x3 + 2x2</code>).</p><p>By default a fixed-wing vehicle tunes all three axes and then tests the new gains in-air. The range is therefore between 25s (<code>5 + 2 + 5 + 2 + 5 + 2 + 4</code>) and 70s (<code>20x3 + 3x2 + 4</code>).</p><p>Note however that the above settings are defaults. A multicopter can choose to run the tests in air, and a fixed-wing can choose not to. Further, a fixed-wing can choose to tune fewer axes.</p><p>Anecdotally, it usually takes around 40s for either vehicle.</p><h2 id="참고-항목" tabindex="-1">참고 항목: <a class="header-anchor" href="#참고-항목" aria-label="Permalink to &quot;참고 항목:&quot;">​</a></h2><ul><li><a href="./../config_mc/pid_tuning_guide_multicopter_basic.html">Multicopter PID 튜닝 가이드</a>(수동/간단)</li><li><a href="./../config_mc/pid_tuning_guide_multicopter.html">Multicopter PID 튜닝 가이드</a>(고급/상세)</li><li><a href="./../config_fw/pid_tuning_guide_fixedwing.html">고정익 PID 튜닝 가이드</a></li></ul>',67),d=[r,s,h];function c(u,f,m,p,g,_){return o(),n("div",null,d)}const v=i(l,[["render",c]]);export{y as __pageData,v as default};
