import{_ as s,c as i,o as a,ab as n}from"./chunks/framework.CUflZczI.js";const c=JSON.parse('{"title":"Integration Testing using MAVSDK","description":"","frontmatter":{},"headers":[],"relativePath":"en/test_and_ci/integration_testing_mavsdk.md","filePath":"en/test_and_ci/integration_testing_mavsdk.md"}'),t={name:"en/test_and_ci/integration_testing_mavsdk.md"},e=n(`<h1 id="integration-testing-using-mavsdk" tabindex="-1">Integration Testing using MAVSDK <a class="header-anchor" href="#integration-testing-using-mavsdk" aria-label="Permalink to &quot;Integration Testing using MAVSDK&quot;">​</a></h1><p>PX4 can be tested end to end to using integration tests based on <a href="https://mavsdk.mavlink.io" target="_blank" rel="noreferrer">MAVSDK</a>.</p><p>The tests are primarily developed against SITL and run in continuous integration (CI). In future we plan to generalise them for any platform/hardware.</p><p>The instructions below explain how to setup and run the tests locally.</p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><h3 id="setup-developer-environment" tabindex="-1">Setup Developer Environment <a class="header-anchor" href="#setup-developer-environment" aria-label="Permalink to &quot;Setup Developer Environment&quot;">​</a></h3><p>If you haven&#39;t done so already:</p><ul><li><p>Install the development toolchain for <a href="./../dev_setup/dev_env_linux_ubuntu.html">Linux</a> or <a href="./../dev_setup/dev_env_mac.html">macOS</a> (Windows not supported). <a href="./../sim_gazebo_classic/">Gazebo Classic</a> is required, and should be installed by default.</p></li><li><p><a href="./../dev_setup/building_px4.html#download-the-px4-source-code">Get the PX4 source code</a>:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/PX4/PX4-Autopilot.git</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --recursive</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PX4-Autopilot</span></span></code></pre></div></li></ul><h3 id="build-px4-for-testing" tabindex="-1">Build PX4 for Testing <a class="header-anchor" href="#build-px4-for-testing" aria-label="Permalink to &quot;Build PX4 for Testing&quot;">​</a></h3><p>To build PX4 source code for simulator testing, use:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DONT_RUN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> px4_sitl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gazebo-classic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mavsdk_tests</span></span></code></pre></div><h3 id="install-the-mavsdk-c-library" tabindex="-1">Install the MAVSDK C++ Library <a class="header-anchor" href="#install-the-mavsdk-c-library" aria-label="Permalink to &quot;Install the MAVSDK C++ Library&quot;">​</a></h3><p>The tests need the MAVSDK C++ library installed system-wide (e.g. in <code>/usr/lib</code> or <code>/usr/local/lib</code>).</p><p>Install either from binaries or source:</p><ul><li><a href="https://mavsdk.mavlink.io/main/en/cpp/quickstart.html" target="_blank" rel="noreferrer">MAVSDK &gt; C++ &gt; C++ QuickStart</a>: Install as a prebuilt library on supported platforms (recommended)</li><li><a href="https://mavsdk.mavlink.io/main/en/cpp/guide/build.html" target="_blank" rel="noreferrer">MAVSDK &gt; C++ Guide &gt; Building from Source</a>: Build C++ library from source.</li></ul><h2 id="run-all-px4-tests" tabindex="-1">Run All PX4 Tests <a class="header-anchor" href="#run-all-px4-tests" aria-label="Permalink to &quot;Run All PX4 Tests&quot;">​</a></h2><p>To run all SITL tests as defined in <a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/test/mavsdk_tests/configs/sitl.json" target="_blank" rel="noreferrer">sitl.json</a>, do:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test/mavsdk_tests/mavsdk_test_runner.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test/mavsdk_tests/configs/sitl.json</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --speed-factor</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span></code></pre></div><p>This will list all of the tests and then run them sequentially.</p><p>To see all possible command line arguments use the <code>-h</code> argument:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test/mavsdk_tests/mavsdk_test_runner.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">usage:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mavsdk_test_runner.py</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-h] [--log-dir LOG_DIR] [--speed-factor SPEED_FACTOR] [--iterations ITERATIONS] [--abort-early] [--gui] [--model MODEL]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                             [--case CASE] [--debugger DEBUGGER] [--verbose]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                             config_file</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">positional</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> arguments:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  config_file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           JSON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">optional</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> arguments:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -h,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --help</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            show</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> message</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --log-dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> LOG_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Directory</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> files</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --speed-factor</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SPEED_FACTOR</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                        how</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fast</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> simulation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --iterations</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ITERATIONS</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                        how</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> often</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> all</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tests</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --abort-early</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         abort</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> first</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unsuccessful</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --gui</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                 display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> visualization</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> simulation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --model</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MODEL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         only</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tests</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> model</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CASE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           only</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tests</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> case</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --debugger</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DEBUGGER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   choice</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> valgrind,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> callgrind,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gdb,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lldb</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --verbose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">             enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> more</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> verbose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> output</span></span></code></pre></div><h2 id="run-a-single-test" tabindex="-1">Run a Single Test <a class="header-anchor" href="#run-a-single-test" aria-label="Permalink to &quot;Run a Single Test&quot;">​</a></h2><p>Run a single test by specifying the <code>model</code> and test <code>case</code> as command line options. For example, to test flying a tailsitter in a mission you might run:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test/mavsdk_tests/mavsdk_test_runner.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test/mavsdk_tests/configs/sitl.json</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --speed-factor</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --model</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tailsitter</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Fly VTOL mission&#39;</span></span></code></pre></div><p>The easiest way to find out the current set of models and their associated test cases is to run all PX4 tests <a href="#run-all-px4-tests">as shown above</a> (note, you can then cancel the build if you wish to test just one).</p><p>At time of writing the list generated by running all tests is:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">About</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 39</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cases</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> selected</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (1 </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">iteration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> iris:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Land on GPS lost during mission (baro height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Land on GPS lost during mission (GPS height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on mag lost during mission&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on baro lost during mission (baro height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on baro lost during mission (GPS height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on baro stuck during mission (baro height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on baro stuck during mission (GPS height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Takeoff and Land&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Fly square Multicopter Missions including RTL&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Fly square Multicopter Missions with manual RTL&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Fly straight Multicopter Mission&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Offboard takeoff and land&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Offboard position control&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Fly forward in position control&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Fly forward in altitude control&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> standard_vtol:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Land on GPS lost during mission (baro height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Land on GPS lost during mission (GPS height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on mag lost during mission&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on baro lost during mission (baro height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on baro lost during mission (GPS height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on baro stuck during mission (baro height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on baro stuck during mission (GPS height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Takeoff and Land&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Fly square Multicopter Missions including RTL&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Fly square Multicopter Missions with manual RTL&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Fly forward in position control&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Fly forward in altitude control&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tailsitter:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Land on GPS lost during mission (baro height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Land on GPS lost during mission (GPS height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on mag lost during mission&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on baro lost during mission (baro height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on baro lost during mission (GPS height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on baro stuck during mission (baro height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Continue on baro stuck during mission (GPS height mode)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Takeoff and Land&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Fly square Multicopter Missions including RTL&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Fly square Multicopter Missions with manual RTL&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Fly forward in position control&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Fly forward in altitude control&#39;</span></span></code></pre></div><h2 id="implementation-notes" tabindex="-1">Implementation Notes <a class="header-anchor" href="#implementation-notes" aria-label="Permalink to &quot;Implementation Notes&quot;">​</a></h2><ul><li><p>The tests are invoked from the test runner script <a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/test/mavsdk_tests/mavsdk_test_runner.py" target="_blank" rel="noreferrer">mavsdk_test_runner.py</a>, which is written in Python.</p><p>In addition to MAVSDK, this runner starts <code>px4</code> as well as Gazebo for SITL tests, and collects the logs of these processes.</p></li><li><p>The test runner is a C++ binary that contains:</p><ul><li>The <a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/test/mavsdk_tests/test_main.cpp" target="_blank" rel="noreferrer">main</a> function to parse the arguments.</li><li>An abstraction around MAVSDK called <a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/test/mavsdk_tests/autopilot_tester.h" target="_blank" rel="noreferrer">autopilot_tester</a>.</li><li>The actual tests using the abstraction around MAVSDK as e.g. <a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/test/mavsdk_tests/test_multicopter_mission.cpp" target="_blank" rel="noreferrer">test_multicopter_mission.cpp</a>.</li><li>The tests use the <a href="https://github.com/catchorg/Catch2" target="_blank" rel="noreferrer">catch2</a> unit testing framework. The reasons for using this framework are: <ul><li>Asserts (<code>REQUIRE</code>) which are needed to abort a test can be inside of functions (and not just in the top level test as is <a href="https://github.com/google/googletest/blob/main/docs/advanced.md#assertion-placement" target="_blank" rel="noreferrer">the case with gtest</a>).</li><li>Dependency management is easier because <em>catch2</em> can just be included as a header-only library.</li><li><em>Catch2</em> supports <a href="https://github.com/catchorg/Catch2/blob/devel/docs/test-cases-and-sections.md#tags" target="_blank" rel="noreferrer">tags</a>, which allows for flexible composition of tests.</li></ul></li></ul></li></ul><p>Terms used:</p><ul><li>&quot;model&quot;: This is the selected Gazebo model, e.g. <code>iris</code>.</li><li>&quot;test case&quot;: This is a <a href="https://github.com/catchorg/Catch2/blob/master/docs/test-cases-and-sections.md" target="_blank" rel="noreferrer">catch2 test case</a>.</li></ul>`,31),l=[e];function h(p,k,r,o,F,d){return a(),i("div",null,l)}const u=s(t,[["render",h]]);export{c as __pageData,u as default};
