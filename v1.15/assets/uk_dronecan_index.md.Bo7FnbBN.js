import{_ as e}from"./chunks/qgc_can_parameters.BwgXa__a.js";import{_ as a,c as r,o as n,ab as o}from"./chunks/framework.CUflZczI.js";const N=JSON.parse('{"title":"DroneCAN","description":"","frontmatter":{},"headers":[],"relativePath":"uk/dronecan/index.md","filePath":"uk/dronecan/index.md"}'),t={name:"uk/dronecan/index.md"},l=o('<h1 id="dronecan" tabindex="-1">DroneCAN <a class="header-anchor" href="#dronecan" aria-label="Permalink to &quot;DroneCAN&quot;">​</a></h1><p><a href="https://dronecan.github.io/" target="_blank" rel="noreferrer">DroneCAN</a> це відкритий програмний протокол зв&#39;язку для контролерів польоту та інших пристроїв <a href="./../can/">CAN</a> на транспортному засобі для взаємодії між собою.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><ul><li>DroneCAN не активовано за замовчуванням, так само як і конкретні сенсори та функції, які його використовують. Для отримання інформації щодо налаштування дивіться <a href="#px4-configuration">Конфігурація PX4</a>.</li><li>PX4 вимагає SD-карту для активації динамічного виділення вузлів та оновлення прошивки. Карта SD не використовується під час польоту.</li></ul></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>DroneCAN раніше відомий як UAVCAN v0 (або просто UAVCAN). Ім&#39;я було змінено в 2022 році.</p></div><h2 id="переваги-dronecan" tabindex="-1">Переваги DroneCAN <a class="header-anchor" href="#переваги-dronecan" aria-label="Permalink to &quot;Переваги DroneCAN&quot;">​</a></h2><p>Підключення периферійних пристроїв через DroneCAN має багато переваг:</p><ul><li>Багато різних сенсорів та приводів вже підтримуються.</li><li>CAN був спеціально розроблений для забезпечення надійного та надійного підключення на відносно великі відстані. Це дозволяє безпечне використання ESC на більших транспортних засобах та забезпечує резервне забезпечення зв&#39;язку.</li><li>Автобус є бідирекціональним, що дозволяє виконувати моніторинг стану здоров&#39;я, діагностику та телеметрію обертів на хвилину (RPM).</li><li>Проводка менше складна, оскільки ви можете мати один шину для підключення всіх ваших ESC і інших периферійних пристроїв DroneCAN.</li><li>Налаштування стає простіше, оскільки ви налаштовуєте нумерацію ESC, обертаючи кожен двигун вручну.</li><li>Це дозволяє користувачам налаштовувати та оновлювати прошивку всіх пристроїв, підключених через CAN, централізовано через PX4.</li></ul><h2 id="підтримуване-обладнання" tabindex="-1">Підтримуване обладнання <a class="header-anchor" href="#підтримуване-обладнання" aria-label="Permalink to &quot;Підтримуване обладнання&quot;">​</a></h2><p>Підтримуються найпоширеніші типи периферійних пристроїв (датчики, ESCs та сервоприводи), які відповідають стандартам DroneCAN/UAVCAN v0.</p><p>Підтримувана апаратура включає (це не є вичерпним списком):</p><ul><li><a href="./../dronecan/escs.html">Контролери ESC/двигуна</a></li><li>Датчики швидкості повітря <ul><li><a href="https://github.com/thiemar/airspeed" target="_blank" rel="noreferrer">Датчик швидкості Thiemar</a></li></ul></li><li>Приймачі ГНСС для ГНСС (GPS, GLONASS, BeiDou та інше) <ul><li><a href="./../dronecan/ark_gps.html">ARK GPS</a></li><li><a href="./../dronecan/ark_rtk_gps.html">ARK RTK GPS</a></li><li><a href="https://www.cubepilot.org/#/here/here3" target="_blank" rel="noreferrer">CubePilot Here3</a></li><li><a href="https://doc.cuav.net/gps/neo-series-gnss/en/neo-v2-pro.html" target="_blank" rel="noreferrer">CUAV NEO v2 Pro GNSS</a></li><li><a href="./../gps_compass/gps_cuav_neo_3pro.html">CUAV NEO 3 Pro GPS</a></li><li><a href="./../gps_compass/gps_cuav_neo_3x.html">CUAV NEO 3X GPS</a></li><li><a href="./../gps_compass/rtk_gps_cuav_c-rtk2.html">CUAV C-RTK2 PPK/RTK GNSS</a></li><li><a href="./../dronecan/holybro_m8n_gps.html">Holybro DroneCAN M8N GPS</a></li><li><a href="https://holybro.com/products/dronecan-m9n-gps" target="_blank" rel="noreferrer">Holybro DroneCAN M9N GPS</a></li><li><a href="https://holybro.com/products/dronecan-h-rtk-f9p-rover" target="_blank" rel="noreferrer">Holybro DroneCAN H-RTK F9P Rover</a></li><li><a href="https://holybro.com/products/dronecan-h-rtk-f9p-helical" target="_blank" rel="noreferrer">Holybro DroneCAN H-RTK F9P Helical</a></li><li><a href="https://zubax.com/products/gnss_2" target="_blank" rel="noreferrer">Zubax GNSS</a></li></ul></li><li>Монітори живлення <ul><li><a href="./../dronecan/pomegranate_systems_pm.html">Силовий модуль Pomegranate Systems</a></li><li><a href="./../dronecan/cuav_can_pmu.html">Модуль живлення CUAV CAN PMU</a></li></ul></li><li>Компас <ul><li><a href="https://holybro.com/products/dronecan-rm3100-compass" target="_blank" rel="noreferrer">Професійний компас Holybro RM3100</a></li></ul></li><li>Датчики відстані <ul><li><a href="./ark_flow.html">ARK Flow</a></li><li><a href="./../dronecan/avanon_laser_interface.html">Авіоніка Анонімний Лазерний Альтиметр UAVCAN Інтерфейс</a></li></ul></li><li>Оптичний потік <ul><li><a href="./ark_flow.html">Ark Flow</a></li></ul></li><li>Загальний вузол CAN (дозволяє використання датчиків I2C, SPI, UART на шині CAN). <ul><li><a href="./../dronecan/ark_cannode.html">ARK CANnode</a></li></ul></li></ul><h2 id="налаштування-обладнання" tabindex="-1">Налаштування обладнання <a class="header-anchor" href="#налаштування-обладнання" aria-label="Permalink to &quot;Налаштування обладнання&quot;">​</a></h2><p>DroneCAN працює через мережу CAN. Апаратне забезпечення DroneCAN повинно бути підключене, як описано в <a href="./../can/#wiring">CAN &gt; Проводка</a>.</p><h2 id="виділення-ідентифікатора-вузла" tabindex="-1">Виділення ідентифікатора вузла <a class="header-anchor" href="#виділення-ідентифікатора-вузла" aria-label="Permalink to &quot;Виділення ідентифікатора вузла&quot;">​</a></h2><p>Кожен пристрій DroneCAN повинен бути налаштований з унікальним ідентифікатором вузла <em>node id</em>, який є унікальним на транспортному засобі.</p><p>Більшість пристроїв підтримують <em>Динамічне призначення вузла (DNA)</em>, що дозволяє PX4 автоматично налаштовувати ідентифікатор вузла кожного виявленого периферійного пристрою при запуску системи. Консультуйте документацію виробника, щоб дізнатися, чи підтримує ваш пристрій ДНК та як її увімкнути. Багато пристроїв автоматично перейдуть на ДНК, якщо ідентифікатор вузла встановлено на 0. PX4 увімкне вбудований сервер виділення, якщо параметр <a href="./../advanced_config/parameter_reference.html#UAVCAN_ENABLE">UAVCAN_ENABLE</a> встановлений на значення &gt; 1 (встановлено на 2 або 3).</p><p>Деякі пристрої не підтримують ДНК. Додатково, в певних критичних сценаріях ви можливо віддасте перевагу ручній налаштування ідентифікаторів вузлів заздалегідь замість покладанняся на сервер динамічного виділення. Якщо ви бажаєте повністю вимкнути ДНК, встановіть <code>UAVCAN_ENABLE</code> на <code>1</code> і вручну встановіть кожен ідентифікатор вузла на унікальне значення. Якщо ДНК все ще працює і певні пристрої потребують ручної конфігурації, присвойте цим пристроям значення, більше, ніж загальна кількість пристроїв DroneCAN, щоб уникнути конфліктів.</p><div class="info custom-block"><p class="custom-block-title">Ідентифікатор вузла PX4 можна налаштувати, використовуючи параметр <a href="./../advanced_config/parameter_reference.html#UAVCAN_NODE_ID">UAVCAN_NODE_ID</a>. Параметр за замовчуванням встановлено на 1.</p></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>На момент написання PX4 не запускає сервер розподілу вузлів на порту CAN2. Це означає, що якщо у вас є пристрій, який підключений <em>тільки</em> до CAN2 (не резервно до CAN1 і CAN2), вам потрібно буде вручну налаштувати його ідентифікатор вузла.</p></div><h2 id="конфігурація-px4" tabindex="-1">Конфігурація PX4 <a class="header-anchor" href="#конфігурація-px4" aria-label="Permalink to &quot;Конфігурація PX4&quot;">​</a></h2><p>DroneCAN налаштовується на PX4 шляхом <a href="./../advanced_config/parameters.html">встановлення конкретних параметрів PX4</a> в QGroundControl. Вам потрібно буде увімкнути сам DroneCAN, разом із підписками та публікаціями для будь-яких функцій, які ви використовуєте.</p><div class="info custom-block"><p class="custom-block-title">У деяких випадках можливо знадобиться налаштувати параметри на підключених пристроях CAN (їх також можна <a href="#qgc-cannode-parameter-configuration">встановити за допомогою QGC</a>).</p></div><h3 id="увімкнення-dronecan" tabindex="-1">Увімкнення DroneCAN <a class="header-anchor" href="#увімкнення-dronecan" aria-label="Permalink to &quot;Увімкнення DroneCAN&quot;">​</a></h3><p>Щоб увімкнути драйвер PX4 DroneCAN, встановіть параметр <a href="./../advanced_config/parameter_reference.html#UAVCAN_ENABLE">UAVCAN_ENABLE</a>:</p><ul><li><code>0</code>: Вимкнено драйвер DroneCAN</li><li><code>1</code>: Драйвер DroneCAN увімкнено для сенсорів, <a href="#node-id-allocation">сервер DNA</a> вимкнено</li><li><code>2</code>: Драйвер DroneCAN увімкнено для сенсорів, сервер DNA увімкнено</li><li><code>3</code>: Драйвер DroneCAN увімкнено для сенсорів та ESC, сервер DNA увімкнено</li></ul><p><code>2</code> або <code>3</code> рекомендовані, якщо підтримується ДНК.</p><h3 id="підписки-публікаціі-dronecan" tabindex="-1">Підписки &amp; Публікації DroneCan <a class="header-anchor" href="#підписки-публікаціі-dronecan" aria-label="Permalink to &quot;Підписки &amp;  Публікації DroneCan&quot;">​</a></h3><p>PX4 не публікує або підписується на повідомлення DroneCAN, які <em>можуть</em> бути потрібні за замовчуванням, щоб уникнути спаму на шині CAN. Замість цього вам потрібно увімкнути публікацію або підписку на повідомлення, пов&#39;язані з певною функцією, встановивши відповідний параметр <a href="./../advanced_config/parameter_reference.html#uavcan">UAVCAN</a>.</p><div class="info custom-block"><p class="custom-block-title">Параметри датчика можуть не існувати (бути видимими в QGC), поки ви не увімкнете пов&#39;язану підписку на датчик DroneCAN <a href="#sensors">сенсор</a>!</p><p>Наприклад, <a href="./../advanced_config/parameter_reference.html#SENS_FLOW_MINHGT">SENS_FLOW_MINHGT</a> не існує до тих пір, поки не буде увімкнено <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_FLOW">UAVCAN_SUB_FLOW</a>.</p></div><p>Наприклад, для використання підключеної розумної батареї DroneCAN ви активуєте параметр <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_BAT">UAVCAN_SUB_BAT</a>, який підписує PX4 на отримання повідомлень DroneCAN <a href="https://dronecan.github.io/Specification/7._List_of_standard_data_types/#batteryinfo" target="_blank" rel="noreferrer">BatteryInfo</a>. Якщо використовується периферійний пристрій, який повинен знати, чи ввімкнено PX4, вам потрібно встановити параметр <a href="./../advanced_config/parameter_reference.html#UAVCAN_PUB_ARM">UAVCAN_PUB_ARM</a>, щоб PX4 почав публікувати повідомлення <a href="https://dronecan.github.io/Specification/7._List_of_standard_data_types/#armingstatus" target="_blank" rel="noreferrer">ArmingStatus</a>.</p><p>Назви параметрів передують префікси <code>UAVCAN_SUB_</code> та <code>UAVCAN_PUB_</code>, щоб позначити, чи вони дозволяють PX4 підписку або публікацію. Решта назви вказує на конкретне повідомлення/функцію, яка встановлюється.</p><p>Периферійні пристрої DroneCAN, підключені до PX4, також можуть бути <a href="#qgc-cannode-parameter-configuration">налаштовані за допомогою параметрів через QGC</a>. За установою, параметри, які називаються префіксом <a href="./../advanced_config/parameter_reference.html#CANNODE_BITRATE">CANNODE_</a>, мають попередньо визначене значення і можуть бути задокументовані в посиланні на параметри. Параметри <code>CANNODE_</code>, які починаються з префіксів <code>CANNODE_PUB_</code> та <code>CANNODE_SUB_</code>, дозволяють периферійному пристрою публікувати або підписуватися на пов&#39;язане повідомлення DroneCAN. Ці дозволяють пристроям DroneCAN налаштовуватися для підписки та публікації тільки тих повідомлень, які їм дійсно потрібні (так само, як PX4 використовує відповідні параметри <code>UAVCAN_PUB_</code>/<code>UAVCAN_SUB_</code>). Зверніть увагу, що периферійний пристрій може не використовувати параметри <code>CANNODE_</code>, у такому випадку він може публікувати / підписуватися на певні повідомлення, незалежно від того, чи вони потрібні.</p><p>Наступні розділи надають додаткові відомості про параметри периферійних пристроїв PX4 та DroneCAN, які використовуються для увімкнення певних функцій.</p><h4 id="датчики" tabindex="-1">Датчики <a class="header-anchor" href="#датчики" aria-label="Permalink to &quot;Датчики&quot;">​</a></h4><p>Параметри/підписки сенсора DroneCAN, які можна активувати (у PX4 v1.14):</p><ul><li><a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_ASPD">UAVCAN_SUB_ASPD</a>: Швидкість повітря</li><li><a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_BARO">UAVCAN_SUB_BARO</a>: Барометр</li><li><a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_BAT">UAVCAN_SUB_BAT</a>: Монітор акумулятора/Модуль живлення</li><li><a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_BTN">UAVCAN_SUB_BTN</a>: Кнопка</li><li><a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_DPRES">UAVCAN_SUB_DPRES</a>: диференційний тиск</li><li><a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_FLOW">UAVCAN_SUB_FLOW</a>: Оптичний потік</li><li><a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_GPS">UAVCAN_SUB_GPS</a>: GPS</li><li><a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_HYGRO">UAVCAN_SUB_HYGRO</a>: Гігрометр</li><li><a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_ICE">UAVCAN_SUB_ICE</a>: Внутрішньосгорювальний двигун (ICE).</li><li><a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_IMU">UAVCAN_SUB_IMU</a>: ІМУ</li><li><a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_MAG">UAVCAN_SUB_MAG</a>: Магнітометр (компас)</li><li><a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_RNG">UAVCAN_SUB_RNG</a>: Дальномер (датчик відстані).</li></ul><h4 id="gps" tabindex="-1">GPS <a class="header-anchor" href="#gps" aria-label="Permalink to &quot;GPS&quot;">​</a></h4><p>Параметри PX4 DroneCAN:</p><ul><li>Увімкніть <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_GPS">UAVCAN_SUB_GPS</a>.</li><li>Увімкніть <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_MAG">UAVCAN_SUB_MAG</a>, якщо модуль GPS має вбудований компас.</li></ul><p>Параметр GPS CANNODE (<a href="#qgc-cannode-parameter-configuration">встановлені за допомогою QGC</a>):</p><ul><li>Встановіть <a href="./../advanced_config/parameter_reference.html#CANNODE_TERM">CANNODE_TERM</a> на <code>1</code> для останнього вузла на шині CAN.</li></ul><p>Інші параметри PX4:</p><ul><li>Якщо GPS не розташований в центрі ваги транспортного засобу, ви можете врахувати зміщення, використовуючи <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_POS_X">EKF2_GPS_POS_X</a>, <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_POS_Y">EKF2_GPS_POS_Y</a> та <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_POS_Z">EKF2_GPS_POS_Z</a>.</li><li>Якщо модуль GPS надає інформацію про курс, ви можете увімкнути об&#39;єднання курсу GPS, встановивши біт 3 <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_CTRL">EKF2_GPS_CTRL</a> на true.</li></ul><h4 id="rtk-gps" tabindex="-1">RTK-GPS <a class="header-anchor" href="#rtk-gps" aria-label="Permalink to &quot;RTK-GPS&quot;">​</a></h4><p>Встановіть ті ж параметри, що й для <a href="#gps">GPS</a> вище. Крім того, вам може знадобитися встановити наступні параметри в залежності від того, чи є ваша налаштування RTK Ровером і Фіксованою Базою, або Ровером і Рухомою Базою, або обома.</p><h5 id="ровер-та-фіксована-база" tabindex="-1">Ровер та фіксована база <a class="header-anchor" href="#ровер-та-фіксована-база" aria-label="Permalink to &quot;Ровер та фіксована база&quot;">​</a></h5><p>Позиція ровера встановлюється за допомогою RTCM-повідомлень від базового модуля RTK (базовий модуль підключений до QGC, який надсилає інформацію RTCM до PX4 через MAVLink).</p><p>Параметри PX4 DroneCAN:</p><ul><li><a href="./../advanced_config/parameter_reference.html#UAVCAN_PUB_RTCM">UAVCAN_PUB_RTCM</a>: <ul><li>Робить PX4 публікує повідомлення RTCM (<a href="https://dronecan.github.io/Specification/7._List_of_standard_data_types/#rtcmstream" target="_blank" rel="noreferrer">RTCMStream</a>) на шину (яку він отримує від базового модуля RTK через QGC).</li></ul></li></ul><p>Параметри модуля Rover (також <a href="#qgc-cannode-parameter-configuration">встановлені за допомогою QGC</a>):</p><ul><li><a href="./../advanced_config/parameter_reference.html#CANNODE_SUB_RTCM">CANNODE_SUB_RTCM</a> повідомляє приймачу, що він повинен підписатися на повідомлення <a href="https://dronecan.github.io/Specification/7._List_of_standard_data_types/#rtcmstream" target="_blank" rel="noreferrer">RTCMStream</a> RTCM на шині (від рухомої бази).</li></ul><div class="info custom-block"><p class="custom-block-title">Ви можете замість цього використовувати <a href="./../advanced_config/parameter_reference.html#UAVCAN_PUB_MBD">UAVCAN_PUB_MBD</a> та <a href="./../advanced_config/parameter_reference.html#CANNODE_SUB_MBD">CANNODE_SUB_MBD</a>, які також публікують повідомлення RTCM (це новіше). Використання повідомлення <a href="https://dronecan.github.io/Specification/7._List_of_standard_data_types/#rtcmstream" target="_blank" rel="noreferrer">RTCMStream</a> означає, що ви можете реалізувати рухому базу (див. нижче) одночасно.</p></div><h5 id="ровер-та-рухома-база" tabindex="-1">Ровер та Рухома База <a class="header-anchor" href="#ровер-та-рухома-база" aria-label="Permalink to &quot;Ровер та Рухома База&quot;">​</a></h5><p>Як обговорювалося в <a href="./../gps_compass/u-blox_f9p_heading.html">RTK GPS Heading with Dual u-blox F9P</a>, у транспортному засобі можуть бути два модулі RTK для обчислення кута повороту за допомогою GPS. У цьому налаштуванні транспортний засіб має <em>рухому базу</em> RTK GPS та <em>роувер</em> RTK GPS.</p><p>Ці параметри можуть бути <a href="#qgc-cannode-parameter-configuration">встановлені на рухомій базі та приймачі RTK CAN-вузлах</a> відповідно:</p><ul><li><a href="./../advanced_config/parameter_reference.html#CANNODE_PUB_MBD">CANNODE_PUB_MBD</a> спричинює те, що рухома базова одиниця GPS публікує повідомлення RTCM <a href="https://dronecan.github.io/Specification/7._List_of_standard_data_types/#movingbaselinedata" target="_blank" rel="noreferrer">MovingBaselineData</a> на шину (для ровера)</li><li><a href="./../advanced_config/parameter_reference.html#CANNODE_SUB_MBD">CANNODE_SUB_MBD</a> повідомляє роверу, що він повинен підписатися на повідомлення RTCM <a href="https://dronecan.github.io/Specification/7._List_of_standard_data_types/#movingbaselinedata" target="_blank" rel="noreferrer">MovingBaselineData</a> на шині (від рухомої бази).</li></ul><p>Для PX4 вам також знадобиться встановити <a href="./../advanced_config/parameter_reference.html#GPS_YAW_OFFSET">GPS_YAW_OFFSET</a>, щоб вказати відносне положення рухомої бази та ровера: 0, якщо ваш Rover знаходиться перед вашою Рухомою Базою, 90, якщо Rover зправа від Рухомої Бази, 180, якщо Rover ззаду Рухомої Бази, або 270, якщо Rover зліва від Рухомої Бази.</p><h4 id="барометр" tabindex="-1">Барометр <a class="header-anchor" href="#барометр" aria-label="Permalink to &quot;Барометр&quot;">​</a></h4><p>Параметри PX4 DroneCAN:</p><ul><li>Увімкніть <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_BARO">UAVCAN_SUB_BARO</a>.</li></ul><h4 id="компас" tabindex="-1">Компас <a class="header-anchor" href="#компас" aria-label="Permalink to &quot;Компас&quot;">​</a></h4><p>Параметри PX4 DroneCAN:</p><ul><li>Увімкніть <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_MAG">UAVCAN_SUB_MAG</a>.</li></ul><h4 id="датчик-відстані-дальніметр" tabindex="-1">Датчик відстані/Дальніметр <a class="header-anchor" href="#датчик-відстані-дальніметр" aria-label="Permalink to &quot;Датчик відстані/Дальніметр&quot;">​</a></h4><p>Параметри PX4 DroneCAN:</p><ul><li>Увімкніть <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_RNG">UAVCAN_SUB_RNG</a>.</li><li>Встановіть <a href="./../advanced_config/parameter_reference.html#UAVCAN_RNG_MIN">UAVCAN_RNG_MIN</a> та <a href="./../advanced_config/parameter_reference.html#UAVCAN_RNG_MAX">UAVCAN_RNG_MAX</a>, мінімальну та максимальну дистанцію сенсора відстані.</li></ul><p>Інші параметри PX4:</p><ul><li>Якщо дальномер не розташований в центрі ваги транспортного засобу, ви можете врахувати зміщення, використовуючи <a href="./../advanced_config/parameter_reference.html#EKF2_RNG_POS_X">EKF2_RNG_POS_X</a>, <a href="./../advanced_config/parameter_reference.html#EKF2_RNG_POS_Y">EKF2_RNG_POS_Y</a> та <a href="./../advanced_config/parameter_reference.html#EKF2_RNG_POS_Z">EKF2_RNG_POS_Z</a>.</li><li>Інші параметри <code>EKF2_RNG_*</code> можуть бути важливими, у такому випадку вони повинні бути задокументовані з конкретним дальномером.</li></ul><h4 id="оптичнии-потік-sensor" tabindex="-1">Оптичний потік Sensor <a class="header-anchor" href="#оптичнии-потік-sensor" aria-label="Permalink to &quot;Оптичний потік Sensor&quot;">​</a></h4><p>Параметри PX4 DroneCAN:</p><ul><li>Увімкніть <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_FLOW">UAVCAN_SUB_FLOW</a>.</li></ul><p>Інші параметри PX4:</p><ul><li>Встановіть <a href="./../advanced_config/parameter_reference.html#SENS_FLOW_MINHGT">SENS_FLOW_MINHGT</a> та <a href="./../advanced_config/parameter_reference.html#SENS_FLOW_MAXHGT">SENS_FLOW_MAXHGT</a>, мінімальну та максимальну висоту датчика потоку.</li><li>Встановіть <a href="./../advanced_config/parameter_reference.html#SENS_FLOW_MAXR">SENS_FLOW_MAXR</a> максимальну кутову швидкість потоку датчика.</li><li>Увімкніть об&#39;єднання оптичного потоку, встановивши <a href="./../advanced_config/parameter_reference.html#EKF2_OF_CTRL">EKF2_OF_CTRL</a>.</li><li>Щоб вимкнути підтримку GPS (необов&#39;язково), встановіть <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_CTRL">EKF2_GPS_CTRL</a> на <code>0</code>.</li><li>Якщо оптичний потік не розташований в центрі ваги транспортного засобу, ви можете врахувати зміщення, використовуючи <a href="./../advanced_config/parameter_reference.html#EKF2_OF_POS_X">EKF2_OF_POS_X</a>, <a href="./../advanced_config/parameter_reference.html#EKF2_OF_POS_Y">EKF2_OF_POS_Y</a> та <a href="./../advanced_config/parameter_reference.html#EKF2_OF_POS_Z">EKF2_OF_POS_Z</a>.</li></ul><p>Оптичні датчики потоку потребують даних дальномера. Однак дальномер не обов&#39;язково повинен бути частиною того ж модуля, і якщо він не є, то може бути не підключений через DroneCAN. Якщо дальномір підключений через DroneCAN (чи це вбудовано або окремо), вам також потрібно буде активувати його, як описано в розділі <a href="#distance-sensor-range-finder">дальномір</a> (вище).</p><h4 id="периферіине-озброєння" tabindex="-1">Периферійне озброєння <a class="header-anchor" href="#периферіине-озброєння" aria-label="Permalink to &quot;Периферійне озброєння&quot;">​</a></h4><p>Параметри PX4 DroneCAN:</p><ul><li><a href="./../advanced_config/parameter_reference.html#UAVCAN_PUB_ARM">UAVCAN_PUB_ARM</a> (<a href="https://dronecan.github.io/Specification/7._List_of_standard_data_types/#armingstatus" target="_blank" rel="noreferrer">Статус зброї</a>): Опублікуйте, коли використовуєте компоненти DroneCAN, які вимагають статусу зброї PX4 як умову для використання.</li></ul><h3 id="esc-сервоприводи" tabindex="-1">ESC &amp; сервоприводи <a class="header-anchor" href="#esc-сервоприводи" aria-label="Permalink to &quot;ESC &amp; сервоприводи&quot;">​</a></h3><p><a href="./../dronecan/escs.html">Двигуни DroneCAN та сервоприводи</a> потребують налаштування <a href="./../config/actuators.html">порядку двигунів та виходів сервоприводів</a>.</p><h2 id="налаштування-параметрів-cannode-qgc" tabindex="-1">Налаштування параметрів CANNODE QGC <a class="header-anchor" href="#налаштування-параметрів-cannode-qgc" aria-label="Permalink to &quot;Налаштування параметрів CANNODE QGC&quot;">​</a></h2><p>QGroundControl може переглядати та змінювати параметри, що належать до пристроїв CAN, підключених до автопілота, за умови, що пристрої підключені до автопілота до запуску QGC.</p><p>Контролери CAN відображаються в окремих розділах у <a href="./../advanced_config/parameters.html">Параметри транспортного засобу &gt; Параметри</a> під назвою <em>Компонент X</em>, де X - ідентифікатор вузла. Наприклад, на знімку екрану нижче показані параметри для CAN GPS з ідентифікатором вузла 125 (після групування параметрів <em>Стандарт</em>, <em>Система</em> та <em>Розробник</em>).</p><p><img src="'+e+'" alt="QGC Parameter showing selected DroneCAN node"></p><h2 id="налаштування-пристрою" tabindex="-1">Налаштування пристрою <a class="header-anchor" href="#налаштування-пристрою" aria-label="Permalink to &quot;Налаштування пристрою&quot;">​</a></h2><p>Більшість вузлів DroneCAN не потребують додаткової настройки, якщо це не вказано у їх документації, специфічній для пристрою.</p><h2 id="оновлення-прошивки" tabindex="-1">Оновлення прошивки <a class="header-anchor" href="#оновлення-прошивки" aria-label="Permalink to &quot;Оновлення прошивки&quot;">​</a></h2><p>PX4 може оновлювати прошивку пристрою через DroneCAN. Щоб оновити пристрій, все, що потрібно зробити, це скопіювати бінарний файл прошивки в кореневий каталог SD-карти контролера польоту та перезавантажити його.</p><p>Під час завантаження контролер польоту автоматично передасть прошивку на пристрій та оновить його. Якщо операція вдалася, бінарний файл прошивки буде видалено з кореневого каталогу, і на SD-картці буде файл з назвою <strong>XX.bin</strong> у каталозі <strong>/ufw</strong>.</p><h2 id="відстеження-проблем" tabindex="-1">Відстеження проблем <a class="header-anchor" href="#відстеження-проблем" aria-label="Permalink to &quot;Відстеження проблем&quot;">​</a></h2><p><strong>Q</strong>: Мої пристрої DroneCAN не працюють.</p><p><strong>A</strong>: Перевірте, що параметр <code>UAVCAN_ENABLE</code> встановлено правильно. Щоб побачити список пристроїв/вузлів, які PX4 виявив на шині CAN, відкрийте NSH (тобто перейдіть до консолі MAVLink QGroundControl) та введіть <code>uavcan status</code>.</p><hr><p><strong>Q</strong>: Сервер DNA не видає ідентифікатори вузлів.</p><p><strong>A</strong>: PX4 вимагає SD-карту для виконання динамічного виділення вузлів. Переконайтеся, що у вас (працюючий) вставлений і перезавантажтеся.</p><hr><p><strong>Q</strong>: Двигуни не крутяться під час увімкнення.</p><p><strong>A</strong>: Переконайтеся, що <code>UAVCAN_ENABLE</code> встановлено ​​на <code>3</code>, щоб увімкнути вивід ESC DroneCAN.</p><hr><p><strong>Q</strong>: Двигуни не крутяться, поки не збільшиться оберти.</p><p><strong>А</strong>: Використовуйте <a href="./../config/actuators.html#actuator-testing">Acutator &gt; Тестування приводу</a>, щоб підтвердити, що вихідні дані двигуна встановлені на правильні мінімальні значення.</p><h2 id="корисні-посилання" tabindex="-1">Корисні посилання <a class="header-anchor" href="#корисні-посилання" aria-label="Permalink to &quot;Корисні посилання&quot;">​</a></h2><ul><li><a href="https://dronecan.github.io" target="_blank" rel="noreferrer">Головна сторінка</a> (dronecan.github.io)</li><li><a href="https://dronecan.github.io/Specification" target="_blank" rel="noreferrer">Специфікація протоколу</a> (dronecan.github.io)</li><li><a href="https://dronecan.github.io/Implementations/" target="_blank" rel="noreferrer">Реалізації</a> (dronecan.github.io)</li><li><a href="https://kb.zubax.com/pages/viewpage.action?pageId=2195476" target="_blank" rel="noreferrer">пристрій Cyphal/CAN interconnection</a> (kb.zubax.com)</li></ul>',102),i=[l];function _(c,h,d,f,A,p){return n(),r("div",null,i)}const C=a(t,[["render",_]]);export{N as __pageData,C as default};
