import{_ as e}from"./chunks/pixhawk4_compass_gps.BgeOJnqO.js";import{_ as t,c as a,o,ab as n}from"./chunks/framework.CUflZczI.js";const g=JSON.parse('{"title":"安装GPS/指南针","description":"","frontmatter":{},"headers":[],"relativePath":"zh/assembly/mount_gps_compass.md","filePath":"zh/assembly/mount_gps_compass.md"}'),i={name:"zh/assembly/mount_gps_compass.md"},s=n('<h1 id="安装gps-指南针" tabindex="-1">安装GPS/指南针 <a class="header-anchor" href="#安装gps-指南针" aria-label="Permalink to &quot;安装GPS/指南针&quot;">​</a></h1><p>应尽可能将GPS/指南针安装在框架上远离其他电子设备的地方。 它的方向标记指向载具前面。 如果以这种方式安装，你可以立即着手 <a href="./../config/compass.html#performing-the-calibration">指南针校准</a>。</p><p>On multicopters it is common to mount the compass on a pedestal, while for fixed-wing and VTOL vehicles the compass is usually mounted on a wing.</p><h2 id="compass-orientation" tabindex="-1">Compass Orientation <a class="header-anchor" href="#compass-orientation" aria-label="Permalink to &quot;Compass Orientation&quot;">​</a></h2><p>The compass should ideally be oriented so that it is upright and the direction marker is pointing towards the front of the vehicle (the default orientation), but if needed can be oriented at multiples of 45° from this attitude (in any axis) as defined in the <a href="https://mavlink.io/en/messages/common.html#MAV_SENSOR_ORIENTATION" target="_blank" rel="noreferrer">standard MAVLink orientations</a> (these follow the same frame convention as when <a href="./../config/flight_controller_orientation.html#calculating-orientation">orienting the flight controller</a>).</p><p>The diagram below shows the heading marker on the Pixhawk 4 flight controller and compass.</p><p><img src="'+e+'" alt="Connect compass/GPS to Pixhawk 4"></p><p>PX4 will automatically detect the orientation for any of these standard orientations during <a href="./../config/compass.html">compass calibration</a> (<a href="./../advanced_config/parameter_reference.html#SENS_MAG_AUTOROT">by default</a>).</p><p>The compass can also be mounted at any other &quot;custom euler angles&quot;, but in this case you will need to manually configure the orientations. For more information see <a href="./../config/flight_controller_orientation.html#setting-the-compass-orientation">Setting the Compass Orientation</a> in <em>Flight Controller/Sensor Orientation</em>.</p><h2 id="position" tabindex="-1">Position <a class="header-anchor" href="#position" aria-label="Permalink to &quot;Position&quot;">​</a></h2><p>In order to compensate for the relative motion between the receiver and the CoG, you should <a href="./../advanced_config/parameters.html">configure</a> the following parameters to set the offsets: <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_POS_X">EKF2_GPS_POS_X</a>, <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_POS_Y">EKF2_GPS_POS_Y</a> and <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_POS_Z">EKF2_GPS_POS_Z</a>.</p><p>This is important because the body frame estimated by the EKF will converge on the location of the GNSS module and assume it to be at the CoG. If the GNSS module is significantly offset from the CoG, then rotation around the COG will be interpreted as an altitude change, which in some flight modes (such as position mode) will result in unnecessary corrections.</p><p>It is particularly important if using <a href="./../advanced/rtk_gps.html">RTK GNSS</a> which has centimeter-level accuracy, because if the offsets are not set then GNSS measurements will often be rejected as inconsistent with the current EFK estimate.</p><details class="details custom-block"><summary>Details</summary><p>Explanation For example, if the GNSS module is 10cm above the CoG, and the IMU is located at the GoG, a pitch motion of 1 rad/s will create a GNSS velocity measurement of 10cm/s <em>even though the CoG isn&#39;t moving</em>. If the speed accuracy of the GNSS receiver is 1cm/s, the EKF might stop trusting the measurements because they appear inconsistent (wrong by 10x the accuracy). If the offsets are defined, the EKF will correct the measurements using the gyro data.</p></details>',14),r=[s];function h(c,l,m,d,p,f){return o(),a("div",null,r)}const S=t(i,[["render",h]]);export{g as __pageData,S as default};
