import{_ as e,c as t,o as r,ab as a}from"./chunks/framework.CUflZczI.js";const m=JSON.parse('{"title":"VESC ESCs (DroneCAN)","description":"","frontmatter":{},"headers":[],"relativePath":"zh/peripherals/vesc.md","filePath":"zh/peripherals/vesc.md"}'),o={name:"zh/peripherals/vesc.md"},n=a('<h1 id="vesc-escs-dronecan" tabindex="-1">VESC ESCs (DroneCAN) <a class="header-anchor" href="#vesc-escs-dronecan" aria-label="Permalink to &quot;VESC ESCs (DroneCAN)&quot;">​</a></h1><p>The <a href="https://vesc-project.com/" target="_blank" rel="noreferrer">VESC project</a> is a fully open source hardware and software design for advanced FOC motor controllers. While it can be controlled using traditional PWM input, it also supports being connected over CAN bus using <a href="./../dronecan/">DroneCAN</a>.</p><h2 id="where-to-buy" tabindex="-1">Where to Buy <a class="header-anchor" href="#where-to-buy" aria-label="Permalink to &quot;Where to Buy&quot;">​</a></h2><p><a href="https://vesc-project.com/Hardware" target="_blank" rel="noreferrer">Vesc Project &gt; Hardware</a></p><h2 id="hardware-setup" tabindex="-1">Hardware Setup <a class="header-anchor" href="#hardware-setup" aria-label="Permalink to &quot;Hardware Setup&quot;">​</a></h2><h3 id="wiring" tabindex="-1">Wiring <a class="header-anchor" href="#wiring" aria-label="Permalink to &quot;Wiring&quot;">​</a></h3><p>ESCs are connected to the CAN bus using the VESC CAN connector. Note that this is <em>not</em> the Pixhawk standard 4 pin JST GH connector. For more information, refer to the <a href="./../can/#wiring">CAN Wiring</a> instructions. ESC order does not matter.</p><h2 id="firmware-setup" tabindex="-1">Firmware Setup <a class="header-anchor" href="#firmware-setup" aria-label="Permalink to &quot;Firmware Setup&quot;">​</a></h2><p>The preferred tool for motor enumeration is the <a href="https://vesc-project.com/vesc_tool" target="_blank" rel="noreferrer">VESC tool</a>. In addition to the normal motor configuration that you will have to setup in the VESC tool, you will also need to properly setup the app configuration. The recommended app setup is as follows:</p><table><thead><tr><th>Parameter</th><th>Option</th></tr></thead><tbody><tr><td>App to use</td><td><code>No App</code></td></tr><tr><td>VESC ID</td><td><code>1,2,...</code></td></tr><tr><td>Can Status Message Mode</td><td><code>CAN_STATUS_1_2_3_4_5</code></td></tr><tr><td>CAN Baud Rate</td><td><code>CAN_BAUD_500K</code></td></tr><tr><td>CAN Mode</td><td><code>UAVCAN</code></td></tr><tr><td>UAVCAN ESC Index</td><td><code>0,1,...</code></td></tr></tbody></table><p>VESC ID should have the same motor numbering as in PX4 convention, starting at <code>1</code> for top-right motor, <code>2</code> for bottom-left motor etc. However the <code>UAVCAN ESC Index</code> starts from <code>0</code>, and as such it is always one index lower than the <code>VESC ID</code>. For example, in a quadcopter the bottom left motor will have <code>VESC ID = 2</code> and <code>UAVCAN ESC Index = 1</code>.</p><p>Finally the <code>CAN Baud Rate</code> must match the value set in <a href="./../advanced_config/parameter_reference.html#UAVCAN_BITRATE">UAVCAN_BITRATE</a>.</p><h2 id="flight-controller-setup" tabindex="-1">Flight Controller Setup <a class="header-anchor" href="#flight-controller-setup" aria-label="Permalink to &quot;Flight Controller Setup&quot;">​</a></h2><h3 id="enable-dronecan" tabindex="-1">Enable DroneCAN <a class="header-anchor" href="#enable-dronecan" aria-label="Permalink to &quot;Enable DroneCAN&quot;">​</a></h3><p>Connect the ESCs to the Pixhawk CAN bus. Power up the entire vehicle using a battery or power supply (not just the flight controller over USB) and enable the DroneCAN driver by setting the parameter <a href="./../advanced_config/parameter_reference.html#UAVCAN_ENABLE">UAVCAN_ENABLE</a> to <code>3</code> to enable both dynamic node ID allocation and DroneCAN ESC output.</p><h3 id="px4-configuration" tabindex="-1">PX4 Configuration <a class="header-anchor" href="#px4-configuration" aria-label="Permalink to &quot;PX4 Configuration&quot;">​</a></h3><p>Assign motors to outputs using the <a href="./../config/actuators.html#actuator-testing">Acutator</a> configuration screen.</p><h2 id="further-information" tabindex="-1">Further Information <a class="header-anchor" href="#further-information" aria-label="Permalink to &quot;Further Information&quot;">​</a></h2><ul><li><a href="https://vesc-project.com/" target="_blank" rel="noreferrer">VESC Project ESCs</a></li><li><a href="http://vedder.se" target="_blank" rel="noreferrer">Benjamin Vedder&#39;s blog</a> (project owner)</li></ul>',19),d=[n];function i(c,h,s,l,u,p){return r(),t("div",null,d)}const C=e(o,[["render",i]]);export{m as __pageData,C as default};
