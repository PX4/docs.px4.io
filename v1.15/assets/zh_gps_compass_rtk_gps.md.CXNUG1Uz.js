import{_ as t,a as e,b as a,c as r}from"./chunks/settings_view_general_rtk_gps.CmoByRPo.js";import{_ as n,c as l,o as i,ab as s}from"./chunks/framework.CUflZczI.js";const b=JSON.parse('{"title":"RTK GPS","description":"","frontmatter":{},"headers":[],"relativePath":"zh/gps_compass/rtk_gps.md","filePath":"zh/gps_compass/rtk_gps.md"}'),o={name:"zh/gps_compass/rtk_gps.md"},d=s('<h1 id="rtk-gps" tabindex="-1">RTK GPS <a class="header-anchor" href="#rtk-gps" aria-label="Permalink to &quot;RTK GPS&quot;">​</a></h1><p><a href="https://en.wikipedia.org/wiki/Real_Time_Kinematic" target="_blank" rel="noreferrer">Real Time Kinematic (RTK)</a> GNSS/GPS systems provide centimeter-level accuracy, allowing PX4 to be used in applications like precision surveying (where pinpoint accuracy is essential).</p><p>This feature requires <em>QGroundControl</em> running on a laptop/PC and a vehicle with a WiFi or Telemetry radio link to the ground station laptop.</p><div class="info custom-block"><p class="custom-block-title">Some RTK GNSS setups can provide yaw/heading information, as an alternative to the compass:</p><ul><li><a href="./../gps_compass/u-blox_f9p_heading.html">RTK GPS Heading with Dual u-blox F9P</a>.</li><li>GPS directly output yaw (see table below).</li></ul></div><h2 id="支持的-rtk-设备" tabindex="-1">支持的 RTK 设备 <a class="header-anchor" href="#支持的-rtk-设备" aria-label="Permalink to &quot;支持的 RTK 设备&quot;">​</a></h2><p>PX4 supports the <a href="https://www.u-blox.com/en/product/neo-m8p" target="_blank" rel="noreferrer">u-blox M8P</a>, <a href="https://www.u-blox.com/en/product/zed-f9p-module" target="_blank" rel="noreferrer">u-blox F9P</a> and the <a href="https://www.trimble.com/Precision-GNSS/MB-Two-Board.aspx" target="_blank" rel="noreferrer">Trimble MB-Two</a> GPS, and products that incorporate them.</p><p>The RTK compatible devices below that are expected to work with PX4 (it omits discontined devices). The table indicates devices that also output yaw, and that can provide yaw when two on-vehicle units are used. It also highlights devices that connect via the CAN bus, and those which support PPK (Post-Processing Kinematic).</p><table><thead><tr><th style="text-align:left;">Device</th><th style="text-align:center;">GPS</th><th style="text-align:center;">Compass</th><th style="text-align:center;"><a href="./../dronecan/">DroneCAN</a></th><th style="text-align:center;"><a href="#configuring-gps-as-yaw-heading-source">GPS Yaw</a></th><th style="text-align:center;"><a href="./../gps_compass/u-blox_f9p_heading.html">Dual F9P GPS Heading</a></th><th style="text-align:center;">PPK</th></tr></thead><tbody><tr><td style="text-align:left;"><a href="https://arkelectron.com/product/ark-rtk-gps/" target="_blank" rel="noreferrer">ARK RTK GPS</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">ICM42688p</td><td style="text-align:center;">✓</td><td style="text-align:center;"></td><td style="text-align:center;">✓</td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/rtk_gps_cuav_c-rtk.html">CUAV C-RTK GPS</a></td><td style="text-align:center;">M8P/M8N</td><td style="text-align:center;">✓</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/rtk_gps_cuav_c-rtk2.html">CUAV C-RTK2</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">✓</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✓</td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/rtk_gps_cuav_c-rtk-9ps.html">CUAV C-RTK 9Ps GPS</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">RM3100</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✓</td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/rtk_gps_cuav_c-rtk.html">CUAV C-RTK2 PPK/RTK GNSS</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">RM3100</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✓</td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/rtk_gps_hex_hereplus.html">CubePilot Here+ RTK GPS</a></td><td style="text-align:center;">M8P</td><td style="text-align:center;">HMC5983</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="https://www.cubepilot.org/#/here/here3" target="_blank" rel="noreferrer">CubePilot Here3 CAN GNSS GPS (M8N)</a></td><td style="text-align:center;">M8P</td><td style="text-align:center;">ICM20948</td><td style="text-align:center;">✓</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="https://store-drotek.com/911-sirius-rtk-gnss-rover-f9p.html" target="_blank" rel="noreferrer">Drotek SIRIUS RTK GNSS ROVER (F9P)</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">RM3100</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✓</td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/rtk_gps_fem_mini2.html">Femtones MINI2 Receiver</a></td><td style="text-align:center;">FB672, FB6A0</td><td style="text-align:center;">✓</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/rtk_gps_freefly.html">Freefly RTK GPS</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">IST8310</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="https://holybro.com/products/h-rtk-f9p-ultralight" target="_blank" rel="noreferrer">Holybro H-RTK F9P Ultralight</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">IST8310</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✓</td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/rtk_gps_holybro_h-rtk-f9p.html">Holybro H-RTK F9P Helical or Base</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">IST8310</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✓</td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="https://holybro.com/products/dronecan-h-rtk-f9p-helical" target="_blank" rel="noreferrer">Holybro DroneCAN H-RTK F9P Helical</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">BMM150</td><td style="text-align:center;">✓</td><td style="text-align:center;"></td><td style="text-align:center;">✓</td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/rtk_gps_holybro_h-rtk-f9p.html">Holybro H-RTK F9P Rover Lite</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">IST8310</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="https://holybro.com/products/dronecan-h-rtk-f9p-rover" target="_blank" rel="noreferrer">Holybro DroneCAN H-RTK F9P Rover</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">BMM150</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✓</td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/rtk_gps_holybro_h-rtk-m8p.html">Holybro H-RTK M8P GNSS</a></td><td style="text-align:center;">M8P</td><td style="text-align:center;">IST8310</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/rtk_gps_holybro_unicore_um982.html">Holybro H-RTK Unicore UM982 GPS</a></td><td style="text-align:center;">UM982</td><td style="text-align:center;">IST8310</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/rtk_gps_locosys_r1.html">LOCOSYS Hawk R1</a></td><td style="text-align:center;">MC-1612-V2b</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/rtk_gps_locosys_r2.html">LOCOSYS Hawk R2</a></td><td style="text-align:center;">MC-1612-V2b</td><td style="text-align:center;">IST8310</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="https://store.mrobotics.io/product-p/m10020d.htm" target="_blank" rel="noreferrer">mRo u-blox ZED-F9 RTK L1/L2 GPS</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">✓</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✓</td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/septentrio_asterx-rib.html">Septentrio AsteRx-m3 Pro</a></td><td style="text-align:center;">AsteRx</td><td style="text-align:center;">✓</td><td style="text-align:center;"></td><td style="text-align:center;">✓</td><td style="text-align:center;">Septentrio dual antenna heading</td><td style="text-align:center;">✓</td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/septentrio_mosaic-go.html">Septentrio mosaic-go</a></td><td style="text-align:center;">mosaic X5 / mosaic H</td><td style="text-align:center;">✓</td><td style="text-align:center;"></td><td style="text-align:center;">✓</td><td style="text-align:center;">Septentrio dual antenna heading</td><td style="text-align:center;">✓</td></tr><tr><td style="text-align:left;"><a href="https://store-drotek.com/911-sirius-rtk-gnss-rover-f9p.html" target="_blank" rel="noreferrer">SIRIUS RTK GNSS ROVER (F9P)</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">✓</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✓</td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="https://www.sparkfun.com/products/15136" target="_blank" rel="noreferrer">SparkFun GPS-RTK2 Board - ZED-F9P</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">✓</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">✓</td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;"><a href="./../gps_compass/rtk_gps_trimble_mb_two.html">Trimble MB-Two</a></td><td style="text-align:center;">F9P</td><td style="text-align:center;">✓</td><td style="text-align:center;"></td><td style="text-align:center;">✓</td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr></tbody></table><p>Notes:</p><ul><li>✓ or a specific part number indicate that a features is supported, while ✗ or empty show that the feature is not supported. &quot;?&quot; indicates &quot;unknown&quot;.</li><li>Where possible and relevant the part name is used (i.e. ✓ in the GPS column indicates that a GPS module is present but the part is not known).</li><li>Some RTK modules can only be used in a particular role (base or rover), while others can be used interchangeably.</li><li>The list may omit some discontinued hardware that is still supported. For example <a href="./../gps_compass/rtk_gps_hex_hereplus.html">CubePilot Here+ RTK GPS</a> is discontinued and may be removed from the list in a future release. Check earlier versions if a discontinued module is not mentioned here.</li></ul><h2 id="positioning-setup-configuration" tabindex="-1">Positioning Setup/Configuration <a class="header-anchor" href="#positioning-setup-configuration" aria-label="Permalink to &quot;Positioning Setup/Configuration&quot;">​</a></h2><p>RTK positioning requires a <em>pair</em> of <a href="#supported-devices">RTK GNSS devices</a>: a &quot;base&quot; for the ground station and a &quot;rover&quot; for the vehicle.</p><p>In addition you will need:</p><ul><li>A <em>laptop/PC</em> with QGroundControl (QGroundControl for Android/iOS do not support RTK)</li><li>A vehicle with a WiFi or Telemetry radio link to the laptop.</li></ul><div class="info custom-block"><p class="custom-block-title"><em>QGroundControl</em> with a base module can theoretically enable RTK GPS for multiple vehicles/rover modules. At time of writing this use case has not been tested.</p></div><h3 id="hardware-setup" tabindex="-1">Hardware Setup <a class="header-anchor" href="#hardware-setup" aria-label="Permalink to &quot;Hardware Setup&quot;">​</a></h3><h4 id="rover-rtk-module-vehicle" tabindex="-1">Rover RTK Module (Vehicle) <a class="header-anchor" href="#rover-rtk-module-vehicle" aria-label="Permalink to &quot;Rover RTK Module (Vehicle)&quot;">​</a></h4><p>The connection method and cables/connectors required depends on the selected RTK module (and on the <a href="./../flight_controller/">flight controller</a>).</p><p>Most are connected via the flight controller&#39;s GPS port, in the same way as any other GPS module. Some are connected to the <a href="./../can/">CAN</a> bus (i.e. using <a href="./../dronecan/">DroneCAN</a>).</p><p>See <a href="#supported-devices">documentation for the selected device</a>, general <a href="./../gps_compass/#hardware-setup">GNSS Hardware/Configuration Setup</a>, and <a href="./../dronecan/">DroneCAN</a> for more information on wiring and configuration.</p><h4 id="base-rtk-module-ground" tabindex="-1">Base RTK Module (Ground) <a class="header-anchor" href="#base-rtk-module-ground" aria-label="Permalink to &quot;Base RTK Module (Ground)&quot;">​</a></h4><p>Connect the base module to <em>QGroundControl</em> via USB. The base module must not be moved while it is being used.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Choose a position where the base module won&#39;t need to be moved, has a clear view of the sky, and is well separated from any buildings. Often it is helpful to elevate the base GPS, by using a tripod or mounting it on a roof.</p></div><h4 id="telemetry-radio-wifi" tabindex="-1">Telemetry Radio/WiFi <a class="header-anchor" href="#telemetry-radio-wifi" aria-label="Permalink to &quot;Telemetry Radio/WiFi&quot;">​</a></h4><p>The vehicle and ground control laptop must be connected via <a href="./../telemetry/">wifi or a radio telemetry link</a>.</p><p>The link <em>must</em> use the MAVLink 2 protocol as it makes more efficient use of the channel. This should be set by default, but if not, follow the <a href="#mavlink2">MAVLink2 configuration instructions</a> below.</p><h3 id="rtk-connection-process" tabindex="-1">RTK Connection Process <a class="header-anchor" href="#rtk-connection-process" aria-label="Permalink to &quot;RTK Connection Process&quot;">​</a></h3><p>The RTK GPS connection is essentially plug and play:</p><ol><li>Start <em>QGroundControl</em> and attach the base RTK GPS via USB to the ground station. 电脑会自动识别设备。</li><li>Start the vehicle and make sure it is connected to <em>QGroundControl</em>.</li></ol><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><em>QGroundControl</em> displays an RTK GPS status icon in the top icon bar while an RTK GPS device is connected (in addition to the normal GPS status icon). The icon is red while RTK is being set up, and then changes to white once RTK GPS is active. You can click the icon to see the current state and RTK accuracy.</p></div><ol><li><p><em>QGroundControl</em> then starts the RTK setup process (known as &quot;Survey-In&quot;).</p><p>测量是一个获得基站准确位置的设置过程。 这个过程通常会需要几分钟（在达到<a href="#rtk-gps-settings">RTK 设置</a>中指定的最小时间和精度后结束）。</p><p>你也可以点击 RTK状态按钮查看。</p><p><img src="'+t+'" alt="survey-in"></p></li><li><p>测量完成：</p><ul><li><p>The RTK GPS icon changes to white and <em>QGroundControl</em> starts to stream position data to the vehicle:</p><p><img src="'+e+'" alt="RTK streaming"></p></li><li><p>Vehicle GPS switches to RTK mode. The new mode is displayed in the <em>normal</em> GPS status icon (<code>3D RTK GPS Lock</code>):</p><p><img src="'+a+'" alt="RTK GPS Status"></p></li></ul></li></ol><h3 id="configuring-gps-as-yaw-heading-source" tabindex="-1">Configuring GPS as Yaw/Heading Source <a class="header-anchor" href="#configuring-gps-as-yaw-heading-source" aria-label="Permalink to &quot;Configuring GPS as Yaw/Heading Source&quot;">​</a></h3><p>GPS can be used as a source for yaw fusion when using modules where <em>yaw output is supported by the device</em> (e.g. <a href="./../gps_compass/rtk_gps_trimble_mb_two.html">Trimble MB-Two</a>) or when using some <a href="./../gps_compass/u-blox_f9p_heading.html">RTK GPS Setups with Dual u-blox F9P</a>.</p><p>When using GPS for yaw fusion you will need to configure the following parameters:</p><table><thead><tr><th>Parameter</th><th>Setting</th></tr></thead><tbody><tr><td><a href="./../advanced_config/parameter_reference.html#GPS_YAW_OFFSET">GPS_YAW_OFFSET</a></td><td>The angle made by the <em>baseline</em> (the line between the two GPS antennas) relative to the vehicle x-axis (front/back axis, as shown <a href="./../config/flight_controller_orientation.html#calculating-orientation">here</a>).</td></tr><tr><td><a href="./../advanced_config/parameter_reference.html#EKF2_GPS_CTRL">EKF2_GPS_CTRL</a></td><td>Set bit position 3 &quot;Dual antenna heading&quot; to <code>1</code> (i.e. add 8 to the parameter value).</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>If using this feature, all other configuration should be setup up as normal (e.g. <a href="./../gps_compass/rtk_gps.html#positioning-setup-configuration">RTK Positioning</a>).</p></div><h3 id="optional-px4-configuration" tabindex="-1">Optional PX4 Configuration <a class="header-anchor" href="#optional-px4-configuration" aria-label="Permalink to &quot;Optional PX4 Configuration&quot;">​</a></h3><p>The following settings may need to be changed (using <em>QGroundControl</em>).</p><h4 id="rtk-gps-settings" tabindex="-1">RTK GPS settings <a class="header-anchor" href="#rtk-gps-settings" aria-label="Permalink to &quot;RTK GPS settings&quot;">​</a></h4><p>The RTK GPS settings are specified in the <em>QGroundControl</em> <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/settings_view/general.html#rtk_gps" target="_blank" rel="noreferrer">General Settings</a> (<strong>SettingsView &gt; General Settings &gt; RTK GPS</strong>).</p><p><img src="'+r+'" alt="RTK GPS Setup"></p><p>These settings define the minimum duration and minimum accuracy for completing the RTK GPS setup process (known as &quot;Survey-In).</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You can save and reuse a base position in order to save time: perform Survey-In once, select <em>Use Specified Base Position</em> and press <strong>Save Current Base Position</strong> to copy in the values for the last survey. The values will then persist across QGC reboots until they are changed.</p></div><h4 id="mavlink2" tabindex="-1">MAVLink2 <a class="header-anchor" href="#mavlink2" aria-label="Permalink to &quot;MAVLink2&quot;">​</a></h4><p>The MAVLink2 protocol must be used because it makes more efficient use of lower-bandwidth channels. This should be enabled by default on recent builds.</p><p>To ensure MAVLink2 is used:</p><ul><li>Update the telemetry module firmware to the latest version (see <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/setup_view/firmware.html" target="_blank" rel="noreferrer">QGroundControl &gt; Setup &gt; Firmware</a>).</li><li>Set <a href="./../advanced_config/parameter_reference.html#MAV_PROTO_VER">MAV_PROTO_VER</a> to 2 (see <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/setup_view/parameters.html" target="_blank" rel="noreferrer">QGroundControl Setup &gt; Parameters</a>)</li></ul><h4 id="tuning" tabindex="-1">Tuning <a class="header-anchor" href="#tuning" aria-label="Permalink to &quot;Tuning&quot;">​</a></h4><p>You may also need to tune some parameters as the default parameters are tuned assuming a GPS accuracy in the order of meters, not centimeters. For example, you can decrease <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_V_NOISE">EKF2_GPS_V_NOISE</a> and <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_P_NOISE">EKF2_GPS_P_NOISE</a> to 0.2.</p><h4 id="dual-receivers" tabindex="-1">Dual Receivers <a class="header-anchor" href="#dual-receivers" aria-label="Permalink to &quot;Dual Receivers&quot;">​</a></h4><p>A second GPS receiver can be used as a backup (either RTK or non RTK). See the <a href="./../advanced_config/tuning_the_ecl_ekf.html#gps">EKF2 GPS Configuration</a> section.</p><h2 id="further-information" tabindex="-1">Further Information <a class="header-anchor" href="#further-information" aria-label="Permalink to &quot;Further Information&quot;">​</a></h2><ul><li><a href="./../advanced/rtk_gps.html">RTK-GPS (PX4-Integration)</a>: Developer information about integrating RTK-GPS support into PX4.</li><li><a href="https://en.wikipedia.org/wiki/Real_Time_Kinematic" target="_blank" rel="noreferrer">Real Time Kinematic</a> (Wikipedia)</li></ul>',53),c=[d];function h(g,p,u,m,y,f){return i(),l("div",null,c)}const P=n(o,[["render",h]]);export{b as __pageData,P as default};
