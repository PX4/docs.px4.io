import{_ as a,c as e,o as r,ab as t}from"./chunks/framework.CUflZczI.js";const A=JSON.parse('{"title":"Приймачі ADS-B/FLARM/UTM: Уникнення повітряного трафіку","description":"","frontmatter":{},"headers":[],"relativePath":"uk/peripherals/adsb_flarm.md","filePath":"uk/peripherals/adsb_flarm.md"}'),d={name:"uk/peripherals/adsb_flarm.md"},o=t('<h1 id="приимачі-ads-b-flarm-utm-уникнення-повітряного-трафіку" tabindex="-1">Приймачі ADS-B/FLARM/UTM: Уникнення повітряного трафіку <a class="header-anchor" href="#приимачі-ads-b-flarm-utm-уникнення-повітряного-трафіку" aria-label="Permalink to &quot;Приймачі ADS-B/FLARM/UTM: Уникнення повітряного трафіку&quot;">​</a></h1><p>PX4 підтримує просте уникнення повітряного трафіку in <a href="./../flying/missions.html"> missions </a> за допомогою <a href="https://en.wikipedia.org/wiki/Automatic_dependent_surveillance_%E2%80%93_broadcast" target="_blank" rel="noreferrer">ADS-B</a>, <a href="https://en.wikipedia.org/wiki/FLARM" target="_blank" rel="noreferrer">FLARM</a> або <a href="https://www.faa.gov/uas/research_development/traffic_management" target="_blank" rel="noreferrer">UTM</a> транспондерів, які використовують стандартні інтерфейси MAVLink.</p><p>Якщо виявлено потенційне зіткнення, PX4 може <em>попередити</em>, негайно <a href="./../flight_modes_mc/land.html">посадити</a>, або <a href="./../flight_modes_mc/return.html">повернутися</a> (залежно від значення <a href="#NAV_TRAFF_AVOID">NAV_TRAFF_AVOID</a>).</p><h2 id="підтримуване-обладнання" tabindex="-1">Підтримуване обладнання <a class="header-anchor" href="#підтримуване-обладнання" aria-label="Permalink to &quot;Підтримуване обладнання&quot;">​</a></h2><p>Система уникнення PX4 працює з продуктами ADS-B або FLARM, які постачають дані транспондера за допомогою повідомлення MAVLink <a href="https://mavlink.io/en/messages/common.html#ADSB_VEHICLE" target="_blank" rel="noreferrer">ADSB_VEHICLE</a>, та продуктами UTM, які постачають дані транспондера за допомогою повідомлення MAVLink <a href="https://mavlink.io/en/messages/common.html#UTM_GLOBAL_POSITION" target="_blank" rel="noreferrer">UTM_GLOBAL_POSITION</a>.</p><p>Було протестовано з наступними пристроями:</p><ul><li><a href="https://uavionix.com/product/pingrx-pro/" target="_blank" rel="noreferrer">PingRX ADS-B Receiver</a> (uAvionix)</li><li><a href="https://flarm.com/products/uav/atom-uav-flarm-for-drones/" target="_blank" rel="noreferrer">FLARM</a></li></ul><h2 id="налаштування-програмного-забезпечення" tabindex="-1">Налаштування програмного забезпечення <a class="header-anchor" href="#налаштування-програмного-забезпечення" aria-label="Permalink to &quot;Налаштування програмного забезпечення&quot;">​</a></h2><p>Будь-який з пристроїв може бути підключений до будь-якого вільного/не використаного послідовного порту на контролері польоту. Зазвичай вони пов&#39;язані з <code>TELEM2</code> (якщо це не використовується для іншої мети).</p><h3 id="pingrx" tabindex="-1">PingRX <a class="header-anchor" href="#pingrx" aria-label="Permalink to &quot;PingRX&quot;">​</a></h3><p>Порт PingRX MAVLink використовує роз&#39;єм-матинг JST ZHR-4 з роз&#39;ємом, як показано нижче.</p><table><thead><tr><th>Pin</th><th>Сигнал</th><th>Вольтаж</th></tr></thead><tbody><tr><td>1 (red)</td><td>RX (IN)</td><td>+5V tolerant</td></tr><tr><td>2 (blk)</td><td>TX (OUT)</td><td></td></tr><tr><td>3 (blk)</td><td>Живлення</td><td>+4 to 6V</td></tr><tr><td>4 (blk)</td><td>GND</td><td>GND</td></tr></tbody></table><p>PingRX поставляється з кабелем-перехідником, який можна підключити безпосередньо до порту TELEM2 (DF13-6P) на <a href="./../flight_controller/mro_pixhawk.html">mRo Pixhawk</a>. Для інших портів або плат, вам доведеться отримати свій власний кабель.</p><h2 id="flarm" tabindex="-1">FLARM <a class="header-anchor" href="#flarm" aria-label="Permalink to &quot;FLARM&quot;">​</a></h2><p>FLARM має вбудований роз&#39;єм DF-13 6 Pin, який має ідентичну розпіновку з <a href="./../flight_controller/mro_pixhawk.html">mRo Pixhawk</a>.</p><table><thead><tr><th>Pin</th><th>Сигнал</th><th>Вольтаж</th></tr></thead><tbody><tr><td>1 (red)</td><td>VCC</td><td>+4В до +36В</td></tr><tr><td>2 (blk)</td><td>TX (OUT)</td><td>+3.3V</td></tr><tr><td>3 (blk)</td><td>RX (IN)</td><td>+3.3V</td></tr><tr><td>4 (blk)</td><td>-</td><td>+3.3V</td></tr><tr><td>5 (blk)</td><td>-</td><td>+3.3V</td></tr><tr><td>6 (blk)</td><td>GND</td><td>GND</td></tr></tbody></table><p>::: інформація TX та RX на контролері польоту повинні бути підключені до RX та TX на FLARM, відповідно. :::</p><h2 id="конфігурація-програмного-забезпечення" tabindex="-1">Конфігурація програмного забезпечення <a class="header-anchor" href="#конфігурація-програмного-забезпечення" aria-label="Permalink to &quot;Конфігурація програмного забезпечення&quot;">​</a></h2><h3 id="конфігурація-порту" tabindex="-1">Конфігурація порту <a class="header-anchor" href="#конфігурація-порту" aria-label="Permalink to &quot;Конфігурація порту&quot;">​</a></h3><p>Отримувачі налаштовані так само, як будь-який інший <a href="./../peripherals/mavlink_peripherals.html">Пристрій MAVLink</a>. Єдине <em>специфічне</em> налаштування полягає в тому, що швидкість передачі даних порту повинна бути встановлена на 57600, а профіль з низькою пропускною здатністю (<code>MAV_X_MODE</code>).</p><p>Припускаючи, що ви підключили пристрій до порту TELEM2, <a href="./../advanced_config/parameters.html">встановіть параметри</a> так, як показано:</p><ul><li><a href="./../advanced_config/parameter_reference.html#MAV_1_CONFIG">MAV_1_CONFIG</a> = TELEM 2</li><li><a href="./../advanced_config/parameter_reference.html#MAV_1_MODE">MAV_1_MODE</a> = Normal</li><li><a href="./../advanced_config/parameter_reference.html#MAV_1_RATE">MAV_1_RATE</a> = 0 (швидкість відправлення за замовчуванням для порту).</li><li><a href="./../advanced_config/parameter_reference.html#MAV_1_FORWARD">MAV_1_FORWARD</a> = Enabled</li></ul><p>Перезавантажте пристрій.</p><p>Тепер ви знайдете новий параметр, який називається <a href="./../advanced_config/parameter_reference.html#SER_TEL2_BAUD">SER_TEL2_BAUD</a>, який повинен бути встановлений на 57600.</p><h3 id="налаштування-передачі-трафіку" tabindex="-1">Налаштування передачі трафіку <a class="header-anchor" href="#налаштування-передачі-трафіку" aria-label="Permalink to &quot;Налаштування передачі трафіку&quot;">​</a></h3><p>Налаштуйте дію у випадку потенційної зіткнення за допомогою параметри нижче:</p><table><thead><tr><th>Параметр</th><th>Опис</th></tr></thead><tbody><tr><td><a id="NAV_TRAFF_AVOID"></a><a href="./../advanced_config/parameter_reference.html#NAV_TRAFF_AVOID">NAV_TRAFF_AVOID</a></td><td>Увімкніть режим уникнення трафіку, вказавши відповідь уникнення. 0: Вимкнути, 1: Лише попередження, 2: Режим повернення, 3: Режим посадки.</td></tr><tr><td><a id="NAV_TRAFF_A_HOR"></a><a href="./../advanced_config/parameter_reference.html#NAV_TRAFF_A_HOR">NAV_TRAFF_A_HOR</a></td><td>Горизонтальний радіус циліндра навколо транспортного засобу, який визначає його повітряний простір (тобто повітряний простір на земельній площині).</td></tr><tr><td><a id="NAV_TRAFF_A_VER"></a><a href="./../advanced_config/parameter_reference.html#NAV_TRAFF_A_VER">NAV_TRAFF_A_VER</a></td><td>Вертикальна висота вище і нижче транспортного засобу циліндра, яка визначає його повітряний простір (див. також <a href="#NAV_TRAFF_A_HOR">NAV_TRAFF_A_HOR</a>).</td></tr><tr><td><a id="NAV_TRAFF_COLL_T"></a><a href="./../advanced_config/parameter_reference.html#NAV_TRAFF_COLL_T">NAV_TRAFF_COLL_T</a></td><td>Поріг часу зіткнення. Уникнення буде викликати якщо передбачуваний час, поки зіткнення не знизиться нижче цієї вартості (орієнтовний час ґрунтується на відносній швидкості руху та UAV).</td></tr></tbody></table><h2 id="імплементація" tabindex="-1">Імплементація <a class="header-anchor" href="#імплементація" aria-label="Permalink to &quot;Імплементація&quot;">​</a></h2><h3 id="adsb-flarm" tabindex="-1">ADSB/FLARM <a class="header-anchor" href="#adsb-flarm" aria-label="Permalink to &quot;ADSB/FLARM&quot;">​</a></h3><p>PX4 слухає дійсні звіти про транспондери під час місій.</p><p>Якщо отримано дійсний звіт від транспондера, PX4 спочатку використовує інформацію про транспондер руху, щоб оцінити, чи показує напрямок та висота руху, що буде перетинатися з повітряним простором БПЛА. Повітряний простір БПЛА складається з оточуючого циліндра, визначеного радіусом <a href="#NAV_TRAFF_A_HOR">NAV_TRAFF_A_HOR</a> та висотою <a href="#NAV_TRAFF_A_VER">NAV_TRAFF_A_VER</a>, з БПЛА у центрі. Датчик руху перевіряє, чи час до перетину з повітряним простором БПЛА нижче порогу <a href="#NAV_TRAFF_COLL_T">NAV_TRAFF_COLL_T</a> на основі відносної швидкості. Якщо обидва перевірки виконані, запускається дія <a href="./../config/safety.html#traffic-avoidance-failsafe">Traffic Avoidance Failsafe</a>, і транспортний засіб або попереджує, або сідає, або повертається.</p><p>Код можна знайти в <code>Navigator::check_traffic</code> (<a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/src/modules/navigator/navigator_main.cpp" target="_blank" rel="noreferrer">/src/modules/navigator/navigator_main.cpp</a>).</p><p>PX4 також передаватиме дані транспондера на GCS, якщо це було налаштовано для екземпляра MAVLink (це рекомендується). Останні 10 цифр GUID відображаються як ідентифіфікація дрона.</p><h3 id="utm" tabindex="-1">UTM <a class="header-anchor" href="#utm" aria-label="Permalink to &quot;UTM&quot;">​</a></h3><p>PX4 прослуховує повідомлення MAVLink <code>UTM_GLOBAL_POSITION</code> під час місій. Коли отримано дійсне повідомлення, його прапорці дійсності, позиція та напрямок відображаються в тій же темі UORB <code>transponder_report</code>, що використовується для уникнення трафіку <em>ADS-B</em>.</p><p>Виконання інакше <em>точно</em> таке, як описано у вищезазначеному розділі.</p><p>::: інформація <a href="https://mavlink.io/en/messages/common.html#UTM_GLOBAL_POSITION" target="_blank" rel="noreferrer">UTM_GLOBAL_POSITION</a> містить додаткові поля, які не надаються транспондером ADSB (див. <a href="https://mavlink.io/en/messages/common.html#ADSB_VEHICLE" target="_blank" rel="noreferrer">ADSB_VEHICLE</a>). Поточна реалізація просто відкидає додаткові поля (включаючи інформацію про заплановану наступну точку шляху транспортного засобу). :::</p><h2 id="тестування-симульовании-трафік-adsb" tabindex="-1">Тестування/Симульований трафік ADSB <a class="header-anchor" href="#тестування-симульовании-трафік-adsb" aria-label="Permalink to &quot;Тестування/Симульований трафік ADSB&quot;">​</a></h2><p>Ви можете симулювати трафік ADS-B для тестування. Зверніть увагу, що для цього потрібно, щоб ви <a href="./../dev_setup/building_px4.html">збудували PX4</a>.</p><p>::: інформація Симульований трафік ADS-B може спричинити реальні аварійні дії. Використовуйте обережно в реальному польоті! :::</p><p>Щоб увімкнути цю функцію:</p><ol><li>Розкоментуйте код у <code>AdsbConflict::run_fake_traffic()</code>(<a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/src/lib/adsb/AdsbConflict.cpp#L342C1-L342C1" target="_blank" rel="noreferrer">AdsbConflict.cpp</a>).</li><li>Перебудувати та запустити PX4.</li><li>Виконайте команду <a href="./../modules/modules_controller.html#navigator"><code>navigator fake_traffic</code></a> у <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/analyze_view/mavlink_console.html" target="_blank" rel="noreferrer">QGroundControl MAVLink Shell</a> (або в іншій <a href="./../debug/consoles.html">консолі PX4 або MAVLink</a>, наприклад, у терміналі симулятора PX4).</li></ol><p>Код у функції <code>run_fake_traffic()</code> потім виконується. Ви повинні бачити попередження ADS-B в консолі/оболонці MAVLink, і QGC також повинен показувати спливаюче вікно з даними про рух літаків ADS-B.</p><p>За замовчуванням <code>run_fake_traffic()</code> публікує ряд повідомлень про трафік (він викликає <a href="#fake-traffic-method"><code>AdsbConflict::fake_traffic()</code></a> для видачі кожного звіту). Ці симулюють трафік ADS-B там, де може виникнути конфлікт, де конфлікту не буде, а також спамять буфер трафіку.</p><p>::: деталі інформації про тестові методи</p><p>Відповідні методи визначені в <a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/src/lib/adsb/AdsbConflict.cpp#L342C1-L342C1" target="_blank" rel="noreferrer">AdsbConflict.cpp</a>.</p><h4 id="метод-run-fake-traffic" tabindex="-1">Метод <code>run_fake_traffic()</code> <a class="header-anchor" href="#метод-run-fake-traffic" aria-label="Permalink to &quot;Метод `run_fake_traffic()`&quot;">​</a></h4><p>Метод <code>run_fake_traffic()</code> виконується, коли викликається команда <code>navigator fake_traffic</code>.</p><p>Метод викликає метод <code>fake_traffic()</code> для генерації симульованих повідомлень транспондера навколо поточного положення транспортного засобу. Воно проходить в поточному положенні транспортного засобу, інформація про симульований трафік, такий як виклик, відстані, напрямки, різниці в висоті, швидкості та типи емітерів.</p><p>(Закоментований) код у функції <code>run_fake_traffic()</code> симулює різні сценарії, включаючи конфлікти та відсутність конфліктів, а також спамінг буфера трафіку.</p><h4 id="метод-fake-traffic" tabindex="-1">Метод <code>fake_traffic()</code> <a class="header-anchor" href="#метод-fake-traffic" aria-label="Permalink to &quot;Метод `fake_traffic()`&quot;">​</a></h4><p><code>AdsbConflict::fake_traffic()</code> викликається методом <a href="#run-fake-traffic-method"><code>run_fake_traffic()</code></a> для створення окремих звітів транспондерів ADS-B.</p><p>Це приймає кілька параметрів, які вказують на характеристики фальшивого трафіку:</p><ul><li><code>викликний знак</code>: Викликний знак фальшивого транспондера.</li><li><code>відстань</code>: Горизонтальна відстань до фейкового транспортного засобу від поточного транспортного засобу.</li><li><code>direction</code>: Напрямок в NED від цього транспортного засобу до шахрайського в радіанах.</li><li><code>traffic_heading</code>: Напрямок руху трафіку в NED в радіанах.</li><li><code>altitude_diff</code>: Висотна різниця фальшивого трафіку. Позитив вгору.</li><li><code>hor_velocity</code>: Горизонтальна швидкість фальшивого трафіку, у м/с.</li><li><code>ver_velocity</code>: Вертикальна швидкість фальшивого трафіку, у м/с.</li><li><code>тип_емітера</code>: Тип штучного транспортного засобу, як перераховане значення.</li><li><code>icao_address</code>: ICAO адреса.</li><li><code>lat_uav</code>: Широта цього літального апарату (використовується для розміщення фальшивого трафіку навколо літального апарату)</li><li><code>on_uav</code>: Lon цього літального апарату (використовується для розміщення фальшивого трафіку навколо літального апарату)</li><li><code>alt_uav</code>: Висота літального апарату (як посилання - використовується для розміщення фальшивого трафіку навколо літального апарату)</li></ul><p>Метод створює симульоване повідомлення транспондера біля транспортного засобу, використовуючи наступні кроки:</p><ul><li>Обчислює широту та довготу трафіку на основі позиції БПЛА, відстані та напрямку.</li><li>Обчислює нову висоту, додавши різницю висоти до висоти БПЛА.</li><li>Заповнює тему <a href="./../msg_docs/TransponderReport.html">TransponderReport</a> симульованими даними про трафік.</li><li>Якщо дошка підтримує унікальний універсальний ідентифікатор (UUID), метод отримує UUID за допомогою <code>board_get_px4_guid</code> та копіює його до поля <code>uas_id</code> структури. В іншому випадку воно генерує симульований GUID.</li><li>Публікує симульоване повідомлення про трафік за допомогою <code>orb_publish</code>.</li></ul><p>:::</p><h2 id="подальша-інформація" tabindex="-1">Подальша інформація <a class="header-anchor" href="#подальша-інформація" aria-label="Permalink to &quot;Подальша інформація&quot;">​</a></h2><ul><li><a href="./../peripherals/mavlink_peripherals.html">Периферійні пристрої MAVLink</a></li><li><a href="./../peripherals/serial_configuration.html">Конфігурація послідовного порту</a></li></ul>',59),i=[o];function l(n,c,_,h,f,p){return r(),e("div",null,i)}const m=a(d,[["render",l]]);export{A as __pageData,m as default};
