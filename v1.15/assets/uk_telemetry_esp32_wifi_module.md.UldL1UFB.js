import{_ as i,a as s,b as a}from"./chunks/dbesp32_webinterface.Cj0rG1ae.js";import{_ as e,c as t,o as l,ab as n}from"./chunks/framework.CUflZczI.js";const m=JSON.parse('{"title":"Модуль WiFi ESP32","description":"","frontmatter":{},"headers":[],"relativePath":"uk/telemetry/esp32_wifi_module.md","filePath":"uk/telemetry/esp32_wifi_module.md"}'),r={name:"uk/telemetry/esp32_wifi_module.md"},p=n('<h1 id="модуль-wifi-esp32" tabindex="-1">Модуль WiFi ESP32 <a class="header-anchor" href="#модуль-wifi-esp32" aria-label="Permalink to &quot;Модуль WiFi ESP32&quot;">​</a></h1><p>ESP32 є легкодоступними модулями WiFi з присвяченими інтерфейсами UART, SPI та I2C, повним стеком TCP/IP та можливістю мікроконтролера. Вони поставляються без прошивки, але <em>DroneBridge для ESP32</em> може бути встановлений для їх активації як прозорий та двосторонній послідовний міст WiFi. Потім вони можуть бути використані в якості модуля WiFi телеметрій, для будь-якого контролера серій Pixhawk.</p><p>Зазвичай не потрібна конфігурація, якщо підключено до <code>TELEM2</code>. Типовий діапазон складає приблизно 50 м-200м (залежно від використаної антени).</p><p><img src="'+i+'" alt="DroneBridge for ESP32 connection concept"></p><h2 id="рекомендоване-обладнання" tabindex="-1">Рекомендоване обладнання <a class="header-anchor" href="#рекомендоване-обладнання" aria-label="Permalink to &quot;Рекомендоване обладнання&quot;">​</a></h2><p><em>DroneBridge для ESP32</em> може працювати майже на кожній дошці розробки ESP32. Рекомендується використовувати плати та модулі з зовнішнім роз&#39;ємом антени, оскільки вони забезпечать більший діапазон.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Багато модулів ESP32 підтримують введення живлення 3,3 В та 5 В, тоді як деякі контролери польоту (наприклад, Pixhawk 4) видають напругу на рівні 5 В. Вам потрібно буде перевірити сумісність та знизити напругу, якщо це потрібно.</p></div><p>Модулі та DevKit-и, які приймають живлення 3,3 В або 5 В:</p><ul><li><a href="https://www.az-delivery.de/en/products/esp-32-dev-kit-c-v4" target="_blank" rel="noreferrer">AZ-Delivery — ESP-32 DevKit C</a></li><li><a href="https://www.adafruit.com/product/4335" target="_blank" rel="noreferrer">TinyPICO — Плата розробки ESP32 - V2</a></li><li><a href="https://www.adafruit.com/product/3405" target="_blank" rel="noreferrer">Плата Adafruit HUZZAH32 — ESP32 Feather</a></li><li><a href="https://www.adafruit.com/product/4201" target="_blank" rel="noreferrer">Adafruit AirLift — Плата розбірного модуля WiFi ESP32</a> (потрібен адаптер FTDI для прошивки вбудованого програмного забезпечення)</li><li><a href="https://www.adafruit.com/product/4172" target="_blank" rel="noreferrer">Adafruit — HUZZAH32</a> (потрібен адаптер FTDI для прошивки ПЗ)</li></ul><h2 id="завантаження-та-прошивання-програмного-забезпечення" tabindex="-1">Завантаження та Прошивання Програмного Забезпечення <a class="header-anchor" href="#завантаження-та-прошивання-програмного-забезпечення" aria-label="Permalink to &quot;Завантаження та Прошивання Програмного Забезпечення&quot;">​</a></h2><p><a href="https://github.com/DroneBridge/ESP32/releases" target="_blank" rel="noreferrer">Завантажте прошивку з репозиторію GitHub</a> і потім <a href="https://github.com/DroneBridge/ESP32#installationflashing-using-precompiled-binaries" target="_blank" rel="noreferrer">дотримуйтесь цих інструкцій щодо прошивки</a>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Інструкції на Github рекомендовані, оскільки вони завжди актуальні. Зверніть увагу, що параметри можуть відрізнятися між релізами <em>DroneBridge для ESP32</em>.</p></div><p>Основними кроками є:</p><ol><li><a href="https://github.com/DroneBridge/ESP32/releases" target="_blank" rel="noreferrer">Завантажте скомпільовані бінарні файли прошивки</a></li><li>Підключіть свій DEVKit до комп&#39;ютера за допомогою USB/серійного мосту (більшість DevKits вже мають USB-порт для прошивання та налагодження)</li><li>Очистіть флеш-пам&#39;ять та прошейте прошивку DroneBridge для ESP32 на свій ESP32 <ul><li>Використання <a href="https://www.espressif.com/en/support/download/other-tools" target="_blank" rel="noreferrer">Інструменту завантаження Flash від Espressif</a> (лише для Windows)</li><li>Використання esp-idf/esptool (на всіх платформах)</li></ul></li><li>Перезапустіть ESP32</li><li><a href="#configuring-dronebridge-for-esp32">Підключіться до мережі WiFi &quot;DroneBridge для ESP32&quot; та налаштуйте прошивку для вашої програми</a></li></ol><h2 id="підключення" tabindex="-1">Підключення <a class="header-anchor" href="#підключення" aria-label="Permalink to &quot;Підключення&quot;">​</a></h2><p>Проводка дуже проста, і схожа для всіх пристроїв при підключенні до портів Pixhawk TELEM1/2. Ви можете використовувати роз&#39;єми заголовка з кроком 2,54 мм або припаяти кабелі телеметрії PX4 безпосередньо до плати.</p><p><img src="'+s+'" alt="Example for wiring an ESP32 to the TELEM port"></p><ol><li>Підключіть UART ESP32 до UART вашого контролера польоту (наприклад, порту TELEM 1 або TELEM 2). Переконайтеся, що рівні напруги відповідають: більшість ESP32 DevKits можуть приймати лише 3,3 В! <ul><li>TX до RX</li><li>RX до TX</li><li>GND до GND</li><li>Забезпечте стабільне живлення 3.3 В або 5 В для ESP32 (в залежності від доступних входів вашого DevKit)</li></ul></li><li>Встановіть порт керування польотом на потрібний протокол.</li><li>Плати з роз&#39;ємом IPEX для зовнішньої антени часто також мають вбудовану антену, яка активується за замовчуванням. Можливо, вам знадобиться перепаяти резистор, щоб активувати зовнішній антенний порт.</li></ol><div class="info custom-block"><p class="custom-block-title">INFO</p><ul><li>Відповідно до ESP32 для виробників на енергопостачанні. Деякі плати можуть мати проблеми, якщо вони одночасно підключені до джерела живлення 5 В та мають підключений кабель USB до USB/серійного мосту (роз&#39;єм USB плати розробника ESP32).</li><li>Деякі виробники ESP32 DevKits використовують неправильні мітки для контактів на своїх продуктах. Переконайтеся, що PIN-коди на вашому платі відмічені правильно при зіткненні з проблемами.</li></ul></div><h2 id="налаштування-qgroundcontrol" tabindex="-1">Налаштування QGroundControl <a class="header-anchor" href="#налаштування-qgroundcontrol" aria-label="Permalink to &quot;Налаштування QGroundControl&quot;">​</a></h2><p>QGroundControl повинен автоматично виявляти підключення і жодні подальші дії не повинні бути необхідними (<em>DroneBridge для ESP32</em> автоматично пересилає дані з усіх підключених WiFi пристроїв через UDP для порту 14550).</p><p>Доступні наступні параметри модулів:</p><ul><li>UDP унікаст на порт <code>14550</code> до всіх підключених пристроїв.</li><li>TCP на порту <code>5760</code></li></ul><h2 id="налаштування-dronebridge-для-esp32" tabindex="-1">Налаштування DroneBridge для ESP32 <a class="header-anchor" href="#налаштування-dronebridge-для-esp32" aria-label="Permalink to &quot;Налаштування DroneBridge для ESP32&quot;">​</a></h2><p>Стандартна конфігурація <em>DroneBridge для ESP32</em> повинна працювати для підключення до PX4 &quot;з коробки&quot;. Єдине налаштування, яке може бути потрібним, - це забезпечення відповідності швидкостей передачі ESP32 та контролера польоту.</p><p>Вам слід змінити ці налаштування, якщо ви хочете використовувати різні контакти на ESP32, іншу конфігурацію WiFi або налаштувати розмір пакета. Менший розмір пакету означає більше накладних витрат і навантаження на систему, але також менше затримки і швидше відновлення після втраченого пакету.</p><h3 id="конфігурація-за-замовчуванням" tabindex="-1">Конфігурація за замовчуванням <a class="header-anchor" href="#конфігурація-за-замовчуванням" aria-label="Permalink to &quot;Конфігурація за замовчуванням&quot;">​</a></h3><ul><li>SSID: <code>DroneBridge для ESP32</code></li><li>Пароль: <code>dronebridge</code></li><li>Transparent/MAVLink</li><li>UART baud rate <code>115200</code></li><li>UART TX pin <code>17</code></li><li>UART RX pin <code>16</code></li><li>Gateway IP: <code>192.168.2.1</code></li></ul><h3 id="налаштування-за-замовчуванням-та-веб-інтерфеис" tabindex="-1">Налаштування за замовчуванням та веб-інтерфейс <a class="header-anchor" href="#налаштування-за-замовчуванням-та-веб-інтерфеис" aria-label="Permalink to &quot;Налаштування за замовчуванням та веб-інтерфейс&quot;">​</a></h3><p>Ви можете змінити конфігурацію за замовчуванням через веб-інтерфейс. Підключіться до ESP32 через WiFi та введіть <code>dronebridge.local</code>, <code>http://dronebridge.local</code> або <code>192.168.2.1</code> у адресну стрічку вашого браузера.</p><p><img src="'+a+`" alt="DroneBridge for ESP32 Webinterface"></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Деякі налаштування потребують перезавантаження ESP32, щоб набути чинності.</p></div><h3 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-label="Permalink to &quot;API&quot;">​</a></h3><p>DroneBridge для ESP32 пропонує REST:API, яке дозволяє вам читати та записувати параметри конфігурації. Ви не обмежені варіантами, які пропонуються веб-інтерфейсом (наприклад, швидкості передачі даних). Ви можете використовувати API для встановлення власних швидкостей передачі даних або для інтеграції системи у власне налаштування.</p><p><strong>Запит налаштувань</strong></p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://dronebridge.local/api/settings/request</span></span></code></pre></div><p><strong>Для запиту статистики</strong></p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://dronebridge.local/api/system/stats</span></span></code></pre></div><p><strong>Запустіть перезавантаження</strong></p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://dronebridge.local/api/system/reboot</span></span></code></pre></div><p><strong>Тригер зміни в налаштуваннях:</strong> Відправити дійсний JSON</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;wifi_ssid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DroneBridge ESP32&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;wifi_pass&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dronebridge&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ap_channel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;tx_pin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">17</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;rx_pin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;telem_proto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;baud&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">115200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;msp_ltm_port&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ltm_pp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;trans_pack_size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ap_ip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;192.168.2.1&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>до</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://dronebridge.local/api/settings/change</span></span></code></pre></div><h2 id="усунення-проблем" tabindex="-1">Усунення проблем <a class="header-anchor" href="#усунення-проблем" aria-label="Permalink to &quot;Усунення проблем&quot;">​</a></h2><ul><li>Завжди стерти спалах ESP32 перед прошивкою нового релізу/прошивки</li><li>Перевірте, чи піни на вашій платі ESP правильно позначені.</li><li>Уведіть IP-адресу в адресний рядок вашого браузера <code>http://192.168.2.1</code>. Немає підтримки https! Можливо, вам доведеться відключитися від мобільної мережі при використанні телефону, щоб мати доступ до веб-інтерфейсу.</li><li>Якщо ваша мережа працює в тому ж діапазоні IP, що й БД для ESP32, вам потрібно змінити IP-адресу шлюзу в веб-інтерфейсі на щось подібне до <code>192.168.5.1</code>.</li></ul>`,46),o=[p];function h(d,k,c,E,g,u){return l(),t("div",null,o)}const y=e(r,[["render",h]]);export{m as __pageData,y as default};
