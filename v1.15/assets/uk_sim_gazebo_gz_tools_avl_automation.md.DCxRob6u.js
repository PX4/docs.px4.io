import{_ as d,c as a,o as l,ab as e,m as t}from"./chunks/framework.CUflZczI.js";const m=JSON.parse('{"title":"Інструмент автоматизації плагіну \\"Advanced Lift Drag\\" (AVL)","description":"","frontmatter":{},"headers":[],"relativePath":"uk/sim_gazebo_gz/tools_avl_automation.md","filePath":"uk/sim_gazebo_gz/tools_avl_automation.md"}'),i={name:"uk/sim_gazebo_gz/tools_avl_automation.md"},s=e(`<h1 id="інструмент-автоматизаціі-плагіну-advanced-lift-drag-avl" tabindex="-1">Інструмент автоматизації плагіну &quot;Advanced Lift Drag&quot; (AVL) <a class="header-anchor" href="#інструмент-автоматизаціі-плагіну-advanced-lift-drag-avl" aria-label="Permalink to &quot;Інструмент автоматизації плагіну &quot;Advanced Lift Drag&quot; (AVL)&quot;">​</a></h1><p>Модель рухомого засобу Gazebo <a href="./../sim_gazebo_gz/vehicles.html#advanced-plane">Поліпшений літак</a> використовує плагін <em>Advanced Lift Drag</em> для моделювання поведінки піднімної сили та аеродинамічного опору рухомого засобу. Цей інструмент дозволяє вам розрахувати параметри, необхідні для створення плагіну <em>Advanced Lift Drag</em> для вашого певного рухомого засобу.</p><p>Вам лише потрібно надати кілька параметрів для кожного крила, а інструмент використовуватиме цю інформацію для виклику моделі решітки вихрів &quot;Athena&quot; (Athena Lattice Vortex або AVL) для здійснення необхідних обчислень. Результати будуть автоматично записані у шаблон плагіну, який потім можна скопіювати у файл моделі або sdf-файл світу.</p><h2 id="встановлення" tabindex="-1">Встановлення <a class="header-anchor" href="#встановлення" aria-label="Permalink to &quot;Встановлення&quot;">​</a></h2><p>Щоб налаштувати інструмент:</p><ol><li><p>Завантажте AVL 3.36 з <a href="https://web.mit.edu/drela/Public/web/avl/" target="_blank" rel="noreferrer">https://web.mit.edu/drela/Public/web/avl/</a>. Файл AVL для версії 3.36 можна знайти приблизно посередині сторінки.</p></li><li><p>Після завантаження розпакуйте AVL та перемістіть його в домашню директорію за допомогою:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -xf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> avl3.36.tgz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./Avl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/</span></span></code></pre></div></li><li><p>Дотримуйтесь <strong>index.md</strong>, що знаходиться у <code>./Avl</code> щоб завершити процес встановлення AVL (вимагає встановлення бібліотек <code>plotlib</code> та <code>eispack</code>). Ми рекомендуємо використовувати варіант компіляції &quot;gfortran&quot;, який може далі вимагати, щоб ви встановили &quot;gfortran&quot;. На Ubuntu це можна зробити виконавши:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gfortran</span></span></code></pre></div><p>При запуску Makefile для AVL, ви можливо зіткнетесь з повідомленням <code>Error 1</code>, яке стверджує що відсутня якась директорія. Це не завадить AVL працювати для нашої мети.</p></li></ol><p>Як тільки процес, описаний в AVL README буде завершений, AVL готовий до використання. Зі сторони AVL та інструменту більше ніяких налаштувань не потрібно.</p><p>Якщо хочете змінити положення директорії AVL, це можна просто зробити передавши прапорець <code>--avl_path</code> до файлу <code>input_avl.py</code> та використавши бажану директорію для прапора (не забудьте додати &quot;/&quot; в останній частині шляху). Запуск в такому вигляді також автоматично налаштує шляхі де необхідно.</p><h2 id="запуск-avl" tabindex="-1">Запуск AVL <a class="header-anchor" href="#запуск-avl" aria-label="Permalink to &quot;Запуск AVL&quot;">​</a></h2><p>Зразковий шаблон наданий у вигляді <code>input.yml</code>, який реалізує стандартний літак з двома елеронами, рулем висоти та стерном. Цей приклад може бути запущений так: <code>python input_avl.py --yaml_file input.yml</code>.</p><p>Для запуску інструмента для вашого літака:</p><ol><li><p>Скопіюйте приклад <code>input.yml</code> до <code>&lt;your_custom_yaml_file&gt;.yml</code> і змініть його, щоб підставити бажаний літак</p></li><li><p>Запустіть інструмент на вашому yml-файлі:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> input_avl.py</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your_custom_yaml_fil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.yml</span></span></code></pre></div><p>Зверніть увагу, що пакети <code>yaml</code> та <code>argparse</code> повинні бути присутні в середовищі Python.</p></li><li><p>Інструмент очікує діапазон певних параметрів рухомого засобу, які потрібні щоб вказати геометрію та фізичні властивості літака. Ви можете або:</p><ul><li>обрати попередньо визначений шаблон моделі (наприклад Cessna або ВЗІП), який має відому кількість поверхонь керування і просто змінити деяки фізичні властивості, або</li><li>визначити повністю довільну модель</li></ul></li></ol><p>Після виконання скрипту, згенеровані файли <code>.avl</code>, <code>.sdf</code> та креслення пропонованих поверхонь керування можна знайти у директорії <code>&lt;your-plane-name&gt;</code>. Файл sdf - це згенерований плагін Advanced Lift Drag який може бути скопійовано і вставлено у файл model.sdf, який потім можна запустити у Gazebo.</p><h2 id="функціонал" tabindex="-1">Функціонал <a class="header-anchor" href="#функціонал" aria-label="Permalink to &quot;Функціонал&quot;">​</a></h2><p>Файл <strong>input_avl.py</strong> приймає параметри надані користувачем та створює з цього файл .avl, який потім може бути прочитаний AVL (програмою). Це відбувається у файлі <strong>process.sh</strong>.</p><p>Вивід згенерований AVL буде збережено у два файли: <strong>custom_vehicle_body_axis_derivatives.txt</strong> та <strong>custom_vehicle_stability_derivatives.txt</strong>. Ці два файли містять параметри, які необхідні для заповнення плагіну Advanced Lift Drag.</p><p>І нарешті, <strong>avl_out_parse.py</strong> читає згенеровані файли .txt та присвоює параметри відповідним елементам у файлі sdf.</p><p>Згенерований плагін Advanced Lift Drag (<code>&lt;custom_plane&gt;.sdf</code>) може бути скопійований в певний файл <strong>model.sdf</strong>, що використовується Gazebo.</p><h2 id="зручність-використання" tabindex="-1">Зручність використання <a class="header-anchor" href="#зручність-використання" aria-label="Permalink to &quot;Зручність використання&quot;">​</a></h2><p>Поточна реалізація надає мінімальний робочий приклад. Більш точні виміри можна отримати, підлаштувавши обрану кількість вихрів вздовж розмаху та хорди крила відповідно до бажаних налаштувань. Тут можна знайти добру відправну точку: <a href="https://www.redalyc.org/pdf/6735/673571173005.pdf" target="_blank" rel="noreferrer">https://www.redalyc.org/pdf/6735/673571173005.pdf</a>.</p><p>Також можна більш точно моделювати рухомий засіб, використовуючи більшу кількість секцій. У поточному yml-файлі визначено лише лівий та правий край для кожної поверхні, що дає рівно одну секцію, але код підтримує розширення до будь-якої кількості бажаних секцій.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><ul><li>Поверхня керування в AVL завжди визначається зліва направо. Це означає, що спочатку потрібно вказати лівий край поверхні, а потім правий. Якщо ви зробите це навпаки, поверхня фактично буде визначена догори дриґом.</li><li>Інструмент призначений для підтримки не більше двох поверхонь керування будь-якого типу на будь-якому рухомому засобі. Маючи більше поверхонь може призвести до помилкової поведінки.</li><li>Ще один важливий момент полягає в тому, що ці скрипти використовують синтаксис match, case, який був введений лише в Python версії 3.10.</li><li>Основним довідковим ресурсом для AVL є <a href="https://web.mit.edu/drela/Public/web/avl/AVL_User_Primer.pdf" target="_blank" rel="noreferrer">https://web.mit.edu/drela/Public/web/avl/AVL_User_Primer.pdf</a>. Цей документ був написаний творцями AVL і містить всі змінні, які можуть бути потрібні для визначення поверхонь керування.</li><li>AVL не може передбачити значення звалювання, тому їх потрібно обчислити/оцінити іншим чином. У поточній реалізації значення звалювання за замовчуванням були взяті з моделі поліпшеного літака з PX4. Звичайно вони повинні бути змінені для нових/інших моделей.</li></ul></div><h2 id="визначення-параметрів" tabindex="-1">Визначення параметрів <a class="header-anchor" href="#визначення-параметрів" aria-label="Permalink to &quot;Визначення параметрів&quot;">​</a></h2><p>Нижче наведено вичерпний перелік того, як параметри визначаються на виході та з яких файлів у AVL вони беруться. Плагін Advanced Lift Drag містить більше деталей про те, що роблять кожен з цих параметрів.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Параметри не були підтверджені експертом, тому ви повинні перевірити їх у плагіні.</p></div><p>З файлу журналу похідних стійкості беруться наступні параметри плагіну advanced lift drag:</p><table><thead><tr><th>Ім&#39;я в AVL</th><th>Ім&#39;я в плагіні Advanced Lift Drag</th><th>Опис</th></tr></thead><tbody><tr><td>Alpha</td><td>alpha</td><td>Кут атаки</td></tr><tr><td>Cmtot</td><td>Cem0</td><td>Коефіцієнт моменту тангажу при нульовому куті атаки</td></tr><tr><td>CLtot</td><td>CL0</td><td>Коефіцієнт сили підйому при нульовому куті атаки</td></tr><tr><td>CDtot</td><td>CD0</td><td>Коефіцієнт аеродинамічного опору при нульовому куті атаки</td></tr><tr><td>CLa</td><td>CLa</td><td>dCL/da (нахил кривої CL-alpha)</td></tr><tr><td>CYa</td><td>CYa</td><td>dCy/da (нахил бічної сили відносно кута атаки)</td></tr><tr><td>Cla</td><td>Cell</td><td>dCl/da (нахил моменту крену відносно кута атаки)</td></tr><tr><td>Cma</td><td>Cema</td><td>dCm/da (нахил моменту тангажу відносно кута атаки - до звалювання)</td></tr><tr><td>Cna</td><td>Cena</td><td>dCn/da (нахил моменту рискання відносно кута атаки)</td></tr><tr><td>CLb</td><td>CLb</td><td>dCL/dbeta (нахил коефіцієнту сили підйому відносно кута ковзання)</td></tr><tr><td>CYb</td><td>CYb</td><td>dCY/dbeta (нахил бічної сили відносно кута ковзання)</td></tr><tr><td>Clb</td><td>Cell</td><td>dCl/dbeta (нахил моменту крену відносно кута ковзання)</td></tr><tr><td>Cmb</td><td>Cemb</td><td>dCm/dbeta (нахил моменту тангажу відносно кута ковзання)</td></tr><tr><td>Cnb</td><td>Cenb</td><td>dCn/dbeta (нахил моменту рискання відносно кута ковзання)</td></tr></tbody></table><p>З файлу журналу похідних вісі тіла беруться наступні параметри плагіну advanced lift drag:</p><table><thead><tr><th>Ім&#39;я в AVL</th><th>Ім&#39;я в плагіні Advanced Lift Drag</th><th>Опис</th></tr></thead><tbody><tr><td>e</td><td>eff</td><td>Ефективність крила (коефіцієнт ефективності Освальда для 3D крила)</td></tr><tr><td>CXp</td><td>CDp</td><td>dCD/dp (нахил коефіцієнту опору відносно швидкості крену)</td></tr><tr><td>CYp</td><td>CYp</td><td>dCY/dp (нахил бічної сили відносно швидкості крену)</td></tr><tr><td>CZp</td><td>CLp</td><td>dCL/dp (нахил коефіцієнту сили підйому відносно швидкості крену)</td></tr><tr><td>Clp</td><td>Cellp</td><td>dCl/dp (нахил моменту крену відносно швидкості крену)</td></tr><tr><td>Cmp</td><td>Cemp</td><td>dCm/dp (нахил моменту тангажу відносно швидкості крену)</td></tr><tr><td>Cmp</td><td>Cenp</td><td>dCn/dp (нахил моменту рискання відносно швидкості крену)</td></tr><tr><td>CXq</td><td>CDq</td><td>dCD/dq (нахил коефіцієнту опору відносно швидкості тангажу)</td></tr><tr><td>CYq</td><td>CYq</td><td>dCY/dq (нахил бічної сили відносно швидкості тангажу)</td></tr><tr><td>CZq</td><td>CLq</td><td>dCL/dq (нахил коефіцієнту сили підйому відносно швидкості тангажу)</td></tr><tr><td>Clq</td><td>Cellq</td><td>dCl/dq (нахил моменту крену відносно швидкості тангажу)</td></tr><tr><td>Cmq</td><td>Cemq</td><td>dCm/dq (нахил моменту тангажу відносно швидкості тангажу)</td></tr><tr><td>Cnq</td><td>Cenq</td><td>dCn/dq (нахил моменту рискання відносно швидкості тангажу)</td></tr><tr><td>CXr</td><td>CDr</td><td>dCD/dr (нахил коефіцієнту опору відносно швидкості рискання)</td></tr><tr><td>CYr</td><td>CYr</td><td>dCY/dr (нахил бічної сили відносно швидкості рискання)</td></tr><tr><td>CZr</td><td>CLr</td><td>dCL/dr (нахил коефіцієнту сили підйому відносно швидкості рискання)</td></tr><tr><td>Clr</td><td>Cellr</td><td>dCl/dr (нахил моменту крену відносно швидкості рискання)</td></tr><tr><td>Cmr</td><td>Cemr</td><td>dCm/dr (нахил моменту тангажу відносно швидкості рискання)</td></tr><tr><td>Cnr</td><td>Cenr</td><td>dCn/dr (нахил моменту рискання відносно швидкості рискання)</td></tr></tbody></table><p>Крім того, кожна поверхня керування має шість власних параметрів, які також походять з цього файлу журналу. <code>{i}</code> нижче знаходиться в діапазоні від 1 до кількості унікальних типів поверхні керування в моделі.</p>`,30),r=t("table",null,[t("thead",null,[t("tr",null,[t("th",null,"Ім'я в AVL"),t("th",null,"Ім'я в плагіні Advanced Lift Drag"),t("th",null,"Опис")])]),t("tbody",null,[t("tr",null,[t("td",{i:""},"CXd"),t("td",null,"CD_ctrl"),t("td",null,"Вплив відхилення поверхні керування на опір")]),t("tr",null,[t("td",{i:""},"CYd"),t("td",null,"CY_ctrl"),t("td",null,"Вплив відхилення поверхні керування на бічну силу")]),t("tr",null,[t("td",{i:""},"CZd"),t("td",null,"CL_ctrl"),t("td",null,"Вплив відхилення поверхні керування на силу підйому")]),t("tr",null,[t("td",{i:""},"Cld"),t("td",null,"Cell_ctrl"),t("td",null,"Вплив відхилення поверхні керування на момент крену")]),t("tr",null,[t("td",{i:""},"Cmd"),t("td",null,"Cem_ctrl"),t("td",null,"Вплив відхилення поверхні керування на момент тангажу")]),t("tr",null,[t("td",{i:""},"Cnd"),t("td",null,"Cen_ctrl"),t("td",null,"Вплив відхилення поверхні керування на момент рискання")])])],-1),n=[s,r];function o(p,h,c,C,u,g){return l(),a("div",null,n)}const _=d(i,[["render",o]]);export{m as __pageData,_ as default};
