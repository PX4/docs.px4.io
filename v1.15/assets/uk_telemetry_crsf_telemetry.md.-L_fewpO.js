import{_ as t,c as e,o as r,ab as a}from"./chunks/framework.CUflZczI.js";const u=JSON.parse('{"title":"Телеметрія CRSF (TBS Crossfire Telemetry)","description":"","frontmatter":{},"headers":[],"relativePath":"uk/telemetry/crsf_telemetry.md","filePath":"uk/telemetry/crsf_telemetry.md"}'),s={name:"uk/telemetry/crsf_telemetry.md"},l=a('<h1 id="телеметрія-crsf-tbs-crossfire-telemetry" tabindex="-1">Телеметрія CRSF (TBS Crossfire Telemetry) <a class="header-anchor" href="#телеметрія-crsf-tbs-crossfire-telemetry" aria-label="Permalink to &quot;Телеметрія CRSF (TBS Crossfire Telemetry)&quot;">​</a></h1><p>CRSF є телеметричним протоколом, який може бути використаний як для <a href="./../getting_started/rc_transmitter_receiver.html">RC керування</a>, так і для отримання телеметричної інформації з транспортного засобу/контролера польоту на сумісному RC передавачі.</p><p>Протокол був розроблений <a href="https://www.team-blacksheep.com/" target="_blank" rel="noreferrer">Team BlackSheep</a> для їхньої системи керування RC Crossfire, але також використовується системами керування RC <a href="https://www.expresslrs.org/" target="_blank" rel="noreferrer">ExpressLRS (ELRS)</a>. Це бідирекціональний протокол, який потребує лише одного UART для обміну даними як з RC, так і з телеметрією.</p><p>Підтримувані телеметричні повідомлення перераховані <a href="#telemetry-messages">тут</a>, і включають: режим польоту, рівень заряду батареї, дані GPS, сила сигналу RC, швидкість, висота тощо.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Якщо вам не потрібна телеметрія, ви можете підключити TBS Crossfire до порту <code>RCIN</code> та налаштувати приймач на використання S.BUS. Системи радіозв&#39;язку Crossfire також можуть бути використані як <a href="./../telemetry/">Телеметричні радіо</a>.</p></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>PX4 не включає підтримку протоколу CRSF за замовчуванням. Нижче наведені <a href="#px4-configuration">інструкції</a> пояснюють, як побудувати та завантажити власну прошивку PX4, яка містить необхідні модулі.</p></div><h2 id="налаштування-системи-радіо" tabindex="-1">Налаштування системи радіо <a class="header-anchor" href="#налаштування-системи-радіо" aria-label="Permalink to &quot;Налаштування системи радіо&quot;">​</a></h2><p>Для використання телеметрії CRSF вам знадобиться <a href="#tbs-radio-systems">радіосистема TBS Crossfire</a> або <a href="#expresslrs-radio-systems">радіосистема ExpressLRS</a>, яка включає в себе <a href="#rc-controllers">керування RC</a> з передавачем та приймачем (від того ж виробника).</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Історично радіокерована система RC складалася з контролера на землі, який передавав сигнал отримувачу на транспортному засобі. Навіть якщо багато радіосистем зараз є двосторонніми, земельний модуль все ще може називатися передавачем, а повітряний блок може називатися приймачем.</p></div><p>Зазвичай вам потрібно окремо налаштувати та сконфігурувати передавач та приймач, а потім <em>прив&#39;язати</em> їх разом.</p><p>Трансмітер може бути неот&#39;ємною частиною <a href="#rc-controllers">керування RC</a>, або це може бути окремий модуль, який ви вставляєте в контролер. Якщо це окремий модуль, то вам може знадобитися також оновити програмне забезпечення модуля на передавачі на прошивку, яка підтримує CRSF, таку як OpenTX або EdgeTx. У обох випадках вам потрібно налаштувати передавач для активації CRSF.</p><p>Ресивер має бути <a href="#wiring">wired</a> в витрачений порт (UART) на авіаперехоплювачу польоту. Потім ви можете <em>зв&#39;язати</em> передавач та приймач разом.</p><p>Інструкції для вищезазначених кроків описані в</p><ul><li><a href="https://www.team-blacksheep.com/tbs-crossfire-manual.pdf" target="_blank" rel="noreferrer">Посібник TBS Crossfire</a></li><li><a href="https://www.expresslrs.org/quick-start/getting-started/" target="_blank" rel="noreferrer">Express LRS: Швидкий старт</a></li></ul><h3 id="підключення" tabindex="-1">Підключення <a class="header-anchor" href="#підключення" aria-label="Permalink to &quot;Підключення&quot;">​</a></h3><p>TX і RX на обраному екрані контролю польоту потрібно підключитися до окремих каналів на приймачі. Сигнал зазвичай є неінвертованим і може бути підключений безпосередньо (в кабелі не потрібна додаткова логіка інвертора). Вам слід перевірити посібник для вашого конкретного приймача, однак!</p><h4 id="проводка-приимача-tbs" tabindex="-1">Проводка приймача TBS <a class="header-anchor" href="#проводка-приимача-tbs" aria-label="Permalink to &quot;Проводка приймача TBS&quot;">​</a></h4><p>Для приймачів TBS ви підключаєте UART і приймач FC, як показано (це передбачає TBS Nano RX).</p><table><thead><tr><th>FC UART</th><th>Nano RX</th></tr></thead><tbody><tr><td>TX</td><td>Ch2</td></tr><tr><td>RX</td><td>Ch1</td></tr></tbody></table><h4 id="проводка-приимача-expresslrs" tabindex="-1">Проводка приймача ExpressLRS <a class="header-anchor" href="#проводка-приимача-expresslrs" aria-label="Permalink to &quot;Проводка приймача ExpressLRS&quot;">​</a></h4><p>Для приймачів ExpressLRS підключіть дріт до UART контролера польоту, як показано нижче (проводка детально описана <a href="https://www.expresslrs.org/quick-start/receivers/wiring-up/" target="_blank" rel="noreferrer">тут</a>):</p><table><thead><tr><th>FC UART</th><th>ExpressLRS</th></tr></thead><tbody><tr><td>TX</td><td>RX</td></tr><tr><td>RX</td><td>TX</td></tr><tr><td>VCC</td><td>VCC</td></tr><tr><td>GND</td><td>GND</td></tr></tbody></table><h2 id="конфігурація-px4" tabindex="-1">Конфігурація PX4 <a class="header-anchor" href="#конфігурація-px4" aria-label="Permalink to &quot;Конфігурація PX4&quot;">​</a></h2><h3 id="конфігурація-прошивки-збірка" tabindex="-1">Конфігурація прошивки/збірка <a class="header-anchor" href="#конфігурація-прошивки-збірка" aria-label="Permalink to &quot;Конфігурація прошивки/збірка&quot;">​</a></h3><p>Підтримка телеметрії CRSF не включена в жодне ПЗ PX4 за замовчуванням. Для використання цієї функції вам потрібно зібрати та завантажити користувацьку прошивку, яка включає <a href="./../modules/modules_driver.html#crsf-rc">crsf-rc</a> та видаляє <a href="./../modules/modules_driver.html#rc-input">rc_input</a>.</p><p>Кроки наступні:</p><ol><li><p><a href="./../dev_setup/dev_env.html">Налаштуйте середовище розробки</a> для побудови PX4.</p><p>У рамках цього процесу ви використовуватимете <code>git</code> для отримання вихідного коду в каталог <strong>PX4-Autopilot</strong>.</p></li><li><p>Відкрийте термінал та виконайте команду <code>cd</code> в директорію <code>PX4-Autopilot</code>.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PX4-Autopilot</span></span></code></pre></div></li><li><p>Запустіть інструмент конфігурації плати PX4 (<code>menuconfig</code>) для вашої цілі <code>make</code> за допомогою параметру <code>boardconfig</code> (тут ціль - контролер польоту <a href="./../flight_controller/arkv6x.html">ARK Electronics ARKV6X</a>):</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ark_fmu-v6x_default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> boardconfig</span></span></code></pre></div></li><li><p>У інструменті конфігурації плати PX4:</p><ul><li>Вимкніть модуль за замовчуванням <code>rc_input</code><ol><li>Перейдіть до підменю <code>драйверів</code>, потім прокрутіть вниз, щоб виділити <code>rc_input</code>.</li><li>Використовуйте клавішу Enter, щоб видалити <code>*</code> з прапорця <code>rc_input</code> checkbox.</li></ol></li><li>Включити модуль <code>crsf_rc</code><ol><li>Прокрутіть, щоб виділити підменю <code>RC</code>, а потім натисніть Enter, щоб відкрити його.</li><li>Прокрутіть, щоб виділити <code>crsf_rc</code> і натисніть Enter, щоб увімкнути його.</li></ol></li></ul><p>Збережіть і вийдіть з інструменту конфігурації плати PX4.</p></li><li><p><a href="./../dev_setup/building_px4.html">Збудуйте вихідний код PX4</a> зі своїми змінами (знову, припускаючи, що ви використовуєте ARKV6X):</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ark_fmu-v6x_default</span></span></code></pre></div></li></ol><p>Це побудує вашу власну прошивку, яку зараз потрібно завантажити на ваш контролер польоту.</p><h3 id="завантаження-прошивки" tabindex="-1">Завантаження прошивки <a class="header-anchor" href="#завантаження-прошивки" aria-label="Permalink to &quot;Завантаження прошивки&quot;">​</a></h3><p>Щоб завантажити кастомну прошивку, спочатку підключіть ваш контролер польотів до комп’ютера розробки через USB.</p><p>Ви можете завантажити прошивку як частину процесу збірки, використовуючи параметри <code>upload</code>:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ark_fmu-v6x_default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upload</span></span></code></pre></div><p>Альтернативно ви можете використовувати QGroundControl для встановлення прошивки, як описано в <a href="./../config/firmware.html#installing-px4-main-beta-or-custom-firmware">Прошивка &gt; Встановлення PX4 master, beta або власної прошивки</a>.</p><h3 id="налаштування-параметрів" tabindex="-1">Налаштування параметрів <a class="header-anchor" href="#налаштування-параметрів" aria-label="Permalink to &quot;Налаштування параметрів&quot;">​</a></h3><p><a href="./../advanced_config/parameters.html">Знайти та встановити</a> наступні параметри:</p><ol><li><p><a href="./../advanced_config/parameter_reference.html#RC_CRSF_PRT_CFG">RC_CRSF_PRT_CFG</a> - Встановити в порт, який підключений до приймача CRSF (наприклад, <code>TELEM1</code>).</p><p>Цей <a href="./../peripherals/serial_configuration.html">налаштує послідовний порт</a> для використання протоколу CRSF. Зверніть увагу, що деякі послідовні порти можуть вже мати <a href="./../peripherals/serial_configuration.html#default-serial-port-configuration">картографування типового послідовного порту</a> або <a href="./../peripherals/mavlink_peripherals.html#default-mavlink-ports">типове картографування послідовного порту MAVLink</a>, яке вам доведеться скасувати, перш ніж ви зможете призначити порт для CRSF. Наприклад, якщо ви хочете використовувати <code>TELEM1</code> або <code>TELEM2</code>, вам спочатку потрібно змінити <a href="./../advanced_config/parameter_reference.html#MAV_0_CONFIG">MAV_0_CONFIG</a> або <a href="./../advanced_config/parameter_reference.html#MAV_1_CONFIG">MAV_1_CONFIG</a>, щоб припинити налаштування цих портів.</p><p>Немає потреби встановлювати швидкість передачі для порту, оскільки це налаштовано драйвером.</p></li><li><p><a href="./../advanced_config/parameter_reference.html#RC_CRSF_TEL_EN">RC_CRSF_TEL_EN</a> - Увімкніть для активації перехресної телеметрії.</p></li></ol><h3 id="налаштування-радіо" tabindex="-1">Налаштування радіо <a class="header-anchor" href="#налаштування-радіо" aria-label="Permalink to &quot;Налаштування радіо&quot;">​</a></h3><p><a href="./../config/radio.html">Налаштування керування радіо</a> пояснює, як відобразити палиці керування атитудою вашого пульту керування RC (крен, тангаж, розворот, газ) на канали, та калібрувати мінімальні, максимальні, обрізки та зворотні налаштування для всіх інших контролерів передавача / каналів RC.</p><h2 id="контролери-rc" tabindex="-1">Контролери RC <a class="header-anchor" href="#контролери-rc" aria-label="Permalink to &quot;Контролери RC&quot;">​</a></h2><p>Трансмітер може бути неот&#39;ємною частиною керування RC, або це може бути окремий модуль, який ви вставляєте в контролер.</p><p>RC Контролери, які підтримують модулі TX TBS Crossfire та ExpressLRS:</p><ul><li><a href="https://www.frsky-rc.com/product/taranis-x9d-plus-2/" target="_blank" rel="noreferrer">FrSky Taranis X9D Plus</a> має зовнішній модульний бей, який може бути використаний з передавальними модулями TBS або ExpressLRS, які сумісні з &quot;JR module bay&quot;. Вам потрібно буде встановити програмне забезпечення OpenTX, яке підтримує CRSF, та увімкнути зовнішній модуль та CRSF.</li><li><a href="https://www.radiomasterrc.com/collections/tx16s-mkii" target="_blank" rel="noreferrer">Radiomaster TX16S</a> має внутрішній модуль передавача ExpressLRS. Він також має зовнішній модульний бей, який може бути використаний з передавальними модулями TBS або ExpressLRS, які сумісні з &quot;JR module bay&quot;. Він працює як на програмному забезпеченні OpenTX, так і на програмному забезпеченні EdgeTx, кожне з яких може підтримувати CRSF.</li></ul><h2 id="радіосистеми-tbs" tabindex="-1">Радіосистеми TBS <a class="header-anchor" href="#радіосистеми-tbs" aria-label="Permalink to &quot;Радіосистеми TBS&quot;">​</a></h2><p><a href="https://www.team-blacksheep.com/shop/cat:cat_crossfire#product_listing" target="_blank" rel="noreferrer">Системи радіо TBS Crossfire перераховані тут</a>. Нижче наведено кілька опцій «turnkey».</p><p>Модулі передавача:</p><ul><li><a href="https://www.team-blacksheep.com/products/prod:crossfire_tx" target="_blank" rel="noreferrer">TBS CROSSFIRE TX - LONG RANGE R/C TRANSMITTER</a></li></ul><p>Приймачі:</p><ul><li><a href="http://team-blacksheep.com/products/prod:crossfire_nano_rx" target="_blank" rel="noreferrer">TBS Crossfire Nano RX</a> - призначений для невеликих квадкоптерів.</li></ul><h2 id="системи-радіо-expresslrs" tabindex="-1">Системи радіо ExpressLRS <a class="header-anchor" href="#системи-радіо-expresslrs" aria-label="Permalink to &quot;Системи радіо ExpressLRS&quot;">​</a></h2><p>Express LRS надає керівництво з радіосистем на сторінці <a href="https://www.expresslrs.org/hardware/hardware-selection/" target="_blank" rel="noreferrer">Вибір обладнання</a>. Нижче наведено кілька перевірених варіантів.</p><p>Модулі передавача:</p><ul><li>TBD</li></ul><p>Приймачі:</p><ul><li><a href="http://www.mateksys.com/?portfolio=elrs-r24" target="_blank" rel="noreferrer">ExpressLRS Matek Diversity RX</a>.</li></ul><p>:::note Використовується в журналі збірки <a href="./../frames_plane/reptile_dragon_2.html">Reptile Dragon 2</a>. Дивіться розділи <a href="./../frames_plane/reptile_dragon_2.html#elrs-rx">ELRS Rx</a> та <a href="./../frames_plane/reptile_dragon_2.html#radio-setup">Налаштування радіо</a>. :::</p><h2 id="телеметричні-повідомлення" tabindex="-1">Телеметричні повідомлення <a class="header-anchor" href="#телеметричні-повідомлення" aria-label="Permalink to &quot;Телеметричні повідомлення&quot;">​</a></h2><p>Підтримуються телеметрійні повідомлення та їх джерело перераховані нижче (ця таблиця повторно створюється з <a href="https://www.team-blacksheep.com/tbs-crossfire-manual.pdf" target="_blank" rel="noreferrer">TBS Crossfire Manual: &quot;Доступні датчики з OpenTX&quot;</a>).</p><table><thead><tr><th>Datapoint</th><th>Опис</th><th>Джерела даних</th></tr></thead><tbody><tr><td>1RSS</td><td>Uplink - отримана сила сигналу антени 1 (RSSI)</td><td>TBS CROSSFIRE RX</td></tr><tr><td>2RSS</td><td>Uplink - отримана сила сигналу антени 2 (RSSI)</td><td>TBS CROSSFIRE RX</td></tr><tr><td>RQly</td><td>Uplink - якість посилання (дійсні пакети)</td><td>TBS CROSSFIRE RX</td></tr><tr><td>RSNR</td><td>Uplink - відношення сигнал/шум</td><td>TBS CROSSFIRE RX</td></tr><tr><td>RFMD</td><td>Uplink - частота оновлення, 0 = 4Гц, 1 = 50Гц, 2 = 150Гц</td><td>TBS CROSSFIRE RX</td></tr><tr><td>TPWR</td><td>Uplink - потужність передачі</td><td>TBS CROSSFIRE TX</td></tr><tr><td>TRSS</td><td>Downlink - сила сигналу антени</td><td>TBS CROSSFIRE TX</td></tr><tr><td>TQly</td><td>Downlink - якість посилання (дійсні пакети)</td><td>TBS CROSSFIRE TX</td></tr><tr><td>TSNR</td><td>Downlink - відношення сигнал/шум</td><td>TBS CROSSFIRE TX</td></tr><tr><td>ANT</td><td>Датчик лише для налагодження</td><td>TBS CROSSFIRE TX</td></tr><tr><td>GPS</td><td>GPS координати</td><td>TBS GPS / FC</td></tr><tr><td>Alt</td><td>GPS Висоти</td><td>TBS GPS / FC</td></tr><tr><td>Sats</td><td>Супутники GPS отримано</td><td>TBS GPS / FC</td></tr><tr><td>Hdg</td><td>Магнітна орієнтація</td><td>TBS GPS / FC</td></tr><tr><td>RXBt</td><td>Напруга батареї</td><td>TBS GPS / FC/ CROSSFIRE RX/ CORE</td></tr><tr><td>Curr</td><td>Поточне витягування</td><td>TBS GPS / FC// CORE</td></tr><tr><td>Capa</td><td>Поточне споживання</td><td>TBS GPS / FC/ CORE</td></tr><tr><td>Ptch</td><td>Кут нахилу поля FC</td><td>FC</td></tr><tr><td>Roll</td><td>Кут кочення FC</td><td>FC</td></tr><tr><td>Yaw</td><td>Кут курсу FC</td><td>FC</td></tr><tr><td>FM</td><td>Режим польоту</td><td>FC</td></tr><tr><td>VSPD</td><td>Барометр</td><td>FC</td></tr></tbody></table><h2 id="дивіться-також" tabindex="-1">Дивіться також <a class="header-anchor" href="#дивіться-також" aria-label="Permalink to &quot;Дивіться також&quot;">​</a></h2><ul><li><a href="https://www.team-blacksheep.com/tbs-crossfire-manual.pdf" target="_blank" rel="noreferrer">Посібник TBS Crossfire</a></li><li><a href="https://www.expresslrs.org/quick-start/getting-started/" target="_blank" rel="noreferrer">Документація ExpressLRS</a></li><li><a href="./../peripherals/frsky_telemetry.html">FrSky телеметрія</a></li><li><a href="./../config/radio.html">Налаштування керування радіо</a></li><li><a href="./../getting_started/rc_transmitter_receiver.html">Системи управління Радіо</a></li></ul>',60),d=[l];function i(o,p,h,n,c,f){return r(),e("div",null,d)}const S=t(s,[["render",i]]);export{u as __pageData,S as default};
