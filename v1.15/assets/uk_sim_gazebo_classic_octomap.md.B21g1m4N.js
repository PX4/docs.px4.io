import{_ as s}from"./chunks/octomap.CQbWjbel.js";import{_ as i,c as a,o as t,ab as e}from"./chunks/framework.CUflZczI.js";const F=JSON.parse('{"title":"3D Моделі OctoMap з ROS/Gazebo Classic","description":"","frontmatter":{},"headers":[],"relativePath":"uk/sim_gazebo_classic/octomap.md","filePath":"uk/sim_gazebo_classic/octomap.md"}'),p={name:"uk/sim_gazebo_classic/octomap.md"},l=e(`<h1 id="_3d-моделі-octomap-з-ros-gazebo-classic" tabindex="-1">3D Моделі OctoMap з ROS/Gazebo Classic <a class="header-anchor" href="#_3d-моделі-octomap-з-ros-gazebo-classic" aria-label="Permalink to &quot;3D Моделі OctoMap з ROS/Gazebo Classic&quot;">​</a></h1><p><a href="http://octomap.github.io/" target="_blank" rel="noreferrer">Бібліотека OctoMap</a> - це бібліотека з відкритим кодом для генерації об&#39;ємних моделей 3D середовища з даних датчиків. Дані цієї моделі потім можуть використовуватись дроном для навігації та уникнення перешкод.</p><p>У цьому посібнику описано як використовувати <em>OctoMap</em> з <a href="./../sim_gazebo_classic/README.html">Gazebo Classic</a> <a href="https://github.com/ethz-asl/rotors_simulator/wiki/RotorS-Simulator" target="_blank" rel="noreferrer">Симулятором роторів</a> та ROS.</p><h2 id="встановлення" tabindex="-1">Встановлення <a class="header-anchor" href="#встановлення" aria-label="Permalink to &quot;Встановлення&quot;">​</a></h2><p>Встановлення потребує ROS, <a href="./../sim_gazebo_classic/README.html">Gazebo Classic</a> та плагін симулятора роторів. Дотримуйтесь <a href="https://github.com/ethz-asl/rotors_simulator" target="_blank" rel="noreferrer">інструкцій Симулятора роторів</a> для встановлення.</p><p>Далі - встановіть бібліотеку <em>OctoMap</em>:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ros-indigo-octomap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ros-indigo-octomap-mapping</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rosdep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> octomap_mapping</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rosmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> octomap_mapping</span></span></code></pre></div><p>Тепер відкрийте <code>~/catkin_ws/src/rotors_simulator/rotors_gazebo/CMakeLists.txt</code> та додайте наступні рядки в кінець файлу:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">find_package(octomap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> REQUIRED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">include_directories($</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{OCTOMAP_INCLUDE_DIRS})</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">link_libraries($</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{OCTOMAP_LIBRARIES})</span></span></code></pre></div><p>Відкрийте <code>~/catkin_ws/src/rotors_simulator/rotors_gazebo/package.xml</code> та додайте наступні рядки:</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build_depend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;octomap&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build_depend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">run_depend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;octomap&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">run_depend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>Виконайте наступні два рядки:</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Перший зміню ваш редактор оболонки за замовчуванням на <em>gedit</em>. Це рекомендується для користувачів, які мають мало досвіду роботи з <em>vim</em> (редактор за замовчування), в іншому випадку його можна опустити.</p></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EDITOR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;gedit&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rosed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> octomap_server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> octomap_tracking_server.launch</span></span></code></pre></div><p>та змінити наступні два рядки:</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;frame_id&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;map&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--remap from=&quot;cloud_in&quot; to=&quot;/rgbdslam/batch_clouds&quot; /--&gt;</span></span></code></pre></div><p>на:</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;frame_id&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">remap</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cloud_in&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/firefly/vi_sensor/camera_depth/depth/points&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre></div><h2 id="запуск-симуляціі" tabindex="-1">Запуск симуляції <a class="header-anchor" href="#запуск-симуляціі" aria-label="Permalink to &quot;Запуск симуляції&quot;">​</a></h2><p>Виконайте наступні три рядки в <em>окремих</em> терміналах. Це відкриє <a href="./../sim_gazebo_classic/README.html">Gazebo Classic</a>, <em>Rviz</em> та сервер octomap.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">roslaunch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rotors_gazebo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mav_hovering_example_with_vi_sensor.launch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  mav_name:=firefly</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rviz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">roslaunch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> octomap_server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> octomap_tracking_server.launch</span></span></code></pre></div><p>У <em>Rviz</em> змінить поле &#39;Fixed Frame&#39; з &#39;map&#39; на &#39;world&#39; у верхній правій частині вікна. Тепер натисніть кнопку &quot;Додати&quot; в нижньому лівому куті та оберіть MarkerArray. Потім двічі натисніть на MarkerArray та змініть &#39;Marker Topic&#39; з <code>/free_cells_vis_array</code> на <code>/occupied_cells_vis_array</code>.</p><p>Тепер ви повинні побачити частину підлоги.</p><p>У вікні <em>Gazebo Classic</em> вставте куб перед червоними роторами, який ви повинні побачити у <em>Rviz</em>.</p><p><img src="`+s+'" alt="Приклад OctoMap в Gazebo"></p>',25),h=[l];function n(k,o,r,d,c,g){return t(),a("div",null,h)}const y=i(p,[["render",n]]);export{F as __pageData,y as default};
