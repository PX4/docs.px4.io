import{_ as a,c as t,o as e,ab as r}from"./chunks/framework.CUflZczI.js";const g=JSON.parse('{"title":"Offboard控制","description":"","frontmatter":{},"headers":[],"relativePath":"zh/ros/offboard_control.md","filePath":"zh/ros/offboard_control.md"}'),i={name:"zh/ros/offboard_control.md"},o=r('<h1 id="offboard控制" tabindex="-1">Offboard控制 <a class="header-anchor" href="#offboard控制" aria-label="Permalink to &quot;Offboard控制&quot;">​</a></h1><p>Offboard控制背后的想法是能够使用在自动驾驶仪外运行的软件来控制 PX4 飞控。 这是通过 Mavlink 协议完成的, 特别是 <a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED" target="_blank" rel="noreferrer">SET_POSITION_TARGET_LOCAL_NED</a> 和 <a href="https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET" target="_blank" rel="noreferrer">SET_ATTITUDE_TARGET</a> 消息。 :::</p><p>Offboard控制背后的想法是能够使用在自动驾驶仪外运行的软件来控制 PX4 飞控。 这是通过 Mavlink 协议完成的, 特别是 <a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED" target="_blank" rel="noreferrer">SET_POSITION_TARGET_LOCAL_NED</a> 和 <a href="https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET" target="_blank" rel="noreferrer">SET_ATTITUDE_TARGET</a> 消息。</p><h2 id="offboard控制固件设置" tabindex="-1">Offboard控制固件设置 <a class="header-anchor" href="#offboard控制固件设置" aria-label="Permalink to &quot;Offboard控制固件设置&quot;">​</a></h2><p>在进行Offboard开发前，您需要在固件端做两个设置。</p><h3 id="_1-将遥控开关映射到离板模式激活" tabindex="-1">1. 将遥控开关映射到离板模式激活 <a class="header-anchor" href="#_1-将遥控开关映射到离板模式激活" aria-label="Permalink to &quot;1. 将遥控开关映射到离板模式激活&quot;">​</a></h3><p>要做到这一点， 在 <em>QGroundControl</em> 中加载参数，将RC_MAP_OFFB_SW 参数设置为您用来激活Offboard模式的RC 通道 。 该方法会在脱离Offboard模式后进入位置控制模式。</p><p>虽然此步骤不是强制性的，因为您可以使用 Mavlink 消息激活Offboard模式。 我们认为这种方法安全多了。</p><h3 id="_2-启用机载计算机接口" tabindex="-1">2. 启用机载计算机接口 <a class="header-anchor" href="#_2-启用机载计算机接口" aria-label="Permalink to &quot;2. 启用机载计算机接口&quot;">​</a></h3><p>在连接任务计算机的串口上启动MAVLink （参见 <a href="./../companion_computer/README.html">任务计算机</a>）。</p><h2 id="硬件设置" tabindex="-1">硬件设置 <a class="header-anchor" href="#硬件设置" aria-label="Permalink to &quot;硬件设置&quot;">​</a></h2><p>通常，有三种方式设置Offboard模式通信。</p><h3 id="串口电台" tabindex="-1">串口电台 <a class="header-anchor" href="#串口电台" aria-label="Permalink to &quot;串口电台&quot;">​</a></h3><ol><li><p>一端连接飞控的 UART</p></li><li><p>一端连接地面站电脑</p><p>参考电台包括：</p><ul><li><a href="http://www.lairdtech.com/products/rm024" target="_blank" rel="noreferrer">Lairdtech RM024</a></li><li><a href="http://www.digi.com/products/xbee-rf-solutions/modules" target="_blank" rel="noreferrer">Digi International XBee Pro</a></li></ul></li></ol><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggVEQ7XG4gIGduZFtHcm91bmQgU3RhdGlvbl0gLS1NQVZMaW5rLS0-IHJhZDFbR3JvdW5kIFJhZGlvXTtcbiAgcmFkMSAtLVJhZGlvUHJvdG9jb2wtLT4gcmFkMltWZWhpY2xlIFJhZGlvXTtcbiAgcmFkMiAtLU1BVkxpbmstLT4gYVtBdXRvcGlsb3RdOyIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9" target="_blank" rel="noreferrer"><img src="https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggVEQ7XG4gIGduZFtHcm91bmQgU3RhdGlvbl0gLS1NQVZMaW5rLS0-IHJhZDFbR3JvdW5kIFJhZGlvXTtcbiAgcmFkMSAtLVJhZGlvUHJvdG9jb2wtLT4gcmFkMltWZWhpY2xlIFJhZGlvXTtcbiAgcmFkMiAtLU1BVkxpbmstLT4gYVtBdXRvcGlsb3RdOyIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9" alt="流程图：mavlink 通道"></a></p><h3 id="板载处理器" tabindex="-1">板载处理器 <a class="header-anchor" href="#板载处理器" aria-label="Permalink to &quot;板载处理器&quot;">​</a></h3><p>在飞行器上部署一台小型将计算机，用 UART 转 USB 适配器连接飞控。 这里有许多可能性，这将取决于您除了向自驾仪发送指令外，还想要做什么样的额外机载处理。 Some examples are provided in <a href="./../companion_computer/#companion-computer-options">Companion Computers</a>.</p><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggVEQ7XG4gIGNvbXBbQ29tcGFuaW9uIENvbXB1dGVyXSAtLU1BVkxpbmstLT4gdWFydFtVQVJUIEFkYXB0ZXJdO1xuICB1YXJ0IC0tTUFWTGluay0tPiBBdXRvcGlsb3Q7IiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0" target="_blank" rel="noreferrer"><img src="https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggVEQ7XG4gIGNvbXBbQ29tcGFuaW9uIENvbXB1dGVyXSAtLU1BVkxpbmstLT4gdWFydFtVQVJUIEFkYXB0ZXJdO1xuICB1YXJ0IC0tTUFWTGluay0tPiBBdXRvcGlsb3Q7IiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0" alt="流程图：机载计算机Mavlink"></a></p><h3 id="板载处理器和-wifi-链接到-ros-推荐" tabindex="-1">板载处理器和 WIFI 链接到 ROS（<em><strong>推荐</strong></em>） <a class="header-anchor" href="#板载处理器和-wifi-链接到-ros-推荐" aria-label="Permalink to &quot;板载处理器和 WIFI 链接到 ROS（***推荐***）&quot;">​</a></h3><p>部署在飞行器上的小型计算机除了通过 UART - USB 适配器连接到自动驾驶仪外，同时还可通过WiFi连接至运行 ROS 的地面站。 这可以是上述配备了WiFi适配器的任一计算机。</p><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggVERcbiAgc3ViZ3JhcGggR3JvdW5kICBTdGF0aW9uXG4gIGduZFtST1MgRW5hYmxlZCBDb21wdXRlcl0gLS0tIHFnY1txR3JvdW5kQ29udHJvbF1cbiAgZW5kXG4gIGduZCAtLU1BVkxpbmsvVURQLS0-IHdbV2lGaV07XG4gIHFnYyAtLU1BVkxpbmstLT4gdztcbiAgc3ViZ3JhcGggVmVoaWNsZVxuICBjb21wW0NvbXBhbmlvbiBDb21wdXRlcl0gLS1NQVZMaW5rLS0-IHVhcnRbVUFSVCBBZGFwdGVyXVxuICB1YXJ0IC0tLSBBdXRvcGlsb3RcbiAgZW5kXG4gIHcgLS0tIGNvbXAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ" target="_blank" rel="noreferrer"><img src="https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggVERcbiAgc3ViZ3JhcGggR3JvdW5kICBTdGF0aW9uXG4gIGduZFtST1MgRW5hYmxlZCBDb21wdXRlcl0gLS0tIHFnY1txR3JvdW5kQ29udHJvbF1cbiAgZW5kXG4gIGduZCAtLU1BVkxpbmsvVURQLS0-IHdbV2lGaV07XG4gIHFnYyAtLU1BVkxpbmstLT4gdztcbiAgc3ViZ3JhcGggVmVoaWNsZVxuICBjb21wW0NvbXBhbmlvbiBDb21wdXRlcl0gLS1NQVZMaW5rLS0-IHVhcnRbVUFSVCBBZGFwdGVyXVxuICB1YXJ0IC0tLSBBdXRvcGlsb3RcbiAgZW5kXG4gIHcgLS0tIGNvbXAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ" alt="流程图：ROS"></a></p>',21),l=[o];function d(b,m,h,n,c,s){return e(),t("div",null,l)}const G=a(i,[["render",d]]);export{g as __pageData,G as default};
