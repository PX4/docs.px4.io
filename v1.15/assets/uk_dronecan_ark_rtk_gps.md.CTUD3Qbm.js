import{_ as e,a,b as l,c as r}from"./chunks/ark_rtk_gps_ublox_f9p_firmware_update.D5uKmVvJ.js";import{_ as i,c as o,o as t,ab as c}from"./chunks/framework.CUflZczI.js";const R=JSON.parse('{"title":"ARK RTK GPS","description":"","frontmatter":{},"headers":[],"relativePath":"uk/dronecan/ark_rtk_gps.md","filePath":"uk/dronecan/ark_rtk_gps.md"}'),n={name:"uk/dronecan/ark_rtk_gps.md"},d=c('<h1 id="ark-rtk-gps" tabindex="-1">ARK RTK GPS <a class="header-anchor" href="#ark-rtk-gps" aria-label="Permalink to &quot;ARK RTK GPS&quot;">​</a></h1><p>ARK RTK GPS є проєктом з відкритим кодом <a href="./">DroneCAN</a> <a href="./../gps_compass/rtk_gps.html">RTK GPS</a>, <a href="https://www.u-blox.com/en/product/zed-f9p-module" target="_blank" rel="noreferrer">u-blox F9P</a>, магнітометром, барометром, ІВП, сигналом звукового оповіщення та модулем безпеки.</p><p><img src="'+e+'" alt="ARK RTK GPS"></p><h2 id="де-купити" tabindex="-1">Де купити <a class="header-anchor" href="#де-купити" aria-label="Permalink to &quot;Де купити&quot;">​</a></h2><p>Замовте цей модуль з:</p><ul><li><a href="https://arkelectron.com/product/ark-rtk-gps/" target="_blank" rel="noreferrer">ARK Electronics</a> (US)</li></ul><h2 id="характеристики-апаратного-забезпечення" tabindex="-1">Характеристики апаратного забезпечення <a class="header-anchor" href="#характеристики-апаратного-забезпечення" aria-label="Permalink to &quot;Характеристики апаратного забезпечення&quot;">​</a></h2><ul><li><a href="https://github.com/ARK-Electronics/ARK_RTK_GPS" target="_blank" rel="noreferrer">Схема з відкритим кодом та BOM</a></li><li>Сенсори <ul><li>Ublox F9P GPS <ul><li>Багатосмуговий приймач супутникової навігації, що забезпечує точність на рівні сантиметрів за кілька секунд</li><li>Одночасний прийом GPS, GLONASS, Galileo та BeiDou</li><li>Багатосмуговий RTK зі швидкими часами збіжності та надійною продуктивністю</li><li>Висока швидкість оновлення для високодинамічних додатків</li><li>Сантиметрова точність у невеликому та енергоефективному модулі</li></ul></li><li>Bosch BMM150 Magnetometer</li><li>Bosch BMP388 Barometer</li><li>Invensense ICM-42688-P 6-Axis IMU</li></ul></li><li>STM32F412CEU6 MCU</li><li>Кнопка безпеки</li><li>Динамік</li><li>Два роз&#39;єми стандарту CAN для Pixhawk (4 контакти JST GH)</li><li>Роз&#39;єм F9P &quot;UART 2&quot; <ul><li>3-контактний JST-GH</li><li>TX, RX, GND</li></ul></li><li>Роз&#39;єм для відлагодження стандарту Pixhawk (6 контактів JST SH)</li><li>LED індикатори <ul><li>Індикатор безпеки</li><li>GPS Fix</li><li>Статус RTK</li><li>RGB Статус системи</li></ul></li><li>USA Built</li><li>Вимоги до живлення <ul><li>5V</li><li>Середній струм 170мA</li><li>180мА Макс</li></ul></li></ul><h2 id="встановлення-обладнання" tabindex="-1">Встановлення обладнання <a class="header-anchor" href="#встановлення-обладнання" aria-label="Permalink to &quot;Встановлення обладнання&quot;">​</a></h2><h3 id="підключення" tabindex="-1">Підключення <a class="header-anchor" href="#підключення" aria-label="Permalink to &quot;Підключення&quot;">​</a></h3><p>ARK RTK GPS підключений до шини CAN за допомогою стандартного кабелю Pixhawk 4 pin JST GH. Для отримання додаткової інформації, зверніться до інструкцій з <a href="./../can/#wiring">проводки CAN</a>.</p><h3 id="встановлення" tabindex="-1">Встановлення <a class="header-anchor" href="#встановлення" aria-label="Permalink to &quot;Встановлення&quot;">​</a></h3><p>Рекомендоване положення монтажу є таким, щоб конектори на платі вказували у напрямку <strong>задньої частини дрону</strong>.</p><p>Датчик може бути встановлений де завгодно на каркасі, але ви повинні вказати його позицію, відносно центру мас транспортного засобу, під час <a href="#px4-configuration">налаштування PX4</a>.</p><h2 id="налаштування-прошивки" tabindex="-1">Налаштування прошивки <a class="header-anchor" href="#налаштування-прошивки" aria-label="Permalink to &quot;Налаштування прошивки&quot;">​</a></h2><p>ARK RTK GPS працює з <a href="./px4_cannode_fw.html">PX4 cannode firmware</a>. Таким чином, він підтримує оновлення прошивки через шину CAN та <a href="./#node-id-allocation">dynamic node allocation</a>.</p><p>Плати ARK RTK GPS поставляються з останнім вбудованим програмним забезпеченням, але якщо ви хочете побудувати й прошити останнє програмне забезпечення самостійно, звертайтеся до <a href="./px4_cannode_fw.html#building-the-firmware">інструкцій з побудови прошивки cannode</a>.</p><p>Ціль прошивки: <code>ark_can-rtk-gps_default</code> Ціль завантажувача: <code>ark_can-rtk-gps_canbootloader</code></p><h2 id="налаштування-польотного-контролера" tabindex="-1">Налаштування польотного контролера <a class="header-anchor" href="#налаштування-польотного-контролера" aria-label="Permalink to &quot;Налаштування польотного контролера&quot;">​</a></h2><h3 id="увімкнення-dronecan" tabindex="-1">Увімкнення DroneCAN <a class="header-anchor" href="#увімкнення-dronecan" aria-label="Permalink to &quot;Увімкнення DroneCAN&quot;">​</a></h3><p>Для використання ARK RTK GPS підключіть його до шини CAN Pixhawk та увімкніть драйвер DroneCAN, встановивши параметр <a href="./../advanced_config/parameter_reference.html#UAVCAN_ENABLE">UAVCAN_ENABLE</a> на <code>2</code> для динамічного призначення вузла (або <code>3</code>, якщо використовуєте <a href="./../dronecan/escs.html">DroneCAN ESCs</a>).</p><p>Кроки наступні:</p><ul><li>У <em>QGroundControl</em> встановіть параметр <a href="./../advanced_config/parameter_reference.html#UAVCAN_ENABLE">UAVCAN_ENABLE</a> на <code>2</code> або <code>3</code> та перезавантажте (див. <a href="./../advanced_config/parameters.html">Finding/Updating Parameters</a>).</li><li>Підключіть ARK RTK GPS CAN до шини CAN Pixhawk.</li></ul><p>Після активації, модуль буде виявлено при завантаженні. Дані GPS повинні надходити з частотою 10 Гц.</p><h3 id="конфігурація-px4" tabindex="-1">Конфігурація PX4 <a class="header-anchor" href="#конфігурація-px4" aria-label="Permalink to &quot;Конфігурація PX4&quot;">​</a></h3><p>Вам потрібно встановити необхідні <a href="./">параметри DroneCAN</a> та визначити зсуви, якщо датчик не знаходиться у центрі транспортного засобу:</p><ul><li>Увімкніть GPS сигнал, встановивши біт 3 <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_CTRL">EKF2_GPS_CTRL</a> на true.</li><li>Увімкніть злиття GPS, щоб завжди публікувати напрямок, встановивши <a href="./../advanced_config/parameter_reference.html#SENS_GPS_MASK">SENS_GPS_MASK</a> на 7 (перевірено всі три біти).</li><li>Увімкніть <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_GPS">UAVCAN_SUB_GPS</a>, <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_MAG">UAVCAN_SUB_MAG</a> та <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_BARO">UAVCAN_SUB_BARO</a>.</li><li>Параметри <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_POS_X">EKF2_GPS_POS_X</a>, <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_POS_Y">EKF2_GPS_POS_Y</a> та <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_POS_Z">EKF2_GPS_POS_Z</a> можуть бути встановлені для врахування зміщення ARK RTK GPS від центру мас транспортного засобу.</li><li>Встановіть <a href="./../advanced_config/parameter_reference.html#CANNODE_TERM">CANNODE_TERM</a> на <code>1</code> на GPS, якщо це останній вузол на шині CAN.</li></ul><h3 id="налаштування-переміщувальноі-базовоі-лініі-gps-напрямку" tabindex="-1">Налаштування Переміщувальної Базової Лінії &amp; GPS Напрямку <a class="header-anchor" href="#налаштування-переміщувальноі-базовоі-лініі-gps-напрямку" aria-label="Permalink to &quot;Налаштування Переміщувальної Базової Лінії &amp; GPS Напрямку&quot;">​</a></h3><p>Найпростіший спосіб налаштування рухомого базису та напрямку GPS з двома модулями GPS ARK RTK відбувається через CAN, хоча можна зробити це через UART, щоб зменшити обсяг даних на шині CAN, якщо це потрібно.</p><p>Зверніть увагу, що заголовок виводиться лише у випадку, якщо Rover знаходиться в режимі фіксованого RTX. Він не виведе заголовок у RTK Float.</p><p>Налаштування через CAN:</p><ul><li>Переконайтеся, що ARK RTK GPS модулі підключені до Pixhawk через CAN (один може бути підключений до вторинного порту CAN). Два ARK RTK GPS повинні бути підключені до однієї і тієї ж CAN шини для надсилання корекцій.</li><li>Виберіть один ARK RTK GPS для <em>Ровера</em> та один для <em>Рухової Бази</em>.</li><li>Перевідкрийте QGroundControl, перейдіть до параметрів та виберіть <code>Standard</code>, щоб приховати цей розкривний список та виберіть <code>Component ##</code>, щоб переглянути кожний з параметрів вузла CAN вашого ARK RTK GPS ::: info <code>Component ##</code> не буде видимим, якщо ARK RTK GPS не підключено до Pixhawk до відкриття QGroundControl. :::</li><li>На <em>Rover</em>, встановіть наступне: <ul><li><a href="./../advanced_config/parameter_reference.html#GPS_UBX_MODE">GPS_UBX_MODE</a> на <code>3</code></li><li><a href="./../advanced_config/parameter_reference.html#GPS_YAW_OFFSET">GPS_YAW_OFFSET</a> до <code>0</code>, якщо ваш <em>Rover</em> знаходиться попереду вашої <em>Рухливої Бази</em>, <code>90</code>, якщо <em>Rover</em> справа від <em>Рухливої Бази</em>, <code>180</code>, якщо <em>Rover</em> ззаду <em>Рухливої Бази</em>, або <code>270</code>, якщо <em>Rover</em> зліва від <em>Рухливої Бази</em>.</li><li><a href="./../advanced_config/parameter_reference.html#CANNODE_SUB_MBD">CANNODE_SUB_MBD</a> на <code>1</code>.</li></ul></li><li>На <em>Рухомій Базі</em>, встановіть наступне: <ul><li><a href="./../advanced_config/parameter_reference.html#GPS_UBX_MODE">GPS_UBX_MODE</a> на <code>4</code>.</li><li><a href="./../advanced_config/parameter_reference.html#CANNODE_PUB_MBD">CANNODE_PUB_MBD</a> на <code>1</code>.</li></ul></li></ul><p>Налаштування через UART:</p><ul><li>Переконайтеся, що модулі GPS ARK RTK підключені до Pixhawk через CAN.</li><li>Переконайтеся, що модулі GPS ARK RTK підключені один до одного через їх порт UART2 (схема виводів UART2 показана нижче). Зверніть увагу, що TX одного модуля потрібно підключити до RX іншого.</li></ul><table><thead><tr><th>Pin</th><th>Назва</th></tr></thead><tbody><tr><td>1</td><td>TX</td></tr><tr><td>2</td><td>RX</td></tr><tr><td>3</td><td>GND</td></tr></tbody></table><ul><li>На <em>Rover</em>, встановіть наступне: <ul><li><a href="./../advanced_config/parameter_reference.html#GPS_UBX_MODE">GPS_UBX_MODE</a> на <code>1</code></li><li><a href="./../advanced_config/parameter_reference.html#GPS_YAW_OFFSET">GPS_YAW_OFFSET</a> до <code>0</code>, якщо ваш <em>Rover</em> знаходиться попереду вашої <em>Рухливої Бази</em>, <code>90</code>, якщо <em>Rover</em> справа від <em>Рухливої Бази</em>, <code>180</code>, якщо <em>Rover</em> ззаду <em>Рухливої Бази</em>, або <code>270</code>, якщо <em>Rover</em> зліва від <em>Рухливої Бази</em>.</li></ul></li><li>На <em>Рухомій Базі</em>, встановіть наступне: <ul><li><a href="./../advanced_config/parameter_reference.html#GPS_UBX_MODE">GPS_UBX_MODE</a> на <code>2</code>.</li></ul></li></ul><h2 id="значення-led-індикаторів" tabindex="-1">Значення LED індикаторів <a class="header-anchor" href="#значення-led-індикаторів" aria-label="Permalink to &quot;Значення LED індикаторів&quot;">​</a></h2><ul><li><p>Світлодіоди статусу GPS розташовані праворуч від роз&#39;ємів</p><ul><li>Миготіння зеленого - це фіксація GPS</li><li>Миготіння синього - це отримані корекції та RTK Float</li><li>Сталий синій - це RTK зафіксовано</li></ul></li><li><p>Світлодіоди статусу CAN розташовані зверху ліворуч від роз&#39;ємів</p><ul><li>Повільне блимання зеленого - чекає на підключення CAN</li><li>Швидко блимаюче зелене світло - нормальна робота</li><li>Повільне блимання зеленим і синім - перелік CAN</li><li>Повільне блимання зеленого, синього і червоного - оновлення прошивки в процесі</li><li>Миготливий червоний - помилка <ul><li>Якщо ви бачите червоний світлодіод, це означає, що виникла помилка, і вам слід перевірити наступне <ul><li>Переконайтеся, що у польотному контролері встановлено SD-картку</li><li>Переконайтеся, що ARK RTK GPS має встановлене <code>ark_can-rtk-gps_canbootloader</code> перед тим, як прошивати <code>ark_can-rtk-gps_default</code></li><li>Видаліть бінарні файли з кореневих та ufw директорій SD-карти та спробуйте зібрати та знову прошити</li></ul></li></ul></li></ul></li></ul><h3 id="оновлення-модуля-ublox-f9p" tabindex="-1">Оновлення модуля Ublox F9P <a class="header-anchor" href="#оновлення-модуля-ublox-f9p" aria-label="Permalink to &quot;Оновлення модуля Ublox F9P&quot;">​</a></h3><p>ARK RTK GPS поставляється з модулем Ublox F9P з версією 1.13 або новішою. Проте ви можете перевірити версію та оновити прошивку за бажанням.</p><p>Кроки наступні:</p><ul><li><a href="https://www.u-blox.com/en/product/u-center" target="_blank" rel="noreferrer">Завантажте u-center з сайту u-blox.com</a> та встановіть на свій ПК (лише для Windows)</li><li>Відкрийте <a href="https://www.u-blox.com/en/product/zed-f9p-module#tab-documentation-resources" target="_blank" rel="noreferrer">веб-сайт u-blox ZED-F9P</a></li><li>Прокрутіть вниз і клацніть на поле &quot;Show Legacy Documents&quot;</li><li>Прокрутіть вниз ще раз до Оновлення прошивки та завантажте потрібну прошивку (потрібна версія не нижче 1.13)</li><li>Підтримуючи перемикач безпеки на ARK RTK GPS, підключіть його до живлення через один з його портів CAN і утримуйте до тих пір, поки всі 3 світлодіода не почнуть швидко мигати</li><li>Підключіть ARK RTK GPS до комп&#39;ютера за допомогою його порту відладки через кабель, такого як Black Magic Probe або FTDI</li><li>Відкрийте u-center, виберіть COM-порт для ARK RTK GPS та підключіться <img src="'+a+'" alt="U-Center Connect"></li><li>Перевірте поточну версію прошивки, вибравши View, Messages View, UBX, MON, VER <img src="'+l+'" alt="Перевірте версію"></li><li>Для оновлення прошивки: <ul><li>Виберіть Tools, Firmware Update</li><li>Поле зображення прошивки повинно бути файлом .bin, завантаженим зі сторінки веб-сайту u-blox ZED-F9P</li><li>Поставте прапорець &quot;Використовувати цю швидкість передачі для оновлення&quot; та виберіть 115200 зі списку</li><li>Переконайтеся, що інші прапорці відображаються так, як показано нижче</li><li>Натисніть зелену кнопку GO внизу зліва</li><li>&quot;Firmware Update SUCCESS&quot; повинно бути відображено, якщо оновлення пройшло успішно <img src="'+r+'" alt="Оновлення прошивки"></li></ul></li></ul>',42),_=[d];function h(m,u,p,f,P,S){return t(),o("div",null,_)}const G=i(n,[["render",h]]);export{R as __pageData,G as default};
