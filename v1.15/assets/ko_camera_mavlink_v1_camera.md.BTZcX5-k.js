import{_ as e}from"./chunks/mavlink_camera_settings.CK1rx6V0.js";import{_ as a,c as r,o as t,ab as o}from"./chunks/framework.CUflZczI.js";const u=JSON.parse('{"title":"Simple MAVLink Cameras (Camera Protcol v1)","description":"","frontmatter":{},"headers":[],"relativePath":"ko/camera/mavlink_v1_camera.md","filePath":"ko/camera/mavlink_v1_camera.md"}'),n={name:"ko/camera/mavlink_v1_camera.md"},i=o('<h1 id="simple-mavlink-cameras-camera-protcol-v1" tabindex="-1">Simple MAVLink Cameras (Camera Protcol v1) <a class="header-anchor" href="#simple-mavlink-cameras-camera-protcol-v1" aria-label="Permalink to &quot;Simple MAVLink Cameras (Camera Protcol v1)&quot;">​</a></h1><p>This topic explains how to use PX4 with a MAVLink <a href="./../camera/">camera</a> that implements the <a href="https://mavlink.io/en/services/camera_v1.html" target="_blank" rel="noreferrer">Camera Protocol v1 (Simple Trigger Protocol)</a> with PX4 and a Ground Station.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><a href="./../camera/mavlink_v2_camera.html">MAVLink cameras</a> that use the <a href="https://mavlink.io/en/services/camera.html" target="_blank" rel="noreferrer">MAVLink Camera Protocol v2</a> should be used instead when possible! This approach is retained for use with older MAVLink cameras.</p></div><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p><a href="https://mavlink.io/en/services/camera_v1.html" target="_blank" rel="noreferrer">Camera Protocol v1</a> defines a small set of commands that allow triggering of a camera for:</p><ul><li>still image capture at a frequency based on either time or distance</li><li>video capture</li><li>limited camera configuration</li></ul><p>PX4 supports this command set for triggering cameras with native support for the protocol (as described in this topic), and also for <a href="./../camera/fc_connected_camera.html">cameras attached to flight controller outputs</a>.</p><p>Ground stations and MAVLink SDKs generally address camera commands to the autopilot, which then forwards them to a connected MAVLink channel of type <code>onboard</code>. PX4 also re-emits any camera mission items it encouters in a mission as camera commands: commands that aren&#39;t accepted are logged. In all cases the commands are sent with the system id of the autopilot and the component ID of 0 (i.e. addressed to all components, including cameras).</p><p>PX4 will also emit a <a href="https://mavlink.io/en/messages/common.html#CAMERA_TRIGGER" target="_blank" rel="noreferrer">CAMERA_TRIGGER</a> whenever an image capture is triggered (the camera itself may also emit this message on triggering).</p><h2 id="controlling-the-camera" tabindex="-1">Controlling the Camera <a class="header-anchor" href="#controlling-the-camera" aria-label="Permalink to &quot;Controlling the Camera&quot;">​</a></h2><h3 id="mavlink-commands-messages" tabindex="-1">MAVLink Commands &amp; Messages <a class="header-anchor" href="#mavlink-commands-messages" aria-label="Permalink to &quot;MAVLink Commands &amp; Messages&quot;">​</a></h3><p>The <a href="https://mavlink.io/en/services/camera_v1.html" target="_blank" rel="noreferrer">Camera Protocol v1 (Simple Trigger Protocol)</a> defines the following commands:</p><ul><li><a href="https://mavlink.io/en/messages/common.html#MAV_CMD_DO_TRIGGER_CONTROL" target="_blank" rel="noreferrer">MAV_CMD_DO_TRIGGER_CONTROL</a></li><li><a href="https://mavlink.io/en/messages/common.html#MAV_CMD_NAV_CMD_DO_DIGICAM_CONTROL" target="_blank" rel="noreferrer">MAV_CMD_NAV_CMD_DO_DIGICAM_CONTROL</a></li><li><a href="https://mavlink.io/en/messages/common.html#MAV_CMD_DO_SET_CAM_TRIGG_DIST" target="_blank" rel="noreferrer">MAV_CMD_DO_SET_CAM_TRIGG_DIST</a></li><li><a href="https://mavlink.io/en/messages/common.html#MAV_CMD_DO_SET_CAM_TRIGG_INTERVAL" target="_blank" rel="noreferrer">MAV_CMD_DO_SET_CAM_TRIGG_INTERVAL</a></li><li><a href="https://mavlink.io/en/messages/common.html#MAV_CMD_OBLIQUE_SURVEY" target="_blank" rel="noreferrer">MAV_CMD_OBLIQUE_SURVEY</a></li><li><a href="https://mavlink.io/en/messages/common.html#MAV_CMD_DO_CONTROL_VIDEO" target="_blank" rel="noreferrer">MAV_CMD_DO_CONTROL_VIDEO</a></li></ul><p>A MAVLink camera will support some subset of these commands. As the protocol has no feature discovery process, the only way to know is by inspecting the <a href="https://mavlink.io/en/messages/common.html#COMMAND_ACK" target="_blank" rel="noreferrer">COMMAND_ACK</a> returned in response.</p><p>Cameras should also emit <a href="https://mavlink.io/en/messages/common.html#CAMERA_TRIGGER" target="_blank" rel="noreferrer">CAMERA_TRIGGER</a> each time an image is captured.</p><p><a href="https://mavlink.io/en/services/camera_v1.html" target="_blank" rel="noreferrer">Camera Protocol v1</a> describes the protocol in more detail.</p><h3 id="ground-stations" tabindex="-1">Ground Stations <a class="header-anchor" href="#ground-stations" aria-label="Permalink to &quot;Ground Stations&quot;">​</a></h3><p>Ground stations can use any commands in the <a href="https://mavlink.io/en/services/camera_v1.html" target="_blank" rel="noreferrer">Camera Protocol v1 (Simple Trigger Protocol)</a> and should address them to the autopilot component id. If the commands are not supported by the camera, it will return a <a href="https://mavlink.io/en/messages/common.html#COMMAND_ACK" target="_blank" rel="noreferrer">COMMAND_ACK</a> with an error result.</p><p>Generally the commands are addressed to the autopilot, because this works whether the camera is connected via MAVLink or directly to the flight controller. If addressed to the autopilot PX4 will emit <a href="https://mavlink.io/en/messages/common.html#CAMERA_TRIGGER" target="_blank" rel="noreferrer">CAMERA_TRIGGER</a> each time an image is captured, and may log the camera capture event.</p><p>In theory you might also address commands to the camera directly.</p><h3 id="camera-commands-in-missions" tabindex="-1">Camera Commands in Missions <a class="header-anchor" href="#camera-commands-in-missions" aria-label="Permalink to &quot;Camera Commands in Missions&quot;">​</a></h3><p>The following <a href="https://mavlink.io/en/services/camera_v1.html" target="_blank" rel="noreferrer">Camera Protocol v1 (Simple Trigger Protocol)</a> commands can be used in missions (this is the same list as above).</p><ul><li><a href="https://mavlink.io/en/messages/common.html#MAV_CMD_DO_TRIGGER_CONTROL" target="_blank" rel="noreferrer">MAV_CMD_DO_TRIGGER_CONTROL</a></li><li><a href="https://mavlink.io/en/messages/common.html#MAV_CMD_NAV_CMD_DO_DIGICAM_CONTROL" target="_blank" rel="noreferrer">MAV_CMD_NAV_CMD_DO_DIGICAM_CONTROL</a></li><li><a href="https://mavlink.io/en/messages/common.html#MAV_CMD_DO_SET_CAM_TRIGG_DIST" target="_blank" rel="noreferrer">MAV_CMD_DO_SET_CAM_TRIGG_DIST</a></li><li><a href="https://mavlink.io/en/messages/common.html#MAV_CMD_DO_SET_CAM_TRIGG_INTERVAL" target="_blank" rel="noreferrer">MAV_CMD_DO_SET_CAM_TRIGG_INTERVAL</a></li><li><a href="https://mavlink.io/en/messages/common.html#MAV_CMD_OBLIQUE_SURVEY" target="_blank" rel="noreferrer">MAV_CMD_OBLIQUE_SURVEY</a></li><li><a href="https://mavlink.io/en/messages/common.html#MAV_CMD_DO_CONTROL_VIDEO" target="_blank" rel="noreferrer">MAV_CMD_DO_CONTROL_VIDEO</a></li></ul><p>PX4 re-emits them with the same system ID as the autopilot and component ID of <a href="https://mavlink.io/en/messages/common.html#MAV_COMP_ID_ALL" target="_blank" rel="noreferrer">MAV_COMP_ID_ALL</a>:</p><h3 id="manual-control" tabindex="-1">Manual Control <a class="header-anchor" href="#manual-control" aria-label="Permalink to &quot;Manual Control&quot;">​</a></h3><p>Manual triggering using these cameras is not supported (for either Joystick or RC Controllers).</p><h2 id="px4-configuration" tabindex="-1">PX4 Configuration <a class="header-anchor" href="#px4-configuration" aria-label="Permalink to &quot;PX4 Configuration&quot;">​</a></h2><h3 id="mavlink-port-forwarding-configuration" tabindex="-1">MAVLink Port &amp; Forwarding Configuration <a class="header-anchor" href="#mavlink-port-forwarding-configuration" aria-label="Permalink to &quot;MAVLink Port &amp; Forwarding Configuration&quot;">​</a></h3><p>Connect PX4 to your MAVLink camera by attaching it to an unused serial port on your flight controller, such as <code>TELEM2</code>. You can then configure the port as a <a href="./../peripherals/mavlink_peripherals.html">MAVLink Peripheral</a>. The document explains how, but in summary:</p><ol><li>Modify an unused <code>MAV_n_CONFIG</code> parameter, such as <a href="./../advanced_config/parameter_reference.html#MAV_2_CONFIG">MAV_2_CONFIG</a>, so that it is assigned to port to which your camera is connected.</li><li>Set the corresponding <a href="./../advanced_config/parameter_reference.html#MAV_2_MODE">MAV_2_MODE</a> to <code>2</code> (Onboard). This ensures that the right set of MAVLink messages are emitted and forwarded.</li><li>You may need to set some of the other parameters, depending on your connection - such as the baud rate.</li></ol><p>Then connect and configure the camera as recommended in its user guide.</p><h3 id="camera-mode-triggering" tabindex="-1">Camera Mode &amp; Triggering <a class="header-anchor" href="#camera-mode-triggering" aria-label="Permalink to &quot;Camera Mode &amp; Triggering&quot;">​</a></h3><p>Configure the PX4 camera driver to enable the MAVLink camera backend, and set the triggering mode to capture on command in survey missions.</p><p>Using <em>QGroundControl</em>:</p><ul><li><p>Open <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/setup_view/camera.html#px4-camera-setup" target="_blank" rel="noreferrer">Vehicle Setup &gt; Camera</a>.</p></li><li><p>Set the values as shown:</p><p><img src="'+e+'" alt="Camera Setup Screen - Trigger mode and interface for MAVLink"></p></li></ul><div class="info custom-block"><p class="custom-block-title">INFO</p><p>You can also <a href="./../advanced_config/parameters.html">set the parameters directly</a>:</p><ul><li><a href="./../advanced_config/parameter_reference.html#TRIG_MODE">TRIG_MODE</a> — <code>4</code>: Distance based, on command (Survey mode)</li><li><a href="./../advanced_config/parameter_reference.html#TRIG_INTERFACE">TRIG_INTERFACE</a> — <code>3</code>: MAVLink</li></ul></div>',36),s=[i];function l(m,c,h,_,d,p){return t(),r("div",null,s)}const M=a(n,[["render",l]]);export{u as __pageData,M as default};
