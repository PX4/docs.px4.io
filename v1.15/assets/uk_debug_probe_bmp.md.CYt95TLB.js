import{_ as a,c as s,o as e,ab as i}from"./chunks/framework.CUflZczI.js";const b=JSON.parse('{"title":"Black Magic / Dronecode адаптери","description":"","frontmatter":{},"headers":[],"relativePath":"uk/debug/probe_bmp.md","filePath":"uk/debug/probe_bmp.md"}'),t={name:"uk/debug/probe_bmp.md"},p=i(`<h1 id="black-magic-dronecode-адаптери" tabindex="-1">Black Magic / Dronecode адаптери <a class="header-anchor" href="#black-magic-dronecode-адаптери" aria-label="Permalink to &quot;Black Magic / Dronecode адаптери&quot;">​</a></h1><p><a href="https://black-magic.org" target="_blank" rel="noreferrer">Black Magic Probe</a> - це простий у використанні, в основному готовий до роботи, відладчик JTAG/SWD для вбудованих мікроконтролерів. Оскільки Black Magic Probe є загальним зондом для налагодження, вам знадобиться адаптер для підключення до керуючих пристроїв польоту Pixhawk, який можна придбати тут:</p><ul><li><a href="https://1bitsquared.com/products/drone-code-debug-adapter" target="_blank" rel="noreferrer">Drone Code Debug Adapter</a> (1 BIT SQUARED).</li></ul><h2 id="dronecode-probe" tabindex="-1">Dronecode Probe <a class="header-anchor" href="#dronecode-probe" aria-label="Permalink to &quot;Dronecode Probe&quot;">​</a></h2><p><a href="https://kb.zubax.com/display/MAINKB/Dronecode+Probe+documentation" target="_blank" rel="noreferrer">Пробник Dronecode Probe</a> - це спеціалізація Black Magic Probe для налагодження автопілотів PX4.</p><p>Інтерфейс USB-зонда викриває два окремі віртуальні інтерфейси послідовного порту: один для підключення до <a href="./system_console.html">System Console</a> (UART), а інший - для вбудованого GDB-сервера (SWD-інтерфейс).</p><p>Датчик надає кабель з&#39;єднувача DCD-M для підключення до <a href="./swd_debug.html#pixhawk-debug-mini">Pixhawk Debug Mini</a>.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Роз&#39;єм <em>6-pos DF13</em>, який поставляється з зондом, не може бути використаний для налагодження SWD (він призначений для використання System Console).</p></div><h2 id="використання-зонда" tabindex="-1">Використання зонда <a class="header-anchor" href="#використання-зонда" aria-label="Permalink to &quot;Використання зонда&quot;">​</a></h2><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Для відлагодження STM32F7 або пізніших (FMUv5 та новіших) ймовірно потрібне оновлення прошивки пристрою Dronecode probe / Blackmagic probe. Ви можете знайти, як оновити <a href="https://github.com/blacksphere/blackmagic/wiki/Upgrading-Firmware" target="_blank" rel="noreferrer">blackmagic probe</a> тут.</p></div><p>Щоб використовувати зонд Dronecode з GDB, запустіть GDB з точним ELF-файлом, який в даний момент прошивається на автопілоті:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arm-none-eabi-gdb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build/px4_fmu-v2_default/px4_fmu-v2_default.elf</span></span></code></pre></div><p>Потім вам потрібно вибрати інтерфейс зонду Dronecode, на Linux це, наприклад:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">target</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ext</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/serial/by-id/usb-Black_Sphere_Technologies_Black_Magic_Probe_f9414d5_7DB85DAC-if00</span></span></code></pre></div><p>Потім проскануйте ціль:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">monitor</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> swdp_scan</span></span></code></pre></div><p>Перед вами відобразиться приблизно такий вивід:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Target</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> voltage:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3.3V</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Available</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Targets:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">No.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Att</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Driver</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      STM32F76x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> M7</span></span></code></pre></div><p>Зверніть увагу, що для деяких автопілотів він показує 0.0V, але наступні кроки все одно працюють.</p><p>Тепер ви можете підключитися до цієї цілі:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attach</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span></code></pre></div><p>Тепер ви відключилися.</p>`,22),l=[p];function n(o,r,h,c,d,k){return e(),s("div",null,l)}const u=a(t,[["render",n]]);export{b as __pageData,u as default};
