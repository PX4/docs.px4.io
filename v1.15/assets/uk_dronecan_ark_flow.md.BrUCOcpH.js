import{_ as r,a as l}from"./chunks/ark_flow_orientation.CfxSTbCN.js";import{_ as o,c as i,o as t,ab as n,m as e,a}from"./chunks/framework.CUflZczI.js";const S=JSON.parse('{"title":"ARK Flow","description":"","frontmatter":{},"headers":[],"relativePath":"uk/dronecan/ark_flow.md","filePath":"uk/dronecan/ark_flow.md"}'),c={name:"uk/dronecan/ark_flow.md"},d=n('<h1 id="ark-flow" tabindex="-1">ARK Flow <a class="header-anchor" href="#ark-flow" aria-label="Permalink to &quot;ARK Flow&quot;">​</a></h1><p>ARK Flow - це відкритий код <a href="./">DroneCAN</a> <a href="./../sensor/optical_flow.html">optical flow</a>, <a href="./../sensor/rangefinders.html">сенсор відстані</a> та IMU модуль.</p><p><img src="'+r+'" alt="ARK Flow"></p><h2 id="де-купити" tabindex="-1">Де купити <a class="header-anchor" href="#де-купити" aria-label="Permalink to &quot;Де купити&quot;">​</a></h2><p>Замовте цей модуль з:</p><ul><li><a href="https://arkelectron.com/product/ark-flow/" target="_blank" rel="noreferrer">ARK Electronics</a> (US)</li></ul><h2 id="характеристики-обладнання" tabindex="-1">Характеристики обладнання <a class="header-anchor" href="#характеристики-обладнання" aria-label="Permalink to &quot;Характеристики обладнання&quot;">​</a></h2><ul><li><a href="https://github.com/ARK-Electronics/ARK_Flow" target="_blank" rel="noreferrer">Схема з відкритим кодом та BOM</a></li><li>Сенсори <ul><li>PixArt PAW3902 датчик оптичного потоку <ul><li>Відстеження в умовах надзвичайно слабкого світла &gt; 9 лк</li><li>Широкий робочий діапазон від 80 мм до 30 м</li><li>До 7.4 рад/с</li></ul></li><li>40mW ІЧ-світлодіод, вбудований на плату для покращення роботи в умовах слабкого освітлення</li><li>Broadcom AFBR-S50LV85D Time-of-Flight Distance Sensor <ul><li>Інтегроване джерело світла лазера 850 нм</li><li>Поле зору (FoV) 12,4° x 6,2° з 32 пікселями</li><li>Типовий діапазон відстані до 30м</li><li>Робота в умовах 200 тис. люксів світла навколишнього середовища</li><li>Добре працює на всіх поверхнях</li><li>Трансмітер пучка 2° x 2° для підсвічування між 1 та 3 пікселями</li></ul></li><li>Bosch BMI088 6-Axis IMU або Invensense ICM-42688-P 6-Axis IMU</li></ul></li><li>STM32F412CEU6 MCU</li><li>Два роз&#39;єми стандарту CAN для Pixhawk (4 Pin JST GH)</li><li>Роз&#39;єм для відлагодження стандарту Pixhawk (6 контактів JST SH)</li><li>Вбудований резистор CAN з можливістю програмованого переключання</li><li>Малий форм-фактор <ul><li>3см x 3см x 1.4см</li></ul></li><li>LED індикатори</li><li>USA Built</li></ul><h2 id="налаштування-обладнання" tabindex="-1">Налаштування обладнання <a class="header-anchor" href="#налаштування-обладнання" aria-label="Permalink to &quot;Налаштування обладнання&quot;">​</a></h2><h3 id="підключення" tabindex="-1">Підключення <a class="header-anchor" href="#підключення" aria-label="Permalink to &quot;Підключення&quot;">​</a></h3><p>ARK Flow підключений до шини CAN за допомогою стандартного кабелю JST GH з чотирма контактами Pixhawk. Для отримання додаткової інформації, зверніться до інструкцій з <a href="./../can/#wiring">проводки CAN</a>.</p><h3 id="встановлення" tabindex="-1">Встановлення <a class="header-anchor" href="#встановлення" aria-label="Permalink to &quot;Встановлення&quot;">​</a></h3><p>Рекомендоване положення монтажу полягає в тому, щоб роз&#39;єми на платі вказували у напрямку <strong>задньої частини дрону</strong>, як показано на наступній картинці.</p><p><img src="'+l+'" alt="ARK Flow align with Pixhawk"></p><p>Це відповідає значенню за замовчуванням (<code>0</code>) параметра <a href="./../advanced_config/parameter_reference.html#SENS_FLOW_ROT">SENS_FLOW_ROT</a>. Змініть параметр належним чином, якщо використовується інша орієнтація.</p><p>Датчик може бути встановлений де завгодно на рамці, але ви повинні вказати позицію фокусної точки відносно центру мас транспортного засобу під час <a href="#px4-configuration">налаштування PX4</a>.</p><h2 id="налаштування-прошивки" tabindex="-1">Налаштування прошивки <a class="header-anchor" href="#налаштування-прошивки" aria-label="Permalink to &quot;Налаштування прошивки&quot;">​</a></h2><p>ARK Flow працює з <a href="./px4_cannode_fw.html">PX4 DroneCAN Firmware</a>. Таким чином, він підтримує оновлення прошивки через шину CAN та <a href="./#node-id-allocation">dynamic node allocation</a>.</p><p>Плати ARK Flow поставляються з останнім вбудованим програмним забезпеченням, але якщо ви хочете побудувати й прошити останнє програмне забезпечення самостійно, див. <a href="./px4_cannode_fw.html#building-the-firmware">PX4 DroneCAN Firmware &gt; Building the Firmware</a>.</p><ul><li>Ціль прошивки: <code>ark_can-flow_default</code></li><li>Ціль завантажувача: <code>ark_can-flow_canbootloader</code></li></ul><h2 id="налаштування-польотного-контролера" tabindex="-1">Налаштування польотного контролера <a class="header-anchor" href="#налаштування-польотного-контролера" aria-label="Permalink to &quot;Налаштування польотного контролера&quot;">​</a></h2><p>::: інформація Ark Flow не завантажиться, якщо SD-карти немає у контролері польоту під час ввімкнення. :::</p><h3 id="увімкнення-dronecan" tabindex="-1">Увімкнення DroneCAN <a class="header-anchor" href="#увімкнення-dronecan" aria-label="Permalink to &quot;Увімкнення DroneCAN&quot;">​</a></h3><p>Для використання плати ARK Flow підключіть її до шини CAN Pixhawk та увімкніть драйвер UAVCAN, встановивши параметр <a href="./../advanced_config/parameter_reference.html#UAVCAN_ENABLE">UAVCAN_ENABLE</a> на <code>2</code> для динамічного призначення вузла (або <code>3</code>, якщо використовуєте <a href="./../dronecan/escs.html">DroneCAN ESCs</a>).</p><p>Кроки наступні:</p><ul><li>У <em>QGroundControl</em> встановіть параметр <a href="./../advanced_config/parameter_reference.html#UAVCAN_ENABLE">UAVCAN_ENABLE</a> на <code>2</code> або <code>3</code> та перезавантажте (див. <a href="./../advanced_config/parameters.html">Finding/Updating Parameters</a>).</li><li>Підключіть ARK Flow CAN до шини CAN Pixhawk.</li></ul><p>Після активації модуль буде виявлено при завантаженні. Дані потоку повинні надходити з частотою 10 Гц.</p><p>Конфігурацію DroneCAN в PX4 пояснено більш детально в <a href="./../dronecan/#enabling-dronecan">DroneCAN &gt; Enabling DroneCAN</a>.</p><h3 id="конфігурація-px4" tabindex="-1">Конфігурація PX4 <a class="header-anchor" href="#конфігурація-px4" aria-label="Permalink to &quot;Конфігурація PX4&quot;">​</a></h3><p>Потрібно встановити параметри оптичного потоку EKF для активації вимірювань оптичного потоку для розрахунку швидкості, встановити необхідні параметри <a href="./">DroneCAN</a> та визначити зміщення, якщо датчик не знаходиться в центрі літального апарата.</p><p>Встановіть наступні параметри в <em>QGroundControl</em>:</p><ul><li>Увімкніть синтез оптичного потоку, встановивши <a href="./../advanced_config/parameter_reference.html#EKF2_OF_CTRL">EKF2_OF_CTRL</a>.</li><li>Щоб опціонально вимкнути підтримку GPS, встановіть <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_CTRL">EKF2_GPS_CTRL</a> на <code>0</code>.</li><li>Увімкніть <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_FLOW">UAVCAN_SUB_FLOW</a>.</li><li>Увімкніть <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_RNG">UAVCAN_SUB_RNG</a>.</li><li>Встановіть <a href="./../advanced_config/parameter_reference.html#EKF2_RNG_A_HMAX">EKF2_RNG_A_HMAX</a> на <code>10</code>.</li><li>Встановіть <a href="./../advanced_config/parameter_reference.html#EKF2_RNG_QLTY_T">EKF2_RNG_QLTY_T</a> на <code>0.2</code>.</li><li>Встановіть <a href="./../advanced_config/parameter_reference.html#UAVCAN_RNG_MIN">UAVCAN_RNG_MIN</a> на <code>0.08</code>.</li><li>Встановіть <a href="./../advanced_config/parameter_reference.html#UAVCAN_RNG_MAX">UAVCAN_RNG_MAX</a> на <code>30</code>.</li><li>Встановіть <a href="./../advanced_config/parameter_reference.html#SENS_FLOW_MINHGT">SENS_FLOW_MINHGT</a> на <code>0.08</code>.</li><li>Встановіть <a href="./../advanced_config/parameter_reference.html#SENS_FLOW_MAXHGT">SENS_FLOW_MAXHGT</a> на <code>25</code>.</li><li>Встановіть <a href="./../advanced_config/parameter_reference.html#SENS_FLOW_MAXR">SENS_FLOW_MAXR</a> на <code>7.4</code>, щоб відповідав максимальній кутовій швидкості потоку PAW3902.</li><li>Параметри <a href="./../advanced_config/parameter_reference.html#EKF2_OF_POS_X">EKF2_OF_POS_X</a>, <a href="./../advanced_config/parameter_reference.html#EKF2_OF_POS_Y">EKF2_OF_POS_Y</a> та <a href="./../advanced_config/parameter_reference.html#EKF2_OF_POS_Z">EKF2_OF_POS_Z</a> можуть бути встановлені для врахування зміщення Ark Flow від центру мас транспортного засобу.</li></ul><h2 id="конфігурування-потоку-ark" tabindex="-1">Конфігурування потоку Ark <a class="header-anchor" href="#конфігурування-потоку-ark" aria-label="Permalink to &quot;Конфігурування потоку Ark&quot;">​</a></h2><p>На ARK Flow можливо вам доведеться налаштувати наступні параметри:</p><table><thead><tr><th>Параметр</th><th>Опис</th></tr></thead><tbody><tr><td><a id="CANNODE_TERM"></a><a href="./../advanced_config/parameter_reference.html#CANNODE_TERM">CANNODE_TERM</a></td><td>Вбудована завершення шини CAN.</td></tr></tbody></table><h2 id="значення-led-індикаторів" tabindex="-1">Значення LED індикаторів <a class="header-anchor" href="#значення-led-індикаторів" aria-label="Permalink to &quot;Значення LED індикаторів&quot;">​</a></h2><p>Ви побачите як червоні, так і сині світлодіоди на ARK Flow коли він прошивається, і постійний синій світлодіод, якщо він працює належним чином.</p><p>Якщо ви бачите червоний світлодіод, це означає, що виникла помилка, і вам слід перевірити наступне:</p><ul><li>Переконайтеся, що у польотному контролері встановлено SD-картку.</li><li>Переконайтеся, що Ark Flow має встановлене <code>ark_can-flow_canbootloader</code> перед тим, як прошивати <code>ark_can-flow_default</code>.</li><li>Видаліть бінарні файли з кореневих та ufw директорій SD-карти та спробуйте зібрати та знову прошити.</li></ul><h2 id="відео" tabindex="-1">Відео <a class="header-anchor" href="#відео" aria-label="Permalink to &quot;Відео&quot;">​</a></h2>',40),_=e("p",null,[e("div",{class:"embed-responsive embed-responsive-16by9"},[e("iframe",{class:"embed-responsive-item youtube-player",type:"text/html",width:"640",height:"390",src:"https://www.youtube.com/embed/SAbRe1fi7bU",frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:""})])],-1),h=e("p",null,[e("em",null,[a("PX4 утримує позицію за допомогою датчика потоку ARK для оцінки швидкості (у "),e("a",{href:"./../flight_modes_mc/position.html"},"Режим позиції"),a(").")])],-1),f=[d,_,h];function m(s,A,p,u,N,F){return t(),i("div",null,f)}const C=o(c,[["render",m]]);export{S as __pageData,C as default};
