import{_ as t,a as e,b as a,c as r,d as o,e as i,f as d,g as n,h,i as l,j as p,k as c,l as s,m as f,n as m}from"./chunks/thoneflow_3901u_hero.BouBdDIo.js";import{_,c as P,o as w,ab as u}from"./chunks/framework.CUflZczI.js";const E=JSON.parse('{"title":"Датчики на основі PMW3901 для вимірювання потоку","description":"","frontmatter":{},"headers":[],"relativePath":"uk/sensor/pmw3901.md","filePath":"uk/sensor/pmw3901.md"}'),b={name:"uk/sensor/pmw3901.md"},g=u('<h1 id="датчики-на-основі-pmw3901-для-вимірювання-потоку" tabindex="-1">Датчики на основі PMW3901 для вимірювання потоку <a class="header-anchor" href="#датчики-на-основі-pmw3901-для-вимірювання-потоку" aria-label="Permalink to &quot;Датчики на основі PMW3901 для вимірювання потоку&quot;">​</a></h1><p>PMW3901 - це <a href="./../sensor/optical_flow.html">оптичний потік</a> ASIC, який обчислює потік внутрішньо і надає різницю в пікселях між кожною кадром. Він використовує сенсор відстеження, який схожий на те, що ви знайдете в комп&#39;ютерній мишці, але адаптований для роботи від 80 мм і безмежжя. PMW3901 використовується в декількох продуктах, включаючи деякі від Bitcraze, Tindie, Hex, Thone та Alientek</p><p><img src="'+t+'" alt="Bitcraze Flow Deck"></p><p>Ця тема містить посилання на датчики, які були протестовані, разом з інформацією про кріплення та конфігурацію PX4 (це загальне для всіх датчиків цього типу).</p><h2 id="плати-які-використовують-pmw3901" tabindex="-1">Плати, які використовують PMW3901 <a class="header-anchor" href="#плати-які-використовують-pmw3901" aria-label="Permalink to &quot;Плати, які використовують PMW3901&quot;">​</a></h2><p>Наступна таблиця показує деякі плати, які використовують цей датчик, зазначаючи кількість інтерфейсів, кількість датчиків, вхідну напругу та розмір. Назва дошки посилається на розділи, що містять інформацію про підключення та інформацію про покупку.</p><table><thead><tr><th>Виробництво</th><th>Материнська плата</th><th>Інтерфейс</th><th>Потік</th><th>Далекомір</th><th>Гіроскоп</th><th>Напруга (V)</th><th>Розмір (мм)</th><th>Максимальна висота (м)</th></tr></thead><tbody><tr><td>Bitcraze</td><td><a href="#bitcraze-flow-breakout">Розбивка потоку</a></td><td>SPI</td><td>Y</td><td>Y</td><td>-</td><td>3 - 5</td><td>21x20</td><td>1</td></tr><tr><td>Tindie</td><td><a href="#tindie-pmw3901-optical-flow-sensor">Оптичний датчик потоку PMW3901</a></td><td>SPI</td><td>Y</td><td>-</td><td>-</td><td>3 - 5</td><td>AxB</td><td>-</td></tr><tr><td>Hex</td><td><a href="#hex-hereflow-pmw3901-optical-flow-sensor">HereFlow PMW3901 Оптичний датчик потоку</a></td><td>CAN</td><td>Y</td><td>Y</td><td>Y</td><td>3 - 5</td><td>AxB</td><td>4</td></tr><tr><td>Holybro</td><td><a href="#holybro-pmw3901-optical-flow-sensor">Holybro PMW3901 Оптичний датчик потоку</a></td><td>UART</td><td>Y</td><td>-</td><td>-</td><td>3 - 5</td><td>AxB</td><td>-</td></tr><tr><td>Thone</td><td><a href="#thone-thoneflow-3901u">Thone ThoneFlow-3901U</a></td><td>UART</td><td>Y</td><td>-</td><td>-</td><td>3 - 5</td><td>AxB</td><td>-</td></tr><tr><td>Alientek</td><td><a href="#alientek-atk-pmw3901">ATK-PMW3901</a></td><td>SPI</td><td>Y</td><td>-</td><td>-</td><td>3.3 - 4.2</td><td>27.5x16.5</td><td>1</td></tr></tbody></table><h2 id="підтримувані-дальномери" tabindex="-1">Підтримувані дальномери <a class="header-anchor" href="#підтримувані-дальномери" aria-label="Permalink to &quot;Підтримувані дальномери&quot;">​</a></h2><p>Зовнішній дальномер / датчик відстані <em>потрібний</em> для датчиків, які не мають дальномера (наприклад, <em>Tindie</em> або <em>Thone</em>) і <em>рекомендований</em> для інших плат (оскільки їхній діапазон доволі обмежений).</p><p>Діапазон, необхідний для застосування, залежить від програми:</p><ul><li>Польот у приміщенні: ≈4 метри</li><li>Польот на відкритому повітрі: ≥10 метрів (наприклад, для підтримки контролю за позицією в середовищах, де можуть виникнути проблеми з GPS)</li></ul><p>Будь-який <a href="./../sensor/rangefinders.html">дальномер/датчик відстані</a>, підтримуваний PX4, може бути використаний. Датчик може бути встановлений будь-де, але повинен бути спрямований вниз і повинен бути підключений/налаштований як зазвичай.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Команда PX4 головним чином тестувала використання <a href="./../sensor/lidar_lite.html">Lidar Lite V3</a> на більших транспортних засобах та <a href="./../sensor/cm8jl65_ir_distance_sensor.html">Lanbao CM8JL65</a> на менших транспортних засобах.</p></div><h2 id="монтаж-орієнтація" tabindex="-1">Монтаж/Орієнтація <a class="header-anchor" href="#монтаж-орієнтація" aria-label="Permalink to &quot;Монтаж/Орієнтація&quot;">​</a></h2><p>Модулі потоку зазвичай встановлюються близько до центру транспортного засобу. Якщо встановлено не по центру, вам потрібно встановити зміщення: <a href="./../sensor/optical_flow.html#ekf2">Оптичний потік &gt; EKF2</a>.</p><p>Модулі процесу можуть бути встановлені з будь-якою орієнтацією Yaw, відносно системи тіла автомобіля, але ви повинні встановити значення, яке використовується в <a href="./../advanced_config/parameter_reference.html#SENS_FLOW_ROT">SENS_FLOW_ROT</a>.</p><p>&quot;Нульовий&quot; обертання - це коли плата сенсора та вісі X транспортного засобу <a href="./../getting_started/px4_basic_concepts.html#heading-and-directions">транспортного засобу</a> вирівнюються (тобто &quot;перед&quot; транспортного засобу та плата знаходяться в одному напрямку), з обертанням, що збільшується в годинниковому напрямку.</p><p>Модулі PMW3901 мають невеликий виступ, що вказує напрямок <strong>задньої</strong> частини плати. Схема показує відносні орієнтації дошки та транспортного засобу, які відповідають <code>SENS_FLOW_ROT=0</code> (зверніть увагу на виступ ззаду).</p><p><img src="'+e+'" alt="PMW3901 PH4 Rotation"></p><p>Діаграма вище показує дошку Bitcraze. Ви можете використовувати виступ, щоб знайти орієнтацію інших плат у тому ж самому способі:</p><table><thead><tr><th> </th><th> </th></tr></thead><tbody><tr><td>Tindie<br><img src="'+a+'" alt="PMW3901 Tindie Notch"></td><td>Hex Hereflow<br><img src="'+r+'" alt="PMW3901 Hereflow Notch"></td></tr><tr><td>Thone<br><img src="'+o+'" alt="PMW3901 Thoneflow Notch"></td><td>Alientek (також має стрілку, що вказує на передню частину!)<br><img src="'+i+'" alt="PMW3901 Alientek Notch"></td></tr></tbody></table><h2 id="налаштування-px4" tabindex="-1">Налаштування PX4 <a class="header-anchor" href="#налаштування-px4" aria-label="Permalink to &quot;Налаштування PX4&quot;">​</a></h2><p>Конфігурація PX4, яка є загальною для всіх плат на основі PMW3901:</p><ul><li><a href="./../sensor/optical_flow.html#ekf2">Оптичний потік &gt; EKF2</a> пояснює, як об&#39;єднати дані оптичного потоку в оцінювачі EKF2 та встановити зсуви позиції для монтажного положення датчика потоку.</li><li><a href="./../advanced_config/parameter_reference.html#SENS_FLOW_ROT">SENS_FLOW_ROT</a> встановлює орієнтацію датчика потоку відносно напрямку руху транспортного засобу.</li></ul><p>Окрім того для:</p><ul><li>Для підключених по шині SPI датчиків вам потрібно встановити <a href="./../advanced_config/parameter_reference.html#SENS_EN_PMW3901">SENS_EN_PMW3901</a> на <code>1</code>, щоб увімкнути драйвер датчика.</li><li>Датчики, підключені через UART (наприклад, ThoneFlow-3901UY), ви повинні <a href="./../peripherals/serial_configuration.html">налаштувати відповідний послідовний порт</a>, встановивши параметр <a href="./../advanced_config/parameter_reference.html#SENS_TFLOW_CFG">SENS_TFLOW_CFG</a> на значення підключеного порту UART (наприклад, якщо ви підключили цей датчик до <code>TELEM 2</code>, вам потрібно встановити <code>SENS_TFLOW_CFG</code> на <code>102</code>).</li><li>Датчики DroneCAN вам потрібно належним чином встановити <code>UAVCAN_ENABLE</code>. Для отримання додаткової інформації див. <a href="./../dronecan/">Пристрої DroneCAN</a> (та <a href="#dronecan_wiring">документацію HereFlow PMW3901 нижче</a>).</li></ul><p>Індивідуальні датчики потоку додатково налаштовуються/конфігуруються, як описано в розділах нижче.</p><h2 id="розгалуження-bitcraze-flow" tabindex="-1">Розгалуження Bitcraze Flow <a class="header-anchor" href="#розгалуження-bitcraze-flow" aria-label="Permalink to &quot;Розгалуження Bitcraze Flow&quot;">​</a></h2><p>Прямий вихід <a href="https://www.bitcraze.io/products/flow-breakout/" target="_blank" rel="noreferrer">Bitcraze Flow breakout</a> безпосередньо використовує інтерфейс <a href="#spi-wiring">SPI</a> з модуля PMW3901.</p><p>До плати також включено датчик відстані <a href="#i2c-wiring">підключений до порту I2C Pixhawk</a>. Цей датчик відстані - це датчик ToF VL53L0x від STMicroelectronics. Діапазон сенсора мінімальний (2 метри) і буде зменшуватися під час польоту на сонці. Тому ми настійно рекомендуємо використовувати <a href="#external-rangefinders">зовнішній датчик відстані</a>.</p><p><img src="'+t+'" alt="Bitcraze Flow Deck"></p><p><a href="#px4-configuration">Налаштування PX4</a> та інструкції з <a href="#mounting-orientation">монтажу/орієнтації</a> наведені вище.</p><h3 id="підключення-spi" tabindex="-1">Підключення SPI <a class="header-anchor" href="#підключення-spi" aria-label="Permalink to &quot;Підключення SPI&quot;">​</a></h3><p>PMW3901, якщо підключений до порту SPI на Pixhawk 4, автоматично виявить модуль потоку Bitcraze. Драйвер цього пристрою був явно написаний для підключення до порту SPI за допомогою вибору чіпа 1. Не потрібно налаштовувати жодних параметрів, окрім <a href="#mounting-orientation">орієнтації та положення сенсора</a>.</p><p>Схема виводів для порту SPI Pixhawk до плати Bitcraze Flow показана нижче (схема виводів однакова для всіх версій Pixhawk FMU).</p><table><thead><tr><th>Порт SPI Pixhawk (зліва направо)</th><th>Плата потоку Bitcraze</th></tr></thead><tbody><tr><td>1 (VCC)</td><td>VCC</td></tr><tr><td>2 (SCK)</td><td>CLK</td></tr><tr><td>3 (MISO)</td><td>MISO</td></tr><tr><td>4 (MOSI)</td><td>MOSI</td></tr><tr><td>5 (CS1)</td><td>CS</td></tr><tr><td>6 (CS2)</td><td>Не підключайте</td></tr><tr><td>7 (GND)</td><td>GND</td></tr></tbody></table><p>Щоб підключити плату bitcraze flow до Pixhawk, вам потрібно злити дроти кабелю SPI Pixhawk на плату flow. Кабель SPI має 7 провідів, з яких потрібно підключити 6 до плати потоку.</p><p>Наступна діаграма показує, як підключити датчик до Pixhawk 4.</p><p><img src="'+d+'" alt="Bitcraze PH4 Pinout"></p><h3 id="підключення-i2c" tabindex="-1">Підключення I2C <a class="header-anchor" href="#підключення-i2c" aria-label="Permalink to &quot;Підключення I2C&quot;">​</a></h3><p>Проводка I2C однакова для будь-якого іншого датчика відстані. Просто підключіть SLA, SLC, GND та VCC до відповідних (таких же) контактів на Pixhawk та сенсорі.</p><h2 id="оптичнии-датчик-потоку-tindie-pmw3901" tabindex="-1">Оптичний датчик потоку Tindie PMW3901 <a class="header-anchor" href="#оптичнии-датчик-потоку-tindie-pmw3901" aria-label="Permalink to &quot;Оптичний датчик потоку Tindie PMW3901&quot;">​</a></h2><p>Оптичний датчик потоку PMW3901 від Tindie <a href="https://www.tindie.com/products/onehorse/pmw3901-optical-flow-sensor/" target="_blank" rel="noreferrer">PMW3901</a> використовує інтерфейс SPI з модуля PMW3901 точно так само, як і модуль від Bitcraze (див. <a href="#spi-wiring">SPI підключення</a>).</p><p><img src="'+n+'" alt="Tindie PH4 Pinout"></p><p>Датчик не має вбудованого датчика відстані, тому вам потрібно використовувати <a href="#external-rangefinders">зовнішній датчик відстані</a>.</p><p><a href="#px4-configuration">Налаштування PX4</a> та інструкції з <a href="#mounting-orientation">монтажу/орієнтації</a> наведені вище.</p><h2 id="alientek-atk-pmw3901" tabindex="-1">AlienTek ATK-PMW3901 <a class="header-anchor" href="#alientek-atk-pmw3901" aria-label="Permalink to &quot;AlienTek ATK-PMW3901&quot;">​</a></h2><p>Оптичний датчик потоку AlienTek <a href="https://www.aliexpress.com/i/32979605707.html" target="_blank" rel="noreferrer">ATK-PMW3901</a> використовує інтерфейс SPI з модуля PMW3901 точно так само, як і модуль від Bitcraze (див. <a href="#spi-wiring">SPI підключення</a>).</p><p><img src="'+h+'" alt="Alientek Pixhawk4 Connections"></p><p>Плата також включає датчик відстані (ми рекомендуємо використовувати <a href="#external-rangefinders">зовнішній датчик відстані</a>). Ви можете підключити внутрішній датчик до порту I2C Pixhawk <a href="#i2c-wiring">так само, як і будь-який інший пристрій I2C.</a> Нижче наведено знімок екрану, на якому показані контакти I2C (SLA, SLC, GND та VCC).</p><p><img src="'+l+'" alt="Alientek Pinout"></p><p><a href="#px4-configuration">Налаштування PX4</a> та інструкції з <a href="#mounting-orientation">монтажу/орієнтації</a> наведені вище.</p><h2 id="hex-hereflow-оптичнии-датчик-потоку-pmw3901" tabindex="-1">Hex HereFlow Оптичний датчик потоку PMW3901 <a class="header-anchor" href="#hex-hereflow-оптичнии-датчик-потоку-pmw3901" aria-label="Permalink to &quot;Hex HereFlow Оптичний датчик потоку PMW3901&quot;">​</a></h2><p>Шестигранний <a href="http://www.proficnc.com/all-products/185-pixhawk2-suite.html" target="_blank" rel="noreferrer">Оптичний датчик потоку HereFlow PMW3901</a> - це маленька плата, що містить модуль потоку PMW3901, датчик відстані VL53L1X та ІІМ (використовується для синхронізації даних потоку з даними гіроскопа).</p><p>Вбудований мікроконтролер зразки три датчики та публікує дві повідомлення DroneCAN, що містять всю інформацію, необхідну для розрахунків датчика потоку та відстані.</p><p>Плата може бути підключена до будь-якого порту CAN на будь-якій платі Pixhawk (див. <a href="#dronecan_wiring">Проводка DroneCAN</a>).</p><p>Щодо інших плат оптичного потоку, ми рекомендуємо використовувати <a href="#external-rangefinders">зовнішній датчик відстані</a>.</p><p><a href="#px4-configuration">Налаштування PX4</a> та інструкції з <a href="#mounting-orientation">монтажу/орієнтації</a> наведені вище.</p><p><a id="dronecan_wiring"></a></p><h3 id="проводка-налаштування-dronecan" tabindex="-1">Проводка/Налаштування DroneCAN <a class="header-anchor" href="#проводка-налаштування-dronecan" aria-label="Permalink to &quot;Проводка/Налаштування DroneCAN&quot;">​</a></h3><p>Схема нижче показує, як підключити датчик до шини CAN Pixhawk 4.</p><p><img src="'+p+'" alt="Hex PH4 Pinout"></p><p>Крім іншої конфігурації, вам потрібно встановити параметр <a href="./../advanced_config/parameter_reference.html#UAVCAN_ENABLE">UAVCAN_ENABLE</a> на значення 2 або 3, залежно від вашої системи:</p><ul><li><code>UAVCAN_ENABLE=2</code>: Датчики DroneCAN, але без контролерів двигунів.</li><li><code>UAVCAN_ENABLE=3</code>: Датчики DroneCAN та контролери двигунів.</li></ul><p>Для загальної інформації про підключення та налаштування DroneCAN див.: <a href="./../dronecan/">Пристрої DroneCAN</a>.</p><h2 id="holybro-pmw3901-оптичнии-датчик-потоку" tabindex="-1">Holybro PMW3901 Оптичний датчик потоку <a class="header-anchor" href="#holybro-pmw3901-оптичнии-датчик-потоку" aria-label="Permalink to &quot;Holybro PMW3901 Оптичний датчик потоку&quot;">​</a></h2><p>Оптичний датчик руху <a href="https://holybro.com/products/pmw3901-optical-flow-sensor" target="_blank" rel="noreferrer">Holybro PMW3901</a> відкриває модуль оптичного потоку PMW3901 через інтерфейс UART.</p><p>Плата не містить вбудованого датчика відстані, тому вам доведеться використовувати <a href="#external-rangefinders">зовнішній датчик відстані</a>.</p><img src="'+c+'" width="350px" title="HB-pmw3901-1"><img src="'+s+'" width="350px" title="HB-pmw3901-2"><p>Це поставляється з корпусом, надрукованим у 3D, та передпаяним TX, напругою та GND 4-контактним роз&#39;ємом, який можна підключити до порту телеметрії вашого контролера польоту, як показано нижче (для Pixhawk 6C).</p><p><img src="'+f+'" alt="HB-pmw3901-3"></p><h2 id="thone-thoneflow-3901u" tabindex="-1">Thone ThoneFlow-3901U <a class="header-anchor" href="#thone-thoneflow-3901u" aria-label="Permalink to &quot;Thone ThoneFlow-3901U&quot;">​</a></h2><p>Thone <a href="https://www.seeedstudio.com/ThoneFlow-3901U-UART-Serial-Version-PMW3901-Optical-Flow-Sensor-p-4040.html" target="_blank" rel="noreferrer">ThoneFlow-3901U</a> відкриває модуль оптичного потоку PMW3901 через інтерфейс UART.</p><p>Плата не має вбудованого датчика відстані, тому вам потрібно використовувати <a href="#external-rangefinders">зовнішній датчик відстані</a>.</p><p><img src="'+m+'" alt="PMW3901 Thoneflow Hero"></p><p><a href="#px4-configuration">Налаштування PX4</a> та інструкції з <a href="#mounting-orientation">монтажу/орієнтації</a> наведені вище.</p><p>Крім того, вам також потрібно встановити параметр <a href="./../advanced_config/parameter_reference.html#SENS_TFLOW_CFG">SENS_TFLOW_CFG</a> на значення порту UART, до якого ви підключилися (наприклад, якщо сенсор підключений до <code>TELEM 2</code>, тоді встановіть <code>SENS_TFLOW_CFG=102</code>. Для додаткової інформації дивіться <a href="./../peripherals/serial_configuration.html">Конфігурація послідовного порту</a>.</p>',78),k=[g];function x(S,T,A,W,C,M){return w(),P("div",null,k)}const q=_(b,[["render",x]]);export{E as __pageData,q as default};
