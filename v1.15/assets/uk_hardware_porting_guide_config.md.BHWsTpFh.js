import{_ as a,a as e}from"./chunks/kconfig-guiconfig.Cv4sGZ8p.js";import{_ as n,c as o,o as s,ab as c}from"./chunks/framework.CUflZczI.js";const b=JSON.parse('{"title":"PX4 Конфігурація плати (kconfig)","description":"","frontmatter":{},"headers":[],"relativePath":"uk/hardware/porting_guide_config.md","filePath":"uk/hardware/porting_guide_config.md"}'),i={name:"uk/hardware/porting_guide_config.md"},p=c(`<h1 id="px4-конфігурація-плати-kconfig" tabindex="-1">PX4 Конфігурація плати (kconfig) <a class="header-anchor" href="#px4-конфігурація-плати-kconfig" aria-label="Permalink to &quot;PX4 Конфігурація плати (kconfig)&quot;">​</a></h1><p>Прошивку автопілота PX4 можна налаштувати під час компіляції для пристосування його до спеціалізованих застосувань (фіксований крило, багатокоптер, рухомий об&#39;єкт або інше), щоб увімкнути нові та експериментальні функції (такі як Cyphal) або заощадити використання флеш-пам&#39;яті&amp; RAM, вимкнувши деякі драйвери та підсистеми. Ця конфігурація обробляється через <em>Kconfig</em>, який є тим самим <a href="./../hardware/porting_guide_nuttx.html#nuttx-menuconfig-setup">системою конфігурації, що використовується NuttX</a>.</p><p>Опції конфігурації (часто називаються &quot;символами&quot; мовою <em>kconfig</em>) визначаються в файлах <code>Kconfig</code> у каталозі <strong>/src</strong>.</p><h2 id="конвенція-наименування-символів-px4-kconfig" tabindex="-1">Конвенція найменування символів PX4 Kconfig <a class="header-anchor" href="#конвенція-наименування-символів-px4-kconfig" aria-label="Permalink to &quot;Конвенція найменування символів PX4 Kconfig&quot;">​</a></h2><p>За умовчанням символи для модулів/драйверів називаються на основі шляху папки модуля. Наприклад, символ для водія ADC у <code>src/drivers/adc/board_adc</code> повинен мати назву <code>DRIVERS_ADC_BOARD_ADC</code>.</p><p>Для додавання символів для параметрів, специфічних для драйвера/модуля, конвенція найменування полягає в тому, що за ім&#39;ям модуля слідує назва параметра. Наприклад <code>UAVCAN_V1_GNSS_PUBLISHER</code>, який є варіантом <code>GNSS_PUBLISHER</code> для модуля <code>UAVCAN_V1</code>. Параметри повинні бути захищені за допомогою оператора <code>if</code>, щоб гарантувати, що вони будуть видимі лише тоді, коли сам модуль увімкнено.</p><p>Наприклад:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>menuconfig DRIVERS_UAVCAN_V1</span></span>
<span class="line"><span>    bool &quot;UAVCANv1&quot;</span></span>
<span class="line"><span>    default n</span></span>
<span class="line"><span>    ---help---</span></span>
<span class="line"><span>        Enable support for UAVCANv1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if DRIVERS_UAVCAN_V1</span></span>
<span class="line"><span>    config UAVCAN_V1_GNSS_PUBLISHER</span></span>
<span class="line"><span>        bool &quot;GNSS Publisher&quot;</span></span>
<span class="line"><span>        default n</span></span>
<span class="line"><span>endif #DRIVERS_UAVCAN_V1</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">Збірки будуть беззвучно ігнорувати будь-які відсутні або неправильно написані модулі у конфігураційному файлі <code>*.px4board</code></p></div><h2 id="успадкування-мітки-px4-kconfig" tabindex="-1">Успадкування мітки PX4 Kconfig <a class="header-anchor" href="#успадкування-мітки-px4-kconfig" aria-label="Permalink to &quot;Успадкування мітки PX4 Kconfig&quot;">​</a></h2><p>Кожній платі PX4 повинна мати конфігурацію <code>default.px4board</code> і може мати необов&#39;язкову конфігурацію <code>bootloader.px4board configuration</code>. Проте ви також можете додати окремі конфігурації під іншою міткою, наприклад <code>cyphal.px4board</code>. Зверніть увагу, що за замовчуванням конфігурація <code>cyphal.px4board</code> успадковує всі налаштування, встановлені в <code>default.px4board</code>. При зміні <code>cyphal.px4board</code> воно зберігає лише дельту ключів Kconfig, які відрізняються від <code>default.px4board</code>, це корисно для спрощення управління конфігураціями</p><div class="info custom-block"><p class="custom-block-title">При зміні ключа Kconfig in <code>за замовчуванням. x4board</code> буде змінено в усіх конфігураціях похідної таблиці з тими ж самими конфігураціями і в тому ж форматі.</p><p>:::</p><h2 id="налаштування-меню-px4-menuconfig" tabindex="-1">Налаштування меню PX4 Menuconfig <a class="header-anchor" href="#налаштування-меню-px4-menuconfig" aria-label="Permalink to &quot;Налаштування меню PX4 Menuconfig&quot;">​</a></h2><p>Інструмент <a href="https://pypi.org/project/kconfiglib/#menuconfig-interfaces" target="_blank" rel="noreferrer">menuconfig</a> використовується для зміни конфігурації плати PX4, додавання/видалення модулів, драйверів та інших функцій.</p><p>Існують варіанти командного рядка та графічного інтерфейсу, які можна запустити за допомогою скорочень збірки PX4:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>make px4_fmu-v5_default boardconfig</span></span>
<span class="line"><span>make px4_fmu-v5_default boardguiconfig</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title"><em>Kconfiglib</em> та <em>menuconfig</em> поставляються з пакетом python <em>kconfiglib</em>, який встановлюється звичайним сценарієм встановлення <a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/Tools/setup/ubuntu.sh" target="_blank" rel="noreferrer">ubuntu.sh</a>. Якщо <em>kconfiglib</em> не встановлено, ви можете це зробити за допомогою команди: <code>pip3 install kconfiglib</code></p></div><p>Інтерфейс командного рядка та графічного інтерфейсу показані нижче.</p><h3 id="інтерфеис-командного-рядка-menuconfig" tabindex="-1">Інтерфейс командного рядка menuconfig <a class="header-anchor" href="#інтерфеис-командного-рядка-menuconfig" aria-label="Permalink to &quot;Інтерфейс командного рядка menuconfig&quot;">​</a></h3><p><img src="`+a+'" alt="menuconfig command line interface"></p><h3 id="інтерфеис-користувача-menuconfig-gui" tabindex="-1">Інтерфейс користувача menuconfig GUI <a class="header-anchor" href="#інтерфеис-користувача-menuconfig-gui" aria-label="Permalink to &quot;Інтерфейс користувача menuconfig GUI&quot;">​</a></h3><p><img src="'+e+'" alt="menuconfig GUI interface"></p></div>',12),t=[p];function l(d,r,u,f,g,h){return s(),o("div",null,t)}const k=n(i,[["render",l]]);export{b as __pageData,k as default};
