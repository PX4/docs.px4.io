import{_ as e,c as t,o as a,ab as i}from"./chunks/framework.CUflZczI.js";const u=JSON.parse('{"title":"Multi-Vehicle Симуляція з ROS 2","description":"","frontmatter":{},"headers":[],"relativePath":"uk/ros2/multi_vehicle.md","filePath":"uk/ros2/multi_vehicle.md"}'),s={name:"uk/ros2/multi_vehicle.md"},d=i('<h1 id="multi-vehicle-симуляція-з-ros-2" tabindex="-1">Multi-Vehicle Симуляція з ROS 2 <a class="header-anchor" href="#multi-vehicle-симуляція-з-ros-2" aria-label="Permalink to &quot;Multi-Vehicle Симуляція з ROS 2&quot;">​</a></h1><p><a href="./../middleware/uxrce_dds.html">XRCE-DDS</a> дозволяє підключати декілька клієнтів до одного агента через UDP. Це особливо корисно в симуляції, якщо потрібно запустити лише один агент.</p><h2 id="налаштування-та-вимоги" tabindex="-1">Налаштування та вимоги <a class="header-anchor" href="#налаштування-та-вимоги" aria-label="Permalink to &quot;Налаштування та вимоги&quot;">​</a></h2><p>Єдині вимоги</p><ul><li>Щоб мати змогу запустити <a href="./../simulation/multi-vehicle-simulation.html">симуляцію кількох транспортних засобів</a> без ROS 2 з вибраним симулятором (<a href="./../sim_gazebo_gz/multi_vehicle_simulation.html">Gazebo</a>, <a href="./../sim_gazebo_classic/multi_vehicle_simulation.html#multiple-vehicle-with-gazebo-classic">Gazebo Classic</a>, <a href="./../sim_flightgear/multi_vehicle.html">FlightGear</a> та <a href="./../sim_jmavsim/multi_vehicle.html">JMAVSim</a>).</li><li>To be able to use <a href="./../ros2/user_guide.html">ROS 2</a> in a single vehicle simulation.</li></ul><h2 id="принцип-операціі" tabindex="-1">Принцип операції <a class="header-anchor" href="#принцип-операціі" aria-label="Permalink to &quot;Принцип операції&quot;">​</a></h2><p>У симуляції кожен екземпляр PX4 отримує унікальний номер <code>px4_instance</code>, починаючи з <code>0</code>. Це значення використовується для присвоєння унікального значення ключу <a href="./../advanced_config/parameter_reference.html#UXRCE_DDS_KEY">UXRCE_DDS_KEY</a>:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">param</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> UXRCE_DDS_KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $((</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">px4_instance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Таким чином, <code>UXRCE_DDS_KEY</code> завжди збігатиметься з <a href="./../advanced_config/parameter_reference.html#MAV_SYS_ID">MAV_SYS_ID</a>.</p></div><p>Крім того, коли <code>px4_instance</code> більше нуля, додається унікальний <a href="./../middleware/uxrce_dds.html#customizing-the-topic-namespace">префікс простору імен</a> ROS 2 у вигляді <code>px4_$px4_instance</code>:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uxrce_dds_ns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-n px4_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$px4_instance</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Змінна оточення <code>PX4_UXRCE_DDS_NS</code>, якщо її встановлено, перевизначає поведінку простору імен, описану вище.</p></div><p>Перший екземпляр (<code>px4_instance=0</code>) не має додаткового простору імен, щоб відповідати стандартній поведінці клієнта <code>xrce-dds</code> на реальному транспортному засобі. Цю невідповідність можна виправити вручну за допомогою <code>PX4_UXRCE_DDS_NS</code> у першому випадку або почавши додавання транспортних засобів з індексу <code>1</code> замість <code>0</code> (це поведінка за замовчуванням, прийнята у <a href="https://github.com/PX4/PX4-Autopilot/blob/release/1.15/Tools/simulation/gazebo-classic/sitl_multiple_run.sh" target="_blank" rel="noreferrer">sitl_multiple_run.sh</a> для Gazebo Classic).</p><p>Типове налаштування клієнта у симуляції:</p><table><thead><tr><th><code>PX4_UXRCE_DDS_NS</code></th><th><code>px4_instance</code></th><th><code>UXRCE_DDS_KEY</code></th><th>client namespace</th></tr></thead><tbody><tr><td>not provided</td><td>0</td><td><code>px4_instance+1</code></td><td>none</td></tr><tr><td>provided</td><td>0</td><td><code>px4_instance+1</code></td><td><code>PX4_UXRCE_DDS_NS</code></td></tr><tr><td>not provided</td><td>&gt;0</td><td><code>px4_instance+1</code></td><td><code>px4_${px4_instance}</code></td></tr><tr><td>provided</td><td>&gt;0</td><td><code>px4_instance+1</code></td><td><code>PX4_UXRCE_DDS_NS</code></td></tr></tbody></table><h2 id="налаштування-значення-target-system" tabindex="-1">Налаштування значення <code>target_system</code> <a class="header-anchor" href="#налаштування-значення-target-system" aria-label="Permalink to &quot;Налаштування значення `target_system`&quot;">​</a></h2><p>PX4 приймає повідомлення <a href="./../msg_docs/VehicleCommand.html">VehicleCommand</a> тільки якщо їхнє поле <code>target_system</code> дорівнює нулю (широкомовний зв&#39;язок) або збігається з <code>MAV_SYS_ID</code>. У всіх інших ситуаціях повідомлення ігноруються. Тому, коли вузли ROS 2 хочуть надіслати <code>VehicleCommand</code> до PX4, вони повинні переконатися, що повідомлення заповнені відповідним значенням <code>target_system</code>.</p><p>Наприклад, якщо ви хочете надіслати команду третьому автомобілю, який має <code>px4_instance=2</code>, вам потрібно встановити <code>target_system=3</code> у всіх ваших повідомленнях <code>VehicleCommand</code>.</p>',18),c=[d];function o(l,h,n,r,p,_){return a(),t("div",null,c)}const k=e(s,[["render",o]]);export{u as __pageData,k as default};
