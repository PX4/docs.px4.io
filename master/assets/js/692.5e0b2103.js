(window.webpackJsonp=window.webpackJsonp||[]).push([[692],{2620:function(t,o,e){"use strict";e.r(o);var r=e(18),a=Object(r.a)({},(function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"使用-motion-capture-飞行-vicon-optitrack"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使用-motion-capture-飞行-vicon-optitrack"}},[t._v("#")]),t._v(" 使用 Motion Capture 飞行（VICON，Optitrack）")]),t._v(" "),r("blockquote",[r("p",[r("strong",[t._v("Warning")]),t._v(" "),r("strong",[t._v("WORK IN PROGRESS")]),t._v(". This topic shares significant overlap with "),r("RouterLink",{attrs:{to:"/zh/ros/external_position_estimation.html"}},[t._v("External Position Estimation (ROS)")]),t._v(". 该主题与 "),r("RouterLink",{attrs:{to:"/zh/ros/external_position_estimation.html"}},[t._v("External Position Estimation (ROS)")]),t._v(" 是重叠的。")],1)]),t._v(" "),r("p",[t._v("Indoor motion capture systems like VICON and Optitrack can be used to provide position and attitude data for vehicle state estimation, orto serve as ground-truth for analysis. The motion capture data can be used to update PX4's local position estimate relative to the local origin. Heading (yaw) from the motion capture system can also be optionally integrated by the attitude estimator. 动作捕捉数据可用于更新 PX4 相对于本地原点的本地位置估计。 来自运动捕捉系统的航向（偏航）也可以由姿态估计器可选地集成。")]),t._v(" "),r("p",[t._v("Pose (position and orientation) data from the motion capture system is sent to the autopilot over MAVLink, using the "),r("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#ATT_POS_MOCAP",target:"_blank",rel:"noopener noreferrer"}},[t._v("ATT_POS_MOCAP"),r("OutboundLink")],1),t._v(" message. See the section below on coordinate frames for data representation conventions. The "),r("RouterLink",{attrs:{to:"/zh/ros/mavros_installation.html"}},[t._v("mavros")]),t._v(" ROS-Mavlink interface has a default plugin to send this message. 这些消息也可以直接使用MAVLINK库并编写C/C++代码来发送和接收。 请参阅下面有关数据表示约定的坐标框架的部分。 "),r("RouterLink",{attrs:{to:"/zh/ros/mavros_installation.html"}},[t._v("mavros")]),t._v(" ROS-Mavlink 接口有一个默认插件来发送此消息。 这些消息也可以直接使用MAVLINK库并编写C/C++代码来发送和接收。")],1),t._v(" "),r("h2",{attrs:{id:"计算架构"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#计算架构"}},[t._v("#")]),t._v(" 计算架构")]),t._v(" "),r("p",[t._v("It is "),r("strong",[t._v("highly recommended")]),t._v(" that you send motion capture data via an "),r("strong",[t._v("onboard")]),t._v(" computer (e.g Raspberry Pi, ODroid, etc.) for reliable communications. The onboard computer can be connected to the motion capture computer through WiFi, which offers reliable, high-bandwidth connection. 机载计算机可以通过WiFi连接到动作捕捉计算机，提供可靠的高带宽连接。")]),t._v(" "),r("p",[t._v("大多数标准遥测链路（如 3DR/SiK 无线电）"),r("strong",[t._v("不")]),t._v(" 适合高带宽运动捕捉应用。")]),t._v(" "),r("h2",{attrs:{id:"坐标系"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#坐标系"}},[t._v("#")]),t._v(" 坐标系")]),t._v(" "),r("p",[t._v("本节演示如何使用适当的参考坐标系。 关于坐标系有各种各样的表示, 但我们将使用其中两个: ENU 和 NED。")]),t._v(" "),r("ul",[r("li",[t._v("ENU is a ground-fixed frame where "),r("strong",[t._v("X")]),t._v(" axis points East, "),r("strong",[t._v("Y")]),t._v(" points North and "),r("strong",[t._v("Z")]),t._v(" up. The robot/vehicle body frame is "),r("strong",[t._v("X")]),t._v(" towards the front, "),r("strong",[t._v("Z")]),t._v(" up and "),r("strong",[t._v("Y")]),t._v(" towards the left. 机器人/车身框架朝向前方 "),r("strong",[t._v("X")]),t._v("，向左朝向 "),r("strong",[t._v("Z")]),t._v(" 和 "),r("strong",[t._v("Y")]),t._v("。")]),t._v(" "),r("li",[t._v("NED has "),r("strong",[t._v("X")]),t._v(" towards North, "),r("strong",[t._v("Y")]),t._v(" East and "),r("strong",[t._v("Z")]),t._v(" down. The robot/vehicle body frame has "),r("strong",[t._v("X")]),t._v(" towards the front, "),r("strong",[t._v("Z")]),t._v(" down and "),r("strong",[t._v("Y")]),t._v(" accordingly. 机器人/车身框架具有朝向前方的 "),r("strong",[t._v("X")]),t._v("，相应地具有 "),r("strong",[t._v("Z")]),t._v(" 和 "),r("strong",[t._v("Y")]),t._v("。")])]),t._v(" "),r("p",[t._v("框架如下所示。 Frames are shown in the image below. NED on the left, ENU on the right: "),r("img",{attrs:{src:e(370),alt:"参考机架"}})]),t._v(" "),r("p",[t._v("然而，利用外部航向估计，磁北被忽略并且用对应于世界 "),r("em",[t._v("x")]),t._v(" 轴的矢量（其可以在 mocap 校准处自由放置）伪造; 偏航角将给予局部 "),r("em",[t._v("x")]),t._v("。")]),t._v(" "),r("blockquote",[r("p",[r("strong",[t._v("Warning")]),t._v(" 在动作捕捉软件中创建刚体时，请记住首先将机器人与世界 "),r("strong",[t._v("X")]),t._v(" 轴对齐，否则偏航估计将具有初始偏移。")])]),t._v(" "),r("h2",{attrs:{id:"estimator-选择"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#estimator-选择"}},[t._v("#")]),t._v(" Estimator 选择")]),t._v(" "),r("h3",{attrs:{id:"lpe-和态度估计-q"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#lpe-和态度估计-q"}},[t._v("#")]),t._v(" LPE 和态度估计 Q")]),t._v(" "),r("h3",{attrs:{id:"ekf2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ekf2"}},[t._v("#")]),t._v(" EKF2")]),t._v(" "),r("p",[t._v("The ROS topic for motion cap "),r("code",[t._v("mocap_pose_estimate")]),t._v(" for mocap systems and "),r("code",[t._v("vision_pose_estimate")]),t._v(" for vision. 有关详细信息, 请检查 "),r("a",{attrs:{href:"http://wiki.ros.org/mavros_extras",target:"_blank",rel:"noopener noreferrer"}},[t._v(" mavros_extras "),r("OutboundLink")],1),t._v("。 有关详细信息, 请检查 "),r("a",{attrs:{href:"http://wiki.ros.org/mavros_extras",target:"_blank",rel:"noopener noreferrer"}},[t._v(" mavros_extras "),r("OutboundLink")],1),t._v("。")]),t._v(" "),r("h2",{attrs:{id:"测试"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[t._v("#")]),t._v(" 测试")]),t._v(" "),r("h2",{attrs:{id:"故障处理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#故障处理"}},[t._v("#")]),t._v(" 故障处理")])])}),[],!1,null,null,null);o.default=a.exports},370:function(t,o,e){t.exports=e.p+"assets/img/ref_frames.b0d97b5d.png"}}]);