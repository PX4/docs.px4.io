(window.webpackJsonp=window.webpackJsonp||[]).push([[627],{1215:function(s,t,a){s.exports=a.p+"assets/img/architecture_ros2.f0ce052c.png"},2250:function(s,t,a){"use strict";a.r(t);var n=a(19),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"ros-2-사용-설명서-px4-ros-2-브리지"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ros-2-사용-설명서-px4-ros-2-브리지"}},[s._v("#")]),s._v(" ROS 2 사용 설명서(PX4-ROS 2 브리지)")]),s._v(" "),n("p",[s._v("PX4에서 ROS 2를 설정하고 사용하는 방법을 설명합니다.")]),s._v(" "),n("p",[s._v("필요한 소프트웨어를 설치하고 ROS 2 애플리케이션을 구축하는 방법에 대한 지침과 ROS2-PX4 브리지 아키텍처 및 애플리케이션 파이프라인에 대한 개요를 제공합니다.")]),s._v(" "),n("div",{staticClass:"custom-block note"},[n("p",{staticClass:"custom-block-title"},[s._v("PX4 Autopilot의 Fast DDS 인터페이스는 DDS 도메인(ROS 노드 포함)에서 실행 및 연결된 모든 애플리케이션에서 활용할 수 있습니다.")]),s._v(" "),n("p",[s._v("ROS 2 없이 "),n("em",[s._v("microRTPS 브리지")]),s._v(" 사용 방법은 "),n("RouterLink",{attrs:{to:"/ko/middleware/micrortps.html"}},[s._v("RTPS/DDS 인터페이스 섹션")]),s._v("을 참고하십시오.")],1)]),s._v(" "),n("div",{staticClass:"custom-block note"},[n("p",{staticClass:"custom-block-title"},[s._v("ROS")]),s._v(" "),n("p",[s._v("2에서 PX4를 사용하는 방법에 대한 보다 자세하고 시각적인 설명은 PX4 유지 관리자의 다음 프레젠테이션을 참조하십시오.")]),s._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://www.youtube.com/watch?v=qhLATrkA_Gw",target:"_blank",rel:"noopener noreferrer"}},[s._v("ROS World 2020 - ROS 2 및 PX4 시작하기"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://www.youtube.com/watch?v=2Szw8Pk3Z0Q",target:"_blank",rel:"noopener noreferrer"}},[s._v('PX4 Dev Summit 2019 - "ROS 2 Powered PX4"'),n("OutboundLink")],1)])])]),s._v(" "),n("h2",{attrs:{id:"개요"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#개요"}},[s._v("#")]),s._v(" 개요")]),s._v(" "),n("p",[s._v("ROS 2의 애플리케이션 파이프라인은 기본 통신 미들웨어(DDS/RTPS) 덕분에 매우 간단합니다. "),n("RouterLink",{attrs:{to:"/ko/middleware/micrortps.html"}},[s._v("microRTPS Bridge")]),s._v("는 PX4에서 실행되는 클라이언트와 ROS 컴퓨터에서 실행되는 에이전트로 구성되며, UORB와 ROS 2간의 양방향 메시지 변환을 제공합니다. 이를 통하여, PX4 UORB 데이터에 직접 게시 및 구독하는 ROS 2 리스너 또는 광고주 노드를 생성할 수 있습니다! 이것을 아래 다이어그램에서 설명합니다.")],1),s._v(" "),n("p",[n("img",{attrs:{src:a(1215),alt:"ROS 2를 사용한 아키텍처"}})]),s._v(" "),n("p",[s._v("ROS 2는 "),n("a",{attrs:{href:"https://github.com/PX4/px4_msgs",target:"_blank",rel:"noopener noreferrer"}},[n("code",[s._v("px4_msgs")]),n("OutboundLink")],1),s._v(" 및 "),n("a",{attrs:{href:"https://github.com/PX4/px4_ros_com",target:"_blank",rel:"noopener noreferrer"}},[n("code",[s._v("px4_ros_com")]),n("OutboundLink")],1),s._v(" 패키지를 사용하여 일치하는 메시지 정의가 클라이언트와 에이전트 코드를 생성하는 데 사용되는지 확인하고(중요함), ROS 코드를 빌드시에는 PX4가 있어야 합니다.")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("px4_msgs")]),s._v("에는 PX4 클라이언트 메시지 정의가 포함됩니다. 이 프로젝트가 빌드되면 해당 ROS 2 호환 IDL 파일이 생성됩니다.")]),s._v(" "),n("li",[n("code",[s._v("px4_ros_com")]),s._v("은 "),n("code",[s._v("px4_msgs")]),s._v(" 프로젝트 빌드후 생성된 IDL 파일을 사용하여 ROS 2 에이전트를 생성(및 빌드)합니다.")])]),s._v(" "),n("p",[s._v("PX4 Autopilot 프로젝트는 (마스터 분기에서) 변경될 때마다, 새 메시지 정의로 "),n("a",{attrs:{href:"https://github.com/PX4/px4_msgs",target:"_blank",rel:"noopener noreferrer"}},[n("code",[s._v("px4_msgs")]),n("OutboundLink")],1),s._v("를 자동으로 업데이트합니다.")]),s._v(" "),n("div",{staticClass:"custom-block note"},[n("p",{staticClass:"custom-block-title"},[s._v("ROS")]),s._v(" "),n("p",[s._v("애플리케이션에 액세스할 수 있는 uORB 주제의 하위 집합은 "),n("a",{attrs:{href:"https://github.com/PX4/px4_msgs/tree/master/msg",target:"_blank",rel:"noopener noreferrer"}},[s._v("px4_msgs/msg"),n("OutboundLink")],1),s._v("에 위치합니다.")])]),s._v(" "),n("p",[s._v("PX4 펌웨어에는 빌드 시간 메시지 정의를 기반으로 하는 microRTPS 클라이언트가 포함되어 있습니다. Astute readers will note that since the generated agent might not have been built to that same set of definitions (unless they were both built of the same 'master' commit). 현재 시점에서는 PX4 메시지 세트/정의가 비교적 안정적이기 때문에 문제가 되지 않습니다. 조만간, 특정 PX4 릴리스와 일치하도록 분기될 예정입니다.")]),s._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[s._v("ROS")]),s._v(" "),n("p",[s._v('2에서 "일반" PX4 빌드의 일부로 생성된 에이전트를 사용할 수 없습니다. microRTPS 클라이언트는 동일하지만, ROS 2에서 사용하는 IDL 파일은 일반 DDS에서 사용하는 것과 약간 차이가 납니다. '),n("code",[s._v("px4_msg")]),s._v("를 사용하여 적절한 IDL 파일을 생성합니다.")])]),s._v(" "),n("h2",{attrs:{id:"설치-및-설정"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#설치-및-설정"}},[s._v("#")]),s._v(" 설치 및 설정")]),s._v(" "),n("p",[s._v("PX4에서 ROS 2를 설정하려면 다음이 필요합니다.")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#install-fast-dds"}},[s._v("Fast DDS 설치")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#install-ros-2"}},[s._v("ROS2 설치")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#build-ros-2-workspace"}},[s._v("ROS 2 작업 공간 빌드")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#sanity-check-the-installation"}},[s._v("설치 상태 확인")]),s._v("(선택 사항)")])]),s._v(" "),n("h3",{attrs:{id:"fast-dds-설치"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fast-dds-설치"}},[s._v("#")]),s._v(" Fast DDS 설치")]),s._v(" "),n("p",[n("RouterLink",{attrs:{to:"/ko/dev_setup/fast-dds-installation.html"}},[s._v("Fast DDS 설치 가이드")]),s._v("에 따라 "),n("strong",[s._v("Fast RTPS(DDS) 2.0.0")]),s._v("(이상) 및 "),n("strong",[s._v("Fast-RTPS-Gen 1.0.4")]),s._v("를 설치합니다.")],1),s._v(" "),n("div",{staticClass:"custom-block note"},[n("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),n("p",[s._v("최신 종속성을 확인하려면 가이드를 확인하십시오. 올바른 버전의 "),n("strong",[s._v("Fast RTPS(DDS)")]),s._v(" 및 **Fast-RTPS-Gen이 설치될 때까지, 이 가이드를 계속 진행할 수 없습니다.")])]),s._v(" "),n("h3",{attrs:{id:"ros2-설치"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ros2-설치"}},[s._v("#")]),s._v(" ROS2 설치")]),s._v(" "),n("div",{staticClass:"custom-block note"},[n("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),n("p",[s._v("이 설치 및 빌드 가이드는 Ubuntu 20.04의 ROS 2 Foxy를 기준으로 합니다.")])]),s._v(" "),n("p",[s._v("ROS 2와 해당 종속성을 설치합니다.")]),s._v(" "),n("ol",[n("li",[n("p",[n("a",{attrs:{href:"https://index.ros.org/doc/ros2/Installation/Foxy/Linux-Install-Debians/",target:"_blank",rel:"noopener noreferrer"}},[s._v("ROS 2 Foxy를 설치합니다."),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[s._v("설치 과정에서 "),n("strong",[n("code",[s._v("colcon")])]),s._v(" 빌드 도구도 설치하여야 하지만, 도구를 수동으로 설치할 수 있습니다.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" python3-colcon-common-extensions\n")])])])]),s._v(" "),n("li",[n("p",[s._v("Eigen3는 변환 라이브러리에서 사용되므로 **"),n("code",[s._v("eigen3_cmake_module")]),s._v("**도 필요합니다.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ros-foxy-eigen3-cmake-module\n")])])])]),s._v(" "),n("li",[n("p",[s._v("일부 Python 종속성도 설치하여야 합니다("),n("strong",[n("code",[s._v("pip")])]),s._v(" 또는 "),n("strong",[n("code",[s._v("apt")])]),s._v(" 사용).")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" pip3 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -U empy pyros-genmsg setuptools\n")])])])])]),s._v(" "),n("h3",{attrs:{id:"ros-2-작업-공간-빌드"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ros-2-작업-공간-빌드"}},[s._v("#")]),s._v(" ROS 2 작업 공간 빌드")]),s._v(" "),n("p",[s._v("이 섹션에서는 "),n("em",[s._v("홈 디렉토리")]),s._v("에서 호스팅되는 ROS 2 작업 공간을 만드는 방법을 보여줍니다(필요에 따라 명령을 수정하여 소스 코드를 다른 곳에 배치). "),n("code",[s._v("px4_ros_com")]),s._v(" 및 "),n("code",[s._v("px4_msg")]),s._v(" 패키지가 작업 영역 폴더에 복제한 다음, 스크립트를 사용하여 작업 영역을 빌드합니다.")]),s._v(" "),n("div",{staticClass:"custom-block note"},[n("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),n("p",[s._v("빌드 프로세스는 다른 환경 구성을 소싱하는 빌드 프로세스의 여러 단계에 해당하는 콘솔에서 새 탭을 엽니다.")])]),s._v(" "),n("p",[s._v("작업 공간을 만들고 빌드합니다.")]),s._v(" "),n("ol",[n("li",[s._v("작업 공간 디렉토리를 생성합니다."),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p ~/px4_ros_com_ros2/src\n")])])])]),s._v(" "),n("li",[s._v("ROS 2 브리지 패키지 "),n("code",[s._v("px4_ros_com")]),s._v("와 "),n("code",[s._v("px4_msgs")]),s._v("를 "),n("code",[s._v("/src")]),s._v(" 디렉토리에 복제합니다. "),n("code",[s._v("master")]),s._v(" 분기는 기본적으로 복제됩니다."),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/PX4/px4_ros_com.git ~/px4_ros_com_ros2/src/px4_ros_com\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/PX4/px4_msgs.git ~/px4_ros_com_ros2/src/px4_msgs\n")])])])]),s._v(" "),n("li",[n("code",[s._v("build_ros2_workspace.bash")]),s._v(" 스크립트를 사용하여 ROS 2 작업 공간("),n("code",[s._v("px4_ros_com")]),s._v(" 및 "),n("code",[s._v("px4_msgs")]),s._v(" 포함)을 빌드합니다."),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/px4_ros_com_ros2/src/px4_ros_com/scripts\n$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" build_ros2_workspace.bash\n")])])])])]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("모든 스크립트 옵션은 "),n("code",[s._v("--help")]),s._v(" 인수를 사용하여 출력합니다. 특히 "),n("code",[s._v("--verbose")]),s._v(" 인수는 전체 "),n("em",[s._v("colcon")]),s._v(" 빌드 출력을 보여줍니다.")])]),s._v(" "),n("div",{staticClass:"custom-block note"},[n("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),n("p",[n("code",[s._v("px4_ros_com/scripts")]),s._v(" 디렉토리에는 다양한 종류의 작업 공간을 구축하기 위한 여러 스크립트가 포함되어 있습니다.")])]),s._v(" "),n("h3",{attrs:{id:"설치-상태-확인"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#설치-상태-확인"}},[s._v("#")]),s._v(" 설치 상태 확인")]),s._v(" "),n("p",[s._v("설치 성공 여부를 확인하는 방법은 브리지와 PX4 통신을 테스트하는 것입니다. 시뮬레이터에서 실행되는 PX4에 대하여 브리지를 실행하여 테스트할 수 있습니다.")]),s._v(" "),n("ol",[n("li",[n("p",[n("RouterLink",{attrs:{to:"/ko/dev_setup/dev_env_linux_ubuntu.html"}},[s._v("PX4 Ubuntu Linux 개발 환경 설정")]),s._v(" - 기본 지침은 최신 버전의 PX4 소스를 다운로드하고 도구들을 설치합니다.")],1)]),s._v(" "),n("li",[n("p",[n("strong",[s._v("PX4 Autopilot")]),s._v(" 프로젝트의 루트에서 새 터미널을 열고, PX4 Gazebo 시뮬레이션을 실행합니다.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" px4_sitl_rtps gazebo\n")])])]),n("p",[s._v("PX4가 시작되면, 터미널에 "),n("RouterLink",{attrs:{to:"/ko/debug/system_console.html"}},[s._v("NuttShell/System Console")]),s._v("이 표시됩니다.")],1)]),s._v(" "),n("li",[n("p",[n("em",[s._v("새")]),s._v(" 터미널에서 ROS 2 작업 공간을 "),n("code",[s._v("소싱")]),s._v("한 다음 UDP를 전송 프로토콜로 사용하여 "),n("code",[s._v("micrortps_agent")]),s._v(" 데몬을 시작합니다.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/px4_ros_com_ros2/install/setup.bash\n$ micrortps_agent -t UDP\n")])])])]),s._v(" "),n("li",[n("p",[s._v("원래 터미널(시스템 콘솔)에서 UDP로 "),n("code",[s._v("micrortps_client")]),s._v(" 데몬을 시작합니다.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("pxh"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" micrortps_client start -t UDP\n")])])])]),s._v(" "),n("li",[n("p",[s._v('새 터미널을 열어서, 시작 파일을 사용하여 "수신기"를 시작합니다.')]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/px4_ros_com_ros2/install/setup.bash\n$ ros2 launch px4_ros_com sensor_combined_listener.launch.py\n")])])]),n("p",[s._v("브리지가 올바르게 작동하면, ROS 수신기를 시작한 터미널/콘솔에서 데이터가 인쇄되는 것을 확일할 수 있습니다.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("RECEIVED DATA FROM SENSOR COMBINED\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\nts: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("870938190")]),s._v("\ngyro_rad"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00341645")]),s._v("\ngyro_rad"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00626475")]),s._v("\ngyro_rad"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": -0.000515705\ngyro_integral_dt: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4739")]),s._v("\naccelerometer_timestamp_relative: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\naccelerometer_m_s2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": -0.273381\naccelerometer_m_s2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0949186")]),s._v("\naccelerometer_m_s2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": -9.76044\naccelerometer_integral_dt: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4739")]),s._v("\n")])])])])]),s._v(" "),n("p",[n("code",[s._v("ros2 topic hz")]),s._v("를 사용하여 메시지 속도를 확인할 수 있습니다. 예: "),n("code",[s._v("sensor_combined")]),s._v("의 경우 "),n("code",[s._v("ros2 topic hz /SensorCombined_PubSubTopic")]),s._v(" 사용:")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("average rate: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("248.187")]),s._v("\n min: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".000s max: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".012s std dev: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".00147s window: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2724")]),s._v("\naverage rate: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("248.006")]),s._v("\n min: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".000s max: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".012s std dev: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".00147s window: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2972")]),s._v("\naverage rate: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("247.330")]),s._v("\n min: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".000s max: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".012s std dev: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".00148s window: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3212")]),s._v("\naverage rate: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("247.497")]),s._v("\n min: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".000s max: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".012s std dev: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".00149s window: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3464")]),s._v("\naverage rate: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("247.458")]),s._v("\n min: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".000s max: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".012s std dev: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".00149s window: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3712")]),s._v("\naverage rate: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("247.485")]),s._v("\n min: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".000s max: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".012s std dev: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".00148s window: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3960")]),s._v("\n")])])]),n("h2",{attrs:{id:"ros-2-예제-애플리케이션"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ros-2-예제-애플리케이션"}},[s._v("#")]),s._v(" ROS 2 예제 애플리케이션")]),s._v(" "),n("h3",{attrs:{id:"ros-2-리스너-생성"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ros-2-리스너-생성"}},[s._v("#")]),s._v(" ROS 2 리스너 생성")]),s._v(" "),n("p",[n("code",[s._v("px4_ros_com")]),s._v("이 성공적으로 구축되면 이제 생성된 "),n("em",[s._v("microRTPS")]),s._v(" 에이전트 앱과 "),n("code",[s._v("px4_msgs")]),s._v("에서 생성된 ROS 2 msgs의 소스 및 헤더를 활용할 수 있습니다.")]),s._v(" "),n("p",[s._v("ROS 2에서 리스너 노드를 생성하는 "),n("code",[s._v("px4_ros_com/src/examples/listeners")]),s._v(" 아래의 "),n("code",[s._v("sensor_combined_listener.cpp")]),s._v(" 노드 예를 설명합니다.")]),s._v(" "),n("p",[s._v("코드는 먼저 ROS 2 미들웨어 및 필수 메시지 헤더 파일과 인터페이스하는 데 필요한 C++ 라이브러리를 가져옵니다.")]),s._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token macro property"}},[n("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("<rclcpp/rclcpp.hpp>")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token macro property"}},[n("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("<px4_msgs/msg/sensor_combined.hpp>")])]),s._v("\n")])])]),n("p",[s._v("그런 다음 일반 "),n("code",[s._v("rclcpp::Node")]),s._v(" 기본 클래스의 하위 클래스인 "),n("code",[s._v("SensorCombinedListener")]),s._v(" 클래스를 생성합니다.")]),s._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * @brief Sensor Combined uORB topic data callback\n */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SensorCombinedListener")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token base-clause"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" rclcpp"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n")])])]),n("p",[s._v("이것은 "),n("code",[s._v("sensor_combined")]),s._v(" uORB 메시지가 수신될 때(현재는 RTPS/DDS 메시지로) 콜백 함수를 생성하고 메시지가 수신될 때마다 메시지 필드의 내용을 출력합니다.")]),s._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explicit")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("SensorCombinedListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("Node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sensor_combined_listener"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        subscription_ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),n("span",{pre:!0,attrs:{class:"token generic-function"}},[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("create_subscription")]),n("span",{pre:!0,attrs:{class:"token generic class-name"}},[n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("px4_msgs"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("msg"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("SensorCombined"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")])])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SensorCombined_PubSubTopic"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" px4_msgs"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("msg"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("SensorCombined"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("UniquePtr msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RECEIVED SENSOR COMBINED DATA"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"============================="')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ts: "')]),s._v("          "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("timestamp    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gyro_rad[0]: "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("gyro_rad"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gyro_rad[1]: "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("gyro_rad"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gyro_rad[2]: "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("gyro_rad"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gyro_integral_dt: "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("gyro_integral_dt "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"accelerometer_timestamp_relative: "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("accelerometer_timestamp_relative "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"accelerometer_m_s2[0]: "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("accelerometer_m_s2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"accelerometer_m_s2[1]: "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("accelerometer_m_s2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"accelerometer_m_s2[2]: "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("accelerometer_m_s2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"accelerometer_integral_dt: "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("accelerometer_integral_dt "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),n("p",[s._v("아래 줄은 하나 이상의 호환 가능한 ROS 게시자와 일치시킬 수 있는 "),n("code",[s._v("sensor_combined_topic")]),s._v("에 대한 구독을 만듭니다.")]),s._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    rclcpp"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("Subscription"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("px4_msgs"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("msg"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("SensorCombined"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("SharedPtr subscription_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),n("p",[n("code",[s._v("SensorCombinedListener")]),s._v(" 클래스를 ROS 노드로 인스턴스화하는 작업은 "),n("code",[s._v("main")]),s._v(" 함수에서 수행됩니다.")]),s._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" argc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("argv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Starting sensor_combined listener node..."')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setvbuf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("stdout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" _IONBF"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" BUFSIZ"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    rclcpp"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("argc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" argv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    rclcpp"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("spin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),n("span",{pre:!0,attrs:{class:"token generic-function"}},[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make_shared")]),n("span",{pre:!0,attrs:{class:"token generic class-name"}},[n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("SensorCombinedListener"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")])])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    rclcpp"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),n("h3",{attrs:{id:"ros-2-광고주-만들기"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ros-2-광고주-만들기"}},[s._v("#")]),s._v(" ROS 2 광고주 만들기")]),s._v(" "),n("p",[s._v("ROS 2 광고주 노드는 DDS/RTPS 네트워크(따라서 PX4 Autopilot)에 데이터를 게시합니다.")]),s._v(" "),n("p",[n("code",[s._v("px4_ros_com/src/advertisers")]),s._v(" 아래의 "),n("code",[s._v("debug_vect_advertiser.cpp")]),s._v("를 예로 들면 먼저 "),n("code",[s._v("debug_vect")]),s._v(" msg 헤더를 포함한 필수 헤더를 가져옵니다.")]),s._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token macro property"}},[n("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("<chrono>")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token macro property"}},[n("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("<rclcpp/rclcpp.hpp>")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token macro property"}},[n("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("<px4_msgs/msg/debug_vect.hpp>")])]),s._v("\n")])])]),n("p",[s._v("그런 다음 코드는 일반 "),n("code",[s._v("rclcpp::Node")]),s._v(" 기본 클래스의 하위 클래스인 "),n("code",[s._v("DebugVectAdvertiser")]),s._v(" 클래스를 생성합니다.")]),s._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DebugVectAdvertiser")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token base-clause"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" rclcpp"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n")])])]),n("p",[s._v("아래 코드는 메시지를 전송하는 함수를 만듭니다. 메시지는 타이머를 기반으로 초당 2개의 메시지를 보내는 시간 제한 콜백을 기반으로 전송됩니다.")]),s._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("DebugVectAdvertiser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("Node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"debug_vect_advertiser"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        publisher_ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),n("span",{pre:!0,attrs:{class:"token generic-function"}},[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("create_publisher")]),n("span",{pre:!0,attrs:{class:"token generic class-name"}},[n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("px4_msgs"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("msg"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("DebugVect"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")])])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DebugVect_PubSubTopic"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto")]),s._v(" timer_callback "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto")]),s._v(" debug_vect "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" px4_msgs"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("msg"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("DebugVect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            debug_vect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("timestamp "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("chrono"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),n("span",{pre:!0,attrs:{class:"token generic-function"}},[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("time_point_cast")]),n("span",{pre:!0,attrs:{class:"token generic class-name"}},[n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("chrono"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("microseconds"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")])])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("chrono"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("steady_clock"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("time_since_epoch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("string name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("copy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("begin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" debug_vect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("begin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            debug_vect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            debug_vect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("y "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            debug_vect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("z "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("RCLCPP_INFO")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("get_logger")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\033[97m Publishing debug_vect: time: %llu x: %f y: %f z: %f \\033[0m"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                debug_vect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("timestamp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" debug_vect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" debug_vect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("y"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" debug_vect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("z"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("publisher_"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("publish")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("debug_vect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        timer_ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("create_wall_timer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v("ms"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" timer_callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    rclcpp"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("TimerBase"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("SharedPtr timer_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    rclcpp"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("Publisher"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("px4_msgs"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("msg"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("DebugVect"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("SharedPtr publisher_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),n("p",[n("code",[s._v("DebugVectAdvertiser")]),s._v(" 클래스를 ROS 노드로 인스턴스화하는 작업은 "),n("code",[s._v("main")]),s._v(" 함수에서 수행됩니다.")]),s._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" argc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("argv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Starting debug_vect advertiser node..."')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setvbuf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("stdout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" _IONBF"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" BUFSIZ"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    rclcpp"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("argc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" argv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    rclcpp"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("spin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("std"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),n("span",{pre:!0,attrs:{class:"token generic-function"}},[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make_shared")]),n("span",{pre:!0,attrs:{class:"token generic class-name"}},[n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("DebugVectAdvertiser"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")])])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    rclcpp"),n("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),n("h3",{attrs:{id:"오프보드-제어"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#오프보드-제어"}},[s._v("#")]),s._v(" 오프보드 제어")]),s._v(" "),n("p",[s._v("PX4에서 오프보드 제어를 사용하는 전체 예제는 "),n("RouterLink",{attrs:{to:"/ko/ros/ros2_offboard_control.html"}},[s._v("ROS 2 오프보드 제어 예제")]),s._v("를 참고하십시오.")],1),s._v(" "),n("h2",{attrs:{id:"수동-작업-공간-설정-참고용"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#수동-작업-공간-설정-참고용"}},[s._v("#")]),s._v(" 수동 작업 공간 설정(참고용)")]),s._v(" "),n("div",{staticClass:"custom-block note"},[n("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),n("p",[s._v("이것은 빌드 프로세스를 더 잘 이해하는 목적으로 제공됩니다. It is not needed to build or use ROS 2. 여기에는 "),n("RouterLink",{attrs:{to:"/ko/ros/ros1_via_ros2.html"}},[s._v("ROS(1) via ROS 2 Bridge")]),s._v("에서 사용되는 "),n("code",[s._v("ros1_bridge")]),s._v(" 패키지를 빌드하기 위한 지침이 추가로 포함되어 있습니다.")],1)]),s._v(" "),n("p",[s._v("이 섹션에서는 작업 공간을 "),n("em",[s._v("수동으로")]),s._v(" 설정하고, "),n("code",[s._v("px4_ros_com")]),s._v(", "),n("code",[s._v("px4_msgs")]),s._v(" 및 "),n("code",[s._v("ros1_bridge")]),s._v(" 패키지를 빌드하는 프로세스를 설명합니다. The topic effectively explains the operation of the "),n("code",[s._v("build_ros2_workspace.bash")]),s._v(" script in the "),n("a",{attrs:{href:"#build-ros-2-workspace"}},[s._v("installation instructions")]),s._v(").")]),s._v(" "),n("p",[n("strong",[s._v("ROS 2 작업 공간만 구축합니다.")])]),s._v(" "),n("ol",[n("li",[n("p",[n("code",[s._v("cd")]),s._v("를 "),n("code",[s._v("px4_ros_com_ros2")]),s._v(" 디렉토리에 넣고 ROS 2 환경을 소싱합니다. 이전 작업 공간이 이전에 설정되었다는 메시지가 표시되더라도 신경 쓰지 마십시오.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/px4_ros_com_ros2\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /opt/ros/foxy/setup.bash\n")])])])]),s._v(" "),n("li",[n("p",[s._v("작업 공간을 빌드합니다.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("colcon build --symlink-install --event-handlers console_direct+\n")])])])])]),s._v(" "),n("p",[s._v("ROS 2 및 ROS(1) 작업 공간을 모두 빌드합니다(이전 단계 대체).")]),s._v(" "),n("ol",[n("li",[n("p",[n("code",[s._v("cd")]),s._v("를 "),n("code",[s._v("px4_ros_com_ros2")]),s._v(" 디렉토리에 넣고 ROS 2 환경을 소싱합니다. 이전 작업 공간이 이전에 설정되었다는 메시지가 표시되더라도 신경 쓰지 마십시오.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /opt/ros/foxy/setup.bash\n")])])])]),s._v(" "),n("li",[n("p",[s._v("ROS 2 작업 영역에 빌드할 수 있도록 "),n("code",[s._v("ros1_bridge")]),s._v(" 패키지를 복제합니다.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/ros2/ros1_bridge.git -b dashing ~/px4_ros_com_ros2/src/ros1_bridge\n")])])])]),s._v(" "),n("li",[n("p",[n("code",[s._v("ros1_bridge")]),s._v(" 패키지를 제외하고, "),n("code",[s._v("px4_ros_com")]),s._v("와 "),n("code",[s._v("px4_msgs")]),s._v(" 패키지를 빌드합니다.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("colcon build --symlink-install --packages-skip ros1_bridge --event-handlers console_direct+\n")])])])])]),s._v(" "),n("div",{staticClass:"custom-block note"},[n("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),n("p",[n("code",[s._v("--event-handlers console_direct+")]),s._v("는 "),n("code",[s._v("colcon")]),s._v(' 빌드 프로세스에 자세한 정보를 추가할 목적으로만 제공되며, 더 "조용한" 빌드를 원하는 경우 제거할 수 있습니다.')])]),s._v(" "),n("ol",[n("li",[n("p",[s._v("그런 다음 ROS(1) 패키지를 빌드합니다. 먼저 "),n("strong",[s._v("새")]),s._v(" 터미널 창을 열고, 시스템에 설치된 ROS(1) 환경을 소싱합니다.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /opt/ros/melodic/setup.bash\n")])])])]),s._v(" "),n("li",[n("p",[s._v("ROS 쪽에서 "),n("code",[s._v("px4_ros_com")]),s._v("와 "),n("code",[s._v("px4_msgs")]),s._v(" 패키지를 빌드합니다(이전 단계에서 연 터미널 사용).")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/px4_ros_com_ros1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" colcon build --symlink-install --event-handlers console_direct+\n")])])])]),s._v(" "),n("li",[n("p",[s._v("다른 새 터미널을 열고, 아래 나열된 순서대로 환경과 작업 공간을 소싱합니다.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/px4_ros_com_ros1/install/setup.bash\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/px4_ros_com_ros2/install/setup.bash\n")])])])]),s._v(" "),n("li",[n("p",[s._v("마지막으로 "),n("code",[s._v("ros1_bridge")]),s._v("를 빌드합니다.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/px4_ros_com_ros2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" colcon build --symlink-install --packages-select ros1_bridge --cmake-force-configure --event-handlers console_direct+\n")])])])])]),s._v(" "),n("div",{staticClass:"custom-block note"},[n("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),n("p",[s._v("빌드 프로세스는 많은 메모리 리소스를 소비할 수 있습니다. 리소스가 제한된 시스템에서 병렬로 처리되는 작업의 수를 줄이십시오(예: 환경 변수 "),n("code",[s._v("MAKEFLAGS=-j1")]),s._v(" 설정). 빌드 프로세스에 대한 자세한 내용은 "),n("a",{attrs:{href:"https://github.com/ros2/ros1_bridge",target:"_blank",rel:"noopener noreferrer"}},[s._v("ros1_bridge"),n("OutboundLink")],1),s._v(" 패키지 페이지의 빌드 지침을 참고하십시오.")])]),s._v(" "),n("h3",{attrs:{id:"작업-공간-청소"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#작업-공간-청소"}},[s._v("#")]),s._v(" 작업 공간 청소")]),s._v(" "),n("p",[s._v("작업 공간을 빌드 후, 신규 빌드를 수행하기 전에 삭제하여야 하는 파일들이 많이 있습니다(예: 일부 코드를 변경하고 다시 빌드하려는 경우).")]),s._v(" "),n("p",[s._v("불행히도 "),n("em",[s._v("colcon")]),s._v("에는 현재 생성된 "),n("strong",[s._v("build")]),s._v(", "),n("strong",[s._v("install")]),s._v(" 및 "),n("strong",[s._v("log")]),s._v(" 디렉토리를 정리하는 방법이 없으므로, 이러한 디렉토리는 수동으로 삭제하여야 합니다.")]),s._v(" "),n("p",[n("strong",[s._v("clean_all.bash")]),s._v(" 스크립트("),n("strong",[s._v("px4_ros_com/scripts")]),s._v("에 있음)는 이 정리 프로세스를 쉽게 하기 위해 제공되며, 이 스크립트는 위에 나열된 모든 작업 공간 옵션 (ROS 2, ROS 1 및 둘 다)을 정리할 수 있습니다.")]),s._v(" "),n("p",[s._v("이를 사용하는 가장 일반적인 방법은 ROS(1) 작업 공간 디렉토리 경로를 전달하는 것입니다(일반적으로 기본 경로에 없기 때문에).")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" clean_all.bash --ros1_ws_dir "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path/to/px4_ros_com_ros1/ws"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("빌드 스크립트와 마찬가지로 "),n("code",[s._v("clean_all.bash")]),s._v(" 스크립트에도 "),n("code",[s._v("--help")]),s._v(" 가이드가 있습니다.")])]),s._v(" "),n("h2",{attrs:{id:"추가-정보"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#추가-정보"}},[s._v("#")]),s._v(" 추가 정보")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/ros2/ros2/wiki/DDS-and-ROS-middleware-implementations",target:"_blank",rel:"noopener noreferrer"}},[s._v("DDS와 ROS 미들웨어 구현"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);