import{_ as a,c as r,a8 as t,o}from"./chunks/framework.BDnHobkS.js";const f=JSON.parse('{"title":"Serial Port Configuration","description":"","frontmatter":{},"headers":[],"relativePath":"en/peripherals/serial_configuration.md","filePath":"en/peripherals/serial_configuration.md"}'),i={name:"en/peripherals/serial_configuration.md"};function n(l,e,s,c,p,d){return o(),r("div",null,e[0]||(e[0]=[t('<h1 id="serial-port-configuration" tabindex="-1">Serial Port Configuration <a class="header-anchor" href="#serial-port-configuration" aria-label="Permalink to &quot;Serial Port Configuration&quot;">​</a></h1><p>PX4 defines <a href="#default-serial-port-configuration">default functions</a> for many flight controller ports, which is why you can plug a GPS module into the port labelled <code>GPS 1</code>, an RC receiver into <code>RC IN</code>, or a telemetry module into <code>TELEM 1</code>, and generally they will just work.</p><p>The functions assigned to ports are fully configurable using appropriate parameters (in most cases). You can assign any unused port to any function, or reassign a port to use it for something else.</p><p>The configuration makes it easy to (for example):</p><ul><li>Run MAVLink on a different port, change the streamed messages, or switch a TELEM port to use ROS 2/XRCE-DDS.</li><li>Change the baud rate on a port or set the UDP port</li><li>Setup dual GPS.</li><li>Enable sensors that run on a serial port, such as some <a href="./../sensor/rangefinders.html">distance sensors</a>.</li></ul><div class="info custom-block"><p class="custom-block-title">INFO</p><ul><li>Some ports cannot be configured because they are used for a very specific purpose such as the system console.</li><li>The mapping of specific devices to port names on the flight controller is explained in <a href="./../hardware/serial_port_mapping.html">Serial Port Mapping</a>.</li></ul></div><h2 id="configuration-parameters" tabindex="-1">Configuration Parameters <a class="header-anchor" href="#configuration-parameters" aria-label="Permalink to &quot;Configuration Parameters&quot;">​</a></h2><p>The serial port configuration parameters allow you to assign a particular function or support for particular hardware to a particular port. These parameters follow the naming pattern <code>*_CONFIG</code> or <code>*_CFG</code></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p><em>QGroundControl</em> only displays the parameters for services/drivers that are present in firmware.</p></div><p>At time of writing the current set is:</p><ul><li>GNSS configuration: <ul><li>GPS Module: <a href="./../advanced_config/parameter_reference.html#GPS_1_CONFIG">GPS_1_CONFIG</a>, <a href="./../advanced_config/parameter_reference.html#GPS_2_CONFIG">GPS_2_CONFIG</a> (for most GPS/GNSS systems)</li><li><a href="./../gps_compass/septentrio.html">Septentrio GNSS Modules</a>: <a href="./../advanced_config/parameter_reference.html#SEP_PORT1_CFG">SEP_PORT1_CFG</a>, <a href="./../advanced_config/parameter_reference.html#SEP_PORT2_CFG">SEP_PORT2_CFG</a></li></ul></li><li><a href="./../advanced_features/satcom_roadblock.html">Iridium Satellite radio</a>: <a href="./../advanced_config/parameter_reference.html#ISBD_CONFIG">ISBD_CONFIG</a></li><li><a href="./../peripherals/mavlink_peripherals.html">MAVLink Ports</a>: <a href="./../advanced_config/parameter_reference.html#MAV_0_CONFIG">MAV_0_CONFIG</a>, <a href="./../advanced_config/parameter_reference.html#MAV_1_CONFIG">MAV_1_CONFIG</a>, <a href="./../advanced_config/parameter_reference.html#MAV_2_CONFIG">MAV_2_CONFIG</a></li><li>VOXL ESC: <a href="./../advanced_config/parameter_reference.html#VOXL_ESC_CONFIG">VOXL_ESC_CONFIG</a></li><li>MSP OSD: <a href="./../advanced_config/parameter_reference.html#MSP_OSD_CONFIG">MSP_OSD_CONFIG</a></li><li>RC Port: <a href="./../advanced_config/parameter_reference.html#RC_PORT_CONFIG">RC_PORT_CONFIG</a></li><li><a href="./../peripherals/frsky_telemetry.html">FrSky Telemetry</a>: <a href="./../advanced_config/parameter_reference.html#TEL_FRSKY_CONFIG">TEL_FRSKY_CONFIG</a></li><li>HoTT Telemetry: <a href="./../advanced_config/parameter_reference.html#TEL_HOTT_CONFIG">TEL_HOTT_CONFIG</a></li><li><a href="./../middleware/uxrce_dds.html">uXRCE-DDS</a> port: <a href="./../advanced_config/parameter_reference.html#UXRCE_DDS_CFG">UXRCE_DDS_CFG</a>,</li><li>Sensors (optical flow, distance sensors): <a href="./../advanced_config/parameter_reference.html#SENS_CM8JL65_CFG">SENS_CM8JL65_CFG</a>, <a href="./../advanced_config/parameter_reference.html#SENS_LEDDAR1_CFG">SENS_LEDDAR1_CFG</a>, <a href="./../advanced_config/parameter_reference.html#SENS_SF0X_CFG">SENS_SF0X_CFG</a>, <a href="./../advanced_config/parameter_reference.html#SENS_TFLOW_CFG">SENS_TFLOW_CFG</a>, <a href="./../advanced_config/parameter_reference.html#SENS_TFMINI_CFG">SENS_TFMINI_CFG</a>, <a href="./../advanced_config/parameter_reference.html#SENS_ULAND_CFG">SENS_ULAND_CFG</a>, <a href="./../advanced_config/parameter_reference.html#SENS_VN_CFG">SENS_VN_CFG</a>,</li><li>CRSF RC Input Driver: <a href="./../advanced_config/parameter_reference.html#RC_CRSF_PRT_CFG">RC_CRSF_PRT_CFG</a></li><li>Sagetech MXS: <a href="./../advanced_config/parameter_reference.html#MXS_SER_CFG">MXS_SER_CFG</a></li><li>Ultrawideband position sensor: <a href="./../advanced_config/parameter_reference.html#UWB_PORT_CFG">UWB_PORT_CFG</a></li><li>DShot driver: <a href="./../advanced_config/parameter_reference.html#DSHOT_TEL_CFG">DSHOT_TEL_CFG</a></li></ul><p>Some functions/features may define additional configuration parameters, which will follow a similar naming pattern to the port configuration prefix. For example, <code>MAV_0_CONFIG</code> enables MAVLink on a particular port, but you may also need to set <a href="./../advanced_config/parameter_reference.html#MAV_0_FLOW_CTRL">MAV_0_FLOW_CTRL</a>, <a href="./../advanced_config/parameter_reference.html#MAV_0_FLOW_CTRL">MAV_0_FORWARD</a>, <a href="./../advanced_config/parameter_reference.html#MAV_0_MODE">MAV_0_MODE</a> and so on.</p><h2 id="how-to-configure-a-port" tabindex="-1">How to Configure a Port <a class="header-anchor" href="#how-to-configure-a-port" aria-label="Permalink to &quot;How to Configure a Port&quot;">​</a></h2><p>All the serial drivers/ports are configured in the same way:</p><ol><li>Set the configuration parameter for the service/peripheral to the port it will use.</li><li>Reboot the vehicle in order to make the additional configuration parameters visible.</li><li>Set the baud rate parameter for the selected port to the desired value (e.g. <a href="./../advanced_config/parameter_reference.html#SER_GPS1_BAUD">SER_GPS1_BAUD</a>)</li><li>Configure module-specific parameters (i.e. MAVLink streams and data rate configuration).</li></ol><p>The <a href="./../gps_compass/#dual_gps">GPS/Compass &gt; Secondary GPS</a> section provides a practical example of how to configure a port in <em>QGroundControl</em> (it shows how to use <code>GPS_2_CONFIG</code> to run a secondary GPS on the <code>TELEM 2</code> port).</p><p>Similarly <a href="./../advanced_config/ethernet_setup.html#px4-mavlink-serial-port-configuration">PX4 Ethernet Setup &gt; PX4 MAVLink Serial Port Configuration</a> explains the setup for Ethernet serial ports, and <a href="./../peripherals/mavlink_peripherals.html">MAVLink Peripherals (OSD/GCS/Companion Computers/etc.)</a> explains the configuration for MAVLink serial ports.</p><h2 id="deconflicting-ports" tabindex="-1">Deconflicting Ports <a class="header-anchor" href="#deconflicting-ports" aria-label="Permalink to &quot;Deconflicting Ports&quot;">​</a></h2><p>Port conflicts are handled by system startup, which ensures that at most one service is run on a specific port. For example, it is not possible to start a MAVLink instance on a specific serial device, and then launch a driver that uses the same serial device.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>At time of writing there is no user feedback about conflicting ports.</p></div><p><a id="default_port_mapping"></a></p><h2 id="default-serial-port-configuration" tabindex="-1">Default Serial Port Configuration <a class="header-anchor" href="#default-serial-port-configuration" aria-label="Permalink to &quot;Default Serial Port Configuration&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>These port mappings can be disabled by setting the associated configuration parameter to <em>Disabled</em>.</p></div><p>The following ports are commonly mapped to specific functions on all boards:</p><ul><li><p><code>GPS 1</code> is configured as a GPS port (using <a href="./../advanced_config/parameter_reference.html#GPS_1_CONFIG">GPS_1_CONFIG</a>).</p><p>The default baud rate is set in the <a href="./../modules/modules_driver.html#gps">gps driver</a> by the value of <a href="./../advanced_config/parameter_reference.html#SER_GPS1_BAUD">SER_GPS1_BAUD</a>, which has a default rate of <em>Auto</em>. With this setting a GPS will automatically detect the baudrate — except for the Trimble MB-Two, which you will need to explicitly set to 115200 baud rate.</p></li><li><p><code>RC IN</code> is configured as an RC input (using <a href="./../advanced_config/parameter_reference.html#RC_PORT_CONFIG">RC_PORT_CONFIG</a>).</p></li><li><p><code>TELEM 1</code> is configured as a MAVLink serial port suitable for connection to a GCS via a <a href="./../telemetry/">telemetry module</a>.</p><p>The configuration uses <a href="./../advanced_config/parameter_reference.html#MAV_0_CONFIG">MAV_0_CONFIG</a> to set the port, <a href="./../advanced_config/parameter_reference.html#MAV_0_RATE">MAV_0_RATE</a> to set the baud rate to 57600, and <a href="./../advanced_config/parameter_reference.html#MAV_1_MODE">MAV_0_MODE</a> to set the messages streamed to &quot;Normal&quot;. For more information see: <a href="./../peripherals/mavlink_peripherals.html">MAVLink Peripherals (OSD/GCS/Companion Computers/etc.)</a>.</p></li><li><p><code>TELEM 2</code> is configured by default as a MAVLink serial port suitable for connection to an Onboard/Companion computer via a wired connection.</p><p>The configuration uses <a href="./../advanced_config/parameter_reference.html#MAV_1_CONFIG">MAV_1_CONFIG</a> to set the port, <a href="./../advanced_config/parameter_reference.html#MAV_1_RATE">MAV_1_RATE</a> to set the baud rate, and <a href="./../advanced_config/parameter_reference.html#MAV_2_MODE">MAV_1_MODE</a> to set the messages streamed to &quot;Onboard&quot;. For more information see: <a href="./../peripherals/mavlink_peripherals.html">MAVLink Peripherals (OSD/GCS/Companion Computers/etc.)</a>.</p></li><li><p><code>Ethernet</code> is mapped as a MAVLink port on Pixhawk devices that have an Ethernet port.</p><p>The configuration uses <a href="./../advanced_config/parameter_reference.html#MAV_2_CONFIG">MAV_2_CONFIG</a> and appropriate settings for the UDP port etc. For more information see <a href="./../advanced_config/ethernet_setup.html#px4-mavlink-serial-port-configuration">PX4 Ethernet Setup &gt; PX4 MAVLink Serial Port Configuration</a> and <a href="./../peripherals/mavlink_peripherals.html">MAVLink Peripherals (OSD/GCS/Companion Computers/etc.)</a>.</p></li><li><p><code>USB-C</code> (the USB-C port normally used for connecting to QGroundControl)</p><p>This is configured by default as a MAVLink port the onboard profile (for companion computers). The configuration for MAVLink is unique to this port (it doesn&#39;t use the <code>MAV_X_CONFIG</code> parameters).</p><ul><li><a href="./../advanced_config/parameter_reference.html#SYS_USB_AUTO">SYS_USB_AUTO</a> sets whether the port is set to no partiular protocol, autodetects the protocol, or sets the comms link to MAVLink.</li><li><a href="./../advanced_config/parameter_reference.html#USB_MAV_MODE">USB_MAV_MODE</a> sets the MAVLink profile that is used if MAVLink is set or detected.</li></ul></li></ul><p>Other ports generally have no assigned functions by default (are disabled).</p><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><p><a id="parameter_not_in_firmware"></a></p><h3 id="configuration-parameter-missing-from-qgroundcontrol" tabindex="-1">Configuration Parameter Missing from <em>QGroundControl</em> <a class="header-anchor" href="#configuration-parameter-missing-from-qgroundcontrol" aria-label="Permalink to &quot;Configuration Parameter Missing from _QGroundControl_&quot;">​</a></h3><p><em>QGroundControl</em> only displays the parameters for services/drivers that are present in firmware. If a parameter is missing, then you may need to add it in firmware.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>PX4 firmware includes most drivers by default on <a href="./../flight_controller/pixhawk_series.html">Pixhawk-series</a> boards. Flash-limited boards may comment out/omit the driver (at time of writing this only affects boards based on FMUv2).</p></div><p>You can include the missing driver in firmware by enabling the driver in the <strong>default.px4board</strong> config file that corresponds to the <a href="https://github.com/PX4/PX4-Autopilot/tree/main/boards/px4" target="_blank" rel="noreferrer">board</a> you want to build for. For example, to enable the SRF02 driver, you would a the following line to the px4board.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>CONFIG_DRIVERS_DISTANCE_SENSOR_SRF02=y</span></span></code></pre></div><p>An easier method would be using boardconfig which launches a GUI where you can easily search, disable and enable modules. To launch boardconfig type:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>make &lt;vendor&gt;_&lt;board&gt;_&lt;label&gt; boardconfig</span></span></code></pre></div><p>You will then need to build the firmware for your platform, as described in <a href="./../dev_setup/building_px4.html">Building PX4 Software</a>.</p><h2 id="further-information" tabindex="-1">Further Information <a class="header-anchor" href="#further-information" aria-label="Permalink to &quot;Further Information&quot;">​</a></h2><ul><li><a href="./../peripherals/mavlink_peripherals.html">MAVLink Peripherals (OSD/GCS/Companion Computers/etc.)</a></li><li><a href="./../advanced_config/ethernet_setup.html#px4-mavlink-serial-port-configuration">PX4 Ethernet Setup &gt; PX4 MAVLink Serial Port Configuration</a></li><li><a href="./../hardware/serial_port_mapping.html">Serial Port Mapping</a></li></ul>',38)]))}const _=a(i,[["render",n]]);export{f as __pageData,_ as default};
