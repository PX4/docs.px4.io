import{_ as t,a as s}from"./chunks/mechanical.CPUwi17f.js";import{_ as a,c as i,a8 as n,o as r}from"./chunks/framework.BDnHobkS.js";const k=JSON.parse('{"title":"Pomegranate Systems Power Module","description":"","frontmatter":{},"headers":[],"relativePath":"zh/dronecan/pomegranate_systems_pm.md","filePath":"zh/dronecan/pomegranate_systems_pm.md"}'),o={name:"zh/dronecan/pomegranate_systems_pm.md"};function l(p,e,h,c,d,g){return r(),i("div",null,e[0]||(e[0]=[n('<h1 id="pomegranate-systems-power-module" tabindex="-1">Pomegranate Systems Power Module <a class="header-anchor" href="#pomegranate-systems-power-module" aria-label="Permalink to &quot;Pomegranate Systems Power Module&quot;">​</a></h1><div class="info custom-block"><p class="custom-block-title">INFO</p><p>In 2022, UAVCAN (v0) was forked and is maintained as <code>DroneCAN</code>. While this product still mentions &quot;UAVCAN&quot;, it is fully compatible with PX4&#39;s DroneCAN support.</p></div><p><img src="'+t+'" alt="Module Image"></p><p>Digital Power Module with high resolution current integration, 5V/2A supply with power monitoring, single DroneCAN CANbus interface, and an RGB status LED.</p><p>Detailed setup, configuration, and troubleshooting information can be found on the <a href="https://p-systems.io/product/power_module" target="_blank" rel="noreferrer">manufacturer&#39;s device home page</a>.</p><h2 id="hardware-specifications" tabindex="-1">Hardware Specifications <a class="header-anchor" href="#hardware-specifications" aria-label="Permalink to &quot;Hardware Specifications&quot;">​</a></h2><ul><li><strong>Input Voltage:</strong> 6-26V (2-6S)</li><li><strong>Max Continuous Current:</strong><ul><li><strong>Benchtop:</strong> 40A</li><li><strong>Forced Cooling:</strong> 100A</li></ul></li><li><strong>Max 5V Output Current:</strong> 2A</li><li><strong>Voltage Resolution:</strong> 0.04 ΔV</li><li><strong>Current Resolution:</strong><ul><li><strong>Primary / Battery Bus:</strong> 0.02 ΔA</li><li><strong>5V bus:</strong> 0.001 ΔA</li></ul></li><li><strong>CANbus Termination:</strong> Electronic (on by default)</li><li><strong>MCU:</strong> STM32F302K8U</li><li><strong>Electrical Interface:</strong><ul><li><strong>Power:</strong> Solder pads or XT60PW (right angle, board-mounted connectors)</li><li><strong>CANbus</strong> Dual JST GH-4 (standard UAVCAN micro-connector)</li><li><strong>I2C / Serial:</strong> JST GH-5</li><li><strong>5V Output:</strong> Solder pads or CANbus / I2C connectors</li></ul></li><li><strong>Device Mass:</strong><ul><li><strong>Without Connectors:</strong> 9g</li><li><strong>With XT60PW Connectors:</strong> 16g</li></ul></li></ul><p><img src="'+s+`" alt="Dimensions"></p><h2 id="firmware-setup" tabindex="-1">Firmware Setup <a class="header-anchor" href="#firmware-setup" aria-label="Permalink to &quot;Firmware Setup&quot;">​</a></h2><p>The power module runs pomegranate systems&#39; own custom (open source) firmware. Source code and build instructions can be found on <a href="https://bitbucket.org/p-systems/firmware/src/master" target="_blank" rel="noreferrer">the bitbucket</a>.</p><h2 id="flight-controller-setup" tabindex="-1">Flight Controller Setup <a class="header-anchor" href="#flight-controller-setup" aria-label="Permalink to &quot;Flight Controller Setup&quot;">​</a></h2><ol><li>Enable DroneCAN by setting the <a href="./../advanced_config/parameter_reference.html#UAVCAN_ENABLE">UAVCAN_ENABLE</a> parameter to <code>2</code> (Sensors Automatic Config) or <code>3</code>.</li><li>Enable DroneCAN battery monitoring by setting <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_BAT">UAVCAN_SUB_BAT</a> to <code>1</code> or <code>2</code> ( depending on your battery).</li><li>Set the following module parameters using the <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/analyze_view/mavlink_console.html" target="_blank" rel="noreferrer">MAVLink console</a>: <ul><li>Battery capacity in mAh: <code>battery_capacity_mAh</code></li><li>Battery voltage when <em>full</em>: <code>battery_full_V</code>,</li><li>Battery voltage when <em>empty</em>: <code>battery_empty_V</code></li><li>Turn on current integration: <code>enable_current_track</code></li><li>(optional) Turn Off CANbus termination resistor :<code>enable_can_term</code></li></ul></li></ol><p><strong>Example:</strong> A Power Module with UAVCAN node id <code>125</code> connected to a <code>3S</code> LiPo with capacity of <code>5000mAh</code> can be configured with the following commands:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uavcan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> param</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 125</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> battery_capacity_mAh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uavcan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> param</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 125</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> battery_full_V</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12.5</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uavcan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> param</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 125</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> battery_empty_V</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 11.2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uavcan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> param</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 125</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable_current_track</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uavcan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> param</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> save</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 125</span></span></code></pre></div><p>See <a href="https://p-systems.io/product/power_module/configuration" target="_blank" rel="noreferrer">device configuration page</a> for a full list of parameters.</p>`,15)]))}const F=a(o,[["render",l]]);export{k as __pageData,F as default};
