import{_ as i,c as a,a8 as n,o as t}from"./chunks/framework.BDnHobkS.js";const o=JSON.parse('{"title":"RTK GPS (PX4 інтеграція)","description":"","frontmatter":{},"headers":[],"relativePath":"uk/advanced/rtk_gps.md","filePath":"uk/advanced/rtk_gps.md"}'),l={name:"uk/advanced/rtk_gps.md"};function p(e,s,k,h,r,d){return t(),a("div",null,s[0]||(s[0]=[n(`<h1 id="rtk-gps-px4-інтеграція" tabindex="-1">RTK GPS (PX4 інтеграція) <a class="header-anchor" href="#rtk-gps-px4-інтеграція" aria-label="Permalink to &quot;RTK GPS (PX4 інтеграція)&quot;">​</a></h1><p><a href="https://en.wikipedia.org/wiki/Real_Time_Kinematic" target="_blank" rel="noreferrer">Реальний кінематичний час</a> (RTK) забезпечує точність GPS на рівні сантиметрів. Ця сторінка пояснює, як RTK інтегрується в PX4.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Інструкції щодо <em>використання</em> RTK GPS наведені в розділі <a href="./../gps_compass/rtk_gps.html">Периферійне обладнання &gt; RTK GPS</a>.</p></div><h2 id="загальнии-огляд" tabindex="-1">Загальний огляд <a class="header-anchor" href="#загальнии-огляд" aria-label="Permalink to &quot;Загальний огляд&quot;">​</a></h2><p>RTK використовує виміри фази несучої хвилі сигналу, а не інформаційний вміст сигналу. Він покладається на одну вихідну станцію для надання корекцій у реальному часі, які можуть працювати з кількома мобільними станціями.</p><p>Для налаштування RTK з PX4 потрібні два модулі RTK GPS та даталінк. Закріплена на землі GPS-одиниця називається Базою, а повітряна одиниця - Ровером_. Базова одиниця підключається до <em>QGroundControl</em> (через USB) та використовує даталінк для передачі поправок RTCM до транспортного засобу (за допомогою повідомлення MAVLink <a href="https://mavlink.io/en/messages/common.html#GPS_RTCM_DATA" target="_blank" rel="noreferrer">GPS_RTCM_DATA</a>). На автопілоті пакети MAVLink розпаковуються та надсилаються до пристрою Rover, де вони обробляються для отримання рішення RTK. На автопілоті пакети MAVLink розпаковуються та надсилаються до пристрою Rover, де вони обробляються для отримання рішення RTK.</p><p>Канал передачі даних зазвичай має підтримувати швидкість висхідної лінії зв’язку 300 байт на секунду (додаткову інформацію див. у розділі <a href="#uplink-datarate">Швидкість передачі даних у висхідній лінії зв’язку</a>).</p><h2 id="підтримувані-gps-модулі-rtk" tabindex="-1">Підтримувані GPS-модулі RTK <a class="header-anchor" href="#підтримувані-gps-модулі-rtk" aria-label="Permalink to &quot;Підтримувані GPS-модулі RTK&quot;">​</a></h2><p>Список пристроїв, які ми тестували, можна знайти <a href="./../gps_compass/rtk_gps.html#supported-rtk-devices">в посібнику користувача</a>.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Більшість пристроїв поставляється з двома варіантами: базою та ровером. Переконайтеся, що ви обрали правильний варіант.</p></div><h2 id="автоматична-конфігурація" tabindex="-1">Автоматична конфігурація <a class="header-anchor" href="#автоматична-конфігурація" aria-label="Permalink to &quot;Автоматична конфігурація&quot;">​</a></h2><p>Стек GPS PX4 автоматично налаштовує модулі GPS для надсилання та отримання правильних повідомлень через UART або USB в залежності від того, куди підключений модуль (до QGroundControl або автопілота).</p><p>Як тільки автопілот отримує повідомлення MAVLink <code>GPS_RTCM_DATA</code>, він автоматично пересилає дані RTCM до приєднаного модуля GPS через існуючі канали передачі даних (для даних корекції не потрібен окремий канал).</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Інструмент конфігурації модуля RTK U-Center від u-blox не потрібний/не використовується!</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Як <em>QGroundControl</em>, так і прошивка автопілота використовують один і той же стек драйверів GPS PX4 <a href="https://github.com/PX4/GpsDrivers" target="_blank" rel="noreferrer">(PX4 GPS driver stack)</a>. На практиці це означає, що підтримку нових протоколів і/або повідомлень потрібно додавати лише в одному місці.</p></div><h3 id="rtcm-повідомлення" tabindex="-1">RTCM повідомлення <a class="header-anchor" href="#rtcm-повідомлення" aria-label="Permalink to &quot;RTCM повідомлення&quot;">​</a></h3><p>QGroundControl налаштовує базову станцію RTK на вивід наступних рамок RTCM3.2, кожну з частотою 1 Гц, якщо не вказано інше:</p><ul><li>**1005 - Координати станції XYZ для точки антени (Базова позиція), 0.2 Гц.</li><li>**1077 - Повні псевдодальності GPS, фази несучої, Доплер та сила сигналу (висока роздільна здатність).</li><li>**1087 - Повні псевдодальності ГЛОНАСС, фази несущої, Доплер і сила сигналу (висока роздільна здатність).</li><li><strong>1230</strong> - Зміщення фаз коду ГЛОНАСС.</li><li>Повні псевдодальності GLONASS, фази несущої, Доплер і сила сигналу (висока роздільна здатність)</li><li><strong>1127</strong> - Повні псевдодальності BeiDou, фази несущої, Доплер і сила сигналу (висока роздільна здатність)</li></ul><h2 id="uplink-datarate-швидкість-передачі-даних-вгору" tabindex="-1">Uplink datarate(Швидкість передачі даних вгору) <a class="header-anchor" href="#uplink-datarate-швидкість-передачі-даних-вгору" aria-label="Permalink to &quot;Uplink datarate(Швидкість передачі даних вгору)&quot;">​</a></h2><p>The raw RTCM messages from the base are packed into a MAVLink <code>GPS_RTCM_DATA</code> message and sent over the datalink. Максимальна довжина кожного повідомлення MAVLink становить 182 байти. Залежно від RTCM-повідомлення, повідомлення MAVLink майже ніколи не заповнюється повністю.</p><p>Повідомлення про базову позицію RTCM (1005) має довжину 22 байти, тоді як інші всі мають змінну довжину, залежно від кількості видимих супутників та кількості сигналів від супутника (лише 1 для однодіапазонних пристроїв, наприклад, M8P). Оскільки в будь-який момент часу <em>максимальна</em> кількість видимих супутників з будь-якої констеляції становить 12, то за реальних умов теоретично достатньо максимальної швидкості передачі даних в 300 байт/с.</p><p>Якщо використовується <em>MAVLink 1</em>, для кожного повідомлення RTCM, незалежно від його довжини, надсилається повідомлення <code>GPS_RTCM_DATA</code> розміром 182 байти. Внаслідок цього приблизна вимога до пропускної здатності каналу зв&#39;язку складає близько 700 байт на секунду. Це може призвести до насичення каналу зв&#39;язку на модулях телеметрії з низькою пропускною здатністю напівдуплексного режиму (наприклад, телеметричні радіозв&#39;язки 3DR).</p><p>Якщо використовується <em>MAVLink 2</em>, будь-який порожній простір у повідомленні <code>GPS_RTCM_DATA</code> видаляється. Отримана вимога до пропускної здатності для передачі вгору становить приблизно ту ж величину, що і теоретичне значення (близько 300 байт на секунду).</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>PX4 автоматично переключається на MAVLink 2, якщо контрольна станція та модулі телеметрії підтримують це.</p></div><p>MAVLink 2 слід використовувати на каналах з низькою пропускною здатністю для хорошої продуктивності RTK. Необхідно вдбати про те, щоб впевнитися, що ланцюжок телеметрії використовує MAVLink 2 на всіх етапах передачі даних. Ви можете перевірити версію протоколу, використовуючи команду <code>mavlink status</code> у системній консолі:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nsh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mavlink</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">instance</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #0:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        GCS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> heartbeat:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  593486</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> us</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        mavlink</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chan:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #0</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           3DR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RADIO</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        rssi:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           219</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rssi:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    219</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        txbuf:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          94</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        noise:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          61</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> noise:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   58</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        rx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> errors:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        fixed:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        flow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> control:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   ON</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        rates:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        tx:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.285</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB/s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        txerr:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.000</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB/s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        rx:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.021</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB/s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        rate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mult:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.366</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        accepting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commands:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> YES</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        MAVLink</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        transport</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> serial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (/dev/ttyS1 </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@57600</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div>`,26)]))}const c=i(l,[["render",p]]);export{o as __pageData,c as default};
