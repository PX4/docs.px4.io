import{_ as t,a as e,b as i}from"./chunks/smart-battery-rotoye-connection.CEJwJbQ6.js";import{_ as s,c as o,a8 as r,o as n}from"./chunks/framework.BDnHobkS.js";const g=JSON.parse('{"title":"Rotoye Batmon","description":"","frontmatter":{},"headers":[],"relativePath":"en/smart_batteries/rotoye_batmon.md","filePath":"en/smart_batteries/rotoye_batmon.md"}'),l={name:"en/smart_batteries/rotoye_batmon.md"};function h(p,a,d,c,k,m){return n(),o("div",null,a[0]||(a[0]=[r('<h1 id="rotoye-batmon" tabindex="-1">Rotoye Batmon <a class="header-anchor" href="#rotoye-batmon" aria-label="Permalink to &quot;Rotoye Batmon&quot;">​</a></h1><p><a href="https://rotoye.com/batmon/" target="_blank" rel="noreferrer">Rotoye Batmon</a> is a kit for adding smart battery functionality to off-the-shelf Lithium-Ion and LiPo batteries. It can be purchased as a standalone unit or as part of a factory-assembled smart-battery.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>At time of writing you can only use Batmon by <a href="#build-px4-firmware">building a custom branch of PX4</a>. Support in the codeline is pending <a href="https://github.com/PX4/PX4-Autopilot/pull/16723" target="_blank" rel="noreferrer">PR approval</a>.</p></div><p><img src="'+t+'" alt="Rotoye Batmon Board"></p><p><img src="'+e+'" alt="Pre-assembled Rotoye smart battery"></p><h2 id="where-to-buy" tabindex="-1">Where to Buy <a class="header-anchor" href="#where-to-buy" aria-label="Permalink to &quot;Where to Buy&quot;">​</a></h2><p><a href="https://rotoye.com/batmon/" target="_blank" rel="noreferrer">Rotoye Store</a>: Batmon kits, custom smart-batteries, and accessories</p><h2 id="wiring-connections" tabindex="-1">Wiring/Connections <a class="header-anchor" href="#wiring-connections" aria-label="Permalink to &quot;Wiring/Connections&quot;">​</a></h2><p>The Rotoye Batmon system uses an XT-90 battery connector with I2C pins, and an opti-isolator board to transmit data.</p><p><img src="'+i+`" alt="Board connections"></p><p>More details can be found <a href="https://github.com/rotoye/batmon_reader" target="_blank" rel="noreferrer">here</a></p><h2 id="software-setup" tabindex="-1">Software Setup <a class="header-anchor" href="#software-setup" aria-label="Permalink to &quot;Software Setup&quot;">​</a></h2><h3 id="build-px4-firmware" tabindex="-1">Build PX4 Firmware <a class="header-anchor" href="#build-px4-firmware" aria-label="Permalink to &quot;Build PX4 Firmware&quot;">​</a></h3><ol><li>Clone or download <a href="https://github.com/rotoye/PX4-Autopilot/tree/batmon_4.03" target="_blank" rel="noreferrer">Rotoye&#39;s fork of PX4:</a><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/rotoye/PX4-Autopilot.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PX4-Autopilot</span></span></code></pre></div></li><li>Checkout the <em>batmon_4.03</em> branch<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fetch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> batmon_4.03</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> batmon_4.03</span></span></code></pre></div></li><li><a href="./../dev_setup/building_px4.html">Build and upload the firmware</a> for your target board</li></ol><h3 id="configure-parameters" tabindex="-1">Configure Parameters <a class="header-anchor" href="#configure-parameters" aria-label="Permalink to &quot;Configure Parameters&quot;">​</a></h3><p>In <em>QGroundControl</em>:</p><ol><li>Set the following <a href="./../advanced_config/parameters.html">parameters</a>: <ul><li><code>BATx_SOURCE</code> to <code>External</code>,</li><li><code>SENS_EN_BAT</code> to <code>true</code>,</li><li><code>BAT_SMBUS_MODEL</code> to <code>3:Rotoye</code></li></ul></li><li>Open the <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/analyze_view/mavlink_console.html" target="_blank" rel="noreferrer">MAVLink Console</a></li><li>Start the <a href="./../modules/modules_driver.html">batt_smbus driver</a> in the console. For example, to run two BatMons on the same bus:<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">batt_smbus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 11</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # External bus 1, address 0x0b  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">batt_smbus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # External bus 1, address 0x0c</span></span></code></pre></div></li></ol><h2 id="further-information" tabindex="-1">Further Information <a class="header-anchor" href="#further-information" aria-label="Permalink to &quot;Further Information&quot;">​</a></h2><p><a href="https://rotoye.com/batmon-tutorial/" target="_blank" rel="noreferrer">Quick Start Guide</a> (Rotoye)</p>`,19)]))}const y=s(l,[["render",h]]);export{g as __pageData,y as default};
