import{_ as t,a,b as o,c as r,d as n,e as i,f as d,g as s,h,i as l,j as c,k as p,l as f,m,n as u}from"./chunks/thoneflow_3901u_hero.DC8c7JOo.js";import{_ as w,c as b,a8 as P,o as g}from"./chunks/framework.BDnHobkS.js";const M=JSON.parse('{"title":"Датчики на основі PMW3901 для вимірювання потоку","description":"","frontmatter":{},"headers":[],"relativePath":"uk/sensor/pmw3901.md","filePath":"uk/sensor/pmw3901.md"}'),_={name:"uk/sensor/pmw3901.md"};function x(T,e,k,S,A,y){return g(),b("div",null,e[0]||(e[0]=[P('<h1 id="датчики-на-основі-pmw3901-для-вимірювання-потоку" tabindex="-1">Датчики на основі PMW3901 для вимірювання потоку <a class="header-anchor" href="#датчики-на-основі-pmw3901-для-вимірювання-потоку" aria-label="Permalink to &quot;Датчики на основі PMW3901 для вимірювання потоку&quot;">​</a></h1><p>PMW3901 is an <a href="./../sensor/optical_flow.html">optical flow</a> ASIC that computes the flow internally and provides a difference in pixels between each frame. Він використовує сенсор відстеження, який схожий на те, що ви знайдете в комп&#39;ютерній мишці, але адаптований для роботи від 80 мм і безмежжя. PMW3901 використовується в декількох продуктах, включаючи деякі від Bitcraze, Tindie, Hex, Thone та Alientek</p><p><img src="'+t+'" alt="Bitcraze Flow Deck"></p><p>Ця тема містить посилання на датчики, які були протестовані, разом з інформацією про кріплення та конфігурацію PX4 (це загальне для всіх датчиків цього типу).</p><h2 id="плати-які-використовують-pmw3901" tabindex="-1">Плати, які використовують PMW3901 <a class="header-anchor" href="#плати-які-використовують-pmw3901" aria-label="Permalink to &quot;Плати, які використовують PMW3901&quot;">​</a></h2><p>Наступна таблиця показує деякі плати, які використовують цей датчик, зазначаючи кількість інтерфейсів, кількість датчиків, вхідну напругу та розмір. Назва дошки посилається на розділи, що містять інформацію про підключення та інформацію про покупку.</p><table tabindex="0"><thead><tr><th>Виробництво</th><th>Материнська плата</th><th>Інтерфейс</th><th>Потік</th><th>Далекомір</th><th>Гіроскоп</th><th>Напруга (V)</th><th>Розмір (мм)</th><th>Максимальна висота (м)</th></tr></thead><tbody><tr><td>Bitcraze</td><td><a href="#bitcraze-flow-breakout">Flow breakout</a></td><td>SPI</td><td>Y</td><td>Y</td><td>-</td><td>3 - 5</td><td>21x20</td><td>1</td></tr><tr><td>Tindie</td><td><a href="#tindie-pmw3901-optical-flow-sensor">PMW3901 Optical Flow Sensor</a></td><td>SPI</td><td>Y</td><td>-</td><td>-</td><td>3 - 5</td><td>AxB</td><td>-</td></tr><tr><td>Hex</td><td><a href="#hex-hereflow-pmw3901-optical-flow-sensor">HereFlow PMW3901 Optical Flow Sensor</a></td><td>CAN</td><td>Y</td><td>Y</td><td>Y</td><td>3 - 5</td><td>AxB</td><td>4</td></tr><tr><td>Holybro</td><td><a href="#holybro-pmw3901-optical-flow-sensor">Holybro PMW3901 Optical Flow Sensor</a></td><td>UART</td><td>Y</td><td>-</td><td>-</td><td>3 - 5</td><td>AxB</td><td>-</td></tr><tr><td>Thone</td><td><a href="#thone-thoneflow-3901u">ThoneFlow-3901U</a></td><td>UART</td><td>Y</td><td>-</td><td>-</td><td>3 - 5</td><td>AxB</td><td>-</td></tr><tr><td>Alientek</td><td><a href="#alientek-atk-pmw3901">ATK-PMW3901</a></td><td>SPI</td><td>Y</td><td>-</td><td>-</td><td>3.3 - 4.2</td><td>27.5x16.5</td><td>1</td></tr></tbody></table><h2 id="підтримувані-дальномери" tabindex="-1">Підтримувані дальномери <a class="header-anchor" href="#підтримувані-дальномери" aria-label="Permalink to &quot;Підтримувані дальномери&quot;">​</a></h2><p>An external rangefinder/distance sensor is <em>required</em> for the sensors that don&#39;t have a rangefinder (e.g. <em>Tindie</em> or <em>Thone</em>) and <em>recommended</em> for the other boards (as their range is quite limited).</p><p>Діапазон, необхідний для застосування, залежить від програми:</p><ul><li>Польот у приміщенні: ≈4 метри</li><li>Польот на відкритому повітрі: ≥10 метрів (наприклад, для підтримки контролю за позицією в середовищах, де можуть виникнути проблеми з GPS)</li></ul><p>Any <a href="./../sensor/rangefinders.html">rangefinder/distance sensor</a> supported by PX4 may be used. Датчик може бути встановлений будь-де, але повинен бути спрямований вниз і повинен бути підключений/налаштований як зазвичай.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The PX4 team mainly tested using the <a href="./../sensor/lidar_lite.html">Lidar Lite V3</a> on larger vehicles and the <a href="./../sensor/cm8jl65_ir_distance_sensor.html">Lanbao CM8JL65</a> (Discontinued) on smaller vehicles.</p></div><h2 id="монтаж-орієнтація" tabindex="-1">Монтаж/Орієнтація <a class="header-anchor" href="#монтаж-орієнтація" aria-label="Permalink to &quot;Монтаж/Орієнтація&quot;">​</a></h2><p>Модулі потоку зазвичай встановлюються близько до центру транспортного засобу. If mounted off-centre you will need to set offsets: <a href="./../sensor/optical_flow.html#ekf2">Optical Flow &gt; EKF2</a>.</p><p>The flow modules may be mounted with any yaw orientation relative to the vehicle body frame, but you must set the value used in <a href="./../advanced_config/parameter_reference.html#SENS_FLOW_ROT">SENS_FLOW_ROT</a>.</p><p>The &quot;zero&quot; rotation is when the sensor board and <a href="./../getting_started/px4_basic_concepts.html#heading-and-directions">vehicle</a> X-axes are aligned (i.e. the &quot;front&quot; of the vehicle and the board are in the same direction), with rotations increasing in a clockwise direction.</p><p>PMW3901 modules have a small notch indicating the direction of the <strong>back</strong> of the board. The diagram shows the relative board and vehicle orientations that correspond to <code>SENS_FLOW_ROT=0</code> (note the notch at the back).</p><p><img src="'+a+'" alt="PMW3901 PH4 Rotation"></p><p>Діаграма вище показує дошку Bitcraze. Ви можете використовувати виступ, щоб знайти орієнтацію інших плат у тому ж самому способі:</p><table tabindex="0"><thead><tr><th>&amp;nbsp;</th><th>&amp;nbsp;</th></tr></thead><tbody><tr><td>Tindie<br><img src="'+o+'" alt="PMW3901 Tindie Notch"></td><td>Hex Hereflow<br><img src="'+r+'" alt="PMW3901 Hereflow Notch"></td></tr><tr><td>Thone<br><img src="'+n+'" alt="PMW3901 Thoneflow Notch"></td><td>Alientek (also has an arrow indicating the front!)<br><img src="'+i+'" alt="PMW3901 Alientek Notch"></td></tr></tbody></table><h2 id="конфігурація-px4" tabindex="-1">Конфігурація PX4 <a class="header-anchor" href="#конфігурація-px4" aria-label="Permalink to &quot;Конфігурація PX4&quot;">​</a></h2><p>Конфігурація PX4, яка є загальною для всіх плат на основі PMW3901:</p><ul><li><a href="./../sensor/optical_flow.html#ekf2">Optical Flow &gt; EKF2</a> explains how to fuse optical flow data in the EKF2 estimator and set position offsets for the mounting position of the flow sensor.</li><li><a href="./../advanced_config/parameter_reference.html#SENS_FLOW_ROT">SENS_FLOW_ROT</a> sets the orientation of the flow sensor relative to vehicle heading.</li></ul><p>Окрім того для:</p><ul><li>SPI-connected sensors you must set <a href="./../advanced_config/parameter_reference.html#SENS_EN_PMW3901">SENS_EN_PMW3901</a> to <code>1</code> in order to enable the sensor driver.</li><li>UART-connected sensors (e.g. ThoneFlow-3901UY) you must <a href="./../peripherals/serial_configuration.html">configure the associated serial port</a> by setting the parameter <a href="./../advanced_config/parameter_reference.html#SENS_TFLOW_CFG">SENS_TFLOW_CFG</a> to the value of the connected UART port (for example, if you connected this sensor to <code>TELEM 2</code>, you need to set <code>SENS_TFLOW_CFG</code> to <code>102</code>).</li><li>DroneCAN sensors you must set <code>UAVCAN_ENABLE</code> appropriately. For more information see <a href="./../dronecan/">DroneCAN Peripherals</a> (and the <a href="#dronecan_wiring">HereFlow PMW3901 docs below</a>).</li></ul><p>Індивідуальні датчики потоку додатково налаштовуються/конфігуруються, як описано в розділах нижче.</p><h2 id="розгалуження-bitcraze-flow" tabindex="-1">Розгалуження Bitcraze Flow <a class="header-anchor" href="#розгалуження-bitcraze-flow" aria-label="Permalink to &quot;Розгалуження Bitcraze Flow&quot;">​</a></h2><p>The <a href="https://www.bitcraze.io/products/flow-breakout/" target="_blank" rel="noreferrer">Bitcraze Flow breakout</a> directly exposes the <a href="#spi-wiring">SPI interface</a> from the PMW3901 module.</p><p>The board also incorporates a distance sensor <a href="#i2c-wiring">wired to the Pixhawk I2C port</a>. Цей датчик відстані - це датчик ToF VL53L0x від STMicroelectronics. Діапазон сенсора мінімальний (2 метри) і буде зменшуватися під час польоту на сонці. We therefore highly recommend that you use an <a href="#external-rangefinders">external distance sensor</a>.</p><p><img src="'+t+'" alt="Bitcraze Flow Deck"></p><p><a href="#px4-configuration">PX4 configuration</a> and <a href="#mounting-orientation">mounting/orientation</a> instructions are provided above.</p><h3 id="підключення-spi" tabindex="-1">Підключення SPI <a class="header-anchor" href="#підключення-spi" aria-label="Permalink to &quot;Підключення SPI&quot;">​</a></h3><p>PMW3901, якщо підключений до порту SPI на Pixhawk 4, автоматично виявить модуль потоку Bitcraze. Драйвер цього пристрою був явно написаний для підключення до порту SPI за допомогою вибору чіпа 1. No parameters will have to be configured other than the <a href="#mounting-orientation">orientation and position of the sensor</a>.</p><p>Схема виводів для порту SPI Pixhawk до плати Bitcraze Flow показана нижче (схема виводів однакова для всіх версій Pixhawk FMU).</p><table tabindex="0"><thead><tr><th>Порт SPI Pixhawk (зліва направо)</th><th>Плата потоку Bitcraze</th></tr></thead><tbody><tr><td>1 (VCC)</td><td>VCC</td></tr><tr><td>2 (SCK)</td><td>CLK</td></tr><tr><td>3 (MISO)</td><td>MISO</td></tr><tr><td>4 (MOSI)</td><td>MOSI</td></tr><tr><td>5 (CS1)</td><td>CS</td></tr><tr><td>6 (CS2)</td><td>Не підключайте</td></tr><tr><td>7 (GND)</td><td>GND</td></tr></tbody></table><p>Щоб підключити плату bitcraze flow до Pixhawk, вам потрібно злити дроти кабелю SPI Pixhawk на плату flow. Кабель SPI має 7 провідів, з яких потрібно підключити 6 до плати потоку.</p><p>Наступна діаграма показує, як підключити датчик до Pixhawk 4.</p><p><img src="'+d+'" alt="Bitcraze PH4 Pinout"></p><h3 id="підключення-i2c" tabindex="-1">Підключення I2C <a class="header-anchor" href="#підключення-i2c" aria-label="Permalink to &quot;Підключення I2C&quot;">​</a></h3><p>Проводка I2C однакова для будь-якого іншого датчика відстані. Просто підключіть SLA, SLC, GND та VCC до відповідних (таких же) контактів на Pixhawk та сенсорі.</p><h2 id="оптичнии-датчик-потоку-tindie-pmw3901" tabindex="-1">Оптичний датчик потоку Tindie PMW3901 <a class="header-anchor" href="#оптичнии-датчик-потоку-tindie-pmw3901" aria-label="Permalink to &quot;Оптичний датчик потоку Tindie PMW3901&quot;">​</a></h2><p>The Tindie <a href="https://www.tindie.com/products/onehorse/pmw3901-optical-flow-sensor/" target="_blank" rel="noreferrer">PMW3901 Optical Flow Sensor</a> exposes the SPI interface from the PMW3901 module exactly as on the Bitcraze module (see <a href="#spi-wiring">SPI Wiring</a>).</p><p><img src="'+s+'" alt="Tindie PH4 Pinout"></p><p>The sensor doesn&#39;t have a distance sensor onboard, so you will need to use an <a href="#external-rangefinders">external distance sensor</a>.</p><p><a href="#px4-configuration">PX4 configuration</a> and <a href="#mounting-orientation">mounting/orientation</a> instructions are provided above.</p><h2 id="alientek-atk-pmw3901" tabindex="-1">AlienTek ATK-PMW3901 <a class="header-anchor" href="#alientek-atk-pmw3901" aria-label="Permalink to &quot;AlienTek ATK-PMW3901&quot;">​</a></h2><p>The AlienTek <a href="https://www.aliexpress.com/i/32979605707.html" target="_blank" rel="noreferrer">ATK-PMW3901</a> exposes the SPI interface from the PMW3901 module in the same way as the Bitcraze module (see <a href="#spi-wiring">SPI Wiring</a>).</p><p><img src="'+h+'" alt="Alientek Pixhawk4 Connections"></p><p>The board also incorporates a distance sensor (we recommend that you use an <a href="#external-rangefinders">external distance sensor</a>). You can wire the internal sensor to the Pixhawk I2C port <a href="#i2c-wiring">in the same way as any other I2C peripheral.</a> A screenshot showing the I2C pins (SLA, SLC, GND, and VCC) is provided below.</p><p><img src="'+l+'" alt="Alientek Pinout"></p><p><a href="#px4-configuration">PX4 configuration</a> and <a href="#mounting-orientation">mounting/orientation</a> instructions are provided above.</p><h2 id="hex-hereflow-оптичнии-датчик-потоку-pmw3901" tabindex="-1">Hex HereFlow Оптичний датчик потоку PMW3901 <a class="header-anchor" href="#hex-hereflow-оптичнии-датчик-потоку-pmw3901" aria-label="Permalink to &quot;Hex HereFlow Оптичний датчик потоку PMW3901&quot;">​</a></h2><p>The Hex <a href="http://www.proficnc.com/all-products/185-pixhawk2-suite.html" target="_blank" rel="noreferrer">HereFlow PMW3901 Optical Flow Sensor</a> is a tiny board containing the PMW3901 flow module, VL53L1X distance sensor, and an IMU (used to synchronize the flow data with the gyro data).</p><p>Вбудований мікроконтролер зразки три датчики та публікує дві повідомлення DroneCAN, що містять всю інформацію, необхідну для розрахунків датчика потоку та відстані.</p><p>The board can be connected to any CAN port on any Pixhawk board (see <a href="#dronecan_wiring">DroneCAN wiring</a>).</p><p>As for the other optical flow boards, we recommend that you use an <a href="#external-rangefinders">external distance sensor</a>.</p><p><a href="#px4-configuration">PX4 configuration</a> and <a href="#mounting-orientation">mounting/orientation</a> instructions are provided above.</p><p><a id="dronecan_wiring"></a></p><h3 id="проводка-налаштування-dronecan" tabindex="-1">Проводка/Налаштування DroneCAN <a class="header-anchor" href="#проводка-налаштування-dronecan" aria-label="Permalink to &quot;Проводка/Налаштування DroneCAN&quot;">​</a></h3><p>Схема нижче показує, як підключити датчик до шини CAN Pixhawk 4.</p><p><img src="'+c+'" alt="Hex PH4 Pinout"></p><p>In addition to any other configuration, you will need to set the parameter <a href="./../advanced_config/parameter_reference.html#UAVCAN_ENABLE">UAVCAN_ENABLE</a> to either 2 or 3, depending on your system:</p><ul><li><code>UAVCAN_ENABLE=2</code>: DroneCAN sensors but no motor controllers.</li><li><code>UAVCAN_ENABLE=3</code>: DroneCAN sensors and motor controllers.</li></ul><p>For general information about DroneCAN wiring and configuration see: <a href="./../dronecan/">DroneCAN Peripherals</a>.</p><h2 id="holybro-pmw3901-оптичнии-датчик-потоку" tabindex="-1">Holybro PMW3901 Оптичний датчик потоку <a class="header-anchor" href="#holybro-pmw3901-оптичнии-датчик-потоку" aria-label="Permalink to &quot;Holybro PMW3901 Оптичний датчик потоку&quot;">​</a></h2><p>The <a href="https://holybro.com/products/pmw3901-optical-flow-sensor" target="_blank" rel="noreferrer">Holybro PMW3901 Optical Flow Sensor</a> exposes a PMW3901 optical flow module via a UART interface.</p><p>The board doesn&#39;t include a distance sensor onboard, so you will need to use an <a href="#external-rangefinders">external distance sensor</a>.</p><img src="'+p+'" width="350px" title="HB-pmw3901-1"><img src="'+f+'" width="350px" title="HB-pmw3901-2"><p>Це поставляється з корпусом, надрукованим у 3D, та передпаяним TX, напругою та GND 4-контактним роз&#39;ємом, який можна підключити до порту телеметрії вашого контролера польоту, як показано нижче (для Pixhawk 6C).</p><p><img src="'+m+'" alt="HB-pmw3901-3"></p><h2 id="thone-thoneflow-3901u" tabindex="-1">Thone ThoneFlow-3901U <a class="header-anchor" href="#thone-thoneflow-3901u" aria-label="Permalink to &quot;Thone ThoneFlow-3901U&quot;">​</a></h2><p>The Thone <a href="https://www.seeedstudio.com/ThoneFlow-3901U-UART-Serial-Version-PMW3901-Optical-Flow-Sensor-p-4040.html" target="_blank" rel="noreferrer">ThoneFlow-3901U</a> exposes a PMW3901 optical flow module via a UART interface.</p><p>The board doesn&#39;t include a distance sensor onboard, so you will need to use an <a href="#external-rangefinders">external distance sensor</a>.</p><p><img src="'+u+'" alt="PMW3901 Thoneflow Hero"></p><p><a href="#px4-configuration">PX4 configuration</a> and <a href="#mounting-orientation">mounting/orientation</a> instructions are provided above.</p><p>In addition, you must also set the parameter <a href="./../advanced_config/parameter_reference.html#SENS_TFLOW_CFG">SENS_TFLOW_CFG</a> to the value of the UART port you connected (e.g. if the sensor is connected to <code>TELEM 2</code> then set <code>SENS_TFLOW_CFG=102</code>. For more information see <a href="./../peripherals/serial_configuration.html">Serial Port Configuration</a>.</p>',78)]))}const C=w(_,[["render",x]]);export{M as __pageData,C as default};
