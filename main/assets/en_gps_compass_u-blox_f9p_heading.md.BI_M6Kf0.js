import{_ as a,c as t,a8 as o,o as r}from"./chunks/framework.BDnHobkS.js";const u=JSON.parse('{"title":"RTK GPS Heading with Dual u-blox F9P","description":"","frontmatter":{},"headers":[],"relativePath":"en/gps_compass/u-blox_f9p_heading.md","filePath":"en/gps_compass/u-blox_f9p_heading.md"}'),s={name:"en/gps_compass/u-blox_f9p_heading.md"};function i(n,e,l,p,h,c){return r(),t("div",null,e[0]||(e[0]=[o('<h1 id="rtk-gps-heading-with-dual-u-blox-f9p" tabindex="-1">RTK GPS Heading with Dual u-blox F9P <a class="header-anchor" href="#rtk-gps-heading-with-dual-u-blox-f9p" aria-label="Permalink to &quot;RTK GPS Heading with Dual u-blox F9P&quot;">​</a></h1><p>Two u-blox F9P <a href="./../gps_compass/rtk_gps.html">RTK GPS</a> modules mounted on a vehicle can be used to accurately compute a heading angle (i.e. an alternative to compass-based heading estimation). The two GPS devices in this scenario are referred to as the <em>Moving Base</em> and <em>Rover</em>.</p><h2 id="supported-devices" tabindex="-1">Supported Devices <a class="header-anchor" href="#supported-devices" aria-label="Permalink to &quot;Supported Devices&quot;">​</a></h2><p>This feature works on F9P devices that support CAN or expose the GPS UART2 port.</p><p>The following devices are supported:</p><ul><li><a href="https://arkelectron.com/product/ark-rtk-gps/" target="_blank" rel="noreferrer">ARK RTK GPS</a> (arkelectron.com)</li><li><a href="https://www.sparkfun.com/products/15136" target="_blank" rel="noreferrer">SparkFun GPS-RTK2 Board - ZED-F9P</a> (www.sparkfun.com)</li><li><a href="https://store-drotek.com/911-sirius-rtk-gnss-rover-f9p.html" target="_blank" rel="noreferrer">SIRIUS RTK GNSS ROVER (F9P)</a> (store-drotek.com)</li><li><a href="https://store.mrobotics.io/product-p/m10020d.htm" target="_blank" rel="noreferrer">mRo u-blox ZED-F9 RTK L1/L2 GPS</a> (store.mrobotics.io)</li><li><a href="https://holybro.com/products/h-rtk-f9p-gnss-series" target="_blank" rel="noreferrer">Holybro H-RTK F9P Helical or Base</a> (Holybro Store)</li><li><a href="https://holybro.com/collections/dronecan-h-rtk" target="_blank" rel="noreferrer">Holybro DroneCAN H-RTK F9P Rover or Helical</a> (Holybro Store)</li><li><a href="https://store.cuav.net/shop/c-rtk-9ps/" target="_blank" rel="noreferrer">CUAV C-RTK 9Ps</a> (CUAV Store)</li></ul><div class="info custom-block"><p class="custom-block-title">INFO</p><ul><li><a href="./../gps_compass/rtk_gps_freefly.html">Freefly RTK GPS</a> and <a href="./../gps_compass/rtk_gps_holybro_h-rtk-f9p.html">Holybro H-RTK F9P Rover Lite</a> cannot be used because they do not expose the CAN or UART2 port.</li><li>Supported devices are also listed in <a href="./../gps_compass/rtk_gps.html#supported-devices">RTK GNSS (GPS) &gt; Supported Devices</a>.</li></ul></div><h2 id="setup" tabindex="-1">Setup <a class="header-anchor" href="#setup" aria-label="Permalink to &quot;Setup&quot;">​</a></h2><p>Ideally the two antennas should be identical, on the same level/horizontal plane and oriented the same way, and on an identical ground plane size and shape (<a href="https://content.u-blox.com/sites/default/files/documents/ZED-F9P-MovingBase_AppNote_UBX-19009093.pdf" target="_blank" rel="noreferrer">Application note</a>, section <em>System Level Considerations</em>).</p><ul><li>The application note does not state the minimal required separation between modules (50cm has been used in test vehicles running PX4).</li><li>The antennas can be positioned as needed, but the <a href="./../advanced_config/parameter_reference.html#GPS_YAW_OFFSET">GPS_YAW_OFFSET</a> must be configured: <a href="./../gps_compass/rtk_gps.html#configuring-gps-as-yaw-heading-source">RTK GPS &gt; GPS as Yaw/Heading Source</a>.</li></ul><h3 id="uart-setup" tabindex="-1">UART Setup <a class="header-anchor" href="#uart-setup" aria-label="Permalink to &quot;UART Setup&quot;">​</a></h3><ul><li>The UART2 of the GPS devices need to be connected together (TXD2 of the &quot;Moving Base&quot; to RXD2 of the &quot;Rover&quot;)</li><li>Connect UART1 on each of the GPS to (separate) unused UART&#39;s on the autopilot, and configure both of them as GPS with baudrate set to <code>Auto</code>. The mapping is as follows: <ul><li>Main GPS = Rover</li><li>Secondary GPS = Moving Base</li></ul></li><li>Set <a href="./../advanced_config/parameter_reference.html#GPS_UBX_MODE">GPS_UBX_MODE</a> to <code>Heading</code> (1)</li><li><a href="./../advanced_config/parameter_reference.html#EKF2_GPS_CTRL">EKF2_GPS_CTRL</a> parameter bit 3 must be set (see <a href="./../gps_compass/rtk_gps.html#configuring-gps-as-yaw-heading-source">RTK GPS &gt; GPS as Yaw/Heading Source</a>).</li><li><a href="./../advanced_config/parameter_reference.html#GPS_YAW_OFFSET">GPS_YAW_OFFSET</a> may need to be set (see <a href="./../gps_compass/rtk_gps.html#configuring-gps-as-yaw-heading-source">RTK GPS &gt; GPS as Yaw/Heading Source</a>).</li><li>Reboot and wait until both devices have GPS reception. <code>gps status</code> should then show the Main GPS going into RTK mode, which means the heading angle is available.</li></ul><h3 id="can-setup" tabindex="-1">CAN Setup <a class="header-anchor" href="#can-setup" aria-label="Permalink to &quot;CAN Setup&quot;">​</a></h3><p>Refer to the CAN RTK GPS documentation for each specific device for the setup instructions (such as <a href="./../dronecan/ark_rtk_gps.html#setting-up-moving-baseline-gps-heading">ARK RTK GPS &gt; Setting Up Moving Baseline &amp; GPS Heading</a>)</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>If using RTK with a fixed base station the secondary GPS will show the RTK state w.r.t. the base station.</p></div><h2 id="further-information" tabindex="-1">Further Information <a class="header-anchor" href="#further-information" aria-label="Permalink to &quot;Further Information&quot;">​</a></h2><ul><li><a href="https://content.u-blox.com/sites/default/files/documents/ZED-F9P-MovingBase_AppNote_UBX-19009093.pdf" target="_blank" rel="noreferrer">ZED-F9P Moving base applications (Application note)</a> - General setup/instructions.</li><li><a href="./../gps_compass/rtk_gps.html#configuring-gps-as-yaw-heading-source">RTK GPS &gt; GPS as Yaw/Heading Source</a></li></ul>',17)]))}const g=a(s,[["render",i]]);export{u as __pageData,g as default};
