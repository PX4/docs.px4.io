import{_ as l}from"./chunks/SIH_diagram.BO1pTOUs.js";import{_ as n,c as o,j as a,a as e,G as t,a8 as r,B as h,o as p}from"./chunks/framework.BDnHobkS.js";const b=JSON.parse('{"title":"Моделювання в апаратному забезпеченні (SIH)","description":"","frontmatter":{},"headers":[],"relativePath":"uk/sim_sih/index.md","filePath":"uk/sim_sih/index.md"}'),d={name:"uk/sim_sih/index.md"};function c(m,i,u,k,g,y){const s=h("Badge");return p(),o("div",null,[i[0]||(i[0]=a("h1",{id:"моделювання-в-апаратному-забезпеченні-sih",tabindex:"-1"},[e("Моделювання в апаратному забезпеченні (SIH) "),a("a",{class:"header-anchor",href:"#моделювання-в-апаратному-забезпеченні-sih","aria-label":'Permalink to "Моделювання в апаратному забезпеченні (SIH)"'},"​")],-1)),t(s,{type:"tip",text:"PX4 v1.9 (MC)"}),t(s,{type:"tip",text:"PX4 v1.13 (MC, VTOL, FW)"}),i[1]||(i[1]=r('<div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>This simulator is <a href="./../simulation/community_supported_simulators.html">community supported and maintained</a>. It may or may not work with current versions of PX4 (known to work in PX4 v1.14).</p><p>Дивіться <a href="./../dev_setup/dev_env.html">Встановлення інструментарію</a> для інформації про середовища та інструменти, що підтримуються основною командою розробників.</p></div><p>Simulation-In-Hardware (SIH) is an alternative to <a href="./../simulation/hitl.html">Hardware In The Loop simulation (HITL)</a> for quadrotors, fixed-wing vehicles (airplane), and VTOL tailsitters.</p><p>SIH can be used by new PX4 users to get familiar with PX4 and the different modes and features, and of course to learn to fly a vehicle using an RC controller in simulation, which is not possible using SITL.</p><h2 id="загальнии-огляд" tabindex="-1">Загальний огляд <a class="header-anchor" href="#загальнии-огляд" aria-label="Permalink to &quot;Загальний огляд&quot;">​</a></h2><p>With SIH the whole simulation is running on embedded hardware: the controller, the state estimator, and the simulator. The Desktop computer is only used to display the virtual vehicle.</p><p><img src="'+l+`" alt="Simulator MAVLink API"></p><h3 id="сумісність" tabindex="-1">Сумісність <a class="header-anchor" href="#сумісність" aria-label="Permalink to &quot;Сумісність&quot;">​</a></h3><ul><li>SIH is compatible with all PX4 supported boards except those based on FMUv2.</li><li>SIH для квадрокоптера підтримується з версії PX4 v1.9.</li><li>SIH для фіксованих крил (літака) та VTOL-конвертоплана підтримується з версії PX4 v1.13.</li><li>SIH як SITL (без апаратного забезпечення) з версії PX4 v1.14.</li></ul><h3 id="переваги" tabindex="-1">Переваги <a class="header-anchor" href="#переваги" aria-label="Permalink to &quot;Переваги&quot;">​</a></h3><p>SIH provides several benefits over HITL:</p><ul><li>Він забезпечує синхронізований час, уникаючи двостороннього з&#39;єднання з комп&#39;ютером. В результаті користувачеві не потрібен такий потужний настільний комп&#39;ютер.</li><li>Усе моделювання залишається в середовищі PX4. Розробники, які знайомі з PX4, можуть легше включити свою власну математичну модель в симулятор. Вони, наприклад, можуть змінити аеродинамічну модель або рівень шуму датчиків, або навіть додати датчик для симуляції.</li><li>The physical parameters representing the vehicle (such as mass, inertia, and maximum thrust force) can easily be modified from the <a href="./../advanced_config/parameter_reference.html#simulation-in-hardware">SIH parameters</a>.</li></ul><h2 id="вимоги" tabindex="-1">Вимоги <a class="header-anchor" href="#вимоги" aria-label="Permalink to &quot;Вимоги&quot;">​</a></h2><p>To run the SIH, you will need a:</p><ul><li><a href="./../flight_controller/">Flight controller</a>, such as a Pixhawk-series board</li><li><a href="./../getting_started/px4_basic_concepts.html#manual-control">Manual controller</a>: either a <a href="./../getting_started/rc_transmitter_receiver.html">radio control system</a> or a <a href="./../config/joystick.html">joystick</a>.</li><li>QGroundControl for flying the vehicle via GCS.</li><li>Development computer for visualizing the virtual vehicle (optional).</li></ul><p>From PX4 v1.14 you can run SIH &quot;as SITL&quot;, in which case a flight controller is not required.</p><h2 id="starting-sih" tabindex="-1">Starting SIH <a class="header-anchor" href="#starting-sih" aria-label="Permalink to &quot;Starting SIH&quot;">​</a></h2><p>To set up/start SIH:</p><ol><li>Connect the flight controller to the desktop computer with a USB cable.</li><li>Відкрийте QGroundControl і зачекайте, поки контролер польоту також завантажиться та підключиться.</li><li>Open <a href="./../config/airframe.html">Vehicle Setup &gt; Airframe</a> then select the desired frame: <ul><li><a href="./../airframes/airframe_reference.html#copter_simulation_sih_quadcopter_x">SIH Quadcopter X</a></li><li><a href="./../airframes/airframe_reference.html#plane_simulation_sih_plane_aert">SIH plane AERT</a></li><li><a href="./../airframes/airframe_reference.html#vtol_simulation_sih_tailsitter_duo">SIH Tailsitter Duo</a></li></ul></li></ol><p>Потім автопілот перезавантажиться. The <code>sih</code> module is started on reboot, and the vehicle should be displayed on the ground control station map.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>The airplane needs to takeoff in manual mode at full throttle. Крім того, якщо літак розбився, оцінювач стану може втратити своє виправлення.</p></div><h2 id="display-visualisation-optional" tabindex="-1">Display/Visualisation (optional) <a class="header-anchor" href="#display-visualisation-optional" aria-label="Permalink to &quot;Display/Visualisation (optional)&quot;">​</a></h2><p>The SIH-simulated vehicle can be displayed using <a href="./../sim_jmavsim/">jMAVSim</a> as a visualiser.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>SIH does not <em>need</em> a visualiser — you can connect with QGroundControl and fly the vehicle without one.</p></div><p>Для відображення симульованого транспортного засобу:</p><ol><li><p>Close <em>QGroundControl</em> (if open).</p></li><li><p>Відключіть і знову підключіть контролер польоту (дайте декілька секунд на його завантаження).</p></li><li><p>Start jMAVSim by calling the script <strong>jmavsim_run.sh</strong> from a terminal:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./Tools/simulation/jmavsim/jmavsim_run.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -q</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/ttyACM0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span></span></code></pre></div><p>де прапорці такі:</p><ul><li><code>-q</code> to allow the communication to <em>QGroundControl</em> (optional).</li><li><code>-d</code> to start the serial device <code>/dev/ttyACM0</code> on Linux. On macOS this would be <code>/dev/tty.usbmodem1</code>.</li><li><code>-b</code> to set the serial baud rate to <code>2000000</code>.</li><li><code>-o</code> to start jMAVSim in <em>display Only</em> mode (i.e. the physical engine is turned off and jMAVSim only displays the trajectory given by the SIH in real-time).</li><li>add a flag <code>-a</code> to display an aircraft or <code>-t</code> to display a tailsitter. Якщо цей прапорець не вказаний, за замовчуванням відображатиметься квадрокоптер.</li></ul></li><li><p>After few seconds, <em>QGroundControl</em> can be opened again.</p></li></ol><p>На цьому етапі систему можна запустити та вивести в польот. The vehicle can be observed moving in jMAVSim, and on the QGC <em>Fly</em> view.</p><h2 id="sih-as-sitl-no-fc" tabindex="-1">SIH as SITL (no FC) <a class="header-anchor" href="#sih-as-sitl-no-fc" aria-label="Permalink to &quot;SIH as SITL (no FC)&quot;">​</a></h2><p>SIH можна запустити як SITL (Software-In-The-Loop) з версії 1.14. What this means is that the simulation code is executed on the laptop/computer instead of a flight controller, similar to Gazebo or jMAVSim. In this case you don&#39;t need the flight controller hardware.</p><p>Для запуску SIH як SITL:</p><ol><li><p>Install the <a href="./../dev_setup/dev_env.html">PX4 Development toolchain</a>.</p></li><li><p>Виконайте відповідну команду make для кожного типу транспортного засобу (в корені репозиторію PX4-Autopilot):</p><ul><li><p>квадротор:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> px4_sitl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sihsim_quadx</span></span></code></pre></div></li><li><p>Закріплені крила (літаки):</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> px4_sitl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sihsim_airplane</span></span></code></pre></div></li><li><p>XVert VTOL tailsitter:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> px4_sitl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sihsim_xvert</span></span></code></pre></div></li></ul></li></ol><h3 id="зміна-швидкості-симуляціі" tabindex="-1">Зміна швидкості симуляції <a class="header-anchor" href="#зміна-швидкості-симуляціі" aria-label="Permalink to &quot;Зміна швидкості симуляції&quot;">​</a></h3><p>SITL дозволяє виконувати симуляцію швидше, ніж у реальному часі. To run the airplane simulation 10 times faster than real time, run the command:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PX4_SIM_SPEED_FACTOR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> px4_sitl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sihsim_airplane</span></span></code></pre></div><p>To display the vehicle in jMAVSim during SITL mode, enter the following command in another terminal:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./Tools/simulation/jmavsim/jmavsim_run.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 19410</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -q</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span></span></code></pre></div><ul><li>add a flag <code>-a</code> to display an aircraft or <code>-t</code> to display a tailsitter. Якщо цей прапорець не вказаний, за замовчуванням відображатиметься квадрокоптер.</li></ul><h3 id="встановлення-власного-місця-зльоту" tabindex="-1">Встановлення власного місця зльоту <a class="header-anchor" href="#встановлення-власного-місця-зльоту" aria-label="Permalink to &quot;Встановлення власного місця зльоту&quot;">​</a></h3><p>The takeoff location in SIH on SITL can be set using environment variables. This will override the default takeoff location.</p><p>The variables to set are: <code>PX4_HOME_LAT</code>, <code>PX4_HOME_LON</code>, and <code>PX4_HOME_ALT</code>.</p><p>Наприклад:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PX4_HOME_LAT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">28.452386</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PX4_HOME_LON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-13.867138</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PX4_HOME_ALT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">28.5</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> px4_sitl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sihsim_quadx</span></span></code></pre></div><h2 id="dynamic-models" tabindex="-1">Dynamic Models <a class="header-anchor" href="#dynamic-models" aria-label="Permalink to &quot;Dynamic Models&quot;">​</a></h2><p>Динамічні моделі для різних транспортних засобів:</p><ul><li>Quadrotor: <a href="https://github.com/PX4/PX4-user_guide/raw/main/assets/simulation/SIH_dynamic_model.pdf" target="_blank" rel="noreferrer">pdf report</a>.</li><li>Fixed-wing: Inspired by the PhD thesis: &quot;Dynamics modeling of agile fixed-wing unmanned aerial vehicles.&quot; Khan, Waqas, під керівництвом Nahon, Meyer, Університет Макгілла, докторська дисертація, 2016.</li><li>Tailsitter: Inspired by the master&#39;s thesis: &quot;Modeling and control of a flying wing tailsitter unmanned aerial vehicle.&quot; Chiappinelli, Romain, під керівництвом Nahon, Meyer, Університет Макгілла, магістерська робота, 2018.</li></ul><h2 id="відео" tabindex="-1">Відео <a class="header-anchor" href="#відео" aria-label="Permalink to &quot;Відео&quot;">​</a></h2>`,45)),i[2]||(i[2]=a("lite-youtube",{videoid:"PzIpSCRD8Jo",title:"SIH FW demo"},null,-1)),i[3]||(i[3]=a("h2",{id:"автори",tabindex:"-1"},[e("Автори "),a("a",{class:"header-anchor",href:"#автори","aria-label":'Permalink to "Автори"'},"​")],-1)),i[4]||(i[4]=a("p",null,"SIH спочатку був розроблений компанією Coriolis g Corporation. The airplane model and tailsitter models were added by Altitude R&D inc. Обидві ці компанії знаходяться в Канаді:",-1)),i[5]||(i[5]=a("ul",null,[a("li",null,"Coriolis g developped a new type of Vertical Takeoff and Landing (VTOL) vehicles based on passive coupling systems;"),a("li",null,[a("a",{href:"https://www.altitude-rd.com/",target:"_blank",rel:"noreferrer"},"Altitude R&D"),e(" is specialized in dynamics, control, and real-time simulation (today relocated in Zurich).")])],-1)),i[6]||(i[6]=a("p",null,"Симулятор випущений безкоштовно під ліцензією BSD.",-1))])}const F=n(d,[["render",c]]);export{b as __pageData,F as default};
