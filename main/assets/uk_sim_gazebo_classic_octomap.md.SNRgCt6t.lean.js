import{_ as i}from"./chunks/octomap.CQWlw9Bv.js";import{_ as a,c as t,a8 as e,o as n}from"./chunks/framework.BDnHobkS.js";const E=JSON.parse('{"title":"3D Моделі OctoMap з ROS/Gazebo Classic","description":"","frontmatter":{},"headers":[],"relativePath":"uk/sim_gazebo_classic/octomap.md","filePath":"uk/sim_gazebo_classic/octomap.md"}'),l={name:"uk/sim_gazebo_classic/octomap.md"};function p(h,s,o,r,k,d){return n(),t("div",null,s[0]||(s[0]=[e(`<h1 id="_3d-моделі-octomap-з-ros-gazebo-classic" tabindex="-1">3D Моделі OctoMap з ROS/Gazebo Classic <a class="header-anchor" href="#_3d-моделі-octomap-з-ros-gazebo-classic" aria-label="Permalink to &quot;3D Моделі OctoMap з ROS/Gazebo Classic&quot;">​</a></h1><p>The <a href="http://octomap.github.io/" target="_blank" rel="noreferrer">OctoMap library</a> is an open source library for generating volumetric 3D environment models from sensor data. Дані цієї моделі потім можуть використовуватись дроном для навігації та уникнення перешкод.</p><p>This guide covers how to use <em>OctoMap</em> with the <a href="./../sim_gazebo_classic/">Gazebo Classic</a> <a href="https://github.com/ethz-asl/rotors_simulator/wiki/RotorS-Simulator" target="_blank" rel="noreferrer">Rotors Simulator</a> and ROS.</p><h2 id="встановлення" tabindex="-1">Встановлення <a class="header-anchor" href="#встановлення" aria-label="Permalink to &quot;Встановлення&quot;">​</a></h2><p>The installation requires ROS, <a href="./../sim_gazebo_classic/">Gazebo Classic</a> and the Rotors Simulator plugin. Follow the <a href="https://github.com/ethz-asl/rotors_simulator" target="_blank" rel="noreferrer">Rotors Simulator instructions</a> to install.</p><p>Next, install the <em>OctoMap</em> library:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ros-indigo-octomap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ros-indigo-octomap-mapping</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rosdep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> octomap_mapping</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rosmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> octomap_mapping</span></span></code></pre></div><p>Now, open <code>~/catkin_ws/src/rotors_simulator/rotors_gazebo/CMakeLists.txt</code> and add the following lines to the bottom of the file:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">find_package(octomap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> REQUIRED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">include_directories($</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{OCTOMAP_INCLUDE_DIRS}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">link_libraries($</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{OCTOMAP_LIBRARIES}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Open <code>~/catkin_ws/src/rotors_simulator/rotors_gazebo/package.xml</code> and add the following lines:</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build_depend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;octomap&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build_depend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">run_depend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;octomap&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">run_depend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>Виконайте наступні два рядки:</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The first line changes your default shell editor to <em>gedit</em>. This is recommended for users who have little experience with <em>vim</em> (the default editor), but can otherwise be omitted.</p></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EDITOR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;gedit&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rosed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> octomap_server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> octomap_tracking_server.launch</span></span></code></pre></div><p>та змінити наступні два рядки:</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;frame_id&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;map&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--remap from=&quot;cloud_in&quot; to=&quot;/rgbdslam/batch_clouds&quot; /--&gt;</span></span></code></pre></div><p>на:</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;frame_id&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">remap</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cloud_in&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/firefly/vi_sensor/camera_depth/depth/points&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre></div><h2 id="запуск-симуляціі" tabindex="-1">Запуск симуляції <a class="header-anchor" href="#запуск-симуляціі" aria-label="Permalink to &quot;Запуск симуляції&quot;">​</a></h2><p>Run the following three lines in <em>separate</em> terminal windows. This opens up <a href="./../sim_gazebo_classic/">Gazebo Classic</a>, <em>Rviz</em> and an octomap server.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">roslaunch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rotors_gazebo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mav_hovering_example_with_vi_sensor.launch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  mav_name:=firefly</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rviz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">roslaunch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> octomap_server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> octomap_tracking_server.launch</span></span></code></pre></div><p>In <em>Rviz</em>, change the field &#39;Fixed Frame&#39; from &#39;map&#39; to &#39;world&#39; in the top left of the window. Тепер натисніть кнопку &quot;Додати&quot; в нижньому лівому куті та оберіть MarkerArray. Then double click the MarkerArray and change &#39;Marker Topic&#39; from <code>/free_cells_vis_array</code> to <code>/occupied_cells_vis_array</code>.</p><p>Тепер ви повинні побачити частину підлоги.</p><p>In the <em>Gazebo Classic</em> window, insert a cube in front of the red rotors and you should see it in <em>Rviz</em>.</p><p><img src="`+i+'" alt="OctoMap Example in Gazebo"></p>',25)]))}const m=a(l,[["render",p]]);export{E as __pageData,m as default};
