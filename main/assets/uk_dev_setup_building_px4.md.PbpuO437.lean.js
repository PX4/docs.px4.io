import{_ as r,a as p,b as d,c}from"./chunks/qgc_setup_summary_airframe_firmware.mlA6F8dN.js";import{_ as u}from"./chunks/qgc_goto.BIYIp9sq.js";import{_ as k,c as m,a8 as l,G as e,w as s,B as h,o as g,j as a,a as o}from"./chunks/framework.BDnHobkS.js";const w=JSON.parse('{"title":"Збірка програмного забезпечення PX4","description":"","frontmatter":{},"headers":[],"relativePath":"uk/dev_setup/building_px4.md","filePath":"uk/dev_setup/building_px4.md"}'),b={name:"uk/dev_setup/building_px4.md"};function f(F,i,v,y,_,C){const t=h("tab"),n=h("tabs");return g(),m("div",null,[i[4]||(i[4]=l('<h1 id="збірка-програмного-забезпечення-px4" tabindex="-1">Збірка програмного забезпечення PX4 <a class="header-anchor" href="#збірка-програмного-забезпечення-px4" aria-label="Permalink to &quot;Збірка програмного забезпечення PX4&quot;">​</a></h1><p>Збірку прошивки PX4 для цільових апаратних платформ та симуляції можна здійснити з вихідного коду в консолі або в IDE.</p><p>You need to build PX4 in order to use <a href="./../simulation/">simulators</a>, or if you want to modify PX4 and create a custom build. If you just want to try out PX4 on real hardware then <a href="./../config/firmware.html">load the prebuilt binaries</a> using QGroundControl (there is no need to follow these instructions).</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Before following these instructions you must first install the <a href="./../dev_setup/dev_env.html">Developer Toolchain</a> for your host operating system and target hardware. If you have any problems after following these steps see the <a href="#troubleshooting">Troubleshooting</a> section below.</p></div><h2 id="завантаження-вихідного-коду-px4" tabindex="-1">Завантаження вихідного коду PX4 <a class="header-anchor" href="#завантаження-вихідного-коду-px4" aria-label="Permalink to &quot;Завантаження вихідного коду PX4&quot;">​</a></h2><p>The PX4 source code is stored on Github in the <a href="https://github.com/PX4/PX4-Autopilot" target="_blank" rel="noreferrer">PX4/PX4-Autopilot</a> repository.</p><p>To get the <em>very latest</em> (<code>main</code> branch) version onto your computer, enter the following command into a terminal:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/PX4/PX4-Autopilot.git</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --recursive</span></span></code></pre></div><p>Note that you may already have done this when installing the <a href="./../dev_setup/dev_env.html">Developer Toolchain</a></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>This is all you need to do in order to get the latest code. If needed you can also <a href="./../contribute/git_examples.html#get-a-specific-release">get the source code specific to a particular release</a>. <a href="./../contribute/git_examples.html">GIT Examples</a> provides a lot more information working with releases and contributing to PX4.</p></div><h2 id="first-build-using-a-simulator" tabindex="-1">First Build (Using a Simulator) <a class="header-anchor" href="#first-build-using-a-simulator" aria-label="Permalink to &quot;First Build (Using a Simulator)&quot;">​</a></h2><p>Спочатку ми зберемо цільову платформу симуляції з використанням консольного середовища. Це дозволяє нам перевірити налаштування системи перед її запуском на реальному обладнанні та IDE.</p><p>Navigate into the <strong>PX4-Autopilot</strong> directory. Depending on your operating system you will have installed either <a href="./../sim_gazebo_gz/">Gazebo SITL</a> or <a href="./../sim_gazebo_classic/">Gazebo Classic SITL</a> (if you don&#39;t know which you can try both).</p>',13)),e(n,null,{default:s(()=>[e(t,{name:"Gazebo"},{default:s(()=>i[0]||(i[0]=[a("p",null,[o("Start "),a("a",{href:"./../sim_gazebo_gz/"},"Gazebo SITL"),o(" using the following command:")],-1),a("div",{class:"language-sh vp-adaptive-theme"},[a("button",{title:"Copy Code",class:"copy"}),a("span",{class:"lang"},"sh"),a("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[a("code",null,[a("span",{class:"line"},[a("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"make"),a("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," px4_sitl"),a("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," gz_x500")])])])],-1)])),_:1}),e(t,{name:"Gazebo-Classic"},{default:s(()=>i[1]||(i[1]=[a("p",null,[o("Start "),a("a",{href:"./../sim_gazebo_gz/"},"Gazebo SITL"),o(" using the following command:")],-1),a("div",{class:"language-sh vp-adaptive-theme"},[a("button",{title:"Copy Code",class:"copy"}),a("span",{class:"lang"},"sh"),a("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[a("code",null,[a("span",{class:"line"},[a("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"make"),a("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," px4_sitl"),a("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," gazebo-classic")])])])],-1)])),_:1})]),_:1}),i[5]||(i[5]=l('<p>This will bring up the PX4 console:</p><p><img src="'+r+'" alt="PX4 Console"></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>You may need to start <em>QGroundControl</em> before proceeding, as the default PX4 configuration requires a ground control connection before takeoff. This can be <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/getting_started/download_and_install.html" target="_blank" rel="noreferrer">downloaded from here</a>.</p></div><p>The drone can be flown by typing the following command (as shown in the console above):</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pxh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">commander</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> takeoff</span></span></code></pre></div><p>The vehicle will take off and you&#39;ll see this in the simulator UI:</p>',6)),e(n,null,{default:s(()=>[e(t,{name:"Gazebo"},{default:s(()=>i[2]||(i[2]=[a("p",null,[a("img",{src:p,alt:"Gazebo UI with vehicle taking off"})],-1)])),_:1}),e(t,{name:"Gazebo-Classic"},{default:s(()=>i[3]||(i[3]=[a("p",null,[a("img",{src:d,alt:"Gazebo Classic UI with vehicle taking off"})],-1)])),_:1})]),_:1}),i[6]||(i[6]=l('<p>The drone can be landed by typing <code>commander land</code> and the whole simulation can be stopped by doing <strong>CTRL+C</strong> (or by entering <code>shutdown</code>).</p><p>Симуляція польоту з управлінням з боку наземного оператора є ближчою до реального запуску дрону. В польоті (режимі зльоту) натисніть на місце розташування на карті та пересуньте (увімкніть) повзунковий перемикач. Це перемістить літальний засіб.</p><p><img src="'+u+`" alt="QGroundControl GoTo"></p><h2 id="плати-на-основі-nuttx-pixhawk" tabindex="-1">Плати на основі NuttX / Pixhawk <a class="header-anchor" href="#плати-на-основі-nuttx-pixhawk" aria-label="Permalink to &quot;Плати на основі NuttX / Pixhawk&quot;">​</a></h2><h3 id="збірка-під-nuttx" tabindex="-1">Збірка під NuttX <a class="header-anchor" href="#збірка-під-nuttx" aria-label="Permalink to &quot;Збірка під NuttX&quot;">​</a></h3><p>To build for NuttX- or Pixhawk- based boards, navigate into the <strong>PX4-Autopilot</strong> directory and then call <code>make</code> with the build target for your board.</p><p>For example, to build for <a href="./../flight_controller/pixhawk4.html">Pixhawk 4</a> hardware you could use the following command:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PX4-Autopilot</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> px4_fmu-v5_default</span></span></code></pre></div><p>Успішне виконання виведе в консолі приблизно наступне в кінці:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> files</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> have</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> been</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> written</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/youruser/src/PX4-Autopilot/build/px4_fmu-v4_default</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[954/954] Creating /home/youruser/src/PX4-Autopilot/build/px4_fmu-v4_default/px4_fmu-v4_default.px4</span></span></code></pre></div><p>The first part of the build target <code>px4_fmu-v4</code> indicates the target flight controller hardware for the firmware. The suffix, in this case <code>_default</code>, indicates a firmware <em>configuration</em>, such as supporting or omitting particular features.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The <code>_default</code> suffix is optional. For example, <code>make px4_fmu-v5</code> and <code>px4_fmu-v5_default</code> result in the same firmware.</p></div><p>The following list shows the build commands for the <a href="./../flight_controller/autopilot_pixhawk_standard.html">Pixhawk standard</a> boards:</p><ul><li><p><a href="./../flight_controller/pixhawk6x-rt.html">Holybro Pixhawk 6X-RT (FMUv6X)</a>: <code>make px4_fmu-v6xrt_default</code></p></li><li><p><a href="./../flight_controller/pixhawk6x.html">Holybro Pixhawk 6X (FMUv6X)</a>: <code>make px4_fmu-v6x_default</code></p></li><li><p><a href="./../flight_controller/pixhawk6c.html">Holybro Pixhawk 6C (FMUv6C)</a>: <code>make px4_fmu-v6c_default</code></p></li><li><p><a href="./../flight_controller/pixhawk6c_mini.html">Holybro Pixhawk 6C Mini (FMUv6C)</a>: <code>make px4_fmu-v6c_default</code></p></li><li><p><a href="./../flight_controller/holybro_pix32_v6.html">Holybro Pix32 v6 (FMUv6C)</a>: <code>make px4_fmu-v6c_default</code></p></li><li><p><a href="./../flight_controller/pixhawk5x.html">Holybro Pixhawk 5X (FMUv5X)</a>: <code>make px4_fmu-v5x_default</code></p></li><li><p><a href="./../flight_controller/pixhawk4.html">Pixhawk 4 (FMUv5)</a>: <code>make px4_fmu-v5_default</code></p></li><li><p><a href="./../flight_controller/pixhawk4_mini.html">Pixhawk 4 Mini (FMUv5)</a>: <code>make px4_fmu-v5_default</code></p></li><li><p><a href="./../flight_controller/cuav_v5_plus.html">CUAV V5+ (FMUv5)</a>: <code>make px4_fmu-v5_default</code></p></li><li><p><a href="./../flight_controller/cuav_v5_nano.html">CUAV V5 nano (FMUv5)</a>: <code>make px4_fmu-v5_default</code></p></li><li><p><a href="./../flight_controller/pixracer.html">Pixracer (FMUv4)</a>: <code>make px4_fmu-v4_default</code></p></li><li><p><a href="./../flight_controller/pixhawk3_pro.html">Pixhawk 3 Pro</a>: <code>make px4_fmu-v4pro_default</code></p></li><li><p><a href="./../flight_controller/pixhawk_mini.html">Pixhawk Mini</a>: <code>make px4_fmu-v3_default</code></p></li><li><p><a href="./../flight_controller/pixhawk-2.html">Pixhawk 2 (Cube Black) (FMUv3)</a>: <code>make px4_fmu-v3_default</code></p></li><li><p><a href="./../flight_controller/mro_pixhawk.html">mRo Pixhawk (FMUv3)</a>: <code>make px4_fmu-v3_default</code> (supports 2MB Flash)</p></li><li><p><a href="./../flight_controller/holybro_pix32.html">Holybro pix32 (FMUv2)</a>: <code>make px4_fmu-v2_default</code></p></li><li><p><a href="./../flight_controller/pixfalcon.html">Pixfalcon (FMUv2)</a>: <code>make px4_fmu-v2_default</code></p></li><li><p><a href="./../flight_controller/dropix.html">Dropix (FMUv2)</a>: <code>make px4_fmu-v2_default</code></p></li><li><p><a href="./../flight_controller/pixhawk.html">Pixhawk 1 (FMUv2)</a>: <code>make px4_fmu-v2_default</code></p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>You <strong>must</strong> use a supported version of GCC to build this board (e.g. the same as used by <a href="./../test_and_ci/docker.html">CI/docker</a>) or remove modules from the build. Збірка прошивки за допомогою компілятора GCC, який не підтримується може зазнати невдачі, оскільки обсяг памʼяті, який займає PX4, близький до ліміту пам&#39;яті плати в 1 МБ.</p></div></li></ul><p>:::</p><ul><li>Pixhawk 1 with 2 MB flash: <code>make px4_fmu-v3_default</code></li></ul><p>Build commands for non-Pixhawk NuttX fight controllers (and for all other-boards) are provided in the documentation for the individual <a href="./../flight_controller/">flight controller boards</a>.</p><h3 id="завантаження-прошивки-прошивка-плати" tabindex="-1">Завантаження прошивки (Прошивка плати) <a class="header-anchor" href="#завантаження-прошивки-прошивка-плати" aria-label="Permalink to &quot;Завантаження прошивки (Прошивка плати)&quot;">​</a></h3><p>Append <code>upload</code> to the make commands to upload the compiled binary to the autopilot hardware via USB. Наприклад</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> px4_fmu-v4_default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upload</span></span></code></pre></div><p>Успішне виконання виведе в консолі приблизно наступне:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Erase</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [====================] 100.0%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Program:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [====================] 100.0%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Verify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [====================] 100.0%</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Rebooting.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[100%] Built target upload</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This is not supported when developing on WSL2. See <a href="./../dev_setup/dev_env_windows_wsl.html#flash-a-flight-control-board"> Windows Development Environment (WSL2-Based) &gt; Flash a Control Board</a>.</p></div><h2 id="інші-плати" tabindex="-1">Інші плати <a class="header-anchor" href="#інші-плати" aria-label="Permalink to &quot;Інші плати&quot;">​</a></h2><p>Build commands for other boards are given the <a href="./../flight_controller/">board-specific flight controller pages</a> (usually under a heading <em>Building Firmware</em>).</p><p>Список усіх конфігурацій й цілей можна викликати командою:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list_config_targets</span></span></code></pre></div><h2 id="компіляція-в-графічному-ide" tabindex="-1">Компіляція в графічному IDE <a class="header-anchor" href="#компіляція-в-графічному-ide" aria-label="Permalink to &quot;Компіляція в графічному IDE&quot;">​</a></h2><p><a href="./../dev_setup/vscode.html">VSCode</a> is the officially supported (and recommended) IDE for PX4 development. VSCode просто налаштувати та може використатися для компіляції PX4 як для симуляцій так і для апаратних середовищ.</p><h2 id="усунення-проблем" tabindex="-1">Усунення проблем <a class="header-anchor" href="#усунення-проблем" aria-label="Permalink to &quot;Усунення проблем&quot;">​</a></h2><h3 id="загальні-помилки-збірки" tabindex="-1">Загальні помилки збірки <a class="header-anchor" href="#загальні-помилки-збірки" aria-label="Permalink to &quot;Загальні помилки збірки&quot;">​</a></h3><p>Більшість проблем при збірці спричинені залежними гілками коду які не збігаються або не до кінця очищеним середовищем збірки. Updating the submodules and doing a <code>distclean</code> can fix these kinds of errors:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> submodule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --recursive</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> distclean</span></span></code></pre></div><h3 id="прошивка-переповнена-на-xxx-баит" tabindex="-1">Прошивка переповнена на XXX байт <a class="header-anchor" href="#прошивка-переповнена-на-xxx-баит" aria-label="Permalink to &quot;Прошивка переповнена на XXX байт&quot;">​</a></h3><p>The <code>region &#39;flash&#39; overflowed by XXXX bytes</code> error indicates that the firmware is too large for the target hardware platform. This is common for <code>make px4_fmu-v2_default</code> builds, where the flash size is limited to 1MB.</p><p>If you&#39;re building the <em>vanilla</em> master branch, the most likely cause is using an unsupported version of GCC. In this case, install the version specified in the <a href="./../dev_setup/dev_env.html">Developer Toolchain</a> instructions.</p><p>If building your own branch, it is possible that you have increased the firmware size over the 1MB limit. В цьому випадку вам доведеться видалити всі не потрібні при цій збірці модулі та драйвера.</p><h3 id="macos-помилка-надто-багато-відкритих-фаилів" tabindex="-1">macOS: Помилка &quot;надто багато відкритих файлів&quot; <a class="header-anchor" href="#macos-помилка-надто-багато-відкритих-фаилів" aria-label="Permalink to &quot;macOS: Помилка &quot;надто багато відкритих файлів&quot;&quot;">​</a></h3><p>MacOS дозволяє тримати за замовчуванням відкритими не більше 256 файлів в усіх запущених процесах. При збірці PX4 відкривається велика кількість файлів, тож може статися перевищення цього ліміту.</p><p>The build toolchain will then report <code>Too many open files</code> for many files, as shown below:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/usr/local/Cellar/gcc-arm-none-eabi/20171218/bin/../lib/gcc/arm-none-eabi/7.2.1/../../../../arm-none-eabi/bin/ld:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cannot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> find</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NuttX/nuttx/fs/libfs.a:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Too</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> many</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> open</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> files</span></span></code></pre></div><p>Рішення полягає в збільшенні максимально дозволеної кількості відкритих файлів (наприклад, до 300). You can do this in the macOS <em>Terminal</em> for each session:</p><ul><li><p>Run this script <a href="https://github.com/PX4/PX4-Autopilot/blob/main/Tools/mac_set_ulimit.sh" target="_blank" rel="noreferrer">Tools/mac_set_ulimit.sh</a>, or</p></li><li><p>Введіть наступну команду:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ulimit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span></span></code></pre></div></li></ul><h3 id="macos-catalina-складнощі-при-використанні-cmake" tabindex="-1">macOS Catalina: Складнощі при використанні cmake <a class="header-anchor" href="#macos-catalina-складнощі-при-використанні-cmake" aria-label="Permalink to &quot;macOS Catalina: Складнощі при використанні cmake&quot;">​</a></h3><p>As of macOS Catalina 10.15.1 there may be problems when trying to build the simulator with <em>cmake</em>. Якщо у вас виникли проблеми на цій платформі, спробуйте виконати наступну команду в терміналі:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xcode-select</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/include/</span></span></code></pre></div><h3 id="ubuntu-18-04-помилки-компіляціі-пов-язані-з-arm-none-eabi-gcc" tabindex="-1">Ubuntu 18.04: Помилки компіляції пов&#39;язані з arm_none_eabi_gcc <a class="header-anchor" href="#ubuntu-18-04-помилки-компіляціі-пов-язані-з-arm-none-eabi-gcc" aria-label="Permalink to &quot;Ubuntu 18.04: Помилки компіляції пов&#39;язані з arm_none_eabi_gcc&quot;">​</a></h3><p>Build issues related to <code>arm_none_eabi_gcc</code>may be due to a broken g++ toolchain installation. Ви можете перевірити чи це так, перевіряючи чи є відсутні залежності:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arm-none-eabi-gcc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arm-none-eabi-g++</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arm-none-eabi-gdb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arm-none-eabi-size</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span></code></pre></div><p>Приклад виводу bash з відсутніми залежностями:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arm-none-eabi-gdb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arm-none-eabi-gdb:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> command</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> found</span></span></code></pre></div><p>This can be resolved by removing and <a href="https://askubuntu.com/questions/1243252/how-to-install-arm-none-eabi-gdb-on-ubuntu-20-04-lts-focal-fossa" target="_blank" rel="noreferrer">reinstalling the compiler</a>.</p><h3 id="ubuntu-18-04-visual-studio-code-не-може-спостерігати-за-змінами-в-коді-у-великому-робочому-середовищі" tabindex="-1">Ubuntu 18.04: &quot;Visual Studio Code не може спостерігати за змінами в коді у великому робочому середовищі <a class="header-anchor" href="#ubuntu-18-04-visual-studio-code-не-може-спостерігати-за-змінами-в-коді-у-великому-робочому-середовищі" aria-label="Permalink to &quot;Ubuntu 18.04: &quot;Visual Studio Code не може спостерігати за змінами в коді у великому робочому середовищі&quot;">​</a></h3><p>See <a href="./../dev_setup/vscode.html#troubleshooting">Visual Studio Code IDE (VSCode) &gt; Troubleshooting</a>.</p><h3 id="не-вдалося-імпортувати-пакети-python" tabindex="-1">Не вдалося імпортувати пакети Python <a class="header-anchor" href="#не-вдалося-імпортувати-пакети-python" aria-label="Permalink to &quot;Не вдалося імпортувати пакети Python&quot;">​</a></h3><p>&quot;Failed to import&quot; errors when running the <code>make px4_sitl jmavsim</code> command indicates that some Python packages are not installed (where expected).</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Failed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jinja2:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> named</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;jinja2&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">You</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> may</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> need</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> using:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    pip3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jinja2</span></span></code></pre></div><p>Якщо ці залежності вже встановлені, це може бути тому, що на комп&#39;ютері є декілька версій Python (наприклад Python 2.7.16, Python 3.8.3) і модуль не існує в версії, яка використовується в інструментарії збірки.</p><p>Ви зможете виправити це явним чином встановивши залежності як показано:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pyserial</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> empty</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> toml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> numpy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pandas</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jinja2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pyyaml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pyros-genmsg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> packaging</span></span></code></pre></div><h2 id="цілі-збірки-px4" tabindex="-1">Цілі збірки PX4 <a class="header-anchor" href="#цілі-збірки-px4" aria-label="Permalink to &quot;Цілі збірки PX4&quot;">​</a></h2><p>The previous sections showed how you can call <em>make</em> to build a number of different targets, start simulators, use IDEs etc. This section shows how <em>make</em> options are constructed and how to find the available choices.</p><p>The full syntax to call <em>make</em> with a particular configuration and initialization file is:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [VENDOR_][MODEL][_VARIANT] [VIEWER_MODEL_DEBUGGER_WORLD]</span></span></code></pre></div><p><strong>VENDOR_MODEL_VARIANT</strong>: (also known as <code>CONFIGURATION_TARGET</code>)</p><ul><li><strong>VENDOR:</strong> The manufacturer of the board: <code>px4</code>, <code>aerotenna</code>, <code>airmind</code>, <code>atlflight</code>, <code>auav</code>, <code>beaglebone</code>, <code>intel</code>, <code>nxp</code>, etc. The vendor name for Pixhawk series boards is <code>px4</code>.</li><li><strong>MODEL:</strong> The <em>board model</em> &quot;model&quot;: <code>sitl</code>, <code>fmu-v2</code>, <code>fmu-v3</code>, <code>fmu-v4</code>, <code>fmu-v5</code>, <code>navio2</code>, etc.</li><li><strong>VARIANT:</strong> Indicates particular configurations: e.g. <code>bootloader</code>, <code>cyphal</code>, which contain components that are not present in the <code>default</code> configuration. Most commonly this is <code>default</code>, and may be omitted.</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You can get a list of <em>all</em> available <code>CONFIGURATION_TARGET</code> options using the command below:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list_config_targets</span></span></code></pre></div></div><p><strong>VIEWER_MODEL_DEBUGGER_WORLD:</strong></p><ul><li><p><strong>VIEWER:</strong> This is the simulator (&quot;viewer&quot;) to launch and connect: <code>gz</code>, <code>gazebo</code>, <code>jmavsim</code>, <code>none</code></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>none</code> can be used if you want to launch PX4 and wait for a simulator (jmavsim, Gazebo, Gazebo Classic, or some other simulator). For example, <code>make px4_sitl none_iris</code> launches PX4 without a simulator (but with the iris airframe).</p></div></li></ul><p>:::</p><ul><li><p><strong>MODEL:</strong> The <em>vehicle</em> model to use (e.g. <code>iris</code> (<em>default</em>), <code>rover</code>, <code>tailsitter</code>, etc), which will be loaded by the simulator. The environment variable <code>PX4_SIM_MODEL</code> will be set to the selected model, which is then used in the <a href="./../simulation/#startup-scripts">startup script</a> to select appropriate parameters.</p></li><li><p><strong>DEBUGGER:</strong> Debugger to use: <code>none</code> (<em>default</em>), <code>ide</code>, <code>gdb</code>, <code>lldb</code>, <code>ddd</code>, <code>valgrind</code>, <code>callgrind</code>. For more information see <a href="./../debug/simulation_debugging.html">Simulation Debugging</a>.</p></li><li><p><strong>WORLD:</strong> (Gazebo Classic only). Set the world (<a href="https://github.com/PX4/PX4-SITL_gazebo-classic/tree/main/worlds" target="_blank" rel="noreferrer">PX4-Autopilot/Tools/simulation/gazebo-classic/sitl_gazebo-classic/worlds</a>) that is loaded. Default is <a href="https://github.com/PX4/PX4-SITL_gazebo-classic/blob/main/worlds/empty.world" target="_blank" rel="noreferrer">empty.world</a>. For more information see <a href="./../sim_gazebo_classic/#loading-a-specific-world">Gazebo Classic &gt; Loading a Specific World</a>.</p></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You can get a list of <em>all</em> available <code>VIEWER_MODEL_DEBUGGER_WORLD</code> options using the command below:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> px4_sitl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list_vmd_make_targets</span></span></code></pre></div></div><div class="info custom-block"><p class="custom-block-title">INFO</p><ul><li>Most of the values in the <code>CONFIGURATION_TARGET</code> and <code>VIEWER_MODEL_DEBUGGER</code> have defaults, and are hence optional. For example, <code>gazebo-classic</code> is equivalent to <code>gazebo-classic_iris</code> or <code>gazebo-classic_iris_none</code>.</li><li>Ви можете використати три підкреслювання, якщо хочете вказати значення за замовчуванням між двома іншими налаштуваннями. For example, <code>gazebo-classic___gdb</code> is equivalent to <code>gazebo-classic_iris_gdb</code>.</li><li>You can use a <code>none</code> value for <code>VIEWER_MODEL_DEBUGGER</code> to start PX4 and wait for a simulator. For example start PX4 using <code>make px4_sitl_default none</code> and jMAVSim using <code>./Tools/simulation/jmavsim/jmavsim_run.sh -l</code>.</li></ul></div><p>The <code>VENDOR_MODEL_VARIANT</code> options map to particular <em>px4board</em> configuration files in the PX4 source tree under the <a href="https://github.com/PX4/PX4-Autopilot/tree/main/boards" target="_blank" rel="noreferrer">/boards</a> directory. Specifically <code>VENDOR_MODEL_VARIANT</code> maps to a configuration file <strong>boards/VENDOR/MODEL/VARIANT.px4board</strong> (e.g. <code>px4_fmu-v5_default</code> corresponds to <a href="https://github.com/PX4/PX4-Autopilot/blob/main/boards/px4/fmu-v5/default.px4board" target="_blank" rel="noreferrer">boards/px4/fmu-v5/default.px4board</a>).</p><p>Додаткові цілі збірки обговорюються в відповідних розділах:</p><ul><li><code>bloaty_compare_master</code>: <a href="./../debug/binary_size_profiling.html">Binary Size Profiling</a></li><li>...</li></ul><h2 id="firmware-version-git-tags" tabindex="-1">Firmware Version &amp; Git Tags <a class="header-anchor" href="#firmware-version-git-tags" aria-label="Permalink to &quot;Firmware Version &amp; Git Tags&quot;">​</a></h2><p>The <em>PX4 Firmware Version</em> and <em>Custom Firmware Version</em> are published using the MAVLink <a href="https://mavlink.io/en/messages/common.html#AUTOPILOT_VERSION" target="_blank" rel="noreferrer">AUTOPILOT_VERSION</a> message, and displayed in the <em>QGroundControl</em> <strong>Setup &gt; Summary</strong> airframe panel:</p><p><img src="`+c+'" alt="Firmware info"></p><p>These are extracted at build time from the active <em>git tag</em> for your repo tree. The git tag should be formatted as <code>&lt;PX4-version&gt;-&lt;vendor-version&gt;</code> (e.g. the tag in the image above was set to <code>v1.8.1-2.22.1</code>).</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>If you use a different git tag format, versions information may not be displayed properly.</p></div>',81))])}const P=k(b,[["render",f]]);export{w as __pageData,P as default};
