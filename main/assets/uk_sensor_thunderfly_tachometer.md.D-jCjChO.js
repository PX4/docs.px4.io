import{_ as t}from"./chunks/tfrpm01_electronics.bFW7Tc30.js";import{_ as a,a as r}from"./chunks/transmissive_probe.9kPBzGtd.js";import{_ as s,c as i,a8 as n,o}from"./chunks/framework.BDnHobkS.js";const f=JSON.parse('{"title":"Датчик тахометра ThunderFly TFRPM01","description":"","frontmatter":{},"headers":[],"relativePath":"uk/sensor/thunderfly_tachometer.md","filePath":"uk/sensor/thunderfly_tachometer.md"}'),l={name:"uk/sensor/thunderfly_tachometer.md"};function h(d,e,p,c,u,m){return o(),i("div",null,e[0]||(e[0]=[n('<h1 id="датчик-тахометра-thunderfly-tfrpm01" tabindex="-1">Датчик тахометра ThunderFly TFRPM01 <a class="header-anchor" href="#датчик-тахометра-thunderfly-tfrpm01" aria-label="Permalink to &quot;Датчик тахометра ThunderFly TFRPM01&quot;">​</a></h1><p>The <a href="https://github.com/ThunderFly-aerospace/TFRPM01" target="_blank" rel="noreferrer">TFRPM01</a> tachometer is a small, and low system demanding revolution-counter.</p><p>Сама плата не містить фактичного датчика, але може бути використана з багатьма різними типами датчиків/зондів для підрахунку обертів. Він має роз&#39;єм I²C для підключення до PX4 та підключений до фактичного датчика через 3-контактний роз&#39;єм. Також він має світлодіод, який надає базову діагностичну інформацію.</p><p><img src="'+t+'" alt="TFRPM01A"></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The TFRPM01 sensor is open-source hardware commercially available from <a href="https://www.thunderfly.cz/" target="_blank" rel="noreferrer">ThunderFly s.r.o.</a> (manufacturing data is <a href="https://github.com/ThunderFly-aerospace/TFRPM01" target="_blank" rel="noreferrer">available on GitHub</a>).</p></div><h2 id="налаштування-програмного-забезпечення" tabindex="-1">Налаштування програмного забезпечення <a class="header-anchor" href="#налаштування-програмного-забезпечення" aria-label="Permalink to &quot;Налаштування програмного забезпечення&quot;">​</a></h2><p>Плата обладнана (двома крізь прохідними) роз&#39;ємами I²C для підключення до PX4 та має 3-контактний роз&#39;єм, який можна використовувати для підключення до різних датчиків:</p><ul><li>TFRPM01 може бути підключений до будь-якого порту I²C.</li><li>TFRPM01 має роз&#39;єм з 3 контактами (з входом з підтяжкою), який може бути підключений до різних типів зондів. <ul><li>Апаратне забезпечення датчика/зонда потребує імпульсного сигналу. The signal input accepts +5V TTL logic or <a href="https://en.wikipedia.org/wiki/Open_collector" target="_blank" rel="noreferrer">open collector</a> outputs. Максимальна частота пульса - 20 кГц з циклом роботи 50%.</li><li>Раз&#39;єм зонду забезпечує живлення +5V від шини I²C, максимальна потужність, яку можна використовувати, обмежена фільтром RC (див. схеми для деталей).</li></ul></li></ul><p>Електроніка TFRPM01A обладнана сигнальним світлодіодом, який може бути використаний для перевірки правильного підключення датчика. Світлодіод загоряється, коли вхід імпульсу заземлений або відкритий для логічного 0, тому ви можете перевірити, що датчик працює правильно, просто обертаючи ротор вручну.</p><h3 id="зонд-сенсора-ефекту-холла" tabindex="-1">Зонд сенсора ефекту Холла <a class="header-anchor" href="#зонд-сенсора-ефекту-холла" aria-label="Permalink to &quot;Зонд сенсора ефекту Холла&quot;">​</a></h3><p>Датчики Холла (магнітно-оперовані) ідеально підходять для жорстких умов, де бруд, пил і вода можуть контактувати з відчуваним ротором.</p><p>Багато різних датчиків ефекту Холла є комерційно доступними. For example, a <a href="https://m.littelfuse.com/media?resourcetype=datasheets&amp;itemid=6d69d457-770e-46ba-9998-012c5e0aedd7&amp;filename=littelfuse-hall-effect-sensors-55100-datasheet" target="_blank" rel="noreferrer">55100 Miniature Flange Mounting Proximity Sensor</a> is a good choice.</p><p><img src="'+a+'" alt="Example of Hall effect probe"></p><h3 id="оптичнии-датчик-зонду" tabindex="-1">Оптичний датчик зонду <a class="header-anchor" href="#оптичнии-датчик-зонду" aria-label="Permalink to &quot;Оптичний датчик зонду&quot;">​</a></h3><p>Оптичний сенсор також може бути використаний (і може бути кращим варіантом, залежно від вимог до вимірювань). Як трансмісивний, так і рефлекторний типи сенсорів можуть бути використані для генерації імпульсів.</p><p><img src="'+r+'" alt="Example of optical transmissive probe"></p><h2 id="налаштування-програмного-забезпечення-1" tabindex="-1">Налаштування програмного забезпечення <a class="header-anchor" href="#налаштування-програмного-забезпечення-1" aria-label="Permalink to &quot;Налаштування програмного забезпечення&quot;">​</a></h2><h3 id="запуск-драивера" tabindex="-1">Запуск драйвера <a class="header-anchor" href="#запуск-драивера" aria-label="Permalink to &quot;Запуск драйвера&quot;">​</a></h3><p>Драйвер не запускається автоматично (в будь-якій конструкції). You will need to start it manually, either using the <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/analyze_view/mavlink_console.html" target="_blank" rel="noreferrer">QGroundControl MAVLink Console</a> or by adding the driver to the <a href="./../concept/system_startup.html#customizing-the-system-startup">startup script</a> on an SD card.</p><h4 id="запустіть-драивер-з-консолі" tabindex="-1">Запустіть драйвер з консолі <a class="header-anchor" href="#запустіть-драивер-з-консолі" aria-label="Permalink to &quot;Запустіть драйвер з консолі&quot;">​</a></h4><p>Start the driver from the <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/analyze_view/mavlink_console.html" target="_blank" rel="noreferrer">console</a> using the command:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pcf8583</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> numbe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>де:</p><ul><li><code>-X</code> means that it is an external bus.</li><li><code>&lt;bus number&gt;</code> is the bus number to which the device is connected</li></ul><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The bus number in code <code>-b &lt;bus number&gt;</code> may not match the bus labels on the autopilot. Наприклад, при використанні CUAV V5+ або CUAV Nano:</p><table tabindex="0"><thead><tr><th>Мітка автопілоту</th><th>-b номер</th></tr></thead><tbody><tr><td>I2C1</td><td>-X -b 4</td></tr><tr><td>I2C2</td><td>-X -b 2</td></tr><tr><td>I2C3</td><td>-X -b 1</td></tr></tbody></table><p>The <code>pcf8583 start</code> command outputs the corresponding autopilot bus name/label for each bus number.</p></div><h3 id="тестування" tabindex="-1">Тестування <a class="header-anchor" href="#тестування" aria-label="Permalink to &quot;Тестування&quot;">​</a></h3><p>Ви можете перевірити, що лічильник працює, використовуючи кілька методів</p><h4 id="px4-nuttx-консоль-mavlink" tabindex="-1">PX4 (NuttX) Консоль MAVLink <a class="header-anchor" href="#px4-nuttx-консоль-mavlink" aria-label="Permalink to &quot;PX4 (NuttX) Консоль MAVLink&quot;">​</a></h4><p>The <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/analyze_view/mavlink_console.html" target="_blank" rel="noreferrer">QGroundControl MAVLink Console</a> can also be used to check that the driver is running and the UORB topics it is outputting.</p><p>Щоб перевірити статус драйвера TFRPM01, виконайте команду:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pcf8583</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span></code></pre></div><p>Якщо драйвер працює, порт I²C буде надруковано разом з іншими основними параметрами запущеного екземпляру. Якщо драйвер не працює, його можна запустити за допомогою процедури, описаної вище.</p><p>The <a href="./../modules/modules_command.html#listener">listener</a> command allows you to monitor RPM UORB messages from the running driver.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">listener</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpm</span></span></code></pre></div><p>For periodic display, you can add <code>-n 50</code> parameter after the command, which prints the next 50 messages.</p><h4 id="qgroundcontrol-mavlink-inspector" tabindex="-1">QGroundControl MAVLink Inspector <a class="header-anchor" href="#qgroundcontrol-mavlink-inspector" aria-label="Permalink to &quot;QGroundControl MAVLink Inspector&quot;">​</a></h4><p>The QGroundControl <a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/analyze_view/mavlink_inspector.html" target="_blank" rel="noreferrer">Mavlink Inspector</a> can be used to observe MAVLink messages from PX4, including <a href="https://mavlink.io/en/messages/common.html#RAW_RPM" target="_blank" rel="noreferrer">RAW_RPM</a> emitted by the driver:</p><ol><li>Start the inspector from the QGC menu: <strong>Analyze tools &gt; Mavlink Inspector</strong></li><li>Check that <code>RAW_RPM</code> is present in the list of messages (if it is missing, check that the driver is running).</li></ol><h3 id="налаштування-параметрів" tabindex="-1">Налаштування параметрів <a class="header-anchor" href="#налаштування-параметрів" aria-label="Permalink to &quot;Налаштування параметрів&quot;">​</a></h3><p>Зазвичай, сенсори можуть бути використані без конфігурації, але значення обертів на хвилину повинні відповідати кратними реальним обертам. It is because the <code>PCF8583_MAGNET</code> parameter needs to correspond to the real number of pulses per single revolution of the sensed rotor. Якщо потрібно, наступні параметри слід налаштувати:</p><ul><li><a href="./../advanced_config/parameter_reference.html#PCF8583_POOL">PCF8583_POOL</a> — pooling interval between readout the counted number</li><li><a href="./../advanced_config/parameter_reference.html#PCF8583_RESET">PCF8583_RESET</a> — Counter value where the counted number should be reset to zero.</li><li><a href="./../advanced_config/parameter_reference.html#PCF8583_MAGNET">PCF8583_MAGNET</a> — Number of pulses per revolution e.g. number of magnets at a rotor disc.</li></ul><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The parameters above appear in QGC after the driver/PX4 are restarted.</p><p>Якщо параметри конфігурації не доступні після перезапуску, то вам слід перевірити, чи відбувся запуск драйвера. It may be that the <a href="./../peripherals/serial_configuration.html#configuration-parameter-missing-from-qgroundcontrol">driver is not present in the firmware</a>, in which case it must be added to the board configuration:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drivers/rpm/pcf8583</span></span></code></pre></div></div>',42)]))}const v=s(l,[["render",h]]);export{f as __pageData,v as default};
