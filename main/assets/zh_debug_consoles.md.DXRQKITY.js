import{_ as s,c as a,a8 as t,o as i}from"./chunks/framework.BDnHobkS.js";const u=JSON.parse('{"title":"PX4 控制台/Shell","description":"","frontmatter":{},"headers":[],"relativePath":"zh/debug/consoles.md","filePath":"zh/debug/consoles.md"}'),l={name:"zh/debug/consoles.md"};function o(n,e,h,p,d,c){return i(),a("div",null,e[0]||(e[0]=[t(`<h1 id="px4-控制台-shell" tabindex="-1">PX4 控制台/Shell <a class="header-anchor" href="#px4-控制台-shell" aria-label="Permalink to &quot;PX4 控制台/Shell&quot;">​</a></h1><p>PX4 enables terminal access to the system through the <a href="./../debug/mavlink_shell.html">MAVLink Shell</a> and the <a href="./../debug/system_console.html">System Console</a>.</p><p>这里将说明它们的主要区别，以及如何使用。</p><p><a id="console_vs_shell"></a></p><h2 id="system-console-vs-shells" tabindex="-1">System Console vs. Shells <a class="header-anchor" href="#system-console-vs-shells" aria-label="Permalink to &quot;System Console vs. Shells&quot;">​</a></h2><p>The PX4 <em>System Console</em> provides low-level access to the system, debug output and analysis of the system boot process.</p><p>There is just one <em>System Console</em>, which runs on one specific UART (the debug port, as configured in NuttX), and is commonly attached to a computer via an FTDI cable (or some other debug adapter like a <a href="https://kb.zubax.com/display/MAINKB/Dronecode+Probe+documentation" target="_blank" rel="noreferrer">Dronecode probe</a>).</p><ul><li>Used for <em>low-level debugging/development</em>: bootup, NuttX, startup scripts, board bringup, development on central parts of PX4 (e.g. uORB).</li><li>更具体一点，这里是包括自启动的用户应用在内的整个PX4系统下所有启动过程唯一的输出位置。</li></ul><p>Shell 提供对系统的上层访问能力：</p><ul><li>用于执行基础的模块调试运行命令。</li><li>Only <em>directly</em> display the output of modules you start.</li><li>Cannot <em>directly</em> display the output of tasks running on the work queue.</li><li>在 PX4 系统无法启动时无助于调试（它并没有运行）。</li></ul><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The <code>dmesg</code> command is now available through the shell on some boards, enabling much lower level debugging than previously possible. For example, with <code>dmesg -f &amp;</code> you also see the output of background tasks.</p></div><p><a href="../debug/system_console.md">系统控制台（System Console）</a>在调试系统无法启动时十分必要，它会在飞控板上电后输出启动日志。 Since MAVLink provides more flexibility, currently only the <a href="./../debug/mavlink_shell.html">MAVLink Shell</a> is used.</p><p>The <a href="./../debug/system_console.html">System Console</a> is essential when the system does not boot (it displays the system boot log when power-cycling the board). The <a href="./../debug/mavlink_shell.html">MAVLink Shell</a> is much easier to setup, and so is more generally recommended for most debugging.</p><p><a id="using_the_console"></a></p><h2 id="使用控制台-shell" tabindex="-1">使用控制台/Shell <a class="header-anchor" href="#使用控制台-shell" aria-label="Permalink to &quot;使用控制台/Shell&quot;">​</a></h2><p>The MAVLink shell/console and the <a href="./../debug/system_console.html">System Console</a> are used in much the same way.</p><p>For example, type <code>ls</code> to view the local file system, <code>free</code> to see the remaining free RAM, <code>dmesg</code> to look at boot output.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nsh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nsh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">free</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nsh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dmesg</span></span></code></pre></div><p>Below are a couple of commands which can be used in the <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=139629410" target="_blank" rel="noreferrer">NuttShell</a> to get insights of the system.</p><p>此 NSH 命令提供剩余的可用内存：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">free</span></span></code></pre></div><p>top命令显示每个应用成虚使用的堆栈情况：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">top</span></span></code></pre></div><p>注意堆栈使用量是通过堆栈着色计算的，并且是任务开始以来的最大值（不是当前使用量）。</p><p>要查看工作队列的运行抢空以及运行速度，使用：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">work_queue</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span></code></pre></div><p>调试 uORB 主题：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uorb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> top</span></span></code></pre></div><p>检查特定的 uORB 主题：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">listener</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">topic_nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>Many other system commands and modules are listed in the <a href="./../modules/modules_main.html">Modules and Command Reference</a> (e.g. <code>top</code>, <code>listener</code>, etc.).</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Some commands may be disabled on some boards (i.e. the some modules are not included in firmware for boards with RAM or FLASH constraints). In this case you will see the response: <code>command not found</code></p></div>`,32)]))}const m=s(l,[["render",o]]);export{u as __pageData,m as default};
