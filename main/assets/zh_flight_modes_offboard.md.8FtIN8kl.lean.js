import{_ as t}from"./chunks/position_fixed.t2m3lWVy.js";import{_ as o,c as a,a8 as i,o as l}from"./chunks/framework.BDnHobkS.js";const _=JSON.parse('{"title":"Offboard 模式","description":"","frontmatter":{},"headers":[],"relativePath":"zh/flight_modes/offboard.md","filePath":"zh/flight_modes/offboard.md"}'),r={name:"zh/flight_modes/offboard.md"};function d(s,e,n,c,p,h){return l(),a("div",null,e[0]||(e[0]=[i('<h1 id="offboard-模式" tabindex="-1">Offboard 模式 <a class="header-anchor" href="#offboard-模式" aria-label="Permalink to &quot;Offboard 模式&quot;">​</a></h1><img src="'+t+`" title="Position fix required (e.g. GPS)" width="30px"><p>飞行器根据飞行控制栈外部（如机载计算机）提供的设定值控制位置、速度、加速度、姿态以及推力/力矩。 The setpoints may be provided using MAVLink (or a MAVLink API such as <a href="https://mavsdk.mavlink.io/" target="_blank" rel="noreferrer">MAVSDK</a>) or by <a href="./../ros2/">ROS 2</a>.</p><p>PX4 requires that the external controller provides a continuous 2Hz &quot;proof of life&quot; signal, by streaming any of the supported MAVLink setpoint messages or the ROS 2 <a href="./../msg_docs/OffboardControlMode.html">OffboardControlMode</a> message. PX4只有在收到该种信号超过1秒后才有效，如果该种信号停止飞行控制栈将重新获得控制权（脱离Offboard模式）。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><ul><li>此模式需要位置或位/姿信息 - 例如 GPS、光流、视觉惯性里程计、mocap 等。</li><li>RC control is disabled except to change modes (you can also fly without any manual controller at all by setting the parameter <a href="./../advanced_config/parameter_reference.html#COM_RC_IN_MODE">COM_RC_IN_MODE</a> to 4: Stick input disabled).</li><li>The vehicle must be already be receiving a stream of MAVLink setpoint messages or ROS 2 <a href="./../msg_docs/OffboardControlMode.html">OffboardControlMode</a> messages before arming in offboard mode or switching to offboard mode when flying.</li><li>The vehicle will exit offboard mode if MAVLink setpoint messages or <code>OffboardControlMode</code> are not received at a rate of &gt; 2Hz.</li><li>并非所有 MAVLink 支持的坐标系和字段值都被设定值消息和飞行器支持。 Read the sections below <em>carefully</em> to ensure only supported values are used.</li></ul></div><h2 id="描述" tabindex="-1">描述 <a class="header-anchor" href="#描述" aria-label="Permalink to &quot;描述&quot;">​</a></h2><p>Offboard模式通过设置位置、速度、加速、姿态、姿态角速率或力/扭矩设定值来控制飞行器的位置和姿态。</p><p>PX4 must receive a stream of MAVLink setpoint messages or the ROS 2 <a href="./../msg_docs/OffboardControlMode.html">OffboardControlMode</a> at 2 Hz as proof that the external controller is healthy. 该消息必须持续发送1秒以上PX4才能在Offboard模式下解锁或在飞行中切换至Offboard模式。 If the rate falls below 2Hz while under external control PX4 will switch out of offboard mode after a timeout (<a href="#COM_OF_LOSS_T">COM_OF_LOSS_T</a>), and attempt to land or perform some other failsafe action. The action depends on whether or not RC control is available, and is defined in the parameter <a href="#COM_OBL_RC_ACT">COM_OBL_RC_ACT</a>.</p><p>当使用 MAVLink 时，设定值消息既传达了外部控制器&quot;正常运行&quot;的信号也传达了设定值本身。 Offboard模式下要保持位置，飞行器必须接收到一个包含当前位置设定值的消息指令。</p><p>When using ROS 2 the proof that the external source is alive is provided by a stream of <a href="./../msg_docs/OffboardControlMode.html">OffboardControlMode</a> messages, while the actual setpoint is provided by publishing to one of the setpoint uORB topics, such as <a href="./../msg_docs/TrajectorySetpoint.html">TrajectorySetpoint</a>. In order to hold position in this case the vehicle must receive a stream of <code>OffboardControlMode</code> but would only need the <code>TrajectorySetpoint</code> once.</p><p>请注意，Offboard模式只支持比较有限的 MAVLink 指令和消息。 其他操作如起飞、降落、返航，最好使用适当的模式来处理。 像上传、下载任务这样的操作可以在任何模式下执行。</p><h2 id="ros-2-消息" tabindex="-1">ROS 2 消息 <a class="header-anchor" href="#ros-2-消息" aria-label="Permalink to &quot;ROS 2 消息&quot;">​</a></h2><p>以下 ROS 2 消息及其特定字段和字段值在特定的框架下是允许的。 In addition to providing heartbeat functionality, <code>OffboardControlMode</code> has two other main purposes:</p><ol><li>Controls the level of the <a href="./../flight_stack/controller_diagrams.html">PX4 control architecture</a> at which offboard setpoints must be injected, and disables the bypassed controllers.</li><li>确定需要哪种有效估计(位置或速度)，以及应该使用哪种设定值消息。</li></ol><p>The <code>OffboardControlMode</code> message is defined as shown.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Off-board control mode</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uint64</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> timestamp</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		# time since system start (microseconds)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> position</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> velocity</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> acceleration</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> attitude</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> body_rate</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> thrust_and_torque</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> direct_actuator</span></span></code></pre></div><p>The fields are ordered in terms of priority such that <code>position</code> takes precedence over <code>velocity</code> and later fields, <code>velocity</code> takes precedence over <code>acceleration</code>, and so on. 第一个非零字段(从上到下) 定义了Offboard模式所需的有效估计以及可用的设定值消息。 For example, if the <code>acceleration</code> field is the first non-zero value, then PX4 requires a valid <code>velocity estimate</code>, and the setpoint must be specified using the <code>TrajectorySetpoint</code> message.</p><table tabindex="0"><thead><tr><th>期望控制对象</th><th>位置</th><th>速度</th><th>加速度</th><th>姿态</th><th>姿态角速率</th><th>执行器字段</th><th>直接给电机</th><th>所需状态估计</th><th>所需消息</th></tr></thead><tbody><tr><td>位置 (NED)</td><td>✓</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>位置</td><td><a href="./../msg_docs/TrajectorySetpoint.html">TrajectorySetpoint</a></td></tr><tr><td>速度 (NED)</td><td>✗</td><td>✓</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>速度</td><td><a href="./../msg_docs/TrajectorySetpoint.html">TrajectorySetpoint</a></td></tr><tr><td>加速度（NED）</td><td>✗</td><td>✗</td><td>✓</td><td>-</td><td>-</td><td>-</td><td>-</td><td>速度</td><td><a href="./../msg_docs/TrajectorySetpoint.html">TrajectorySetpoint</a></td></tr><tr><td>姿态(FRD)</td><td>✗</td><td>✗</td><td>✗</td><td>✓</td><td>-</td><td>-</td><td>-</td><td>无</td><td><a href="./../msg_docs/VehicleAttitudeSetpoint.html">VehicleAttitudeSetpoint</a></td></tr><tr><td>体轴角速率 (FRD)</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✓</td><td>-</td><td>-</td><td>无</td><td><a href="./../msg_docs/VehicleRatesSetpoint.html">VehicleRatesSetpoint</a></td></tr><tr><td>推力和力矩(FRD)</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✓</td><td>-</td><td>无</td><td><a href="./../msg_docs/VehicleThrustSetpoint.html">VehicleThrustSetpoint</a> and <a href="./../msg_docs/VehicleTorqueSetpoint.html">VehicleTorqueSetpoint</a></td></tr><tr><td>直接给电机和舵机</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✓</td><td>无</td><td><a href="./../msg_docs/ActuatorMotors.html">ActuatorMotors</a> and <a href="./../msg_docs/ActuatorServos.html">ActuatorServos</a></td></tr></tbody></table><p>where ✓ means that the bit is set, ✘ means that the bit is not set and <code>-</code> means that the bit is value is irrelevant.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Before using offboard mode with ROS 2, please spend a few minutes understanding the different <a href="./../ros2/user_guide.html#ros-2-px4-frame-conventions">frame conventions</a> that PX4 and ROS 2 use.</p></div><h3 id="旋翼机" tabindex="-1">旋翼机 <a class="header-anchor" href="#旋翼机" aria-label="Permalink to &quot;旋翼机&quot;">​</a></h3><ul><li><p><a href="https://github.com/PX4/PX4-Autopilot/blob/main/msg/TrajectorySetpoint.msg" target="_blank" rel="noreferrer">px4_msgs::msg::TrajectorySetpoint</a></p><ul><li><p>支持以下输入组合：</p><ul><li>Position setpoint (<code>position</code> different from <code>NaN</code>). Non-<code>NaN</code> values of velocity and acceleration are used as feedforward terms for the inner loop controllers.</li><li>Velocity setpoint (<code>velocity</code> different from <code>NaN</code> and <code>position</code> set to <code>NaN</code>). Non-<code>NaN</code> values acceleration are used as feedforward terms for the inner loop controllers.</li><li>Acceleration setpoint (<code>acceleration</code> different from <code>NaN</code> and <code>position</code> and <code>velocity</code> set to <code>NaN</code>)</li></ul></li><li><p>所有值都是基于NED(北, 东, 地)坐标系，位置、速度和加速的单位分别为[m], [m/s] 和[m/s^2] 。</p></li></ul></li><li><p><a href="https://github.com/PX4/PX4-Autopilot/blob/main/msg/VehicleAttitudeSetpoint.msg" target="_blank" rel="noreferrer">px4_msgs::msg::VehicleAttitudeSetpoint</a></p><ul><li><p>支持以下输入组合：</p><ul><li>quaternion <code>q_d</code> + thrust setpoint <code>thrust_body</code>. Non-<code>NaN</code> values of <code>yaw_sp_move_rate</code> are used as feedforward terms expressed in Earth frame and in [rad/s].</li></ul></li><li><p>姿态四元数表示无人机机体坐标系FRD(前、右、下) 与NED坐标系之间的旋转。 这个推力是在无人机体轴FRD坐标系下，并归一化为 [-1, 1] 。</p></li></ul></li><li><p><a href="https://github.com/PX4/PX4-Autopilot/blob/main/msg/VehicleRatesSetpoint.msg" target="_blank" rel="noreferrer">px4_msgs::msg::VehicleRatesSetpoint</a></p><ul><li><p>支持以下输入组合：</p><ul><li><code>roll</code>, <code>pitch</code>, <code>yaw</code> and <code>thrust_body</code>.</li></ul></li><li><p>所有值都表示在无人机体轴FRD坐标系下。 角速率(roll, pitch, yaw) 单位为[rad/s] ，thrust_body归一化为 [-1, 1]。</p></li></ul></li></ul><h3 id="generic-vehicle" tabindex="-1">Generic Vehicle <a class="header-anchor" href="#generic-vehicle" aria-label="Permalink to &quot;Generic Vehicle&quot;">​</a></h3><p>下面的offboard控制模式会绕过所有PX4内部的控制环，应当非常谨慎地使用。</p><ul><li><p><a href="https://github.com/PX4/PX4-Autopilot/blob/main/msg/VehicleThrustSetpoint.msg" target="_blank" rel="noreferrer">px4_msgs::msg::VehicleThrustSetpoint</a> + <a href="https://github.com/PX4/PX4-Autopilot/blob/main/msg/VehicleTorqueSetpoint.msg" target="_blank" rel="noreferrer">px4_msgs::msg::VehicleTorqueSetpoint</a></p><ul><li>支持以下输入组合： <ul><li><code>xyz</code> for thrust and <code>xyz</code> for torque.</li></ul></li><li>所有值都在无人机体轴 FRD 坐标系中表示，并且归一化为[-1, 1]。</li></ul></li><li><p><a href="https://github.com/PX4/PX4-Autopilot/blob/main/msg/ActuatorMotors.msg" target="_blank" rel="noreferrer">px4_msgs::msg::ActuatorMotors</a> + <a href="https://github.com/PX4/PX4-Autopilot/blob/main/msg/ActuatorServos.msg" target="_blank" rel="noreferrer">px4_msgs::msg::ActuatorServos</a></p><ul><li>直接控制电机输出和/或伺服系统（舵机）输出。</li><li>Currently works at lower level than then <code>control_allocator</code> module. Do not publish these messages when not in offboard mode.</li><li>所有值归一化为[-1, 1]。 For outputs that do not support negative values, negative entries map to <code>NaN</code>.</li><li><code>NaN</code> maps to disarmed.</li></ul></li></ul><h2 id="mavlink-消息" tabindex="-1">MAVLink 消息 <a class="header-anchor" href="#mavlink-消息" aria-label="Permalink to &quot;MAVLink 消息&quot;">​</a></h2><p>下面的 MAVLink 消息及其特定字段和字段值在特定的帧下是允许的。</p><h3 id="直升机-垂直起降" tabindex="-1">直升机/垂直起降 <a class="header-anchor" href="#直升机-垂直起降" aria-label="Permalink to &quot;直升机/垂直起降&quot;">​</a></h3><ul><li><p><a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED" target="_blank" rel="noreferrer">SET_POSITION_TARGET_LOCAL_NED</a></p><ul><li><p>The following input combinations are supported: </p><ul><li>Position setpoint (only <code>x</code>, <code>y</code>, <code>z</code>)</li><li>Velocity setpoint (only <code>vx</code>, <code>vy</code>, <code>vz</code>)</li><li>Acceleration setpoint (only <code>afx</code>, <code>afy</code>, <code>afz</code>)</li><li>Position setpoint <strong>and</strong> velocity setpoint (the velocity setpoint is used as feedforward; it is added to the output of the position controller and the result is used as the input to the velocity controller).</li><li>Position setpoint <strong>and</strong> velocity setpoint <strong>and</strong> acceleration (the velocity and the acceleration setpoints are used as feedforwards; the velocity setpoint is added to the output of the position controller and the result is used as the input to the velocity controller; the acceleration setpoint is added to the output of the velocity controller and the result used to compute the thrust vector).</li></ul></li><li><p>PX4 supports the following <code>coordinate_frame</code> values (only): <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_NED" target="_blank" rel="noreferrer">MAV_FRAME_LOCAL_NED</a> and <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_BODY_NED" target="_blank" rel="noreferrer">MAV_FRAME_BODY_NED</a>.</p></li></ul></li><li><p><a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_GLOBAL_INT" target="_blank" rel="noreferrer">SET_POSITION_TARGET_GLOBAL_INT</a></p><ul><li><p>The following input combinations are supported: </p><ul><li><p>Position setpoint (only <code>lat_int</code>, <code>lon_int</code>, <code>alt</code>)</p></li><li><p>Velocity setpoint (only <code>vx</code>, <code>vy</code>, <code>vz</code>)</p></li><li><p><em>Thrust</em> setpoint (only <code>afx</code>, <code>afy</code>, <code>afz</code>)</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Acceleration setpoint values are mapped to create a normalized thrust setpoint (i.e. acceleration setpoints are not &quot;properly&quot; supported).</p></div></li></ul></li></ul></li></ul><p>:::</p><pre><code>- Position setpoint **and** velocity setpoint (the velocity setpoint is used as feedforward; it is added to the output of the position controller and the result is used as the input to the velocity controller).
</code></pre><ul><li><p>PX4 supports the following <code>coordinate_frame</code> values (only): <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_GLOBAL" target="_blank" rel="noreferrer">MAV_FRAME_GLOBAL</a>.</p></li><li><p><a href="https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET" target="_blank" rel="noreferrer">SET_ATTITUDE_TARGET</a></p><ul><li>支持以下输入组合： <ul><li>Attitude/orientation (<code>SET_ATTITUDE_TARGET.q</code>) with thrust setpoint (<code>SET_ATTITUDE_TARGET.thrust</code>).</li><li>Body rate (<code>SET_ATTITUDE_TARGET</code> <code>.body_roll_rate</code> ,<code>.body_pitch_rate</code>, <code>.body_yaw_rate</code>) with thrust setpoint (<code>SET_ATTITUDE_TARGET.thrust</code>).</li></ul></li></ul></li></ul><h3 id="fixed-wing" tabindex="-1">Fixed-wing <a class="header-anchor" href="#fixed-wing" aria-label="Permalink to &quot;Fixed-wing&quot;">​</a></h3><ul><li><p><a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED" target="_blank" rel="noreferrer">SET_POSITION_TARGET_LOCAL_NED</a></p><ul><li><p>The following input combinations are supported (via <code>type_mask</code>): </p><ul><li><p>Position setpoint (<code>x</code>, <code>y</code>, <code>z</code> only; velocity and acceleration setpoints are ignored).</p><ul><li>Specify the <em>type</em> of the setpoint in <code>type_mask</code> (if these bits are not set the vehicle will fly in a flower-like pattern):<div class="info custom-block"><p class="custom-block-title">INFO</p><p>Some of the <em>setpoint type</em> values below are not part of the MAVLink standard for the <code>type_mask</code> field.</p></div></li></ul></li></ul></li></ul></li></ul><p>:::</p><pre><code>    值为：

    - 292：滑动设定值。
      这会将 TECS 配置为空速优先于高度，以便在没有推力时使无人机滑行（即控制俯仰以调节空速）。
      It is equivalent to setting \`type_mask\` as \`POSITION_TARGET_TYPEMASK_Z_IGNORE\`, \`POSITION_TARGET_TYPEMASK_VZ_IGNORE\`, \`POSITION_TARGET_TYPEMASK_AZ_IGNORE\`.
    - 4096：起飞设定值。
    - 8192：降落设定值。
    - 12288：悬停设定值（以设定值为中心绕圈飞行）。
    - 16384：空闲设定值（油门为0， 横滚 / 俯仰为0）。
</code></pre><ul><li><p>PX4 supports the coordinate frames (<code>coordinate_frame</code> field): <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_NED" target="_blank" rel="noreferrer">MAV_FRAME_LOCAL_NED</a> and <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_BODY_NED" target="_blank" rel="noreferrer">MAV_FRAME_BODY_NED</a>.</p></li><li><p><a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_GLOBAL_INT" target="_blank" rel="noreferrer">SET_POSITION_TARGET_GLOBAL_INT</a></p><ul><li><p>The following input combinations are supported (via <code>type_mask</code>): </p><ul><li><p>Position setpoint (only <code>lat_int</code>, <code>lon_int</code>, <code>alt</code>)</p><ul><li><p>Specify the <em>type</em> of the setpoint in <code>type_mask</code> (if these bits are not set the vehicle will fly in a flower-like pattern):</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The <em>setpoint type</em> values below are not part of the MAVLink standard for the <code>type_mask</code> field.</p></div></li></ul></li></ul></li></ul></li></ul><p>:::</p><pre><code>    值为：

    - 4096：起飞设定值。
    - 8192：降落设定值。
    - 12288：悬停设定值（以设定值为中心绕圈飞行）。
    - 16384：空闲设定值（油门为0， 横滚 / 俯仰为0）。
</code></pre><ul><li><p>PX4 supports the following <code>coordinate_frame</code> values (only): <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_GLOBAL" target="_blank" rel="noreferrer">MAV_FRAME_GLOBAL</a>.</p></li><li><p><a href="https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET" target="_blank" rel="noreferrer">SET_ATTITUDE_TARGET</a></p><ul><li>支持以下输入组合： <ul><li>Attitude/orientation (<code>SET_ATTITUDE_TARGET.q</code>) with thrust setpoint (<code>SET_ATTITUDE_TARGET.thrust</code>).</li><li>Body rate (<code>SET_ATTITUDE_TARGET</code> <code>.body_roll_rate</code> ,<code>.body_pitch_rate</code>, <code>.body_yaw_rate</code>) with thrust setpoint (<code>SET_ATTITUDE_TARGET.thrust</code>).</li></ul></li></ul></li></ul><h3 id="无人车" tabindex="-1">无人车 <a class="header-anchor" href="#无人车" aria-label="Permalink to &quot;无人车&quot;">​</a></h3><ul><li><p><a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED" target="_blank" rel="noreferrer">SET_POSITION_TARGET_LOCAL_NED</a></p><ul><li><p>The following input combinations are supported (in <code>type_mask</code>): </p><ul><li><p>Position setpoint (only <code>x</code>, <code>y</code>, <code>z</code>)</p><ul><li><p>Specify the <em>type</em> of the setpoint in <code>type_mask</code>:</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The <em>setpoint type</em> values below are not part of the MAVLink standard for the <code>type_mask</code> field. ::</p><p>值为：</p><ul><li>12288：悬停设定值（无人机足够接近设定值时会停止）。</li></ul></div></li></ul></li><li><p>Velocity setpoint (only <code>vx</code>, <code>vy</code>, <code>vz</code>)</p></li></ul></li><li><p>PX4 supports the coordinate frames (<code>coordinate_frame</code> field): <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_NED" target="_blank" rel="noreferrer">MAV_FRAME_LOCAL_NED</a> and <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_BODY_NED" target="_blank" rel="noreferrer">MAV_FRAME_BODY_NED</a>.</p></li></ul></li><li><p><a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_GLOBAL_INT" target="_blank" rel="noreferrer">SET_POSITION_TARGET_GLOBAL_INT</a></p><ul><li><p>The following input combinations are supported (in <code>type_mask</code>): </p><ul><li>Position setpoint (only <code>lat_int</code>, <code>lon_int</code>, <code>alt</code>)</li></ul></li><li><p>Specify the <em>type</em> of the setpoint in <code>type_mask</code> (not part of the MAVLink standard). 值为：</p><ul><li>下面的比特位没有置位，是正常表现。</li><li>12288：悬停设定值（无人机足够接近设定值时会停止）。</li></ul></li><li><p>PX4 supports the coordinate frames (<code>coordinate_frame</code> field): <a href="https://mavlink.io/en/messages/common.html#MAV_FRAME_GLOBAL" target="_blank" rel="noreferrer">MAV_FRAME_GLOBAL</a>.</p></li></ul></li><li><p><a href="https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET" target="_blank" rel="noreferrer">SET_ATTITUDE_TARGET</a></p><ul><li>支持以下输入组合： <ul><li>Attitude/orientation (<code>SET_ATTITUDE_TARGET.q</code>) with thrust setpoint (<code>SET_ATTITUDE_TARGET.thrust</code>).<div class="info custom-block"><p class="custom-block-title">INFO</p><p>Only the yaw setting is actually used/extracted.</p></div></li></ul></li></ul></li></ul><p>:::</p><h2 id="offboard参数" tabindex="-1">Offboard参数 <a class="header-anchor" href="#offboard参数" aria-label="Permalink to &quot;Offboard参数&quot;">​</a></h2><p><em>Offboard mode</em> is affected by the following parameters:</p><table tabindex="0"><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td><a id="COM_OF_LOSS_T"></a><a href="./../advanced_config/parameter_reference.html#COM_OF_LOSS_T">COM_OF_LOSS_T</a></td><td>Time-out (in seconds) to wait when offboard connection is lost before triggering offboard lost failsafe (<code>COM_OBL_RC_ACT</code>)</td></tr><tr><td><a id="COM_OBL_RC_ACT"></a><a href="./../advanced_config/parameter_reference.html#COM_OBL_RC_ACT">COM_OBL_RC_ACT</a></td><td>Flight mode to switch to if offboard control is lost (Values are - <code>0</code>: <em>Position</em>, <code>1</code>: <em>Altitude</em>, <code>2</code>: <em>Manual</em>, <code>3</code>: *Return, <code>4</code>: *Land*).</td></tr><tr><td><a id="COM_RC_OVERRIDE"></a><a href="./../advanced_config/parameter_reference.html#COM_RC_OVERRIDE">COM_RC_OVERRIDE</a></td><td>Controls whether stick movement on a multicopter (or VTOL in MC mode) causes a mode change to <a href="./../flight_modes_mc/position.html">Position mode</a>. 默认情况下未启用此功能。</td></tr><tr><td><a id="COM_RC_STICK_OV"></a><a href="./../advanced_config/parameter_reference.html#COM_RC_STICK_OV">COM_RC_STICK_OV</a></td><td>The amount of stick movement that causes a transition to <a href="./../flight_modes_mc/position.html">Position mode</a> (if <a href="#COM_RC_OVERRIDE">COM_RC_OVERRIDE</a> is enabled).</td></tr><tr><td><a id="COM_RCL_EXCEPT"></a><a href="./../advanced_config/parameter_reference.html#COM_RCL_EXCEPT">COM_RCL_EXCEPT</a></td><td>该参数指定一种模式，在该模式下将忽略RC丢失及不会触发RC丢失的失效保护动作。 Set bit <code>2</code> to ignore RC loss in Offboard mode.</td></tr></tbody></table><h2 id="开发者资源" tabindex="-1">开发者资源 <a class="header-anchor" href="#开发者资源" aria-label="Permalink to &quot;开发者资源&quot;">​</a></h2><p>Typically developers do not directly work at the MAVLink layer, but instead use a robotics API like <a href="https://mavsdk.mavlink.io/" target="_blank" rel="noreferrer">MAVSDK</a> or <a href="http://www.ros.org/" target="_blank" rel="noreferrer">ROS</a> (these provide a developer friendly API, and take care of managing and maintaining connections, sending messages and monitoring responses - the minutiae of working with <em>Offboard mode</em> and MAVLink).</p><p>以下资源可能对开发者有用：</p><ul><li><a href="./../ros/offboard_control.html">Offboard Control from Linux</a></li><li><a href="./../ros/mavros_offboard_cpp.html">ROS/MAVROS Offboard Example (C++)</a></li><li><a href="./../ros/mavros_offboard_python.html">ROS/MAVROS Offboard Example (Python)</a></li></ul>`,50)]))}const u=o(r,[["render",d]]);export{_ as __pageData,u as default};
