import{_ as r,a as t}from"./chunks/ark_flow_orientation.C_XLV4WD.js";import{_ as i,c as l,a8 as n,j as e,a,o as d}from"./chunks/framework.BDnHobkS.js";const A=JSON.parse('{"title":"ARK Flow","description":"","frontmatter":{},"headers":[],"relativePath":"ko/dronecan/ark_flow.md","filePath":"ko/dronecan/ark_flow.md"}'),c={name:"ko/dronecan/ark_flow.md"};function h(s,o,f,m,u,p){return d(),l("div",null,o[0]||(o[0]=[n('<h1 id="ark-flow" tabindex="-1">ARK Flow <a class="header-anchor" href="#ark-flow" aria-label="Permalink to &quot;ARK Flow&quot;">​</a></h1><p>ARK Flow is an open source <a href="./">DroneCAN</a> <a href="./../sensor/optical_flow.html">optical flow</a>, <a href="./../sensor/rangefinders.html">distance sensor</a>, and IMU module.</p><p><img src="'+r+'" alt="ARK Flow"></p><h2 id="구매처" tabindex="-1">구매처 <a class="header-anchor" href="#구매처" aria-label="Permalink to &quot;구매처&quot;">​</a></h2><p>Order this module from:</p><ul><li><a href="https://arkelectron.com/product/ark-flow/" target="_blank" rel="noreferrer">ARK Electronics</a> (US)</li></ul><h2 id="hardware-specifications" tabindex="-1">Hardware Specifications <a class="header-anchor" href="#hardware-specifications" aria-label="Permalink to &quot;Hardware Specifications&quot;">​</a></h2><ul><li><a href="https://github.com/ARK-Electronics/ARK_Flow" target="_blank" rel="noreferrer">Open Source Schematic and BOM</a></li><li>센서 <ul><li>PixArt PAW3902 Optical Flow Sensor <ul><li>Tracks under super low light condition of &gt;9 lux</li><li>Wide working range from 80mm up to 30m</li><li>Up to 7.4 rad/s</li></ul></li><li>40mW IR LED built onto board for improved low light operation</li><li>Broadcom AFBR-S50LV85D Time-of-Flight Distance Sensor <ul><li>Integrated 850 nm laser light source</li><li>Field-of-View (FoV) of 12.4° x 6.2° with 32 pixels</li><li>Typical distance range up to 30m</li><li>Operation of up to 200k Lux ambient light</li><li>Works well on all surface conditions</li><li>Transmitter beam of 2° x 2° to illuminate between 1 and 3 pixels</li></ul></li><li>Bosch BMI088 6-Axis IMU or Invensense ICM-42688-P 6-Axis IMU</li></ul></li><li>STM32F412CEU6 MCU</li><li>Two Pixhawk Standard CAN Connectors (4 Pin JST GH)</li><li>Pixhawk Standard Debug Connector (6 Pin JST SH)</li><li>Software-toggleable built in CAN termination resistor</li><li>Small Form Factor <ul><li>3cm x 3cm x 1.4cm</li></ul></li><li>LED Indicators</li><li>USA Built</li></ul><h2 id="하드웨어-설정" tabindex="-1">하드웨어 설정 <a class="header-anchor" href="#하드웨어-설정" aria-label="Permalink to &quot;하드웨어 설정&quot;">​</a></h2><h3 id="배선" tabindex="-1">배선 <a class="header-anchor" href="#배선" aria-label="Permalink to &quot;배선&quot;">​</a></h3><p>The ARK Flow is connected to the CAN bus using a Pixhawk standard 4 pin JST GH cable. For more information, refer to the <a href="./../can/#wiring">CAN Wiring</a> instructions.</p><h3 id="장착" tabindex="-1">장착 <a class="header-anchor" href="#장착" aria-label="Permalink to &quot;장착&quot;">​</a></h3><p>The recommended mounting orientation is with the connectors on the board pointing towards <strong>back of vehicle</strong>, as shown in the following picture.</p><p><img src="'+t+'" alt="ARK Flow align with Pixhawk"></p><p>This corresponds to the default value (<code>0</code>) of the parameter <a href="./../advanced_config/parameter_reference.html#SENS_FLOW_ROT">SENS_FLOW_ROT</a>. Change the parameter appropriately if using a different orientation.</p><p>The sensor can be mounted anywhere on the frame, but you will need to specify the focal point position, relative to vehicle centre of gravity, during <a href="#px4-configuration">PX4 configuration</a>.</p><h2 id="firmware-setup" tabindex="-1">Firmware Setup <a class="header-anchor" href="#firmware-setup" aria-label="Permalink to &quot;Firmware Setup&quot;">​</a></h2><p>ARK Flow runs the <a href="./px4_cannode_fw.html">PX4 DroneCAN Firmware</a>. As such, it supports firmware update over the CAN bus and <a href="./#node-id-allocation">dynamic node allocation</a>.</p><p>ARK Flow boards ship with recent firmware pre-installed, but if you want to build and flash the latest firmware yourself see <a href="./px4_cannode_fw.html#building-the-firmware">PX4 DroneCAN Firmware &gt; Building the Firmware</a>.</p><ul><li>Firmware target: <code>ark_can-flow_default</code></li><li>Bootloader target: <code>ark_can-flow_canbootloader</code></li></ul><h2 id="flight-controller-setup" tabindex="-1">Flight Controller Setup <a class="header-anchor" href="#flight-controller-setup" aria-label="Permalink to &quot;Flight Controller Setup&quot;">​</a></h2><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The Ark Flow will not boot if there is no SD card in the flight controller when powered on.</p></div><h3 id="enable-dronecan" tabindex="-1">Enable DroneCAN <a class="header-anchor" href="#enable-dronecan" aria-label="Permalink to &quot;Enable DroneCAN&quot;">​</a></h3><p>In order to use the ARK Flow board, connect it to the Pixhawk CAN bus and enable the UAVCAN driver by setting parameter <a href="./../advanced_config/parameter_reference.html#UAVCAN_ENABLE">UAVCAN_ENABLE</a> to <code>2</code> for dynamic node allocation (or <code>3</code> if using <a href="./../dronecan/escs.html">DroneCAN ESCs</a>).</p><p>단계는 다음과 같습니다:</p><ul><li>In <em>QGroundControl</em> set the parameter <a href="./../advanced_config/parameter_reference.html#UAVCAN_ENABLE">UAVCAN_ENABLE</a> to <code>2</code> or <code>3</code> and reboot (see <a href="./../advanced_config/parameters.html">Finding/Updating Parameters</a>).</li><li>Connect ARK Flow CAN to the Pixhawk CAN.</li></ul><p>Once enabled, the module will be detected on boot. Flow data should arrive at 10Hz.</p><p>DroneCAN configuration in PX4 is explained in more detail in <a href="./../dronecan/#enabling-dronecan">DroneCAN &gt; Enabling DroneCAN</a>.</p><h3 id="px4-설정" tabindex="-1">PX4 설정 <a class="header-anchor" href="#px4-설정" aria-label="Permalink to &quot;PX4 설정&quot;">​</a></h3><p>You need to set the EKF optical flow parameters to enable fusing optical flow measurements for velocity calculation, set necessary <a href="./">DroneCAN</a> parameters, and define offsets if the sensor is not centred within the vehicle.</p><p>Set the following parameters in <em>QGroundControl</em>:</p><ul><li>Enable optical flow fusion by setting <a href="./../advanced_config/parameter_reference.html#EKF2_OF_CTRL">EKF2_OF_CTRL</a>.</li><li>To optionally disable GPS aiding, set <a href="./../advanced_config/parameter_reference.html#EKF2_GPS_CTRL">EKF2_GPS_CTRL</a> to <code>0</code>.</li><li>Enable <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_FLOW">UAVCAN_SUB_FLOW</a>.</li><li>Enable <a href="./../advanced_config/parameter_reference.html#UAVCAN_SUB_RNG">UAVCAN_SUB_RNG</a>.</li><li>Set <a href="./../advanced_config/parameter_reference.html#EKF2_RNG_A_HMAX">EKF2_RNG_A_HMAX</a> to <code>10</code>.</li><li>Set <a href="./../advanced_config/parameter_reference.html#EKF2_RNG_QLTY_T">EKF2_RNG_QLTY_T</a> to <code>0.2</code>.</li><li>Set <a href="./../advanced_config/parameter_reference.html#UAVCAN_RNG_MIN">UAVCAN_RNG_MIN</a> to <code>0.08</code>.</li><li>Set <a href="./../advanced_config/parameter_reference.html#UAVCAN_RNG_MAX">UAVCAN_RNG_MAX</a> to <code>30</code>.</li><li>Set <a href="./../advanced_config/parameter_reference.html#SENS_FLOW_MINHGT">SENS_FLOW_MINHGT</a> to <code>0.08</code>.</li><li>Set <a href="./../advanced_config/parameter_reference.html#SENS_FLOW_MAXHGT">SENS_FLOW_MAXHGT</a> to <code>25</code>.</li><li>Set <a href="./../advanced_config/parameter_reference.html#SENS_FLOW_MAXR">SENS_FLOW_MAXR</a> to <code>7.4</code> to match the PAW3902 maximum angular flow rate.</li><li>The parameters <a href="./../advanced_config/parameter_reference.html#EKF2_OF_POS_X">EKF2_OF_POS_X</a>, <a href="./../advanced_config/parameter_reference.html#EKF2_OF_POS_Y">EKF2_OF_POS_Y</a> and <a href="./../advanced_config/parameter_reference.html#EKF2_OF_POS_Z">EKF2_OF_POS_Z</a> can be set to account for the offset of the Ark Flow from the vehicle centre of gravity.</li></ul><h2 id="ark-flow-configuration" tabindex="-1">Ark Flow Configuration <a class="header-anchor" href="#ark-flow-configuration" aria-label="Permalink to &quot;Ark Flow Configuration&quot;">​</a></h2><p>On the ARK Flow, you may need to configure the following parameters:</p><table tabindex="0"><thead><tr><th>매개변수</th><th>설명</th></tr></thead><tbody><tr><td><a id="CANNODE_TERM"></a><a href="./../advanced_config/parameter_reference.html#CANNODE_TERM">CANNODE_TERM</a></td><td>CAN built-in bus termination.</td></tr></tbody></table><h2 id="led-신호의-의미" tabindex="-1">LED 신호의 의미 <a class="header-anchor" href="#led-신호의-의미" aria-label="Permalink to &quot;LED 신호의 의미&quot;">​</a></h2><p>You will see both red and blue LEDs on the ARK Flow when it is being flashed, and a solid blue LED if it is running properly.</p><p>If you see a solid red LED there is an error and you should check the following:</p><ul><li>Make sure the flight controller has an SD card installed.</li><li>Make sure the Ark Flow has <code>ark_can-flow_canbootloader</code> installed prior to flashing <code>ark_can-flow_default</code>.</li><li>Remove binaries from the root and ufw directories of the SD card and try to build and flash again.</li></ul><h2 id="비디오" tabindex="-1">비디오 <a class="header-anchor" href="#비디오" aria-label="Permalink to &quot;비디오&quot;">​</a></h2>',40),e("lite-youtube",{videoid:"SAbRe1fi7bU",params:"list=PLUepQApgwSozmwhOo-dXnN33i2nBEl1c0",title:"ARK Flow Indoor Position Hold x64"},null,-1),e("p",null,[e("em",null,[a("PX4 holding position using the ARK Flow sensor for velocity estimation (in "),e("a",{href:"./../flight_modes_mc/position.html"},"Position Mode"),a(").")])],-1),e("h2",{id:"see-also",tabindex:"-1"},[a("See Also "),e("a",{class:"header-anchor",href:"#see-also","aria-label":'Permalink to "See Also"'},"​")],-1),e("ul",null,[e("li",null,[e("a",{href:"https://arkelectron.gitbook.io/ark-documentation/sensors/ark-flow",target:"_blank",rel:"noreferrer"},"ARK Flow"),a(" (ARK Docs)")])],-1)]))}const g=i(c,[["render",h]]);export{A as __pageData,g as default};
