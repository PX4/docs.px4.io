(window.webpackJsonp=window.webpackJsonp||[]).push([[799],{2825:function(t,e,a){"use strict";a.r(e);var s=a(19),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"로깅"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#로깅"}},[t._v("#")]),t._v(" 로깅")]),t._v(" "),s("p",[t._v("The "),s("RouterLink",{attrs:{to:"/ko/modules/modules_system.html#logger"}},[t._v("system logger")]),t._v(" is able to log any ORB topic with all included fields. 필요한 모든 것은 "),s("code",[t._v(".msg")]),t._v(" 파일에서 생성되므로, 주제 이름만 지정하면 됩니다. 선택적 간격 매개변수는 특정 주제의 최대 로깅 속도를 지정합니다. 주제의 모든 기존 인스턴스가 기록됩니다.")],1),t._v(" "),s("p",[t._v("출력 로그 형식은 "),s("RouterLink",{attrs:{to:"/ko/dev_log/ulog_file_format.html"}},[t._v("ULog")]),t._v(" 입니다.")],1),t._v(" "),s("h2",{attrs:{id:"사용법"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#사용법"}},[t._v("#")]),t._v(" 사용법")]),t._v(" "),s("p",[t._v("기본적으로, 로깅은 시동을 걸었을 때 시작하며, 제동 후 중지합니다. 새 로그 파일은 시동을 걸 때마다 SD 카드에 생성됩니다. 현재 상태를 표시하려면 콘솔에서 "),s("code",[t._v("logger status")]),t._v("명령을 사용하십시오. 로깅을 바로 시작하고 싶다면 "),s("code",[t._v("logger on")]),t._v(" 명령을 내리십시오. 이 명령은 시동을 걸었을 때, 시동 동작보다 우선합니다. "),s("code",[t._v("logger off")]),t._v(" 명령은 그 반대입니다.")]),t._v(" "),s("p",[t._v("If logging stops due to a write error, or reaching the "),s("a",{attrs:{href:"#file-size-limitations"}},[t._v("maximum file size")]),t._v(", PX4 will automatically restart logging in a new file.")]),t._v(" "),s("p",[t._v("For a list of all supported logger commands and parameters, use:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("logger help\n")])])]),s("h2",{attrs:{id:"구성"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#구성"}},[t._v("#")]),t._v(" 구성")]),t._v(" "),s("p",[t._v("The logging system is configured by default to collect sensible logs for "),s("RouterLink",{attrs:{to:"/ko/getting_started/flight_reporting.html"}},[t._v("flight reporting")]),t._v(" with "),s("a",{attrs:{href:"http://logs.px4.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("Flight Review"),s("OutboundLink")],1),t._v(".")],1),t._v(" "),s("p",[t._v("로깅은 "),s("RouterLink",{attrs:{to:"/ko/advanced_config/parameter_reference.html#sd-logging"}},[t._v("SD 로깅")]),t._v(" 매개변수를 사용하여 설정할 수 있습니다. 변경할 가능성이 높은 매개변수가 아래에 설명되어 있습니다.")],1),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("매개 변수")]),t._v(" "),s("th",[t._v("설명")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("RouterLink",{attrs:{to:"/ko/advanced_config/parameter_reference.html#SDLOG_MODE"}},[t._v("SDLOG_MODE")])],1),t._v(" "),s("td",[t._v("Logging Mode. Defines when logging starts and stops."),s("br"),t._v("- "),s("code",[t._v("-1")]),t._v(": Logging disabled."),s("br"),t._v("- "),s("code",[t._v("0")]),t._v(": Log when armed until disarm (default)."),s("br"),t._v("- "),s("code",[t._v("1")]),t._v(": Log from boot until disarm."),s("br"),t._v("- "),s("code",[t._v("2")]),t._v(": Log from boot until shutdown."),s("br"),t._v("- "),s("code",[t._v("3")]),t._v(": Log based on the "),s("RouterLink",{attrs:{to:"/ko/advanced_config/parameter_reference.html#RC_MAP_AUX1"}},[t._v("AUX1 RC channel")]),t._v("."),s("br"),t._v("- "),s("code",[t._v("4")]),t._v(": Log from first armed until shutdown.")],1)]),t._v(" "),s("tr",[s("td",[s("RouterLink",{attrs:{to:"/ko/advanced_config/parameter_reference.html#SDLOG_PROFILE"}},[t._v("SDLOG_PROFILE")])],1),t._v(" "),s("td",[t._v("로깅 프로파일. 자주 사용되지 않는 로깅/분석을 활성화하려면 이것을 사용하십시오(예: EKF2 재생, PID 및 필터 튜닝을 위한 고속 로깅, 열 온도 보정).")])]),t._v(" "),s("tr",[s("td",[s("RouterLink",{attrs:{to:"/ko/advanced_config/parameter_reference.html#SDLOG_MISSION"}},[t._v("SDLOG_MISSION")])],1),t._v(" "),s("td",[t._v('Create very small additional "Mission Log".'),s("br"),t._v("This log can "),s("em",[t._v("not")]),t._v(" be used with "),s("RouterLink",{attrs:{to:"/ko/log/flight_log_analysis.html#flight-review-online-tool"}},[t._v("Flight Review")]),t._v(", but is useful when you need a small log for geotagging or regulatory compliance.")],1)])])]),t._v(" "),s("p",[t._v("Useful settings for specific cases:")]),t._v(" "),s("ul",[s("li",[t._v("Raw sensor data for comparison: "),s("RouterLink",{attrs:{to:"/ko/advanced_config/parameter_reference.html#SDLOG_MODE"}},[t._v("SDLOG_MODE=1")]),t._v(" and "),s("RouterLink",{attrs:{to:"/ko/advanced_config/parameter_reference.html#SDLOG_PROFILE"}},[t._v("SDLOG_PROFILE=64")]),t._v(".")],1),t._v(" "),s("li",[t._v("Disabling logging altogether: "),s("RouterLink",{attrs:{to:"/ko/advanced_config/parameter_reference.html#SDLOG_MODE"}},[t._v("SDLOG_MODE="),s("code",[t._v("-1")])])],1)]),t._v(" "),s("h3",{attrs:{id:"logger-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#logger-module"}},[t._v("#")]),t._v(" Logger module")]),t._v(" "),s("p",[s("em",[t._v("Developers")]),t._v(" can further configure what information is logged via the "),s("RouterLink",{attrs:{to:"/ko/modules/modules_system.html#logger"}},[t._v("logger")]),t._v(" module. This allows, for example, logging of your own uORB topics.")],1),t._v(" "),s("h3",{attrs:{id:"진단sd-카드-설정"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#진단sd-카드-설정"}},[t._v("#")]),t._v(" 진단SD 카드 설정")]),t._v(" "),s("p",[t._v("Separately, the list of logged topics can also be customized with a file on the SD card. Create a file "),s("code",[t._v("etc/logging/logger_topics.txt")]),t._v(" on the card with a list of topics (For SITL, it's "),s("code",[t._v("build/px4_sitl_default/rootfs/fs/microsd/etc/logging/logger_topics.txt")]),t._v("):")]),t._v(" "),s("div",{staticClass:"language-plain extra-class"},[s("pre",{pre:!0,attrs:{class:"language-plain"}},[s("code",[t._v("<topic_name> <interval> <instance>\n")])])]),s("p",[s("code",[t._v("<interval>")]),t._v("은 선택 사항이며, 지정된 경우 이 항목에 대해 기록된 두 메시지 사이의 최소 시간 간격(ms)을 정의합니다. 지정하지 않으면, 주제가 최대 속도로 기록됩니다.")]),t._v(" "),s("p",[s("code",[t._v("<instance>")]),t._v("은 선택 사항이며, 지정된 경우 기록할 인스턴스를 정의합니다. 지정하지 않으면, 토픽의 모든 인스턴스를 로깅합니다. "),s("code",[t._v("<instance>")]),t._v("를 지정하려면, "),s("code",[t._v("<interval>")]),t._v("을 반드시 지정하여야합니다. 0 값을 설정하면 최대 기록율로 지정할 수 있습니다.")]),t._v(" "),s("p",[t._v("이 파일의 주제는 기본적으로 기록된 모든 주제를 대체합니다.")]),t._v(" "),s("p",[t._v("예 :")]),t._v(" "),s("div",{staticClass:"language-plain extra-class"},[s("pre",{pre:!0,attrs:{class:"language-plain"}},[s("code",[t._v("sensor_accel 0 0\nsensor_accel 100 1\nsensor_gyro 200\nsensor_mag 200 1\n")])])]),s("p",[t._v("이 구성은 최대 속도에서 sensor_accel 0, 10Hz에서 sensor_accel 1, 5Hz에서 모든 sensor_gyro 인스턴스 및 5Hz에서 sensor_mag 1을 기록합니다.")]),t._v(" "),s("h2",{attrs:{id:"스크립트"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#스크립트"}},[t._v("#")]),t._v(" 스크립트")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/PX4/pyulog",target:"_blank",rel:"noopener noreferrer"}},[t._v("pyulog"),s("OutboundLink")],1),t._v(" 저장소에 로깅 파일을 분석하고 변환하는 여러 스크립트가 있습니다.")]),t._v(" "),s("h2",{attrs:{id:"file-size-limitations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#file-size-limitations"}},[t._v("#")]),t._v(" File size limitations")]),t._v(" "),s("p",[t._v("The maximum file size depends on the file system and OS. The size limit on NuttX is currently around 2GB.")]),t._v(" "),s("h2",{attrs:{id:"손실"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#손실"}},[t._v("#")]),t._v(" 손실")]),t._v(" "),s("p",[t._v("로깅 드롭아웃은 바람직하지 않으며, 드롭아웃의 양에 영향을 미치는 몇 가지 요소가 있습니다.")]),t._v(" "),s("ul",[s("li",[t._v("테스트한 대부분의 SD 카드는 분당 여러 번 일시 중지되었습니다. 이는 기록 명령을 처리함에 있어 수 100ms 정도의 지연이 있음을 보여줍니다. 이런 현상으로 인해 그동안 기록 버퍼가 차면 손실을 유발합니다. (아래와 같이) SD 카드에 따라 영향을 받습니다.")]),t._v(" "),s("li",[t._v("SD 카드를 포맷하면, 손실을 어느정도 예방할 수 있습니다.")]),t._v(" "),s("li",[t._v("로그 버퍼 크기를 늘리면 도움이 됩니다.")]),t._v(" "),s("li",[t._v("선택한 토픽에 대한 로깅 율을 줄이거나 필요없는 토픽을 로깅 목록에서 제거하십시오("),s("code",[t._v("info.py")]),t._v("가 이 문제 해결에 도움됨).")])]),t._v(" "),s("h2",{attrs:{id:"sd-카드"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sd-카드"}},[t._v("#")]),t._v(" SD 카드")]),t._v(" "),s("p",[t._v("다음은 다양한 SD 카드에 대한 성능 테스트 결과입니다. 테스트는 Pixracer에서 수행되었습니다. 결과는 Pixhawk에도 적용됩니다.")]),t._v(" "),s("p",[t._v("The table below shows the "),s("strong",[t._v("mean sequential write speed [KB/s]")]),t._v(" / "),s("strong",[t._v("maximum write time per block (average) [ms]")]),t._v(" for F4- (Pixracer), F7-, and H7-based flight controllers.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("SD 카드")]),t._v(" "),s("th",[t._v("F4")]),t._v(" "),s("th",[t._v("최대 기록 시간 / 블록 (평균) [ms]")]),t._v(" "),s("th",[t._v("H7")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("SanDisk Extreme U3 32GB")]),t._v(" "),s("td",[t._v("461")]),t._v(" "),s("td",[t._v("1800/10")]),t._v(" "),s("td",[t._v("2900/8")])]),t._v(" "),s("tr",[s("td",[t._v("Samsung EVO Plus 32GB")]),t._v(" "),s("td",[t._v("348")]),t._v(" "),s("td",[t._v("40")]),t._v(" "),s("td",[t._v("1900/9-60")])]),t._v(" "),s("tr",[s("td",[t._v("Sandisk Ultra Class 10 8GB")]),t._v(" "),s("td",[t._v("212")]),t._v(" "),s("td",[t._v("60")]),t._v(" "),s("td",[t._v("?/?")])]),t._v(" "),s("tr",[s("td",[t._v("Sandisk Class 4 8GB")]),t._v(" "),s("td",[t._v("331")]),t._v(" "),s("td",[t._v("220")]),t._v(" "),s("td",[t._v("?/?")])]),t._v(" "),s("tr",[s("td",[t._v("SanDisk Class 10 32 GB (High Endurance Video Monitoring Card)")]),t._v(" "),s("td",[t._v("209")]),t._v(" "),s("td",[t._v("150")]),t._v(" "),s("td",[t._v("?/?")])]),t._v(" "),s("tr",[s("td",[t._v("Lexar U1 (Class 10), 16GB High-Performance")]),t._v(" "),s("td",[t._v("196")]),t._v(" "),s("td",[t._v("500")]),t._v(" "),s("td",[t._v("?/?")])]),t._v(" "),s("tr",[s("td",[t._v("Sandisk Ultra PLUS Class 10 16GB")]),t._v(" "),s("td",[t._v("334")]),t._v(" "),s("td",[t._v("250")]),t._v(" "),s("td",[t._v("?/?")])]),t._v(" "),s("tr",[s("td",[t._v("Sandisk Pixtor Class 10 16GB")]),t._v(" "),s("td",[t._v("332")]),t._v(" "),s("td",[t._v("150")]),t._v(" "),s("td",[t._v("?/?")])]),t._v(" "),s("tr",[s("td",[t._v("Sandisk Extreme PLUS Class 10 32GB")]),t._v(" "),s("td",[t._v("332 / 150")]),t._v(" "),s("td",[t._v("?/?")]),t._v(" "),s("td",[t._v("?/?")])])])]),t._v(" "),s("p",[t._v("Logging bandwidth with the default topics is around 50 KB/s, which almost all SD cards satisfy in terms of their mean sequential write speed.")]),t._v(" "),s("p",[t._v("More important than the mean write speed is spikes (or generally high values) in the maximum write time per block (of 4 KB) or "),s("code",[t._v("fsync")]),t._v(" times, as a long write time means a larger log buffer is needed to avoid dropouts.")]),t._v(" "),s("p",[t._v("PX4 uses bigger buffers on F7/H7 and read caching, which is enough to compensate for spikes in many poor cards. That said, if your card has an "),s("code",[t._v("fsync")]),t._v(" or write duration of several 100ms it is should not be preferred for use with PX4. You can check the value by running "),s("RouterLink",{attrs:{to:"/ko/modules/modules_command.html#sd-bench"}},[t._v("sd_bench")]),t._v(" should be run with more iterations (around 100 should do).")],1),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("sd_bench -r "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n")])])]),s("p",[t._v("이것은 최소 버퍼 크기를 정의합니다. 이 최대값이 클수록 드롭아웃을 피하기 위하여 더 큰 로그 버퍼가 필요합니다. PX4 uses bigger buffers on F7/H7 and read caching to make up for some of these issues.")]),t._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("If you have concerns about a particular card you can run the above test and report the results to https://github.com/PX4/PX4-Autopilot/issues/4634. "),s("code",[t._v("<instance>")]),t._v("를 지정하려면, "),s("code",[t._v("<interval>")]),t._v("을 반드시 지정해야합니다.")]),t._v(" "),s("h2",{attrs:{id:"로그-스트리밍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#로그-스트리밍"}},[t._v("#")]),t._v(" 로그 스트리밍")]),t._v(" "),s("p",[t._v("로깅을 수행하는 전통적인 완벽한 방법은 FMU에서 SD 카드를 사용하는 것입니다. 그러나, MAVLink를 통하여 동일한 로깅 데이터를 보내는 대체 로그 스트리밍이 있습니다. 이 방법은 예를 들어 FMU에 SD 카드 슬롯이 없는 경우(예: Intel® Aero Ready to Fly Drone) 또는 단순히 SD 카드를 처리할 필요가 없는 경우에 사용할 수 있습니다. 두 방법 모두 독립적으로 동시에 사용할 수 있습니다.")]),t._v(" "),s("p",[t._v("요구 사항은 최소 ~50KB/s 네트웍 속도입니다(예: WiFi 링크). 그리고, 한 클라이언트만 동시에 로그 스트리밍을 요청할 수 있습니다. 연결이 안정적일 필요는 없으며, 프로토콜은 드롭을 처리하도록 설계되었습니다.")]),t._v(" "),s("p",[t._v("ulog 스트리밍을 지원하는 다양한 클라이언트가 있습니다.")]),t._v(" "),s("ul",[s("li",[t._v("PX4-Autopilot/Tools의 "),s("code",[t._v("mavlink_ulog_streaming.py")]),t._v(" 스크립트")]),t._v(" "),s("li",[t._v("QGroundControl"),s("img",{attrs:{src:a(749),alt:"QGC 로그 스트리밍 "}})]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/ecmnet/MAVGCL",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAVGCL"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"진단"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#진단"}},[t._v("#")]),t._v(" 진단")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("로그 실시간 전송을 시작하지 않았다면, "),s("code",[t._v("logger")]),t._v("를 실행 중인지(위 참고) 확인하고, 시작하는 동안 콘솔 출력을 살펴보십시오.")])]),t._v(" "),s("li",[s("p",[t._v("그래도 작동하지 않으면, MAVLink 2를 사용하고 있는지 확인하십시오. "),s("code",[t._v("MAV_PROTO_VER")]),t._v(" 매개변수 값을 2로 강제 설정하십시오.")])]),t._v(" "),s("li",[s("p",[t._v("로그 스트리밍은 구성된 MAVLink 속도("),s("code",[t._v("-r")]),t._v(" 매개변수)의 최대 70%를 사용합니다. 더 큰 전송율이 요구되는 상황에서는, 메세지가 사라집니다. 현재 사용된 백분율은 "),s("code",[t._v("mavlink 상태")]),t._v("로 검사할 수 있습니다(이 예에서는 1.8%가 사용됨).")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("instance "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0:")]),t._v("\n        GCS heartbeat:  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("160955")]),t._v(" us ago\n        mavlink chan: "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0")]),t._v("\n        type:           GENERIC LINK OR RADIO\n        flow control:   OFF\n        rates:\n        tx: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("95.781")]),t._v(" kB/s\n        txerr: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.000")]),t._v(" kB/s\n        rx: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.021")]),t._v(" kB/s\n        rate mult: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.000")]),t._v("\n        ULog rate: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.8")]),t._v("% of max "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("70.0")]),t._v("%\n        accepting commands: YES\n        MAVLink version: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n        transport protocol: UDP "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("14556")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])])]),s("p",[t._v("또한 "),s("code",[t._v("txerr")]),t._v(" 값이 0에 머물러있는지 확인하십시오. 만약 이 값이 올라간다면, NuttX 전송 버퍼가 너무 작거나, 물리 링크 대역폭이 포화 상태이거나, 하드웨어가 데이터를 처리하기에 너무 느린 상황을 의미합니다.")])])])])])}),[],!1,null,null,null);e.default=r.exports},749:function(t,e,a){t.exports=a.p+"assets/img/qgc-log-streaming.e5767326.png"}}]);