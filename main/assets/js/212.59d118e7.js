(window.webpackJsonp=window.webpackJsonp||[]).push([[212],{1966:function(t,e,o){"use strict";o.r(e);var n=o(19),a=Object(n.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"flight-controller-sensor-orientation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#flight-controller-sensor-orientation"}},[t._v("#")]),t._v(" Flight Controller/Sensor Orientation")]),t._v(" "),n("p",[t._v("By default the flight controller and external compass(es) (if present) should be placed on the frame top-side up, oriented so that the arrow points towards the front of the vehicle.\nIf the board or any external compasses are mounted in any other orientation then you will need configure this in the firmware.")]),t._v(" "),n("h2",{attrs:{id:"calculating-orientation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#calculating-orientation"}},[t._v("#")]),t._v(" Calculating Orientation")]),t._v(" "),n("p",[t._v("ROLL, PITCH and/or YAW offsets of the flight controller are calculated relative to the vehicle around the forward (x), right (y), down (z) axes.")]),t._v(" "),n("p",[n("img",{attrs:{src:o(383),alt:"Frame Heading"}})]),t._v(" "),n("p",[t._v("The axes to rotate around stay the same from one rotation step to the next one.\nSo the frame to perform the rotation in stays fixed.\nThis is also known as "),n("em",[t._v("extrinsic rotation")]),t._v(".")]),t._v(" "),n("p",[n("img",{attrs:{src:o(358),alt:"Vehicle orientation"}})]),t._v(" "),n("p",[t._v("For example, the vehicles shown below have rotations around the z-axis (i.e. yaw only) corresponding to: "),n("code",[t._v("ROTATION_NONE")]),t._v(", "),n("code",[t._v("ROTATION_YAW_90")]),t._v(","),n("code",[t._v("ROTATION_YAW_180")]),t._v(","),n("code",[t._v("ROTATION_YAW_270")]),t._v(".")]),t._v(" "),n("p",[n("img",{attrs:{src:o(671),alt:"Yaw Rotation"}})]),t._v(" "),n("div",{staticClass:"custom-block note"},[n("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),n("p",[t._v("For a VTOL Tailsitter airframe set the vehicle orientation according to its multirotor configuration (i.e. relative to the vehicle during, takeoff, hovering, landing) for all sensor calibrations.")]),t._v(" "),n("p",[t._v("The axis are normally relative to the orientation of the vehicle during steady forward flight.\nFor more information see "),n("RouterLink",{attrs:{to:"/en/getting_started/px4_basic_concepts.html#heading-and-directions"}},[t._v("Basic Concepts")]),t._v(".")],1)]),t._v(" "),n("h2",{attrs:{id:"setting-the-flight-controller-orientation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#setting-the-flight-controller-orientation"}},[t._v("#")]),t._v(" Setting the Flight Controller Orientation")]),t._v(" "),n("p",[t._v("To set the orientations:")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("Start "),n("em",[t._v("QGroundControl")]),t._v(" and connect the vehicle.")])]),t._v(" "),n("li",[n("p",[t._v("Select the "),n("strong",[t._v("Q")]),t._v(" icon (top left), "),n("strong",[t._v("Vehicle Setup")]),t._v(" in the popup.")])]),t._v(" "),n("li",[n("p",[t._v("Select "),n("strong",[t._v("Sensors")]),t._v(" in the sidebar and then the "),n("strong",[t._v("Orientations")]),t._v(" button.")]),t._v(" "),n("p",[n("img",{attrs:{src:o(672),alt:"Set sensor orientations"}})])]),t._v(" "),n("li",[n("p",[t._v("Select the "),n("strong",[t._v("AutoPilot Orientation")]),t._v(" (as "),n("a",{attrs:{href:"#calculating-orientation"}},[t._v("calculated above")]),t._v(").")]),t._v(" "),n("p",[n("img",{attrs:{src:o(673),alt:"Orientation options"}})])]),t._v(" "),n("li",[n("p",[t._v("Press "),n("strong",[t._v("OK")]),t._v(".")])])]),t._v(" "),n("div",{staticClass:"custom-block note"},[n("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),n("p",[t._v("You can use "),n("RouterLink",{attrs:{to:"/en/config/level_horizon_calibration.html"}},[t._v("Level Horizon Calibration")]),t._v(" to compensate for small miss-alignments in controller orientation and to level the horizon in flight view.")],1)]),t._v(" "),n("h2",{attrs:{id:"setting-the-compass-orientation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#setting-the-compass-orientation"}},[t._v("#")]),t._v(" Setting the Compass Orientation")]),t._v(" "),n("p",[t._v("PX4 will automatically detect the compass orientation as part of "),n("RouterLink",{attrs:{to:"/en/config/compass.html"}},[t._v("compass calibration")]),t._v(" ("),n("RouterLink",{attrs:{to:"/en/advanced_config/parameter_reference.html#SENS_MAG_AUTOROT"}},[t._v("by default")]),t._v(") for any of the "),n("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_SENSOR_ORIENTATION",target:"_blank",rel:"noopener noreferrer"}},[t._v("standard MAVLink orientations"),n("OutboundLink")],1),t._v(" (upright and facing forward, or any multiple of 45Â° offset in any axis) .")],1),t._v(" "),n("div",{staticClass:"custom-block note"},[n("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),n("p",[t._v("You can confirm that auto detection worked by looking at the "),n("RouterLink",{attrs:{to:"/en/advanced_config/parameter_reference.html#CAL_MAG0_ROT"}},[t._v("CAL_MAGn_ROT")]),t._v(" parameters.")],1)]),t._v(" "),n("p",[t._v("If a non-standard orientation has been used you will need to set the "),n("RouterLink",{attrs:{to:"/en/advanced_config/parameter_reference.html#CAL_MAG0_ROLL"}},[t._v("CAL_MAGx_ROLL")]),t._v(", "),n("RouterLink",{attrs:{to:"/en/advanced_config/parameter_reference.html#CAL_MAG0_PITCH"}},[t._v("CAL_MAGx_PITCH")]),t._v(", and "),n("RouterLink",{attrs:{to:"/en/advanced_config/parameter_reference.html#CAL_MAG0_YAW"}},[t._v("CAL_MAGx_YAW")]),t._v(" parameters for each compass to the angles that were used.")],1),t._v(" "),n("p",[t._v("This will automatically set "),n("RouterLink",{attrs:{to:"/en/advanced_config/parameter_reference.html#CAL_MAG0_ROT"}},[t._v("CAL_MAGn_ROT")]),t._v(' to "custom euler angle" and prevents automatic calibration for the selected compass (even if '),n("RouterLink",{attrs:{to:"/en/advanced_config/parameter_reference.html#SENS_MAG_AUTOROT"}},[t._v("SENS_MAG_AUTOROT")]),t._v(" is set).")],1),t._v(" "),n("h2",{attrs:{id:"further-information"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#further-information"}},[t._v("#")]),t._v(" Further Information")]),t._v(" "),n("ul",[n("li",[n("RouterLink",{attrs:{to:"/en/advanced_config/advanced_flight_controller_orientation_leveling.html"}},[t._v("Advanced Orientation Tuning")]),t._v(" (advanced users only).")],1),t._v(" "),n("li",[n("a",{attrs:{href:"https://docs.qgroundcontrol.com/master/en/qgc-user-guide/setup_view/sensors_px4.html#flight_controller_orientation",target:"_blank",rel:"noopener noreferrer"}},[t._v("QGroundControl User Guide > Sensors"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=a.exports},358:function(t,e,o){t.exports=o.p+"assets/img/fc_orientation_1.89f64a22.png"},383:function(t,e,o){t.exports=o.p+"assets/img/frame_heading.30556a25.png"},671:function(t,e,o){t.exports=o.p+"assets/img/yaw_rotation.c0ff8b97.png"},672:function(t,e,o){t.exports=o.p+"assets/img/sensor_orientation_set_orientations.d59e7040.jpg"},673:function(t,e,o){t.exports=o.p+"assets/img/sensor_orientation_selector_values.1b566bf2.jpg"}}]);