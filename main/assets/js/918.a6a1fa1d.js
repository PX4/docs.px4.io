(window.webpackJsonp=window.webpackJsonp||[]).push([[918],{328:function(_,t,e){_.exports=e.p+"assets/img/position_fixed.38e4a675.svg"},3762:function(_,t,e){"use strict";e.r(t);var v=e(19),o=Object(v.a)({},(function(){var _=this,t=_.$createElement,v=_._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"offboard-模式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#offboard-模式"}},[_._v("#")]),_._v(" Offboard 模式")]),_._v(" "),v("img",{attrs:{src:e(328),title:"需要定位修复（例如GPS）",width:"30px"}}),_._v(" "),v("p",[_._v("飞行器根据飞行控制栈外部（如机载计算机）提供的设定值控制位置、速度、加速度、姿态以及推力/力矩。 设置值可以经由 MAVLink 提供(也可以是一个类似 "),v("a",{attrs:{href:"https://mavsdk.mavlink.io/",target:"_blank",rel:"noopener noreferrer"}},[_._v("MAVSDK"),v("OutboundLink")],1),_._v("的MAVLink API)或者经由 "),v("RouterLink",{attrs:{to:"/zh/ros/ros2.html"}},[_._v("ROS 2")]),_._v(" 提供。")],1),_._v(" "),v("p",[_._v("PX4要求外部控制器提供2Hz连续的“有效存在”信号，该信号可由任意支持的 MAVLink 设置点消息或ROS 2 "),v("RouterLink",{attrs:{to:"/zh/msg_docs/OffboardControlMode.html"}},[_._v("OffboardControlMode")]),_._v(" 消息提供。 PX4只有在收到该种信号超过1秒后才有效，如果该种信号停止飞行控制栈将重新获得控制权（脱离Offboard模式）。")],1),_._v(" "),v("div",{staticClass:"custom-block note"},[v("p",{staticClass:"custom-block-title"},[_._v("注解")]),_._v(" "),v("ul",[v("li",[_._v("此模式需要位置或位/姿信息 - 例如 GPS、光流、视觉惯性里程计、mocap 等。")]),_._v(" "),v("li",[_._v("RC control is disabled except to change modes (you can also fly without any manual controller at all by setting the parameter "),v("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#COM_RC_IN_MODE"}},[_._v("COM_RC_IN_MODE")]),_._v(" to 4: Stick input disabled).")],1),_._v(" "),v("li",[_._v("飞行器必须已经收到一条 MAVLink 设置点消息或 ROS 2 "),v("RouterLink",{attrs:{to:"/zh/msg_docs/OffboardControlMode.html"}},[_._v("OffboardControlMode")]),_._v(" 消息，才允许在Offboard模式下解锁或者在飞行中切换至Offboard模式。")],1),_._v(" "),v("li",[_._v("如果没有以 > 2Hz 的速度收到MAVLink 设置点消息或 "),v("code",[_._v("OffboardControlMode")]),_._v(" ，飞行器将退出Offboard模式。")]),_._v(" "),v("li",[_._v("并非所有 MAVLink 支持的坐标系和字段值都被设定值消息和飞行器支持。 请_仔细_阅读以下章节，确保仅使用其支持的值。")])])]),_._v(" "),v("h2",{attrs:{id:"描述"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#描述"}},[_._v("#")]),_._v(" 描述")]),_._v(" "),v("p",[_._v("Offboard模式通过设置位置、速度、加速、姿态、姿态角速率或力/扭矩设定值来控制飞行器的位置和姿态。")]),_._v(" "),v("p",[_._v("PX4 必须能够以2Hz的速率连续收到 MAVLink 设定值消息或 ROS 2 "),v("RouterLink",{attrs:{to:"/zh/msg_docs/OffboardControlMode.html"}},[_._v("OffboardControlMode")]),_._v(" 消息以确保外部控制器正常运行。 该消息必须持续发送1秒以上PX4才能在Offboard模式下解锁或在飞行中切换至Offboard模式。 如果在外部控制器给出的指令速率低于2Hz，PX4将在超时("),v("a",{attrs:{href:"#COM_OF_LOSS_T"}},[_._v("COM_OF_LOSS_T")]),_._v(") 后退出Offboard模式，并尝试降落或执行其他一些失效保护行为。 失效保护行为取决于遥控器是否可用，它根据参数 "),v("a",{attrs:{href:"#COM_OBL_RC_ACT"}},[_._v("COM_OBL_RC_ACT")]),_._v(" 设定。")],1),_._v(" "),v("p",[_._v('当使用 MAVLink 时，设定值消息既传达了外部控制器"正常运行"的信号也传达了设定值本身。 Offboard模式下要保持位置，飞行器必须接收到一个包含当前位置设定值的消息指令。')]),_._v(" "),v("p",[_._v("当使用 ROS 2 时，通过监测 "),v("RouterLink",{attrs:{to:"/zh/msg_docs/OffboardControlMode.html"}},[_._v("OffboardControlMode")]),_._v(" 消息流来确保外部控制器运行正常，实际设定值由uORB消息发布的任一设定值提供，例如 "),v("RouterLink",{attrs:{to:"/zh/msg_docs/TrajectorySetpoint.html"}},[_._v("TrajectorySetpoint")]),_._v(" 为了在这种情况下保持当前位置，飞行器必须收到连续的 "),v("code",[_._v("OffboardControlMode")]),_._v(" 消息，但只需要收到 "),v("code",[_._v("TrajectorySetpoint")]),_._v(" 消息一次。")],1),_._v(" "),v("p",[_._v("请注意，Offboard模式只支持比较有限的 MAVLink 指令和消息。 其他操作如起飞、降落、返航，最好使用适当的模式来处理。 像上传、下载任务这样的操作可以在任何模式下执行。")]),_._v(" "),v("h2",{attrs:{id:"ros-2-消息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ros-2-消息"}},[_._v("#")]),_._v(" ROS 2 消息")]),_._v(" "),v("p",[_._v("以下 ROS 2 消息及其特定字段和字段值在特定的框架下是允许的。 除了提供心跳功能外， "),v("code",[_._v("OffboardControlMode")]),_._v(" 还有另外两个主要目的：")]),_._v(" "),v("ol",[v("li",[_._v("控制Offboard设定值在 "),v("RouterLink",{attrs:{to:"/zh/flight_stack/controller_diagrams.html"}},[_._v("PX4 控制架构")]),_._v(" 中的哪个等级上被注入执行，并禁止绕过控制器。")],1),_._v(" "),v("li",[_._v("确定需要哪种有效估计(位置或速度)，以及应该使用哪种设定值消息。")])]),_._v(" "),v("p",[v("code",[_._v("OffboardControlmode")]),_._v(" 消息定义如下所示。")]),_._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token comment"}},[_._v("# Off-board control mode")]),_._v("\n\nuint64 timestamp        "),v("span",{pre:!0,attrs:{class:"token comment"}},[_._v("# 系统开始的时间 (微秒)")]),_._v("\n\nbool position\nbool velocity\nbool acceleration\nbool attitude\nbool body_rate\nbool actuator\n")])])]),v("p",[_._v("消息中的字段按优先级排序， "),v("code",[_._v("位置")]),_._v(" 优于 "),v("code",[_._v("速度")]),_._v(" 及以后的字段。 "),v("code",[_._v("速度")]),_._v(" 优于 "),v("code",[_._v("加速度")]),_._v("，等等。 第一个非零字段(从上到下) 定义了Offboard模式所需的有效估计以及可用的设定值消息。 例如，如果 "),v("code",[_._v("加速度")]),_._v(" 字段是第一个非零字段，PX4 就需要一个有效的 "),v("code",[_._v("速度估计")]),_._v(", 并且设定值必须使用 "),v("code",[_._v("TrajectorySetpoint")]),_._v(" 消息指定。")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("期望控制对象")]),_._v(" "),v("th",[_._v("位置")]),_._v(" "),v("th",[_._v("速度")]),_._v(" "),v("th",[_._v("加速度")]),_._v(" "),v("th",[_._v("姿态")]),_._v(" "),v("th",[_._v("姿态角速率")]),_._v(" "),v("th",[_._v("执行器字段")]),_._v(" "),v("th",[_._v("直接给电机")]),_._v(" "),v("th",[_._v("所需状态估计")]),_._v(" "),v("th",[_._v("所需消息")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("位置 (NED)")]),_._v(" "),v("td",[_._v("✓")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("位置")]),_._v(" "),v("td",[v("RouterLink",{attrs:{to:"/zh/msg_docs/TrajectorySetpoint.html"}},[_._v("TrajectorySetpoint")])],1)]),_._v(" "),v("tr",[v("td",[_._v("速度 (NED)")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✓")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("速度")]),_._v(" "),v("td",[v("RouterLink",{attrs:{to:"/zh/msg_docs/TrajectorySetpoint.html"}},[_._v("TrajectorySetpoint")])],1)]),_._v(" "),v("tr",[v("td",[_._v("加速度（NED）")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✓")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("速度")]),_._v(" "),v("td",[v("RouterLink",{attrs:{to:"/zh/msg_docs/TrajectorySetpoint.html"}},[_._v("TrajectorySetpoint")])],1)]),_._v(" "),v("tr",[v("td",[_._v("姿态(FRD)")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✓")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("无")]),_._v(" "),v("td",[v("RouterLink",{attrs:{to:"/zh/msg_docs/VehicleAttitudeSetpoint.html"}},[_._v("VehicleAttitudeSetpoint")])],1)]),_._v(" "),v("tr",[v("td",[_._v("体轴角速率 (FRD)")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✓")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("无")]),_._v(" "),v("td",[v("RouterLink",{attrs:{to:"/zh/msg_docs/VehicleRatesSetpoint.html"}},[_._v("VehicleRatesSetpoint")])],1)]),_._v(" "),v("tr",[v("td",[_._v("推力和力矩(FRD)")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✓")]),_._v(" "),v("td",[_._v("-")]),_._v(" "),v("td",[_._v("无")]),_._v(" "),v("td",[v("RouterLink",{attrs:{to:"/zh/msg_docs/VehicleThrustSetpoint.html"}},[_._v("VehicleThrustSetpoint")]),_._v(" 和 "),v("RouterLink",{attrs:{to:"/zh/msg_docs/VehicleTorqueSetpoint.html"}},[_._v("VehicleTorqueSetpoint")])],1)]),_._v(" "),v("tr",[v("td",[_._v("直接给电机和舵机")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✗")]),_._v(" "),v("td",[_._v("✓")]),_._v(" "),v("td",[_._v("无")]),_._v(" "),v("td",[v("RouterLink",{attrs:{to:"/zh/msg_docs/ActuatorMotors.html"}},[_._v("ActuatorMotors")]),_._v(" and "),v("RouterLink",{attrs:{to:"/zh/msg_docs/ActuatorServos.html"}},[_._v("ActuatorServos")])],1)])])]),_._v(" "),v("p",[_._v("✓ 代表该位设置为有效， ✗ 代表该值未设置， "),v("code",[_._v("-")]),_._v(" 表示该值无关紧要。")]),_._v(" "),v("div",{staticClass:"custom-block note"},[v("p",{staticClass:"custom-block-title"},[_._v("注解")]),_._v(" "),v("p",[_._v("在使用 ROS 2 的Offboard模式之前, 请花几分钟时间了解PX4和ROS2使用的不同的 "),v("RouterLink",{attrs:{to:"/zh/ros/ros2_comm.html#ros-2-px4-frame-conventions"}},[_._v("坐标系")]),_._v("。")],1)]),_._v(" "),v("h3",{attrs:{id:"旋翼机"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#旋翼机"}},[_._v("#")]),_._v(" 旋翼机")]),_._v(" "),v("ul",[v("li",[v("p",[v("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/msg/TrajectorySetpoint.msg",target:"_blank",rel:"noopener noreferrer"}},[_._v("px4_msgs::msg::TrajectorySetpoint"),v("OutboundLink")],1)]),_._v(" "),v("ul",[v("li",[v("p",[_._v("支持以下输入组合：")]),_._v(" "),v("ul",[v("li",[_._v("位置设定值("),v("code",[_._v("position")]),_._v(" 不为 "),v("code",[_._v("NaN")]),_._v(")。 非"),v("code",[_._v("NaN")]),_._v(" 的速度和加速度值被用作内环控制器的前馈项。")]),_._v(" "),v("li",[_._v("速度设定值("),v("code",[_._v("velocity")]),_._v(" 不为 "),v("code",[_._v("NaN")]),_._v(" 同时 "),v("code",[_._v("position")]),_._v(" 为 "),v("code",[_._v("NaN")]),_._v("). 非"),v("code",[_._v("NaN")]),_._v(" 的加速度值被用于内环控制器的前馈项。")]),_._v(" "),v("li",[_._v("加速度设定值("),v("code",[_._v("acceleration")]),_._v(" 不为 "),v("code",[_._v("NaN")]),_._v(" 同时 "),v("code",[_._v("position")]),_._v(" 和  "),v("code",[_._v("velocity")]),_._v(" 为 "),v("code",[_._v("NaN")]),_._v(")。")])])]),_._v(" "),v("li",[v("p",[_._v("所有值都是基于NED(北, 东, 地)坐标系，位置、速度和加速的单位分别为[m], [m/s] 和[m/s^2] 。")])])])]),_._v(" "),v("li",[v("p",[v("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/msg/VehicleAttitudeSetpoint.msg",target:"_blank",rel:"noopener noreferrer"}},[_._v("px4_msgs::msg::VehicleAttitudeSetpoint"),v("OutboundLink")],1)]),_._v(" "),v("ul",[v("li",[v("p",[_._v("支持以下输入组合：")]),_._v(" "),v("ul",[v("li",[_._v("姿态四元数 "),v("code",[_._v("q_d")]),_._v(" + 推力设定值 "),v("code",[_._v("thrust_body")]),_._v("。 非-"),v("code",[_._v("NaN")]),_._v(" 值的 "),v("code",[_._v("yaw_sp_move_rate")]),_._v(" 被用作大地坐标系下的偏航角前馈使用，单位为[rad/s]。")])])]),_._v(" "),v("li",[v("p",[_._v("姿态四元数表示无人机机体坐标系FRD(前、右、下) 与NED坐标系之间的旋转。 这个推力是在无人机体轴FRD坐标系下，并归一化为 [-1, 1] 。")])])])]),_._v(" "),v("li",[v("p",[v("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/msg/VehicleRatesSetpoint.msg",target:"_blank",rel:"noopener noreferrer"}},[_._v("px4_msgs::msg::VehicleRatesSetpoint"),v("OutboundLink")],1)]),_._v(" "),v("ul",[v("li",[v("p",[_._v("支持以下输入组合：")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("roll")]),_._v(", "),v("code",[_._v("pitch")]),_._v(", "),v("code",[_._v("yaw")]),_._v(" and "),v("code",[_._v("thrust_body")]),_._v(".")])])]),_._v(" "),v("li",[v("p",[_._v("所有值都表示在无人机体轴FRD坐标系下。 角速率(roll, pitch, yaw) 单位为[rad/s] ，thrust_body归一化为 [-1, 1]。")])])])])]),_._v(" "),v("h3",{attrs:{id:"generic-vehicle"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#generic-vehicle"}},[_._v("#")]),_._v(" Generic Vehicle")]),_._v(" "),v("p",[_._v("下面的offboard控制模式会绕过所有PX4内部的控制环，应当非常谨慎地使用。")]),_._v(" "),v("ul",[v("li",[v("p",[v("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/msg/VehicleThrustSetpoint.msg",target:"_blank",rel:"noopener noreferrer"}},[_._v("px4_msgs::msg::VehicleThrustSetpoint"),v("OutboundLink")],1),_._v(" + "),v("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/msg/VehicleTorqueSetpoint.msg",target:"_blank",rel:"noopener noreferrer"}},[_._v("px4_msgs::msg::VehicleTorqueSetpoint"),v("OutboundLink")],1)]),_._v(" "),v("ul",[v("li",[_._v("支持以下输入组合：\n"),v("ul",[v("li",[v("code",[_._v("xyz")]),_._v(" 用于推力和 "),v("code",[_._v("xyz")]),_._v(" 用于力矩。")])])]),_._v(" "),v("li",[_._v("所有值都在无人机体轴 FRD 坐标系中表示，并且归一化为[-1, 1]。")])])]),_._v(" "),v("li",[v("p",[v("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/msg/ActuatorMotors.msg",target:"_blank",rel:"noopener noreferrer"}},[_._v("px4_msgs::msg::ActuatorMotors"),v("OutboundLink")],1),_._v(" + "),v("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/msg/ActuatorServos.msg",target:"_blank",rel:"noopener noreferrer"}},[_._v("px4_msgs::msg::ActuatorServos"),v("OutboundLink")],1)]),_._v(" "),v("ul",[v("li",[_._v("直接控制电机输出和/或伺服系统（舵机）输出。")]),_._v(" "),v("li",[_._v("所有值归一化为[-1, 1]。 对于不支持负数值的输出，负数项将映射到"),v("code",[_._v("NaN")]),_._v("。")]),_._v(" "),v("li",[v("code",[_._v("NaN")]),_._v("映射到上锁")])])])]),_._v(" "),v("h2",{attrs:{id:"mavlink-消息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#mavlink-消息"}},[_._v("#")]),_._v(" MAVLink 消息")]),_._v(" "),v("p",[_._v("下面的 MAVLink 消息及其特定字段和字段值在特定的帧下是允许的。")]),_._v(" "),v("h3",{attrs:{id:"直升机-垂直起降"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#直升机-垂直起降"}},[_._v("#")]),_._v(" 直升机/垂直起降")]),_._v(" "),v("ul",[v("li",[v("p",[v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED",target:"_blank",rel:"noopener noreferrer"}},[_._v("SET_POSITION_TARGET_LOCAL_NED"),v("OutboundLink")],1)]),_._v(" "),v("ul",[v("li",[v("p",[_._v("支持以下输入组合： ")]),_._v(" "),v("ul",[v("li",[_._v("位置设置值 （仅 "),v("code",[_._v("x")]),_._v("，"),v("code",[_._v("y")]),_._v("，"),v("code",[_._v("z")]),_._v("）")]),_._v(" "),v("li",[_._v("速度设定值（仅"),v("code",[_._v("vx")]),_._v("，"),v("code",[_._v("yy")]),_._v("，"),v("code",[_._v("vz")]),_._v("）")]),_._v(" "),v("li",[_._v("加速度设定值（仅 "),v("code",[_._v("afx")]),_._v("，"),v("code",[_._v("afy")]),_._v("，"),v("code",[_._v("afz")]),_._v("）")]),_._v(" "),v("li",[_._v("位置设定值"),v("strong",[_._v("和")]),_._v("速度设定值（速度设定值和加速度设定值被作为前馈使用；被叠加到位置控制器的输出上，结果作为速度控制器的输入使用）。")]),_._v(" "),v("li",[_._v("位置设定值"),v("strong",[_._v("和")]),_._v("速度设定值"),v("strong",[_._v("以及")]),_._v("加速度（速度和加速度设定值用作前馈；速度设定值叠加至位置控制器输出，并将结果作为速度控制器的输入；加速度设定值被叠加至速度控制器的输出中，输出结果用于计算推力矢量）。")])])]),_._v(" "),v("li",[v("p",[_._v("PX4 supports the following "),v("code",[_._v("coordinate_frame")]),_._v(" values (only): "),v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_NED",target:"_blank",rel:"noopener noreferrer"}},[_._v("MAV_FRAME_LOCAL_NED"),v("OutboundLink")],1),_._v(" and "),v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_BODY_NED",target:"_blank",rel:"noopener noreferrer"}},[_._v("MAV_FRAME_BODY_NED"),v("OutboundLink")],1),_._v(".")])])])]),_._v(" "),v("li",[v("p",[v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_GLOBAL_INT",target:"_blank",rel:"noopener noreferrer"}},[_._v("SET_POSITION_TARGET_GLOBAL_INT"),v("OutboundLink")],1)]),_._v(" "),v("ul",[v("li",[v("p",[_._v("支持以下输入组合： ")]),_._v(" "),v("ul",[v("li",[v("p",[_._v("位置设定值（仅"),v("code",[_._v("lat_int")]),_._v("，"),v("code",[_._v("lon_int")]),_._v("，"),v("code",[_._v("alt")]),_._v("）")])]),_._v(" "),v("li",[v("p",[_._v("速度设定值（仅"),v("code",[_._v("vx")]),_._v("，"),v("code",[_._v("vy")]),_._v("，"),v("code",[_._v("vz")]),_._v("）")])]),_._v(" "),v("li",[v("p",[v("em",[_._v("Thrust")]),_._v(" setpoint (only "),v("code",[_._v("afx")]),_._v(", "),v("code",[_._v("afy")]),_._v(", "),v("code",[_._v("afz")]),_._v(")")]),_._v(" "),v("div",{staticClass:"custom-block note"},[v("p",{staticClass:"custom-block-title"},[_._v("注解")])])])])])]),_._v(" "),v("p",[_._v("加速度设定值被用来生成归一化的推力设定值（即不支持加速度设定值）。\n:::")]),_._v(" "),v("ul",[v("li",[v("p",[_._v("位置设定值"),v("strong",[_._v("和")]),_._v("速度设定值（速度设定值被作为前馈使用；被叠加到位置控制器的输出上，结果作为速度控制器的输入使用）。")])]),_._v(" "),v("li",[v("p",[_._v("PX4 supports the following "),v("code",[_._v("coordinate_frame")]),_._v(" values (only): "),v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_GLOBAL",target:"_blank",rel:"noopener noreferrer"}},[_._v("MAV_FRAME_GLOBAL"),v("OutboundLink")],1),_._v(".")])])])]),_._v(" "),v("li",[v("p",[v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET",target:"_blank",rel:"noopener noreferrer"}},[_._v("SET_ATTITUDE_TARGET"),v("OutboundLink")],1)]),_._v(" "),v("ul",[v("li",[_._v("支持以下输入组合：\n"),v("ul",[v("li",[_._v("带有推力设定值（"),v("code",[_._v("SET_ATTITUDE_TARGET.thrust")]),_._v("）的姿态和方向（"),v("code",[_._v("SET_ATTITUDE_TARGET.q")]),_._v("）。")]),_._v(" "),v("li",[_._v("Body rate ("),v("code",[_._v("SET_ATTITUDE_TARGET")]),_._v(" "),v("code",[_._v(".body_roll_rate")]),_._v(" ,"),v("code",[_._v(".body_pitch_rate")]),_._v(", "),v("code",[_._v(".body_yaw_rate")]),_._v(") with thrust setpoint ("),v("code",[_._v("SET_ATTITUDE_TARGET.thrust")]),_._v(").")])])])])])]),_._v(" "),v("h3",{attrs:{id:"fixed-wing"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#fixed-wing"}},[_._v("#")]),_._v(" Fixed-wing")]),_._v(" "),v("ul",[v("li",[v("p",[v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED",target:"_blank",rel:"noopener noreferrer"}},[_._v("SET_POSITION_TARGET_LOCAL_NED"),v("OutboundLink")],1)]),_._v(" "),v("ul",[v("li",[v("p",[_._v("支持以下输入组合（通过 "),v("code",[_._v("type_mask")]),_._v("）： ")]),_._v(" "),v("ul",[v("li",[v("p",[_._v("位置设定值（仅"),v("code",[_._v("x")]),_._v("，"),v("code",[_._v("y")]),_._v("，"),v("code",[_._v("z")]),_._v("；速度和加速度设定值被忽略）。")]),_._v(" "),v("ul",[v("li",[v("p",[_._v("Specify the "),v("em",[_._v("type")]),_._v(" of the setpoint in "),v("code",[_._v("type_mask")]),_._v(" (if these bits are not set the vehicle will fly in a flower-like pattern): :::note Some of the "),v("em",[_._v("setpoint type")]),_._v(" values below are not part of the MAVLink standard for the "),v("code",[_._v("type_mask")]),_._v(" field.\n:::")]),_._v(" "),v("p",[_._v("值为：")]),_._v(" "),v("ul",[v("li",[_._v("292：滑动设定值。 这会将 TECS 配置为空速优先于高度，以便在没有推力时使无人机滑行（即控制俯仰以调节空速）。 这相当于设置 "),v("code",[_._v("type_mask")]),_._v(" 为 "),v("code",[_._v("POSITION_TARGET_TYPEMASK_Z_IGNORE")]),_._v("，"),v("code",[_._v("POSITION_TARGET_TYPEMASK_VZ_IGNORE")]),_._v("，"),v("code",[_._v("POSITION_TARGET_TYPEMASK_AZ_IGNORE")]),_._v("。")]),_._v(" "),v("li",[_._v("4096：起飞设定值。")]),_._v(" "),v("li",[_._v("8192：降落设定值。")]),_._v(" "),v("li",[_._v("12288：悬停设定值（以设定值为中心绕圈飞行）。")]),_._v(" "),v("li",[_._v("16384：空闲设定值（油门为0， 横滚 / 俯仰为0）。")])])])])])])]),_._v(" "),v("li",[v("p",[_._v("PX4 supports the coordinate frames ("),v("code",[_._v("coordinate_frame")]),_._v(" field): "),v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_NED",target:"_blank",rel:"noopener noreferrer"}},[_._v("MAV_FRAME_LOCAL_NED"),v("OutboundLink")],1),_._v(" and "),v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_BODY_NED",target:"_blank",rel:"noopener noreferrer"}},[_._v("MAV_FRAME_BODY_NED"),v("OutboundLink")],1),_._v(".")])])])]),_._v(" "),v("li",[v("p",[v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_GLOBAL_INT",target:"_blank",rel:"noopener noreferrer"}},[_._v("SET_POSITION_TARGET_GLOBAL_INT"),v("OutboundLink")],1)]),_._v(" "),v("ul",[v("li",[v("p",[_._v("支持以下输入组合（通过 "),v("code",[_._v("type_mask")]),_._v("）： ")]),_._v(" "),v("ul",[v("li",[v("p",[_._v("位置设定值（仅"),v("code",[_._v("lat_int")]),_._v("，"),v("code",[_._v("lon_int")]),_._v("，"),v("code",[_._v("alt")]),_._v("）")]),_._v(" "),v("ul",[v("li",[_._v("Specify the "),v("em",[_._v("type")]),_._v(" of the setpoint in "),v("code",[_._v("type_mask")]),_._v(" (if these bits are not set the vehicle will fly in a flower-like pattern):")])])])])])])])]),_._v(" "),v("div",{staticClass:"custom-block note"},[v("p",{staticClass:"custom-block-title"},[_._v("注解")]),_._v(" "),v("p",[_._v("The "),v("em",[_._v("setpoint type")]),_._v(" values below are not part of the MAVLink standard for the "),v("code",[_._v("type_mask")]),_._v(" field.")])]),_._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[_._v("    The values are:\n\n    - 4096：起飞设定值。\n    - 8192：降落设定值。\n    - 12288：悬停设定值（以设定值为中心绕圈飞行）。\n    - 16384：空闲设定值（油门为0， 横滚 / 俯仰为0）。\n")])])]),v("ul",[v("li",[v("p",[_._v("PX4 supports the following "),v("code",[_._v("coordinate_frame")]),_._v(" values (only): "),v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_GLOBAL",target:"_blank",rel:"noopener noreferrer"}},[_._v("MAV_FRAME_GLOBAL"),v("OutboundLink")],1),_._v(".")])]),_._v(" "),v("li",[v("p",[v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET",target:"_blank",rel:"noopener noreferrer"}},[_._v("SET_ATTITUDE_TARGET"),v("OutboundLink")],1)]),_._v(" "),v("ul",[v("li",[_._v("支持以下输入组合：\n"),v("ul",[v("li",[_._v("带有推力设定值（"),v("code",[_._v("SET_ATTITUDE_TARGET.thrust")]),_._v("）的姿态和方向（"),v("code",[_._v("SET_ATTITUDE_TARGET.q")]),_._v("）。")]),_._v(" "),v("li",[_._v("Body rate ("),v("code",[_._v("SET_ATTITUDE_TARGET")]),_._v(" "),v("code",[_._v(".body_roll_rate")]),_._v(" ,"),v("code",[_._v(".body_pitch_rate")]),_._v(", "),v("code",[_._v(".body_yaw_rate")]),_._v(") with thrust setpoint ("),v("code",[_._v("SET_ATTITUDE_TARGET.thrust")]),_._v(").")])])])])])]),_._v(" "),v("h3",{attrs:{id:"无人车"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#无人车"}},[_._v("#")]),_._v(" 无人车")]),_._v(" "),v("ul",[v("li",[v("p",[v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED",target:"_blank",rel:"noopener noreferrer"}},[_._v("SET_POSITION_TARGET_LOCAL_NED"),v("OutboundLink")],1)]),_._v(" "),v("ul",[v("li",[v("p",[_._v("支持以下输入组合(在 "),v("code",[_._v("type_mask")]),_._v(" 中)： ")]),_._v(" "),v("ul",[v("li",[v("p",[_._v("位置设置值 （仅 "),v("code",[_._v("x")]),_._v("，"),v("code",[_._v("y")]),_._v("，"),v("code",[_._v("z")]),_._v("）")]),_._v(" "),v("ul",[v("li",[_._v("Specify the "),v("em",[_._v("type")]),_._v(" of the setpoint in "),v("code",[_._v("type_mask")]),_._v(":")])])])])])])])]),_._v(" "),v("div",{staticClass:"custom-block note"},[v("p",{staticClass:"custom-block-title"},[_._v("注解")]),_._v(" "),v("p",[_._v("The "),v("em",[_._v("setpoint type")]),_._v(" values below are not part of the MAVLink standard for the "),v("code",[_._v("type_mask")]),_._v(" field. ::")]),_._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[_._v("    值为：\n\n    - 12288：悬停设定值（无人机足够接近设定值时会停止）。\n\n- Velocity setpoint (only `vx`, `vy`, `vz`)\n")])])]),v("ul",[v("li",[v("p",[_._v("PX4 supports the coordinate frames ("),v("code",[_._v("coordinate_frame")]),_._v(" field): "),v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_NED",target:"_blank",rel:"noopener noreferrer"}},[_._v("MAV_FRAME_LOCAL_NED"),v("OutboundLink")],1),_._v(" and "),v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_BODY_NED",target:"_blank",rel:"noopener noreferrer"}},[_._v("MAV_FRAME_BODY_NED"),v("OutboundLink")],1),_._v(".")])]),_._v(" "),v("li",[v("p",[v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_GLOBAL_INT",target:"_blank",rel:"noopener noreferrer"}},[_._v("SET_POSITION_TARGET_GLOBAL_INT"),v("OutboundLink")],1)]),_._v(" "),v("ul",[v("li",[v("p",[_._v("支持以下输入组合(在 "),v("code",[_._v("type_mask")]),_._v(" 中)： ")]),_._v(" "),v("ul",[v("li",[_._v("位置设定值（仅"),v("code",[_._v("lat_int")]),_._v("，"),v("code",[_._v("lon_int")]),_._v("，"),v("code",[_._v("alt")]),_._v("）")])])]),_._v(" "),v("li",[v("p",[_._v("Specify the "),v("em",[_._v("type")]),_._v(" of the setpoint in "),v("code",[_._v("type_mask")]),_._v(" (not part of the MAVLink standard). The values are:")]),_._v(" "),v("ul",[v("li",[_._v("下面的比特位没有置位，是正常表现。")]),_._v(" "),v("li",[_._v("12288：悬停设定值（无人机足够接近设定值时会停止）。")])])]),_._v(" "),v("li",[v("p",[_._v("PX4 supports the coordinate frames ("),v("code",[_._v("coordinate_frame")]),_._v(" field): "),v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_GLOBAL",target:"_blank",rel:"noopener noreferrer"}},[_._v("MAV_FRAME_GLOBAL"),v("OutboundLink")],1),_._v(".")])])])]),_._v(" "),v("li",[v("p",[v("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET",target:"_blank",rel:"noopener noreferrer"}},[_._v("SET_ATTITUDE_TARGET"),v("OutboundLink")],1)]),_._v(" "),v("ul",[v("li",[_._v("支持以下输入组合：\n"),v("ul",[v("li",[_._v("带有推力设定值（"),v("code",[_._v("SET_ATTITUDE_TARGET.thrust")]),_._v("）的姿态和方向（"),v("code",[_._v("SET_ATTITUDE_TARGET.q")]),_._v("）。 :::note\n实际仅使用/提取了偏航设置。")])])])])])])]),_._v(" "),v("h2",{attrs:{id:"offboard参数"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#offboard参数"}},[_._v("#")]),_._v(" Offboard参数")]),_._v(" "),v("p",[_._v("_Offboard模式_受以下参数影响：")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("参数")]),_._v(" "),v("th",[_._v("描述")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("a",{attrs:{id:"COM_OF_LOSS_T"}}),v("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#COM_OF_LOSS_T"}},[_._v("COM_OF_LOSS_T")])],1),_._v(" "),v("td",[_._v("Offboard 连接超时时间（以秒为单位），超过该时间未检测到offboard连接后将触发 offboard 连接丢失的失效保护措施 ( "),v("code",[_._v("COM_OBL_RC_ACT")]),_._v(")")])]),_._v(" "),v("tr",[v("td",[v("a",{attrs:{id:"COM_OBL_RC_ACT"}}),v("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#COM_OBL_RC_ACT"}},[_._v("COM_OBL_RC_ACT")])],1),_._v(" "),v("td",[_._v("当offboard模式控制丢失时切换到的飞行模式(值为 - "),v("code",[_._v("0")]),_._v(": "),v("em",[_._v("位置")]),_._v(", "),v("code",[_._v("1")]),_._v(": "),v("em",[_._v("高度")]),_._v(", "),v("code",[_._v("2")]),_._v(": "),v("em",[_._v("手动")]),_._v(", "),v("code",[_._v("3")]),_._v(": *返航, "),v("code",[_._v("4")]),_._v(": *降落*).")])]),_._v(" "),v("tr",[v("td",[v("a",{attrs:{id:"COM_RC_OVERRIDE"}}),v("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#COM_RC_OVERRIDE"}},[_._v("COM_RC_OVERRIDE")])],1),_._v(" "),v("td",[_._v("遥控器打杆时多旋翼（或者多旋翼模式下的 VOTL）会切换到 "),v("RouterLink",{attrs:{to:"/zh/flight_modes_mc/position.html"}},[_._v("位置模式")]),_._v("。 默认情况下未启用此功能。")],1)]),_._v(" "),v("tr",[v("td",[v("a",{attrs:{id:"COM_RC_STICK_OV"}}),v("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#COM_RC_STICK_OV"}},[_._v("COM_RC_STICK_OV")])],1),_._v(" "),v("td",[_._v("遥控器打杆多少会切换到 "),v("RouterLink",{attrs:{to:"/zh/flight_modes_mc/position.html"}},[_._v("位置模式")]),_._v(" （如果 "),v("a",{attrs:{href:"#COM_RC_OVERRIDE"}},[_._v("COM_RC_OVERRIDE")]),_._v(" 已启用）。")],1)]),_._v(" "),v("tr",[v("td",[v("a",{attrs:{id:"COM_RCL_EXCEPT"}}),v("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#COM_RCL_EXCEPT"}},[_._v("COM_RCL_EXCEPT")])],1),_._v(" "),v("td",[_._v("该参数指定一种模式，在该模式下将忽略RC丢失及不会触发RC丢失的失效保护动作。 将位 "),v("code",[_._v("2")]),_._v(" 置1将在Offboard模式下忽略RC丢失。")])])])]),_._v(" "),v("h2",{attrs:{id:"开发者资源"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#开发者资源"}},[_._v("#")]),_._v(" 开发者资源")]),_._v(" "),v("p",[_._v("通常，开发人员不直接在 MAVLink 层开发，而是使用机器人的API接口，例如 "),v("a",{attrs:{href:"https://mavsdk.mavlink.io/",target:"_blank",rel:"noopener noreferrer"}},[_._v(" MAVSDK "),v("OutboundLink")],1),_._v(" 或 "),v("a",{attrs:{href:"http://www.ros.org/",target:"_blank",rel:"noopener noreferrer"}},[_._v(" ROS "),v("OutboundLink")],1),_._v("（它们为开发人员提供了友好的 API，并负责管理和维护连接，发送消息和响应监视 - "),v("em",[_._v("Offboard 模式")]),_._v(" 和 MAVLink的细节）。")]),_._v(" "),v("p",[_._v("以下资源可能对开发者有用：")]),_._v(" "),v("ul",[v("li",[v("RouterLink",{attrs:{to:"/zh/ros/offboard_control.html"}},[_._v("Linux 的Offboard控制模式")])],1),_._v(" "),v("li",[v("RouterLink",{attrs:{to:"/zh/ros/mavros_offboard_cpp.html"}},[_._v("ROS/MAVROS Offboard例程(C++)")])],1),_._v(" "),v("li",[v("RouterLink",{attrs:{to:"/zh/ros/mavros_offboard_python.html"}},[_._v("ROS/MAVROS Offboard例程(Python)")])],1)])])}),[],!1,null,null,null);t.default=o.exports}}]);