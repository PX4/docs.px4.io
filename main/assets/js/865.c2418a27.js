(window.webpackJsonp=window.webpackJsonp||[]).push([[865],{327:function(t,e,_){t.exports=_.p+"assets/img/position_fixed.c1403cf0.svg"},3360:function(t,e,_){"use strict";_.r(e);var o=_(19),v=Object(o.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"offboard-模式"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#offboard-模式"}},[t._v("#")]),t._v(" Offboard 模式")]),t._v(" "),o("p",[o("RouterLink",{attrs:{to:"/zh/getting_started/flight_modes.html#key_position_fixed"}},[o("img",{attrs:{src:_(327),title:"需要定位修复（例如GPS）",width:"30px"}})])],1),t._v(" "),o("p",[t._v("飞行器根据飞行控制栈外部（如机载计算机）提供的设定值控制位置、速度、加速度、姿态以及推力/力矩。 设置值可以经由 MAVLink 提供(也可以是一个类似 "),o("a",{attrs:{href:"https://mavsdk.mavlink.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAVSDK"),o("OutboundLink")],1),t._v("的MAVLink API)或者经由 "),o("RouterLink",{attrs:{to:"/zh/ros/ros2.html"}},[t._v("ROS 2")]),t._v(" 提供。")],1),t._v(" "),o("p",[t._v("PX4要求外部控制器提供2Hz连续的“有效存在”信号，该信号可由任意支持的 MAVLink 设置点消息或ROS 2 "),o("RouterLink",{attrs:{to:"/zh/msg_docs/OffboardControlMode.html"}},[t._v("OffboardControlMode")]),t._v(" 消息提供。 PX4只有在收到该种信号超过1秒后才有效，如果该种信号停止飞行控制栈将重新获得控制权（脱离Offboard模式）。")],1),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),o("ul",[o("li",[t._v("此模式需要位置或位/姿信息 - 例如 GPS、光流、视觉惯性里程计、mocap 等。")]),t._v(" "),o("li",[t._v("除了更改模式外， 禁止遥控器控制。")]),t._v(" "),o("li",[t._v("飞行器必须已经收到一条 MAVLink 设置点消息或 ROS 2 "),o("RouterLink",{attrs:{to:"/zh/msg_docs/OffboardControlMode.html"}},[t._v("OffboardControlMode")]),t._v(" 消息，才允许在Offboard模式下解锁或者在飞行中切换至Offboard模式。")],1),t._v(" "),o("li",[t._v("如果没有以 > 2Hz 的速度收到MAVLink 设置点消息或 "),o("code",[t._v("OffboardControlMode")]),t._v(" ，飞行器将退出Offboard模式。")]),t._v(" "),o("li",[t._v("并非所有 MAVLink 支持的坐标系和字段值都被设定值消息和飞行器支持。 请"),o("em",[t._v("仔细")]),t._v("阅读以下章节，确保仅使用支持的值。 :::")])]),t._v(" "),o("h2",{attrs:{id:"描述"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#描述"}},[t._v("#")]),t._v(" 描述")]),t._v(" "),o("p",[t._v("Offboard模式通过设置位置、速度、加速、姿态、姿态角速率或力/扭矩设置点来控制飞行器的移动和姿态。")]),t._v(" "),o("p",[t._v("PX4 必须能够以2Hz的速率连续收到 MAVLink 设置点消息或 ROS 2 "),o("RouterLink",{attrs:{to:"/zh/msg_docs/OffboardControlMode.html"}},[t._v("OffboardControlMode")]),t._v(" 消息以确保外部控制器是正常运行的。 该消息必须已经持续发送1秒钟以上PX4才能在Offboard模式下解锁或在飞行中切换至Offboard模式。 如果在外部控制器给出的指令速率低于2Hz，PX4将在超时("),o("a",{attrs:{href:"#COM_OF_LOSS_T"}},[t._v("COM_OF_LOSS_T")]),t._v(")后退出Offboard模式，并尝试降落或执行其他一些失败保护行为。 失效保护行为取决于RC遥控器是否可用，依据参数 "),o("a",{attrs:{href:"#COM_OBL_RC_ACT"}},[t._v("COM_OBL_RC_ACT")]),t._v(" 的设定。")],1),t._v(" "),o("p",[t._v('当使用 MAVLink 时，设定值消息既传达了指示外部控制器"正常运行"的信号也传达了设定值本身。 Offboard模式下要保持位置，飞行器必须接收到一个包含当前位置设定值的消息指令。')]),t._v(" "),o("p",[t._v("当使用 ROS 2 时，外部控制器运行正常通过监测 "),o("RouterLink",{attrs:{to:"/zh/msg_docs/OffboardControlMode.html"}},[t._v("OffboardControlMode")]),t._v(" 消息流确保，真实设定点由发布任一包含设定值的uORB消息提供，例如 "),o("RouterLink",{attrs:{to:"/zh/msg_docs/TrajectorySetpoint.html"}},[t._v("TrajectorySetpoint")]),t._v("。 在这种情况下保持当前位置，飞行器必须收到连续的 "),o("code",[t._v("OffboardControlMode")]),t._v(" 消息，但只需要收到 "),o("code",[t._v("TrajectorySetpoint")]),t._v(" 消息一次。")],1),t._v(" "),o("p",[t._v("请注意，Offboard模式只支持非常有限的 MAVLink 命令和消息。 其他操作如起飞、降落、返航，最好使用适当的模式来处理。 像上传、下载任务这样的操作可以在任何模式下执行。")]),t._v(" "),o("h2",{attrs:{id:"ros-2-消息"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#ros-2-消息"}},[t._v("#")]),t._v(" ROS 2 消息")]),t._v(" "),o("p",[t._v("下面的 ROS 2 消息及其特定字段和字段值在特定的帧下是允许的。 除了提供心跳功能外， "),o("code",[t._v("OffboardControlMode")]),t._v(" 还有另外两个主要目的：")]),t._v(" "),o("ol",[o("li",[t._v("控制Offboard设定值在 "),o("RouterLink",{attrs:{to:"/zh/flight_stack/controller_diagrams.html"}},[t._v("PX4 控制架构")]),t._v(" 中的哪个等级上被注入执行，并禁止绕过控制器。")],1),t._v(" "),o("li",[t._v("确定需要哪种有效地估计(位置或速度)，以及应该使用哪种设定值消息。")])]),t._v(" "),o("p",[o("code",[t._v("OffboardControlmode")]),t._v(" 消息定义如下所示。")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("# Off-board control mode\n\nuint64 timestamp        # time since system start (microseconds)\n\nbool position\nbool velocity\nbool acceleration\nbool attitude\nbool body_rate\nbool actuator\n")])])]),o("p",[t._v("消息中的字段按优先级排序， "),o("code",[t._v("位置")]),t._v(" 优于 "),o("code",[t._v("速度")]),t._v(" 及以后的字段。 "),o("code",[t._v("速度")]),t._v(" 优于 "),o("code",[t._v("加速度")]),t._v("，等等。 第一个非零字段(从上到下)定义了Offboard模式所需的有效估计以及可以使用的 设定值消息。 例如，如果 "),o("code",[t._v("加速")]),t._v(" 字段是第一个非零字段，PX4 就需要一个有效的 "),o("code",[t._v("速度估计")]),t._v(", 并且设定值必须使用 "),o("code",[t._v("TrajectorySetpoint")]),t._v(" 消息指定。")]),t._v(" "),o("table",[o("thead",[o("tr",[o("th",[t._v("期望控制对象")]),t._v(" "),o("th",{staticStyle:{"text-align":"center"}},[t._v("位置")]),t._v(" "),o("th",{staticStyle:{"text-align":"center"}},[t._v("速度")]),t._v(" "),o("th",{staticStyle:{"text-align":"center"}},[t._v("加速度")]),t._v(" "),o("th",{staticStyle:{"text-align":"center"}},[t._v("姿态")]),t._v(" "),o("th",{staticStyle:{"text-align":"center"}},[t._v("体轴角速率")]),t._v(" "),o("th",{staticStyle:{"text-align":"center"}},[t._v("执行器字段")]),t._v(" "),o("th",{staticStyle:{"text-align":"center"}},[t._v("所需状态估计")]),t._v(" "),o("th",[t._v("所需消息")])])]),t._v(" "),o("tbody",[o("tr",[o("td",[t._v("位置 (NED)")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✓")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("位置")]),t._v(" "),o("td",[o("code",[t._v("TrajectorySetpoint")])])]),t._v(" "),o("tr",[o("td",[t._v("速度 (NED)")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✓")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("速度")]),t._v(" "),o("td",[o("code",[t._v("TrajectorySetpoint")])])]),t._v(" "),o("tr",[o("td",[t._v("加速度（NED）")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✓")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("速度")]),t._v(" "),o("td",[o("code",[t._v("TrajectorySetpoint")])])]),t._v(" "),o("tr",[o("td",[t._v("姿态(FRD)")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✓")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("无")]),t._v(" "),o("td",[o("RouterLink",{attrs:{to:"/zh/msg_docs/VehicleAttitudeSetpoint.html"}},[t._v("VehicleAttitudeSetpoint")])],1)]),t._v(" "),o("tr",[o("td",[t._v("体轴角速率 (FRD)")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✓")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("无")]),t._v(" "),o("td",[o("RouterLink",{attrs:{to:"/zh/msg_docs/VehicleRatesSetpoint.html"}},[t._v("VehicleRatesSetpoint")])],1)]),t._v(" "),o("tr",[o("td",[t._v("推力和力矩(FRD)")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✗")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("✓")]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v("无")]),t._v(" "),o("td",[o("RouterLink",{attrs:{to:"/zh/msg_docs/VehicleThrustSetpoint.html"}},[t._v("VehicleThrustSetpoint")]),t._v(" 和 "),o("RouterLink",{attrs:{to:"/zh/msg_docs/VehicleTorqueSetpoint.html"}},[t._v("VehicleTorqueSetpoint")])],1)])])]),t._v(" "),o("p",[t._v("✓ 代表该位设置为有效， ✗ 代表该位未设置， "),o("code",[t._v("-")]),t._v(" 表示该位状态无关紧要。")]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),o("p",[t._v("在使用 ROS 2 的Offboard模式之前, 请花几分钟时间了解PX4和ROS2使用的不同 "),o("RouterLink",{attrs:{to:"/zh/ros/ros2_comm.html#ros-2-px4-frame-conventions"}},[t._v("坐标系")]),t._v("。 :::")],1),t._v(" "),o("h3",{attrs:{id:"旋翼机"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#旋翼机"}},[t._v("#")]),t._v(" 旋翼机")]),t._v(" "),o("ul",[o("li",[o("p",[o("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/msg/TrajectorySetpoint.msg",target:"_blank",rel:"noopener noreferrer"}},[t._v("px4_msgs::msg::TrajectorySetpoint"),o("OutboundLink")],1)]),t._v(" "),o("ul",[o("li",[t._v("支持以下输入组合：\n"),o("ul",[o("li",[t._v("位置设定值("),o("code",[t._v("position")]),t._v(" 不为 "),o("code",[t._v("NaN")]),t._v(")。 非-"),o("code",[t._v("NaN")]),t._v(" 速度和加速度被用作内环控制律的前馈项。")]),t._v(" "),o("li",[t._v("速度设定值("),o("code",[t._v("velocity")]),t._v(" 不为 "),o("code",[t._v("NaN")]),t._v(" 同时 "),o("code",[t._v("position")]),t._v(" 为 "),o("code",[t._v("NaN")]),t._v("). 非-"),o("code",[t._v("NaN")]),t._v(" 加速度被用作内环控制律的前馈项。")]),t._v(" "),o("li",[t._v("加速度设定值("),o("code",[t._v("acceleration")]),t._v(" 不为 "),o("code",[t._v("NaN")]),t._v(" 同时 "),o("code",[t._v("position")]),t._v(" 和  "),o("code",[t._v("velocity")]),t._v(" 为 "),o("code",[t._v("NaN")]),t._v(")。")])])])]),t._v(" "),o("ul",[o("li",[t._v("所有值都是基于NED(北, 东, 地)坐标系，位置、速度和加速的单位分别为[m], [m/s] 和[m/s^2] 。")])])]),t._v(" "),o("li",[o("p",[o("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/msg/VehicleAttitudeSetpoint.msg",target:"_blank",rel:"noopener noreferrer"}},[t._v("px4_msgs::msg::VehicleAttitudeSetpoint"),o("OutboundLink")],1)]),t._v(" "),o("ul",[o("li",[t._v("支持以下输入组合：\n"),o("ul",[o("li",[t._v("姿态四元数 "),o("code",[t._v("q_d")]),t._v(" + 推力设定值 "),o("code",[t._v("thrust_body")]),t._v("。 非-"),o("code",[t._v("NaN")]),t._v(" 值的 "),o("code",[t._v("yaw_sp_move_rate")]),t._v(" 被用作大地坐标系下的偏航角前馈使用，单位为[rad/s]。")])])])]),t._v(" "),o("ul",[o("li",[t._v("姿态四元数表示无人机体轴FRD(前、右、下)坐标系与NED坐标系之间的旋转。 推力表示在无人机体轴FRD坐标系下的推力，并归一化为 [-1, 1] 。")])])]),t._v(" "),o("li",[o("p",[o("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/msg/VehicleRatesSetpoint.msg",target:"_blank",rel:"noopener noreferrer"}},[t._v("px4_msgs::msg::VehicleRatesSetpoint"),o("OutboundLink")],1)]),t._v(" "),o("ul",[o("li",[t._v("支持以下输入组合：\n"),o("ul",[o("li",[o("code",[t._v("roll")]),t._v(", "),o("code",[t._v("pitch")]),t._v(", "),o("code",[t._v("yaw")]),t._v(" and "),o("code",[t._v("thrust_body")]),t._v(".")])])])]),t._v(" "),o("ul",[o("li",[t._v("所有值都在无人机体轴FRD坐标系下表示。 角速率(roll, pitch, yaw)单位为[rad/s] ，thrust_body归一化为 [-1, 1]。")])])]),t._v(" "),o("li",[o("p",[o("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/msg/VehicleThrustSetpoint.msg",target:"_blank",rel:"noopener noreferrer"}},[t._v("px4_msgs::msg::VehicleThrustSetpoint"),o("OutboundLink")],1),t._v(" + "),o("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/msg/VehicleTorqueSetpoint.msg",target:"_blank",rel:"noopener noreferrer"}},[t._v("px4_msgs::msg::VehicleTorqueSetpoint"),o("OutboundLink")],1)]),t._v(" "),o("ul",[o("li",[t._v("支持以下输入组合：\n"),o("ul",[o("li",[o("code",[t._v("xyz")]),t._v(" 用于推力和 "),o("code",[t._v("xyz")]),t._v(" 用于力矩。")])])])]),t._v(" "),o("ul",[o("li",[t._v("所有值都在无人机体轴 FRD 坐标系中表示，并且归一化为[-1, 1]。")]),t._v(" "),o("li",[t._v("为了节省资源，此模式默认被禁用。 如果你想使用它，需要手动添加  "),o("code",[t._v("vehicle_thrust_setpoint")]),t._v(" and "),o("code",[t._v("vicle_torque_setpoint")]),t._v(" 到 "),o("RouterLink",{attrs:{to:"/zh/middleware/xrce_dds.html#dds-topics-yaml"}},[t._v("订阅主题")]),t._v("中并手动重新编译固件。")],1)])])]),t._v(" "),o("h2",{attrs:{id:"mavlink-消息"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#mavlink-消息"}},[t._v("#")]),t._v(" MAVLink 消息")]),t._v(" "),o("p",[t._v("下面的 MAVLink 消息及其特定字段和字段值在特定的帧下是允许的。")]),t._v(" "),o("h3",{attrs:{id:"直升机-垂直起降"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#直升机-垂直起降"}},[t._v("#")]),t._v(" 直升机/垂直起降")]),t._v(" "),o("ul",[o("li",[o("p",[o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED",target:"_blank",rel:"noopener noreferrer"}},[t._v("SET_POSITION_TARGET_LOCAL_NED"),o("OutboundLink")],1)]),t._v(" "),o("ul",[o("li",[t._v("支持以下输入组合： "),t._v(" "),o("ul",[o("li",[t._v("位置设置值 （仅 "),o("code",[t._v("x")]),t._v("，"),o("code",[t._v("y")]),t._v("，"),o("code",[t._v("z")]),t._v("）")]),t._v(" "),o("li",[t._v("速度设定值（仅"),o("code",[t._v("vx")]),t._v("，"),o("code",[t._v("yy")]),t._v("，"),o("code",[t._v("vz")]),t._v("）")]),t._v(" "),o("li",[t._v("加速度设定值（仅 "),o("code",[t._v("afx")]),t._v("，"),o("code",[t._v("afy")]),t._v("，"),o("code",[t._v("afz")]),t._v("）")]),t._v(" "),o("li",[t._v("位置设定值"),o("strong",[t._v("和")]),t._v("速度设定值（速度设定值和加速度设定值被作为前馈使用；被叠加到位置控制器的输出上，结果作为速度控制器的输入使用）。")]),t._v(" "),o("li",[t._v("Position setpoint "),o("strong",[t._v("and")]),t._v(" velocity setpoint "),o("strong",[t._v("and")]),t._v(" acceleration (the velocity and the acceleration setpoints are used as feedforwards; the velocity setpoint is added to the output of the position controller and the result is used as the input to the velocity controller; the acceleration setpoint is added to the output of the velocity controller and the result used to compute the thrust vector).")])])])]),t._v(" "),o("ul",[o("li",[o("ul",[o("li",[t._v("PX4 supports the following  "),o("code",[t._v("coordinate_frame")]),t._v(" values (only): "),o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_NED",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_FRAME_LOCAL_NED"),o("OutboundLink")],1),t._v(" and "),o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_BODY_NED",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_FRAME_BODY_NED"),o("OutboundLink")],1),t._v(".")])])])])]),t._v(" "),o("li",[o("p",[o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_GLOBAL_INT",target:"_blank",rel:"noopener noreferrer"}},[t._v("SET_POSITION_TARGET_GLOBAL_INT"),o("OutboundLink")],1)]),t._v(" "),o("ul",[o("li",[t._v("支持以下输入组合： "),t._v(" "),o("ul",[o("li",[o("p",[t._v("位置设定值（仅"),o("code",[t._v("lat_int")]),t._v("，"),o("code",[t._v("lon_int")]),t._v("，"),o("code",[t._v("alt")]),t._v("）")])]),t._v(" "),o("li",[o("p",[t._v("Velocity setpoint (only "),o("code",[t._v("vx")]),t._v(", "),o("code",[t._v("vy")]),t._v(", "),o("code",[t._v("vz")]),t._v(")")])]),t._v(" "),o("li",[o("p",[o("em",[t._v("Thrust")]),t._v(" setpoint  (only "),o("code",[t._v("afx")]),t._v(", "),o("code",[t._v("afy")]),t._v(", "),o("code",[t._v("afz")]),t._v(")")]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("注解")])])])])])])])]),t._v(" "),o("p",[t._v('Acceleration setpoint values are mapped to create a normalized thrust setpoint (i.e. acceleration setpoints are not "properly" supported).')])])]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[t._v("* Position setpoint **and** velocity setpoint (the velocity setpoint is used as feedforward; it is added to the output of the position controller and the result is used as the input to the velocity controller).\n")])])]),o("ul",[o("li",[t._v("PX4 支持以下  "),o("code",[t._v("coordinate_frame")]),t._v(" 值(仅限)： "),o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_GLOBAL",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_FRAME_GLOBAL"),o("OutboundLink")],1),t._v("。")])]),t._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET",target:"_blank",rel:"noopener noreferrer"}},[t._v("SET_ATTITUDE_TARGET"),o("OutboundLink")],1),t._v(" "),o("ul",[o("li",[t._v("支持以下输入组合：\n"),o("ul",[o("li",[t._v("带有推力设定值（"),o("code",[t._v("SET_ATTITUDE_TARGET.thrust")]),t._v("）的姿态和方向（"),o("code",[t._v("SET_ATTITUDE_TARGET.q")]),t._v("）。")]),t._v(" "),o("li",[t._v("带有推力设定值（"),o("code",[t._v("SET_ATTITUDE_TARGET.thrust")]),t._v("）的机身速率（"),o("code",[t._v("SET_ATTITUDE_TARGET")]),t._v(" "),o("code",[t._v(".body_roll_rate")]),t._v(" ，"),o("code",[t._v(".body_pitch_rate")]),t._v("，"),o("code",[t._v(".body_yaw_rate")]),t._v("）。")])])])])])]),t._v(" "),o("h3",{attrs:{id:"固定翼"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#固定翼"}},[t._v("#")]),t._v(" 固定翼")]),t._v(" "),o("ul",[o("li",[o("p",[o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED",target:"_blank",rel:"noopener noreferrer"}},[t._v("SET_POSITION_TARGET_LOCAL_NED"),o("OutboundLink")],1)]),t._v(" "),o("ul",[o("li",[t._v("支持以下输入组合（通过 "),o("code",[t._v("type_mask")]),t._v("）： "),t._v(" "),o("ul",[o("li",[t._v("位置设定值（仅"),o("code",[t._v("x")]),t._v("，"),o("code",[t._v("y")]),t._v("，"),o("code",[t._v("z")]),t._v("；速度和加速度设定值被忽略）。\n"),o("ul",[o("li",[o("p",[t._v("Specify the "),o("em",[t._v("type")]),t._v(" of the setpoint in "),o("code",[t._v("type_mask")]),t._v(" (if these bits are not set the vehicle will fly in a flower-like pattern): :::note Some of the "),o("em",[t._v("setpoint type")]),t._v(" values below are not part of the MAVLink standard for the "),o("code",[t._v("type_mask")]),t._v(" field. :::")]),t._v(" "),o("p",[t._v("值为：")]),t._v(" "),o("ul",[o("li",[t._v("292：滑动设定值。 这会将 TECS 配置为空速优先于高度，以便在没有推力时使无人机滑行（即控制俯仰以调节空速）。 这相当于设置 "),o("code",[t._v("type_mask")]),t._v(" 为 "),o("code",[t._v("POSITION_TARGET_TYPEMASK_Z_IGNORE")]),t._v("，"),o("code",[t._v("POSITION_TARGET_TYPEMASK_VZ_IGNORE")]),t._v("，"),o("code",[t._v("POSITION_TARGET_TYPEMASK_AZ_IGNORE")]),t._v("。")]),t._v(" "),o("li",[t._v("4096：起飞设定值。")]),t._v(" "),o("li",[t._v("8192：降落设定值。")]),t._v(" "),o("li",[t._v("12288：悬停设定值（以设定值为中心绕圈飞行）。")]),t._v(" "),o("li",[t._v("16384：空闲设定值（油门为0， 横滚 / 俯仰为0）。")])])])])])])]),t._v(" "),o("li",[t._v("PX4 支持坐标系指定 ("),o("code",[t._v("coordinate_frame")]),t._v(" 字段): "),o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_NED",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_FRAME_LOCAL_NED"),o("OutboundLink")],1),t._v(" 和 "),o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_BODY_NED",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_FRAME_BODY_NED"),o("OutboundLink")],1),t._v("。")])])]),t._v(" "),o("li",[o("p",[o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_GLOBAL_INT",target:"_blank",rel:"noopener noreferrer"}},[t._v("SET_POSITION_TARGET_GLOBAL_INT"),o("OutboundLink")],1)]),t._v(" "),o("ul",[o("li",[t._v("支持以下输入组合（通过 "),o("code",[t._v("type_mask")]),t._v("）： "),t._v(" "),o("ul",[o("li",[t._v("位置设定值（仅"),o("code",[t._v("lat_int")]),t._v("，"),o("code",[t._v("lon_int")]),t._v("，"),o("code",[t._v("alt")]),t._v("）\n"),o("ul",[o("li",[t._v("Specify the "),o("em",[t._v("type")]),t._v(" of the setpoint in "),o("code",[t._v("type_mask")]),t._v(" (if these bits are not set the vehicle will fly in a flower-like pattern):")])])])])])])])]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),o("p",[t._v("The "),o("em",[t._v("setpoint type")]),t._v(" values below are not part of the MAVLink standard for the "),o("code",[t._v("type_mask")]),t._v(" field. :::")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[t._v("    值为：\n    - 4096：起飞设定值。\n    - 8192：降落设定值。\n    - 12288：悬停设定值（以设定值为中心绕圈飞行）。\n    - 16384：空闲设定值（油门为0， 横滚 / 俯仰为0）。\n")])])]),o("ul",[o("li",[o("p",[t._v("PX4 支持以下  "),o("code",[t._v("coordinate_frame")]),t._v(" 值(仅限)： "),o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_GLOBAL",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_FRAME_GLOBAL"),o("OutboundLink")],1),t._v("。")])]),t._v(" "),o("li",[o("p",[o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET",target:"_blank",rel:"noopener noreferrer"}},[t._v("SET_ATTITUDE_TARGET"),o("OutboundLink")],1)]),t._v(" "),o("ul",[o("li",[t._v("支持以下输入组合：\n"),o("ul",[o("li",[t._v("带有推力设定值（"),o("code",[t._v("SET_ATTITUDE_TARGET.thrust")]),t._v("）的姿态和方向（"),o("code",[t._v("SET_ATTITUDE_TARGET.q")]),t._v("）。")]),t._v(" "),o("li",[t._v("带有推力设定值（"),o("code",[t._v("SET_ATTITUDE_TARGET.thrust")]),t._v("）的机身速率（"),o("code",[t._v("SET_ATTITUDE_TARGET")]),t._v(" "),o("code",[t._v(".body_roll_rate")]),t._v(" ，"),o("code",[t._v(".body_pitch_rate")]),t._v("，"),o("code",[t._v(".body_yaw_rate")]),t._v("）。")])])])])])]),t._v(" "),o("h3",{attrs:{id:"无人车"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#无人车"}},[t._v("#")]),t._v(" 无人车")]),t._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED",target:"_blank",rel:"noopener noreferrer"}},[t._v("SET_POSITION_TARGET_LOCAL_NED"),o("OutboundLink")],1),t._v(" "),o("ul",[o("li",[t._v("支持以下输入组合(在 "),o("code",[t._v("type_mask")]),t._v(" 中)： "),t._v(" "),o("ul",[o("li",[t._v("位置设置值 （仅 "),o("code",[t._v("x")]),t._v("，"),o("code",[t._v("y")]),t._v("，"),o("code",[t._v("z")]),t._v("）\n"),o("ul",[o("li",[t._v("Specify the "),o("em",[t._v("type")]),t._v(" of the setpoint in "),o("code",[t._v("type_mask")]),t._v(":")])])])])])])])]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),o("p",[t._v("The "),o("em",[t._v("setpoint type")]),t._v(" values below are not part of the MAVLink standard for the "),o("code",[t._v("type_mask")]),t._v(" field. ::")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[t._v("    值为：\n\n    - 12288：悬停设定值（无人机足够接近设定值时会停止）。\n* Velocity setpoint (only `vx`, `vy`, `vz`)\n")])])]),o("ul",[o("li",[t._v("PX4 支持坐标系指定 ("),o("code",[t._v("coordinate_frame")]),t._v(" 字段): "),o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_LOCAL_NED",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_FRAME_LOCAL_NED"),o("OutboundLink")],1),t._v(" 和 "),o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_BODY_NED",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_FRAME_BODY_NED"),o("OutboundLink")],1),t._v("。")])]),t._v(" "),o("ul",[o("li",[o("p",[o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_GLOBAL_INT",target:"_blank",rel:"noopener noreferrer"}},[t._v("SET_POSITION_TARGET_GLOBAL_INT"),o("OutboundLink")],1)]),t._v(" "),o("ul",[o("li",[t._v("支持以下输入组合(在 "),o("code",[t._v("type_mask")]),t._v(" 中)： "),t._v(" "),o("ul",[o("li",[t._v("位置设定值（仅"),o("code",[t._v("lat_int")]),t._v("，"),o("code",[t._v("lon_int")]),t._v("，"),o("code",[t._v("alt")]),t._v("）")])])]),t._v(" "),o("li",[t._v("Specify the "),o("em",[t._v("type")]),t._v(" of the setpoint in "),o("code",[t._v("type_mask")]),t._v(" (not part of the MAVLink standard). 值为：\n"),o("ul",[o("li",[t._v("下面的比特位没有置位，是正常表现。")]),t._v(" "),o("li",[t._v("12288：悬停设定值（无人机足够接近设定值时会停止）。")])])])]),t._v(" "),o("ul",[o("li",[t._v("PX4 支持坐标系（"),o("code",[t._v("corrdinate_frame")]),t._v("字段）："),o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_FRAME_GLOBAL",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_FRAME_GLOBAL"),o("OutboundLink")],1),t._v("。")])])]),t._v(" "),o("li",[o("p",[o("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET",target:"_blank",rel:"noopener noreferrer"}},[t._v("SET_ATTITUDE_TARGET"),o("OutboundLink")],1)]),t._v(" "),o("ul",[o("li",[t._v("支持以下输入组合：\n"),o("ul",[o("li",[t._v("带有推力设定值（"),o("code",[t._v("SET_ATTITUDE_TARGET.thrust")]),t._v("）的姿态和方向（"),o("code",[t._v("SET_ATTITUDE_TARGET.q")]),t._v("）。 :::note\n实际仅使用/提取了偏航设置。")])])])])])])])]),t._v(" "),o("h2",{attrs:{id:"offboard参数"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#offboard参数"}},[t._v("#")]),t._v(" Offboard参数")]),t._v(" "),o("p",[o("em",[t._v("Offboard mode")]),t._v(" is affected by the following parameters:")]),t._v(" "),o("table",[o("thead",[o("tr",[o("th",[t._v("参数")]),t._v(" "),o("th",[t._v("描述")])])]),t._v(" "),o("tbody",[o("tr",[o("td",[o("a",{attrs:{id:"COM_OF_LOSS_T"}}),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#COM_OF_LOSS_T"}},[t._v("COM_OF_LOSS_T")])],1),t._v(" "),o("td",[t._v("Time-out (in seconds) to wait when offboard connection is lost before triggering offboard lost failsafe ("),o("code",[t._v("COM_OBL_RC_ACT")]),t._v(")")])]),t._v(" "),o("tr",[o("td",[o("a",{attrs:{id:"COM_OBL_RC_ACT"}}),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#COM_OBL_RC_ACT"}},[t._v("COM_OBL_RC_ACT")])],1),t._v(" "),o("td",[t._v("Mode to switch to if offboard control is lost (Values are - 0: "),o("em",[t._v("Position")]),t._v(", 1: "),o("RouterLink",{attrs:{to:"/zh/flight_modes/altitude_mc.html"}},[t._v("Altitude")]),t._v(", 2: "),o("em",[t._v("Manual")]),t._v(", 3: "),o("RouterLink",{attrs:{to:"/zh/flight_modes/return.html"}},[t._v("Return ")]),t._v(", 4: "),o("RouterLink",{attrs:{to:"/zh/flight_modes/land.html"}},[t._v("Land")]),t._v(").")],1)]),t._v(" "),o("tr",[o("td",[o("a",{attrs:{id:"COM_RC_OVERRIDE"}}),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#COM_RC_OVERRIDE"}},[t._v("COM_RC_OVERRIDE")])],1),t._v(" "),o("td",[t._v("控制多旋翼（或者多旋翼模式下的 VOTL）的摇杆移动量来切换到 "),o("RouterLink",{attrs:{to:"/zh/flight_modes/position_mc.html"}},[t._v("位置模式")]),t._v("。 默认情况下未启用此功能。")],1)]),t._v(" "),o("tr",[o("td",[o("a",{attrs:{id:"COM_RC_STICK_OV"}}),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#COM_RC_STICK_OV"}},[t._v("COM_RC_STICK_OV")])],1),t._v(" "),o("td",[t._v("导致发射机切换到 "),o("RouterLink",{attrs:{to:"/zh/flight_modes/position_mc.html"}},[t._v("位置模式")]),t._v(" 的摇杆移动量（如果 "),o("a",{attrs:{href:"#COM_RC_OVERRIDE"}},[t._v("COM_RC_OVERRIDE")]),t._v(" 已启用）。")],1)]),t._v(" "),o("tr",[o("td",[o("a",{attrs:{id:"COM_RCL_EXCEPT"}}),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#COM_RCL_EXCEPT"}},[t._v("COM_RCL_EXCEPT")])],1),t._v(" "),o("td",[t._v("Specify modes in which RC loss is ignored and the failsafe action not triggered. Set bit "),o("code",[t._v("2")]),t._v(" to ignore RC loss in Offboard mode.")])])])]),t._v(" "),o("h2",{attrs:{id:"开发者资源"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#开发者资源"}},[t._v("#")]),t._v(" 开发者资源")]),t._v(" "),o("p",[t._v("Typically developers do not directly work at the MAVLink layer, but instead use a robotics API like "),o("a",{attrs:{href:"https://mavsdk.mavlink.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAVSDK"),o("OutboundLink")],1),t._v(" or "),o("a",{attrs:{href:"http://www.ros.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ROS"),o("OutboundLink")],1),t._v(" (these provide a developer friendly API, and take care of managing and maintaining connections, sending messages and monitoring responses - the minutiae of working with "),o("em",[t._v("Offboard mode")]),t._v(" and MAVLink).")]),t._v(" "),o("p",[t._v("以下资源可能对开发者有用：")]),t._v(" "),o("ul",[o("li",[o("RouterLink",{attrs:{to:"/zh/ros/offboard_control.html"}},[t._v("Offboard Control from Linux")])],1),t._v(" "),o("li",[o("RouterLink",{attrs:{to:"/zh/ros/mavros_offboard_cpp.html"}},[t._v("ROS/MAVROS Offboard Example (C++)")])],1),t._v(" "),o("li",[o("RouterLink",{attrs:{to:"/zh/ros/mavros_offboard_python.html"}},[t._v("ROS/MAVROS Offboard Example (Python)")])],1)])])}),[],!1,null,null,null);e.default=v.exports}}]);