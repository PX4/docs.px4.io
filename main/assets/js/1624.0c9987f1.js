(window.webpackJsonp=window.webpackJsonp||[]).push([[1624],{3055:function(e,t,s){"use strict";s.r(t);var a=s(19),o=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"magnetometer-compass-hardware-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#magnetometer-compass-hardware-setup"}},[e._v("#")]),e._v(" Magnetometer (Compass) Hardware & Setup")]),e._v(" "),s("p",[e._v("PX4 uses a magnetometer (compass) for determining the yaw and heading of the vehicle relative to the earth's magnetic field.")]),e._v(" "),s("p",[s("RouterLink",{attrs:{to:"/ko/flight_controller/pixhawk_series.html"}},[e._v("Pixhawk series")]),e._v(" flight controllers, and many others, include an internal compass.\nOn small vehicles the performance of the internal compass is almost always poor, because the flight controller has to be mounted close to motor/ESC power lines and other sources of electromagnetic interference.\nThe internal compass "),s("em",[e._v("may")]),e._v(" be useful on larger vehicles (e.g. VTOL) where it is possible to reduce electromagnetic interference by mounting the flight controller a long way from power supply lines.")],1),e._v(" "),s("p",[e._v("On most vehicles, and in particular on small vehicles, we recommend using a "),s("em",[e._v("combined GPS + Compass")]),e._v(" "),s("RouterLink",{attrs:{to:"/ko/assembly/mount_gps_compass.html"}},[e._v("mounted as far away from the motor/ESC power supply lines as possible")]),e._v(" - typically on a pedestal or wing (for fixed-wing).\nWhile you can use a "),s("a",{attrs:{href:"#stand-alone-compass-modules"}},[e._v("stand-alone external compass")]),e._v(" (as listed below) it is far more common to use a "),s("a",{attrs:{href:"#combined-gnss-compass-modules"}},[e._v("combined GPS/Compass module")]),e._v(".")],1),e._v(" "),s("p",[e._v("Magnetometers support connection to either the I2C/SPI-bus (Pixhawk "),s("code",[e._v("GPS1")]),e._v(" or "),s("code",[e._v("GPS2")]),e._v(' ports) or to the CAN bus.\nIf a module doesn\'t include "CAN" in its product name then it is probably an I2C/SPI compass.')]),e._v(" "),s("p",[e._v("Up to 4 internal or external magnetometers can be connected, though only one will actually be used as a heading source.\nThe system automatically chooses the best available compass based on their "),s("em",[e._v("priority")]),e._v(" (external magnetometers have a higher priority than internal magnetometers).\nIf the primary compass fails in-flight, it will failover to the next one.\nIf it fails before flight, arming will be denied.")]),e._v(" "),s("h2",{attrs:{id:"supported-compasses"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#supported-compasses"}},[e._v("#")]),e._v(" Supported Compasses")]),e._v(" "),s("h3",{attrs:{id:"compass-parts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#compass-parts"}},[e._v("#")]),e._v(" Compass Parts")]),e._v(" "),s("p",[e._v("PX4 can be used with many magnetometer parts, including: Bosch BMM 150 MEMS (via I2C bus), HMC5883 / HMC5983 (I2C or SPI), IST8310 (I2C), LIS3MDL (I2C or SPI), RM3100, and more.\nOther supported magnetometer parts and their busses can be inferred from the drivers listed in "),s("RouterLink",{attrs:{to:"/ko/modules/modules_driver_magnetometer.html"}},[e._v("Modules Reference: Magnetometer (Driver)")]),e._v(".")],1),e._v(" "),s("p",[e._v("These parts are included in stand alone compass modules, combined compass/GNSS modules, and also in many flight controllers,")]),e._v(" "),s("h3",{attrs:{id:"combined-gnss-compass-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#combined-gnss-compass-modules"}},[e._v("#")]),e._v(" Combined GNSS/Compass Modules")]),e._v(" "),s("p",[e._v("See "),s("RouterLink",{attrs:{to:"/ko/gps_compass/#supported-gnss"}},[e._v("Global Navigation Satellite Systems (GNSS)")]),e._v(" for a list of appropriate modules.")],1),e._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),s("p",[e._v("If GNSS is required, then a combined GNSS/Compass module will be preferred over the stand-alone modules below.")])]),e._v(" "),s("h3",{attrs:{id:"stand-alone-compass-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stand-alone-compass-modules"}},[e._v("#")]),e._v(" Stand-Alone Compass Modules")]),e._v(" "),s("p",[e._v("This list contains stand-alone magnetometer modules (without GNSS).")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[e._v("Device")]),e._v(" "),s("th",{staticStyle:{"text-align":"center"}},[e._v("Compass")]),e._v(" "),s("th",{staticStyle:{"text-align":"center"}},[e._v("DroneCan")])])]),e._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("a",{attrs:{href:"https://www.tindie.com/products/avionicsanonymous/uavcan-magnetometer/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Avionics Anonymous UAVCAN Magnetometer"),s("OutboundLink")],1)]),e._v(" "),s("td",{staticStyle:{"text-align":"center"}},[e._v("?")]),e._v(" "),s("td",{staticStyle:{"text-align":"center"}})]),e._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("a",{attrs:{href:"https://holybro.com/products/dronecan-rm3100-compass",target:"_blank",rel:"noopener noreferrer"}},[e._v("Holybro DroneCAN RM3100 Compass/Magnetometer"),s("OutboundLink")],1)]),e._v(" "),s("td",{staticStyle:{"text-align":"center"}},[e._v("RM3100")]),e._v(" "),s("td",{staticStyle:{"text-align":"center"}},[e._v("✓")])])])]),e._v(" "),s("p",[e._v("Note:")]),e._v(" "),s("ul",[s("li",[e._v('✓ or a specific part number indicate that a features is supported, while ✗ or empty show that the feature is not supported.\n"?" indicates "unknown".')]),e._v(" "),s("li",[e._v('A compass that is not "DroneCAN" can be assumed to be SPI or I2C.')])]),e._v(" "),s("h2",{attrs:{id:"mounting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mounting"}},[e._v("#")]),e._v(" Mounting")]),e._v(" "),s("p",[s("RouterLink",{attrs:{to:"/ko/assembly/mount_gps_compass.html"}},[e._v("Mounting the Compass")]),e._v(" explains how to mount a compass or GPS/Compass module.")],1),e._v(" "),s("h2",{attrs:{id:"i2c-spi-compass-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i2c-spi-compass-setup"}},[e._v("#")]),e._v(" I2C/SPI Compass Setup")]),e._v(" "),s("p",[e._v("On "),s("RouterLink",{attrs:{to:"/ko/flight_controller/pixhawk_series.html"}},[e._v("Pixhawk Series")]),e._v(" flight controllers you can connect to either the "),s("code",[e._v("GPS1")]),e._v(" or "),s("code",[e._v("GPS2")]),e._v(" ports (which have pins for I2C/SPI).\nNo further configuration is required.")],1),e._v(" "),s("h2",{attrs:{id:"can-compass-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#can-compass-setup"}},[e._v("#")]),e._v(" CAN Compass Setup")]),e._v(" "),s("p",[s("RouterLink",{attrs:{to:"/ko/dronecan/"}},[e._v("DroneCAN")]),e._v(" covers the setup for DroneCAN peripherals, including compasses.")],1),e._v(" "),s("p",[e._v("You will need to connect the compass to the "),s("RouterLink",{attrs:{to:"/ko/can/#wiring"}},[e._v("CAN bus")]),e._v(", enable DroneCAN, and specifically enable magnetometers (search for "),s("code",[e._v("UAVCAN_SUB_MAG")]),e._v(").")],1),e._v(" "),s("h2",{attrs:{id:"calibration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#calibration"}},[e._v("#")]),e._v(" Calibration")]),e._v(" "),s("p",[s("RouterLink",{attrs:{to:"/ko/config/compass.html"}},[e._v("Compass Calibration")]),e._v(" explains how to calibrate all compasses on the vehicle.")],1),e._v(" "),s("p",[e._v("The process is straightforward and will autodetect, "),s("RouterLink",{attrs:{to:"/ko/advanced_config/parameter_reference.html#SENS_MAG_AUTOROT"}},[e._v("set default rotations")]),e._v(", calibrate, and prioritise, all connected magnetometers.")],1),e._v(" "),s("h2",{attrs:{id:"see-also"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#see-also"}},[e._v("#")]),e._v(" See also")]),e._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/ko/advanced_config/compass_power_compensation.html"}},[e._v("Compass Power Compensation")])],1)])])}),[],!1,null,null,null);t.default=o.exports}}]);