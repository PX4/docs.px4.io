(window.webpackJsonp=window.webpackJsonp||[]).push([[1815],{3257:function(t,e,o){"use strict";o.r(e);var n=o(19),a=Object(n.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"windows-cygwin-开发环境-维护说明"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#windows-cygwin-开发环境-维护说明"}},[t._v("#")]),t._v(" Windows Cygwin 开发环境 (维护说明)")]),t._v(" "),o("p",[t._v("This topic explains how to construct and extend the development environment used for the no-longer-supported "),o("RouterLink",{attrs:{to:"/zh/dev_setup/dev_env_windows_cygwin.html"}},[t._v("Cygwin-based Windows Development Environment")]),t._v(".")],1),t._v(" "),o("h2",{attrs:{id:"附加信息"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#附加信息"}},[t._v("#")]),t._v(" 附加信息")]),t._v(" "),o("h3",{attrs:{id:"特性-问题"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#特性-问题"}},[t._v("#")]),t._v(" 特性/问题")]),t._v(" "),o("p",[t._v("以下已知正常功能 (版本 2.0):")]),t._v(" "),o("ul",[o("li",[t._v("使用 jMAVSim 编译和运行 SITL，其性能明显优于虚拟机 (它生成一个原生windows 二进制 ** px4.exe **)。")]),t._v(" "),o("li",[t._v("编译和上传 NuttX 二进制文件（例如：px4_fmu-v2 和 px4_fmu-v4）")]),t._v(" "),o("li",[t._v("Style check with "),o("em",[t._v("astyle")]),t._v(" (supports the command: "),o("code",[t._v("make format")]),t._v(")")]),t._v(" "),o("li",[t._v("命令行自动补全")]),t._v(" "),o("li",[t._v("绿色安装 The installer does NOT affect your system and global path (it only modifies the selected installation directory e.g. **C:\\PX4** and uses a temporary local path).")]),t._v(" "),o("li",[t._v("安装程序支持更新到最新版本，同时保持您的个人更改在工具链文件夹中。")])]),t._v(" "),o("p",[t._v("补充：")]),t._v(" "),o("ul",[o("li",[t._v("仿真模拟：暂不支持 Gazebo 和 ROS。")]),t._v(" "),o("li",[t._v("仅支持 NuttX 和 JMAVSim/SITL 构建。")]),t._v(" "),o("li",[o("a",{attrs:{href:"https://github.com/orgs/PX4/projects/6",target:"_blank",rel:"noopener noreferrer"}},[t._v("已知问题"),o("OutboundLink")],1),t._v(" (也用来报告问题)。")])]),t._v(" "),o("h3",{attrs:{id:"shell-脚本安装"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#shell-脚本安装"}},[t._v("#")]),t._v(" Shell 脚本安装")]),t._v(" "),o("p",[t._v("你还可以使用 Github 项目中的 shell 脚本进行开发环境的安装。")]),t._v(" "),o("ol",[o("li",[t._v("确保您安装了 "),o("a",{attrs:{href:"https://git-scm.com/download/win",target:"_blank",rel:"noopener noreferrer"}},[t._v("Windows 版本的 Git"),o("OutboundLink")],1),t._v("。")]),t._v(" "),o("li",[t._v("将代码仓库 https://github.com/PX4/windows-toolchain 克隆到要安装工具链的位置。 打开 "),o("code",[t._v("Git Bash")]),t._v(" 并执行以下操作，打开后会自动进入默认的安装目录：")])]),t._v(" "),o("div",{staticClass:"language-cmd extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("cd /c/\ngit clone https://github.com/PX4/windows-toolchain PX4\n")])])]),o("ol",[o("li",[t._v("如果要安装所有组件，请进入到新克隆的代码仓库文件夹， 然后双击位于文件夹 "),o("code",[t._v("toolchain")]),t._v("目录中的脚本 "),o("code",[t._v("install-all-components.bat")]),t._v("。 如果您只需要某些组件并希望占用有限的Internet 数据和磁盘空间，则可以进入到不同的组件文件夹，如 "),o("code",[t._v("toolchain\\cygwin64")]),t._v("，然后单击 ** install-XXX.bat ** 脚本以获取特定的内容。")]),t._v(" "),o("li",[t._v("继续 "),o("a",{attrs:{href:"#getting_started"}},[t._v(" 入门指南 ")]),t._v(" (或 "),o("a",{attrs:{href:"#usage_instructions"}},[t._v(" 使用说明 ")]),t._v(")")])]),t._v(" "),o("h3",{attrs:{id:"手动安装-用于工具链开发者"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#手动安装-用于工具链开发者"}},[t._v("#")]),t._v(" 手动安装 (用于工具链开发者)")]),t._v(" "),o("p",[t._v("本节描述如何手动设置Cygwin工具链，同时指向基于脚本的安装仓库中对应的脚本。 结果应与使用脚本或 MSI 安装程序相同。")]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),o("p",[t._v("由于工具链的更新维护，这些指令可能无法涵盖未来更改的所有细节。")])]),t._v(" "),o("ol",[o("li",[o("p",[t._v("Create the "),o("em",[t._v("folders")]),t._v(": **C:\\PX4**, **C:\\PX4\\toolchain** and **C:\\PX4\\home**")])]),t._v(" "),o("li",[o("p",[t._v("Download the "),o("em",[t._v("Cygwin installer")]),t._v(" file "),o("a",{attrs:{href:"https://cygwin.com/setup-x86_64.exe",target:"_blank",rel:"noopener noreferrer"}},[t._v("setup-x86_64.exe"),o("OutboundLink")],1),t._v(" from the "),o("a",{attrs:{href:"https://cygwin.com/install.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("official Cygwin website"),o("OutboundLink")],1)])]),t._v(" "),o("li",[o("p",[t._v("运行下载的安装文件")])]),t._v(" "),o("li",[o("p",[t._v("In the wizard choose to install into the folder: **C:\\PX4\\toolchain\\cygwin64**")])]),t._v(" "),o("li",[o("p",[t._v("选择安装默认的 Cygwin 基础包和以下附加包的最新可用版本:")]),t._v(" "),o("ul",[o("li",[o("strong",[t._v("类别:Packagename")])]),t._v(" "),o("li",[t._v("Devel:cmake (3.3.2 正常工作无告警, 3.6.2有告警但能够正常工作)")]),t._v(" "),o("li",[t._v("Devel:gcc-g++")]),t._v(" "),o("li",[t._v("Devel:gdb")]),t._v(" "),o("li",[t._v("Devel:git")]),t._v(" "),o("li",[t._v("Devel:make")]),t._v(" "),o("li",[t._v("Devel:ninja")]),t._v(" "),o("li",[t._v("Devel:patch")]),t._v(" "),o("li",[t._v("Editors:xxd")]),t._v(" "),o("li",[t._v("Editors:nano (除非你精通 vim)")]),t._v(" "),o("li",[t._v("Python:python2")]),t._v(" "),o("li",[t._v("Python:python2-pip")]),t._v(" "),o("li",[t._v("Python:python2-numpy")]),t._v(" "),o("li",[t._v("Python:python2-jinja2")]),t._v(" "),o("li",[t._v("Python:python2-pyyaml")]),t._v(" "),o("li",[t._v("Python:python2-cerberus")]),t._v(" "),o("li",[t._v("Archive:unzip")]),t._v(" "),o("li",[t._v("Utils:astyle")]),t._v(" "),o("li",[t._v("Shells:bash-completion")]),t._v(" "),o("li",[t._v("Web:wget")])]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("注解")])])])]),t._v(" "),o("p",[t._v("不要选择尽可能多的不在这个列表上的软件包，有些软件包冲突和中断构建。\n:::")]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),o("p",[t._v("这就是 "),o("a",{attrs:{href:"https://github.com/MaEtUgR/PX4Toolchain/blob/master/toolchain/cygwin64/install-cygwin-px4.bat",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cygwin64/install-cygwin-px4.bat"),o("OutboundLink")],1),t._v(" 批处理做的。")])]),t._v(" "),o("ol",[o("li",[o("p",[t._v("编写或复制 "),o("strong",[t._v("批处理脚本")]),t._v(" "),o("a",{attrs:{href:"https://github.com/MaEtUgR/PX4Toolchain/blob/master/run-console.bat",target:"_blank",rel:"noopener noreferrer"}},[o("code",[t._v("run-console.bat")]),o("OutboundLink")],1),t._v(" 和 "),o("a",{attrs:{href:"https://github.com/PX4/windows-toolchain/blob/master/toolchain/scripts/setup-environment.bat",target:"_blank",rel:"noopener noreferrer"}},[o("code",[t._v("setup-environment.bat")]),o("OutboundLink")],1),t._v(".")]),t._v(" "),o("p",[t._v("使用预先准备好的批处理脚本启动开发环境的原因是，这些脚本预配置了程序使用工具链所在目录下的绿色版 Cygwin 环境变量。 通过始终先调用脚本"),o("a",{attrs:{href:"https://github.com/PX4/windows-toolchain/blob/master/toolchain/scripts/setup-environment.bat",target:"_blank",rel:"noopener noreferrer"}},[t._v("** setup-environment.bat **"),o("OutboundLink")],1),t._v("和像控制台这样所需的应用程序来完成此操作。")]),t._v(" "),o("p",[t._v("脚本"),o("a",{attrs:{href:"https://github.com/PX4/windows-toolchain/blob/master/toolchain/scripts/setup-environment.bat",target:"_blank",rel:"noopener noreferrer"}},[t._v("setup-environment.bat"),o("OutboundLink")],1),t._v("用于设置工作区根目录 "),o("code",[t._v("PX4_DIR")]),t._v("的环境变量，和 unix 环境中的 "),o("code",[t._v("HOME")]),t._v("目录。")])]),t._v(" "),o("li",[o("p",[t._v("通过打开并运行 Cywin 工具链控制台（双击"),o("strong",[t._v("run-console.bat")]),t._v("）来添加必要的 "),o("strong",[t._v("python packages")]),t._v("。")]),t._v(" "),o("div",{staticClass:"language-sh extra-class"},[o("pre",{pre:!0,attrs:{class:"language-sh"}},[o("code",[t._v("pip2 "),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" toml\npip2 "),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" pyserial\npip2 "),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" pyulog\n")])])])])]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),o("p",[t._v("这是脚本 "),o("a",{attrs:{href:"https://github.com/MaEtUgR/PX4Toolchain/blob/master/toolchain/cygwin64/install-cygwin-python-packages.bat",target:"_blank",rel:"noopener noreferrer"}},[t._v("cygwin64/install-cygwin-python-packages.bat"),o("OutboundLink")],1),t._v("做的操作。")])]),t._v(" "),o("ol",[o("li",[t._v("下载 "),o("a",{attrs:{href:"https://developer.arm.com/open-source/gnu-toolchain/gnu-rm/downloads",target:"_blank",rel:"noopener noreferrer"}},[o("strong",[t._v("ARM GCC 编译器")]),o("OutboundLink")],1),t._v(" zip 二进制压缩包，并将内容解压缩到文件夹 "),o("code",[t._v("C:\\PX4\\toolchain\\gcc-arm")]),t._v("。")])]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),o("p",[t._v("这是在脚本"),o("a",{attrs:{href:"https://github.com/MaEtUgR/PX4Toolchain/blob/master/toolchain/gcc-arm/install-gcc-arm.bat",target:"_blank",rel:"noopener noreferrer"}},[t._v("gcc-arm/install-gcc-arm.bat"),o("OutboundLink")],1),t._v("中工具链做的操作。")])]),t._v(" "),o("ol",[o("li",[o("p",[t._v("安装 JDK")]),t._v(" "),o("ul",[o("li",[t._v("从 "),o("a",{attrs:{href:"https://www.oracle.com/java/technologies/javase-jdk14-downloads.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Oracle"),o("OutboundLink")],1),t._v(" 或 "),o("a",{attrs:{href:"https://adoptopenjdk.net/",target:"_blank",rel:"noopener noreferrer"}},[t._v("AdoptOpenJDK"),o("OutboundLink")],1),t._v(" 下载 Java 14。")]),t._v(" "),o("li",[t._v("不幸的是，没有包含二进制文件的便携存档，您必须直接安装它。")]),t._v(" "),o("li",[t._v("找到二进制文件并将其移动/复制到 "),o("strong",[t._v("C:\\PX4\\toolchain\\jdk")])]),t._v(" "),o("li",[t._v("您可以再次从 Windows 系统卸载工具包，我们只需要工具链中的二进制工具。")])])])]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),o("p",[t._v("这是工具链在: "),o("a",{attrs:{href:"https://github.com/MaEtUgR/PX4Toolchain/blob/master/toolchain/jdk/install-jdk.bat",target:"_blank",rel:"noopener noreferrer"}},[t._v("jdk/install-jdk.bat"),o("OutboundLink")],1),t._v(" 中所起的作用。")])]),t._v(" "),o("ol",[o("li",[o("p",[t._v("下载 Windows的二进制文件压缩包"),o("a",{attrs:{href:"https://ant.apache.org/bindownload.cgi",target:"_blank",rel:"noopener noreferrer"}},[o("strong",[t._v("Apache Ant")]),o("OutboundLink")],1),t._v(" ，并将内容解包到文件夹 "),o("code",[t._v("C:\\PX4\\toolchain\\apache-ant")])]),t._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[t._v("提示")])])])]),t._v(" "),o("p",[t._v("Make sure you don't have an additional folder layer from the folder which is inside the downloaded archive.\n:::")]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),o("p",[t._v("This is what the toolchain does in: "),o("a",{attrs:{href:"https://github.com/MaEtUgR/PX4Toolchain/blob/master/toolchain/apache-ant/install-apache-ant.bat",target:"_blank",rel:"noopener noreferrer"}},[t._v("apache-ant/install-apache-ant.bat"),o("OutboundLink")],1),t._v(".")])]),t._v(" "),o("ol",[o("li",[o("p",[t._v("Download, build and add "),o("em",[t._v("genromfs")]),t._v(" to the path:")]),t._v(" "),o("ul",[o("li",[o("p",[t._v("克隆源代码到文件夹 "),o("strong",[t._v("C:\\PX4\\toolchain\\genromfs\\genromfs-src")]),t._v(" 使用")]),t._v(" "),o("div",{staticClass:"language-cmd extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("cd /c/toolchain/genromfs\ngit clone https://github.com/chexum/genromfs.git genromfs-src\n")])])])]),t._v(" "),o("li",[o("p",[t._v("编译:")]),t._v(" "),o("div",{staticClass:"language-cmd extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("cd genromfs-src\nmake all\n")])])])]),t._v(" "),o("li",[o("p",[t._v("复制生成的二进制文件"),o("strong",[t._v("genromfs.exe")]),t._v("到"),o("strong",[t._v("C:\\PX4\\toolchain\\genromfs")]),t._v("同级目录下")])])])]),t._v(" "),o("li",[o("p",[t._v("确保所有已安装组件的二进制文件夹都正确配置在 "),o("a",{attrs:{href:"https://github.com/PX4/windows-toolchain/blob/master/toolchain/scripts/setup-environment.bat",target:"_blank",rel:"noopener noreferrer"}},[o("strong",[t._v("setup-environment.bat")]),o("OutboundLink")],1),t._v("配置的"),t._v("PATH</0>环境变量中。")])])])])}),[],!1,null,null,null);e.default=a.exports}}]);