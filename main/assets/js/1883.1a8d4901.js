(window.webpackJsonp=window.webpackJsonp||[]).push([[1883],{3540:function(t,s,a){"use strict";a.r(s);var n=a(19),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"搭建你的第一个应用-hello-shy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建你的第一个应用-hello-shy"}},[t._v("#")]),t._v(" 搭建你的第一个应用（Hello Shy）")]),t._v(" "),a("p",[t._v("本文主要说明如何创建并运行你的第一个板载应用程序。 它涵盖了 PX4 应用程序开发所需的所有基本概念和 API。")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),a("p",[t._v("为简单起见，省略了更高级的功能，如启动/停止功能和命令行参数。 这些在"),a("RouterLink",{attrs:{to:"/zh/modules/module_template.html"}},[t._v("Application/Module Template")]),t._v(" 中有介绍。")],1)]),t._v(" "),a("h2",{attrs:{id:"系统必备组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统必备组件"}},[t._v("#")]),t._v(" 系统必备组件")]),t._v(" "),a("p",[t._v("以下内容是您需要提前准备的：")]),t._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/zh/simulation/"}},[t._v("PX4 SITL 模拟器")]),t._v(" "),a("em",[t._v("或者")]),t._v(" 一个 "),a("a",{attrs:{href:"https://docs.px4.io/en/flight_controller/#documented-boards",target:"_blank",rel:"noopener noreferrer"}},[t._v("兼容 PX4 的飞行控制器"),a("OutboundLink")],1),t._v(" 。")],1),t._v(" "),a("li",[t._v("适用于期望平台的 "),a("RouterLink",{attrs:{to:"/zh/setup/dev_env.html"}},[t._v("PX4 开发工具链")]),t._v(" 。")],1),t._v(" "),a("li",[t._v("从 Github "),a("RouterLink",{attrs:{to:"/zh/setup/building_px4.html#get_px4_code"}},[t._v("下载 PX4 源代码")]),t._v(" 。")],1)]),t._v(" "),a("p",[t._v("The source code "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/tree/main/src/examples/px4_simple_app",target:"_blank",rel:"noopener noreferrer"}},[t._v("PX4-Autopilot/src/examples/px4_simple_app"),a("OutboundLink")],1),t._v(" directory contains a completed version of this tutorial that you can review if you get stuck.")]),t._v(" "),a("ul",[a("li",[t._v("重命名 (或删除) "),a("strong",[t._v("px4_simple_app")]),t._v(" 目录。")])]),t._v(" "),a("h2",{attrs:{id:"最小的应用程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最小的应用程序"}},[t._v("#")]),t._v(" 最小的应用程序")]),t._v(" "),a("p",[t._v("在本节中，我们创建一个"),a("em",[t._v("很小的应用程序")]),t._v("，只是打印出来"),a("code",[t._v("Hello Sky!")]),t._v("。 这包括一个"),a("em",[t._v("C")]),t._v("文件和一个"),a("em",[t._v("cmake")]),t._v("定义（它告诉工具链如何构建应用程序）。")]),a("p"),t._v(" "),a("ol",[a("li",[a("p",[t._v("新建如下文件夹： "),a("strong",[t._v("Firmware/src/examples/px4_simple_app")]),t._v("。")])]),t._v(" "),a("li",[a("p",[t._v("在该目录中新建一个名为 "),a("strong",[t._v("px4_simple_app.c")]),t._v(" 的 C 文件：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("将下面的默认头部注释复制到文件页面的顶部， 该注释应出现在所有贡献的文件中！")]),t._v(" "),a("div",{staticClass:"language-c extra-class"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/****************************************************************************\n *\n *   Copyright (c) 2012-2022 PX4 Development Team. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in\n *    the documentation and/or other materials provided with the\n *    distribution.\n * 3. Neither the name PX4 nor the names of its contributors may be\n *    used to endorse or promote products derived from this software\n *    without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS\n * FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,\n * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS\n * OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED\n * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN\n * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n ****************************************************************************/')]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("将下面的代码复制到头部注释的下方， 该注释应出现在所有贡献的文件中！")]),t._v(" "),a("div",{staticClass:"language-c extra-class"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @file px4_simple_app.c\n * Minimal application example for PX4 autopilot\n *\n * @author Example User <mail@example.com>\n */")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<px4_platform_common/log.h>")])]),t._v("\n\n__EXPORT "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("px4_simple_app_main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" argc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("argv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("px4_simple_app_main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" argc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("argv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("PX4_INFO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello Sky!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("函数必须以"),a("code",[t._v("<module_name>_main")]),t._v("格式命名并从模块中导出，如上图所示。")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[a("code",[t._v("PX4_INFO")]),t._v("相当于输出到PX4 shell的"),a("code",[t._v("printf")]),t._v("（包含在"),a("strong",[t._v("px4_platform_common/log.h")]),t._v("中）。 这里有不同的日志级别："),a("code",[t._v("PX4_INFO")]),t._v("、"),a("code",[t._v("PX4_WARN")]),t._v("、"),a("code",[t._v("PX4_ERR")]),t._v("、"),a("code",[t._v("PX4_DEBUG")]),t._v("。 警告和错误会额外添加到"),a("RouterLink",{attrs:{to:"/zh/dev_log/ulog_file_format.html"}},[t._v("ULog")]),t._v("并显示在"),a("a",{attrs:{href:"https://logs.px4.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Flight Review"),a("OutboundLink")],1),t._v(" 中。")],1)]),t._v(" "),a("ol",[a("li",[t._v("创建并打开一个名为"),a("strong",[t._v("CMakeLists.txt")]),t._v("的新"),a("em",[t._v("cmake")]),t._v("定义文件。 复制下面的文本："),a("div",{staticClass:"language-cmake extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cmake"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("############################################################################")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   Copyright (c) 2015 PX4 Development Team. All rights reserved.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Redistribution and use in source and binary forms, with or without")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# modification, are permitted provided that the following conditions")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# are met:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1. Redistributions of source code must retain the above copyright")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    notice, this list of conditions and the following disclaimer.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2. Redistributions in binary form must reproduce the above copyright")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    notice, this list of conditions and the following disclaimer in")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    the documentation and/or other materials provided with the")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    distribution.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3. Neither the name PX4 nor the names of its contributors may be")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    used to endorse or promote products derived from this software")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    without specific prior written permission.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# POSSIBILITY OF SUCH DAMAGE.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("############################################################################")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("px4_add_module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n MODULE examples__px4_simple_app\n MAIN px4_simple_app\n STACK_MAIN "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v("\n SRCS\n     px4_simple_app.c\n "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("DEPENDS")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("code",[t._v("px4_add_module()")]),t._v(" 方法根据模块描述生成静态库。\n"),a("ul",[a("li",[a("code",[t._v("MODULE")]),t._v("块是模块的唯一固件名称（按照惯例，模块名称的前缀是"),a("code",[t._v("src")]),t._v("之后的父路径）")]),t._v(" "),a("li",[a("code",[t._v("MAIN")]),t._v("块列出了模块的入口点，它将命令注册到 NuttX，以便可以从 PX4 shell 或 SITL 控制台调用它。")])])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("px4_add_module()")]),t._v(" format is documented in "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/cmake/px4_add_module.cmake",target:"_blank",rel:"noopener noreferrer"}},[t._v("PX4-Autopilot/cmake/px4_add_module.cmake"),a("OutboundLink")],1),t._v(". "),t._v("\n为了实现这一功能，我们使用了 POSIX 系统调用函数 "),a("a",{attrs:{href:"http://pubs.opengroup.org/onlinepubs/007908799/xsh/poll.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("poll()"),a("OutboundLink")],1),t._v(" 。")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),a("p",[t._v("如果您对"),a("code",[t._v("px4_add_module")]),t._v("指定"),a("code",[t._v("DYNAMIC")]),t._v("选项，则会在 POSIX 平台上创建一个动态库而不是静态库（这些可以在无需重新编译 PX4 的情况下加载，并作为二进制文件而不是源代码共享给其他人）。 您的应用程序不会成为内置命令，而是生成一个名为"),a("code",[t._v("examples__px4_simple_app.px4mod")]),t._v("的文件。 您可以通过在运行时使用以下"),a("code",[t._v("dyn")]),t._v("命令加载文件来运行您的命令："),a("code",[t._v("dyn ./examples__px4_simple_app.px4mod")])])])]),t._v(" "),a("ol",[a("li",[t._v("Create and open a new "),a("em",[t._v("Kconfig")]),t._v(" definition file named "),a("strong",[t._v("Kconfig")]),t._v(" and define your symbol for naming (see "),a("RouterLink",{attrs:{to:"/zh/hardware/porting_guide_config.html#px4-kconfig-symbol-naming-convention"}},[t._v("Kconfig naming convention")]),t._v("). Copy in the text below:"),a("div",{staticClass:"language-menuconfig EXAMPLES_PX4_SIMPLE_APP extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(' bool "PX4 Simple app"\n default n\n ---help---\n     Enable PX4 simple app\n')])])])],1)]),t._v(" "),a("h2",{attrs:{id:"编译应用程序-固件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译应用程序-固件"}},[t._v("#")]),t._v(" 编译应用程序/固件")]),t._v(" "),a("p",[t._v("应用程序的编写至此完成。 为了运行它，您首先需要确保它是作为 PX4 的一部分构建的。 应用程序被将依据目标的适当板级"),a("em",[t._v("cmake")]),t._v("文件添加到编译/固件中：")]),t._v(" "),a("ul",[a("li",[t._v("PX4 SITL (Simulator): "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/boards/px4/sitl/default.px4board",target:"_blank",rel:"noopener noreferrer"}},[t._v("PX4-Autopilot/boards/px4/sitl/default.px4board"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Pixhawk v1/2: "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/boards/px4/fmu-v2/default.px4board",target:"_blank",rel:"noopener noreferrer"}},[t._v("PX4-Autopilot/boards/px4/fmu-v2/default.px4board"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Pixracer (px4/fmu-v4): "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/boards/px4/fmu-v4/default.px4board",target:"_blank",rel:"noopener noreferrer"}},[t._v("PX4-Autopilot/boards/px4/fmu-v4/default.px4board"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("em",[t._v("px4board")]),t._v(" files for other boards can be found in "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/tree/main/boards",target:"_blank",rel:"noopener noreferrer"}},[t._v("PX4-Autopilot/boards/"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("To enable the compilation of the application into the firmware add the corresponding Kconfig key "),a("code",[t._v("CONFIG_EXAMPLES_PX4_SIMPLE_APP=y")]),t._v(" in the "),a("em",[t._v("px4board")]),t._v(" file or run "),a("RouterLink",{attrs:{to:"/zh/hardware/porting_guide_config.html#px4-menuconfig-setup"}},[t._v("boardconfig")]),t._v(" "),a("code",[t._v("make px4_fmu-v4_default boardconfig")]),t._v(":")],1),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("examples  ---\x3e\n    [x] PX4 Simple app  ----\n")])])]),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),a("p",[t._v("该行已经存在于大多数文件中，因为固件中默认包含这些示例。")])]),t._v(" "),a("p",[t._v("使用特定板的命令构建示例：")]),t._v(" "),a("ul",[a("li",[t._v("jMAVSim 模拟器： "),a("code",[t._v("make px4_sitl_default jmavsim")])]),t._v(" "),a("li",[t._v("Pixhawk v1/2："),a("code",[t._v("make px4_fmu-v2_default")]),t._v("（或者仅使用"),a("code",[t._v("make px4_fmu-v2")]),t._v("）")]),t._v(" "),a("li",[t._v("Pixhawk v3： "),a("code",[t._v("make px4_fmu-v4_default")])]),t._v(" "),a("li",[t._v("其它板: "),a("RouterLink",{attrs:{to:"/zh/dev_setup/building_px4.html#building-for-nuttx"}},[t._v("构建代码")])],1)]),t._v(" "),a("h2",{attrs:{id:"测试应用-硬件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试应用-硬件"}},[t._v("#")]),t._v(" 测试应用（硬件）")]),t._v(" "),a("h3",{attrs:{id:"将固件上传至飞控板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将固件上传至飞控板"}},[t._v("#")]),t._v(" 将固件上传至飞控板")]),t._v(" "),a("p",[t._v("启用上传器，然后重启飞控板：")]),t._v(" "),a("ul",[a("li",[t._v("Pixhawk v1/2: "),a("code",[t._v("make px4_fmu-v2_default upload")])]),t._v(" "),a("li",[t._v("Pixhawk v3: "),a("code",[t._v("make px4_fmu-v4_default upload")])])]),t._v(" "),a("p",[t._v("在您重启飞控板之前，它应该打印一些编译消息，并在最后打印：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("Loaded firmware "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" X,X, waiting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the bootloader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),a("p",[t._v("一旦飞控板被重启并完成了固件的上传，命令行界面将输出：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("Erase  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100.0")]),t._v("%\nProgram: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100.0")]),t._v("%\nVerify "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100.0")]),t._v("%\nRebooting.\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Built target upload\n")])])]),a("h3",{attrs:{id:"连接至控制台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接至控制台"}},[t._v("#")]),t._v(" 连接至控制台")]),t._v(" "),a("p",[t._v("现在通过串口或USB连接到"),a("RouterLink",{attrs:{to:"/zh/debug/system_console.html"}},[t._v("系统控制台")]),t._v("。 按"),a("strong",[t._v("ENTER")]),t._v("将调出 shell 提示：")],1),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("nsh"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("输入“help”并按回车键")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("nsh"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" usage:  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("cmd"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("df")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkfifo")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),t._v("       \n  ?           "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v("        losetup     mkrd        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("pwd")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("        \n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("          mh          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("umount")]),t._v("      \n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("        mb          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rmdir")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("unset")]),t._v("       \n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v("         usleep      \n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dd")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v("        mkfatfs     mw          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v("          xd          \n\nBuiltin Apps:\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reboot")]),t._v("\n  perf\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("top")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n  px4_simple_app\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n  sercon\n  serdis\n")])])]),a("p",[t._v("请注意，"),a("code",[t._v("px4_simple_app")]),t._v("现在是可用命令的一部分。 通过键入"),a("code",[t._v("px4_simple_app")]),t._v("并输入回车启动它：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("nsh"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" px4_simple_app\nHello Sky"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])]),a("p",[t._v("该应用程序现在已正确注册到系统中，并且可以扩展以实际执行实用的任务。")]),t._v(" "),a("h2",{attrs:{id:"测试应用-sitl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试应用-sitl"}},[t._v("#")]),t._v(" 测试应用（SITL）")]),t._v(" "),a("p",[t._v("如果您使用 SITL，"),a("em",[t._v("PX4 控制台")]),t._v("会自动启动（请参阅"),a("RouterLink",{attrs:{to:"/zh/dev_setup/building_px4.html#first-build-using-the-jmavsim-simulator"}},[t._v("构建代码>第一次构建（使用 jMAVSim 模拟器）")]),t._v("）。 与"),a("em",[t._v("nsh 控制台")]),t._v("（请参阅上一节）相同，您可以键入"),a("code",[t._v("help")]),t._v("以查看内置程序列表。")],1),t._v(" "),a("p",[t._v("输入"),a("code",[t._v("px4_simple_app")]),t._v("来运行这个最小的应用程序。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("pxh"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" px4_simple_app\nINFO  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("px4_simple_app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Hello Sky"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])]),a("p",[t._v("现在可以扩展该应用程序以实际执行实用的任务")]),t._v(" "),a("h2",{attrs:{id:"订阅传感器数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#订阅传感器数据"}},[t._v("#")]),t._v(" 订阅传感器数据")]),t._v(" "),a("p",[t._v("为了做一些实用的事情，应用程序需要订阅输入和发布输出（例如电机或伺服命令）。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("PX4 硬件抽象的好处在这里发挥作用！ 无需以任何方式与传感器驱动程序交互，如果板或传感器更新，也无需更新您的应用程序。 为了实现这一功能，我们使用了 POSIX 系统调用函数 [poll()](http://pubs.opengroup.org/onlinepubs/007908799/xsh/poll.html) 。")]),t._v(" "),a("p",[t._v("应用程序之间的每个消息通道称为"),a("RouterLink",{attrs:{to:"/zh/middleware/uorb.html"}},[t._v("主题")]),t._v("。 For this tutorial, we are interested in the "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/msg/SensorCombined.msg",target:"_blank",rel:"noopener noreferrer"}},[t._v("SensorCombined"),a("OutboundLink")],1),t._v(" topic, which holds the synchronized sensor data of the complete system.")],1),t._v(" "),a("p",[t._v("订阅主题很简单：")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<uORB/topics/sensor_combined.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" sensor_sub_fd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("orb_subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ORB_ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sensor_combined"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("code",[t._v("sensor_sub_fd")]),t._v("是一个主题句柄，它可以用于非常有效地执行阻塞等待新数据。 当前线程进入休眠状态，一旦有新数据可用就会被调度器自动唤醒，等待时不消耗任何 CPU 周期。 为此，我们使用"),a("a",{attrs:{href:"http://pubs.opengroup.org/onlinepubs/007908799/xsh/poll.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("poll()"),a("OutboundLink")],1),t._v(" POSIX 系统调用。")]),t._v(" "),a("p",[t._v("添加"),a("code",[t._v("poll()")]),t._v("到订阅看起来像（"),a("em",[t._v("伪代码，在下面可查找完整的实现")]),t._v("）：")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<poll.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<uORB/topics/sensor_combined.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" sensor_sub_fd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("orb_subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ORB_ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sensor_combined"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* one could wait for multiple topics with this technique, just using one here */")]),t._v("\npx4_pollfd_struct_t fds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sensor_sub_fd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("events "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" POLLIN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* wait for sensor update of 1 file descriptor for 1000 ms (1 second) */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" poll_ret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("px4_poll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("revents "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" POLLIN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* obtained data for the first file descriptor */")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("sensor_combined_s")]),t._v(" raw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* copy sensors raw data into local buffer */")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("orb_copy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ORB_ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sensor_combined"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sensor_sub_fd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("raw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("PX4_INFO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Accelerometer:\\t%8.4f\\t%8.4f\\t%8.4f"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("raw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accelerometer_m_s2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("raw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accelerometer_m_s2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("raw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accelerometer_m_s2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("再次编译应用程序可以输入：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n")])])]),a("h3",{attrs:{id:"测试-uorb-消息订阅"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试-uorb-消息订阅"}},[t._v("#")]),t._v(" 测试 uORB 消息订阅")]),t._v(" "),a("p",[t._v("最后一步是通过在 nsh shell 中键入以下内容来启动您的应用程序作为后台进程/任务：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("px4_simple_app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])])]),a("p",[t._v("您的应用程序将在控制台中显示 5 个传感器值（译者注：需要使用后面的完整示例中的代码，如果使用上面的伪代码会连续输出并无法退出），然后退出：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("px4_simple_app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Accelerometer:   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0483")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0821")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0332")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("px4_simple_app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Accelerometer:   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0486")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0820")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0336")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("px4_simple_app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Accelerometer:   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0487")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0819")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0327")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("px4_simple_app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Accelerometer:   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0482")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0818")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0323")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("px4_simple_app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Accelerometer:   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0482")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0827")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0331")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("px4_simple_app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Accelerometer:   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0489")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0804")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0328")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/zh/modules/module_template.html"}},[t._v("完整应用程序的模块模板")]),t._v("可用于编写可从命令行控制的后台进程。")],1)])]),t._v(" "),a("h2",{attrs:{id:"发布数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布数据"}},[t._v("#")]),t._v(" 发布数据")]),t._v(" "),a("p",[t._v("要使用计算出的输出，下一步是"),a("em",[t._v("发布")]),t._v("结果。 下面我们将展示如何发布姿态主题。")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),a("p",[t._v("这里我们选取 "),a("code",[t._v("attitude")]),t._v(" topic 是因为 "),a("em",[t._v("mavlink")]),t._v(" app 会自动将该 topic 中的数据转发至地面控制站，这样可以方便我们查看这些结果。")])]),t._v(" "),a("p",[t._v("接口非常简单：初始化要发布的主题"),a("code",[t._v("struct")]),t._v("并发布主题：")]),t._v(" "),a("div",{staticClass:"language-c extra-class"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<uORB/topics/vehicle_attitude.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* advertise attitude topic */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("vehicle_attitude_s")]),t._v(" att"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("memset")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("att"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sizeof")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("att"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("orb_advert_t")]),t._v(" att_pub_fd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("orb_advertise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ORB_ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vehicle_attitude"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("att"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("在主循环中，随时发布信息：")]),t._v(" "),a("div",{staticClass:"language-c extra-class"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("orb_publish")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ORB_ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vehicle_attitude"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" att_pub_fd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("att"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"完整的示例代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#完整的示例代码"}},[t._v("#")]),t._v(" 完整的示例代码")]),t._v(" "),a("p",[t._v("The "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/src/examples/px4_simple_app/px4_simple_app.c",target:"_blank",rel:"noopener noreferrer"}},[t._v("complete example code"),a("OutboundLink")],1),t._v(" is now:")]),t._v(" "),a("div",{staticClass:"language-c extra-class"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/****************************************************************************\n *\n *   Copyright (c) 2012-2019 PX4 Development Team. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in\n *    the documentation and/or other materials provided with the\n *    distribution.\n * 3. Neither the name PX4 nor the names of its contributors may be\n *    used to endorse or promote products derived from this software\n *    without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS\n * FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,\n * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS\n * OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED\n * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN\n * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n ****************************************************************************/')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @file px4_simple_app.c\n * Minimal application example for PX4 autopilot\n *\n * @author Example User <mail@example.com>\n */")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<px4_platform_common/px4_config.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<px4_platform_common/tasks.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<px4_platform_common/posix.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<unistd.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<stdio.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<poll.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<string.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<math.h>")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<uORB/uORB.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<uORB/topics/sensor_combined.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<uORB/topics/vehicle_attitude.h>")])]),t._v("\n\n__EXPORT "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("px4_simple_app_main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" argc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("argv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("px4_simple_app_main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" argc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("argv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("PX4_INFO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello Sky!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* subscribe to sensor_combined topic */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" sensor_sub_fd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("orb_subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ORB_ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sensor_combined"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* limit the update rate to 5 Hz */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("orb_set_interval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sensor_sub_fd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* advertise attitude topic */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("vehicle_attitude_s")]),t._v(" att"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("memset")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("att"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sizeof")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("att"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("orb_advert_t")]),t._v(" att_pub "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("orb_advertise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ORB_ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vehicle_attitude"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("att"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* one could wait for multiple topics with this technique, just using one here */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("px4_pollfd_struct_t")]),t._v(" fds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sensor_sub_fd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("events "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" POLLIN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* there could be more file descriptors here, in the form like:\n         * { .fd = other_sub_fd,   .events = POLLIN },\n         */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" error_counter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* wait for sensor update of 1 file descriptor for 1000 ms (1 second) */")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" poll_ret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("px4_poll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* handle the poll result */")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("poll_ret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* this means none of our providers is giving us data */")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("PX4_ERR")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Got no data within a second"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("poll_ret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* this is seriously bad - should be an emergency */")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error_counter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" error_counter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* use a counter to prevent flooding (and slowing us down) */")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("PX4_ERR")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ERROR return value from poll(): %d"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" poll_ret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n            error_counter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("revents "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" POLLIN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* obtained data for the first file descriptor */")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("sensor_combined_s")]),t._v(" raw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* copy sensors raw data into local buffer */")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("orb_copy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ORB_ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sensor_combined"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sensor_sub_fd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("raw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("PX4_INFO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Accelerometer:\\t%8.4f\\t%8.4f\\t%8.4f"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("raw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accelerometer_m_s2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("raw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accelerometer_m_s2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("raw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accelerometer_m_s2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* set att and publish this information for other apps\n                 the following does not have any meaning, it's just an example\n                */")]),t._v("\n                att"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" raw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accelerometer_m_s2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                att"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" raw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accelerometer_m_s2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                att"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" raw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accelerometer_m_s2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("orb_publish")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ORB_ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vehicle_attitude"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" att_pub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("att"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* there could be more file descriptors here, in the form like:\n             * if (fds[1..n].revents & POLLIN) {}\n             */")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("PX4_INFO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"exiting"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"运行完整的示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行完整的示例"}},[t._v("#")]),t._v(" 运行完整的示例")]),t._v(" "),a("p",[t._v("最后运行你的应用程序：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("px4_simple_app\n")])])]),a("p",[t._v("If you start "),a("em",[t._v("QGroundControl")]),t._v(", you can check the sensor values in the real time plot ("),a("a",{attrs:{href:"https://docs.qgroundcontrol.com/master/en/analyze_view/mavlink_inspector.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Analyze > MAVLink Inspector"),a("OutboundLink")],1),t._v(").")]),t._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("本教程涵盖了所有开发基本 PX4 自动驾驶仪应用程序的内容。 Keep in mind that the full list of uORB messages/topics is "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/tree/main/msg/",target:"_blank",rel:"noopener noreferrer"}},[t._v("available here"),a("OutboundLink")],1),t._v(" and that the headers are well documented and serve as reference.")]),t._v(" "),a("p",[t._v("此处可找到更多信息和故障排除/常见陷阱："),a("RouterLink",{attrs:{to:"/zh/middleware/uorb.html"}},[t._v("uORB")]),t._v("。")],1),t._v(" "),a("p",[t._v("下一页提供了一个模板，用于编写具有启动和停止功能的完整应用程序。")])])}),[],!1,null,null,null);s.default=e.exports}}]);