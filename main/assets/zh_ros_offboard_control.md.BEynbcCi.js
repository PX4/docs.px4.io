import{_ as a,c as t,a8 as o,o as r}from"./chunks/framework.BDnHobkS.js";const b=JSON.parse('{"title":"Offboard控制","description":"","frontmatter":{},"headers":[],"relativePath":"zh/ros/offboard_control.md","filePath":"zh/ros/offboard_control.md"}'),i={name:"zh/ros/offboard_control.md"};function d(l,e,n,m,h,c){return r(),t("div",null,e[0]||(e[0]=[o('<h1 id="offboard控制" tabindex="-1">Offboard控制 <a class="header-anchor" href="#offboard控制" aria-label="Permalink to &quot;Offboard控制&quot;">​</a></h1><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><a href="./../flight_modes/offboard.html">Offboard control</a> is dangerous. 这是通过 Mavlink 协议完成的, 特别是 <a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED">SET_POSITION_TARGET_LOCAL_NED</a> 和 <a href="https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET">SET_ATTITUDE_TARGET</a> 消息。</p></div><p>Offboard控制背后的想法是能够使用在自动驾驶仪外运行的软件来控制 PX4 飞控。 This is done through the MAVLink protocol, specifically the <a href="https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED" target="_blank" rel="noreferrer">SET_POSITION_TARGET_LOCAL_NED</a> and the <a href="https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET" target="_blank" rel="noreferrer">SET_ATTITUDE_TARGET</a> messages.</p><h2 id="offboard控制固件设置" tabindex="-1">Offboard控制固件设置 <a class="header-anchor" href="#offboard控制固件设置" aria-label="Permalink to &quot;Offboard控制固件设置&quot;">​</a></h2><p>在进行Offboard开发前，您需要在固件端做两个设置。</p><h3 id="enable-rc-override" tabindex="-1">Enable RC Override <a class="header-anchor" href="#enable-rc-override" aria-label="Permalink to &quot;Enable RC Override&quot;">​</a></h3><p>In <em>QGroundControl</em> you can set the <a href="./../advanced_config/parameter_reference.html#COM_RC_OVERRIDE">COM_RC_OVERRIDE</a> parameter to automatically switch from offboard mode (or any mode) to Position mode if the RC sticks are moved. This is the best way to ensure that an operator can easily take control of the vehicle and switch to the safest flight mode.</p><h3 id="_1-将遥控开关映射到离板模式激活" tabindex="-1">1. 将遥控开关映射到离板模式激活 <a class="header-anchor" href="#_1-将遥控开关映射到离板模式激活" aria-label="Permalink to &quot;1. 将遥控开关映射到离板模式激活&quot;">​</a></h3><p>In <em>QGroundControl</em> you can set the <a href="./../advanced_config/parameter_reference.html#RC_MAP_OFFB_SW">RC_MAP_OFFB_SW</a> parameter to the RC channel that will be used to activate offboard mode. This can be used to switch between offboard mode and the mode set by the mode switch (<a href="./../advanced_config/parameter_reference.html#RC_MAP_MODE_SW">RC_MAP_MODE_SW</a>). You can also switch into offboard mode using a GCS/MAVLink so this is not &quot;mandatory&quot;.</p><p>Note also that this mechanism is not as &quot;safe&quot; as using <a href="#enable-rc-override">RC Override</a> to switch out of offboard mode, because the mode you switch to is unpredictable.</p><h3 id="_2-启用机载计算机接口" tabindex="-1">2. 启用机载计算机接口 <a class="header-anchor" href="#_2-启用机载计算机接口" aria-label="Permalink to &quot;2. 启用机载计算机接口&quot;">​</a></h3><p>Enable MAVLink on the serial port that you connect to the companion computer (see <a href="./../companion_computer/">Companion Computers</a>).</p><h2 id="硬件设置" tabindex="-1">硬件设置 <a class="header-anchor" href="#硬件设置" aria-label="Permalink to &quot;硬件设置&quot;">​</a></h2><p>通常，有三种方式设置Offboard模式通信。</p><h3 id="串口电台" tabindex="-1">串口电台 <a class="header-anchor" href="#串口电台" aria-label="Permalink to &quot;串口电台&quot;">​</a></h3><ol><li><p>一端连接飞控的 UART</p></li><li><p>一端连接地面站电脑</p><p>参考电台包括：</p><ul><li><a href="http://www.lairdtech.com/products/rm024" target="_blank" rel="noreferrer">Lairdtech RM024</a></li><li><a href="http://www.digi.com/products/xbee-rf-solutions/modules" target="_blank" rel="noreferrer">Digi International XBee Pro</a></li></ul></li></ol><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggVEQ7XG4gIGduZFtHcm91bmQgU3RhdGlvbl0gLS1NQVZMaW5rLS0-IHJhZDFbR3JvdW5kIFJhZGlvXTtcbiAgcmFkMSAtLVJhZGlvUHJvdG9jb2wtLT4gcmFkMltWZWhpY2xlIFJhZGlvXTtcbiAgcmFkMiAtLU1BVkxpbmstLT4gYVtBdXRvcGlsb3RdOyIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9" target="_blank" rel="noreferrer"><img src="https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggVEQ7XG4gIGduZFtHcm91bmQgU3RhdGlvbl0gLS1NQVZMaW5rLS0-IHJhZDFbR3JvdW5kIFJhZGlvXTtcbiAgcmFkMSAtLVJhZGlvUHJvdG9jb2wtLT4gcmFkMltWZWhpY2xlIFJhZGlvXTtcbiAgcmFkMiAtLU1BVkxpbmstLT4gYVtBdXRvcGlsb3RdOyIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9" alt="Mermaid graph: mavlink channel"></a></p><h3 id="板载处理器" tabindex="-1">板载处理器 <a class="header-anchor" href="#板载处理器" aria-label="Permalink to &quot;板载处理器&quot;">​</a></h3><p>在飞行器上部署一台小型将计算机，用 UART 转 USB 适配器连接飞控。 这里有许多可能性，这将取决于您除了向自驾仪发送指令外，还想要做什么样的额外机载处理。 Some examples are provided in <a href="./../companion_computer/#companion-computer-options">Companion Computers</a>.</p><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggVEQ7XG4gIGNvbXBbQ29tcGFuaW9uIENvbXB1dGVyXSAtLU1BVkxpbmstLT4gdWFydFtVQVJUIEFkYXB0ZXJdO1xuICB1YXJ0IC0tTUFWTGluay0tPiBBdXRvcGlsb3Q7IiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0" target="_blank" rel="noreferrer"><img src="https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggVEQ7XG4gIGNvbXBbQ29tcGFuaW9uIENvbXB1dGVyXSAtLU1BVkxpbmstLT4gdWFydFtVQVJUIEFkYXB0ZXJdO1xuICB1YXJ0IC0tTUFWTGluay0tPiBBdXRvcGlsb3Q7IiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0" alt="Mermaid diagram: Companion mavlink"></a></p><h3 id="on-board-processor-and-wifi-link-to-ros-recommended" tabindex="-1">On-board processor and wifi link to ROS (<strong><em>Recommended</em></strong>) <a class="header-anchor" href="#on-board-processor-and-wifi-link-to-ros-recommended" aria-label="Permalink to &quot;On-board processor and wifi link to ROS (**_Recommended_**)&quot;">​</a></h3><p>部署在飞行器上的小型计算机除了通过 UART - USB 适配器连接到自动驾驶仪外，同时还可通过WiFi连接至运行 ROS 的地面站。 这可以是上述配备了WiFi适配器的任一计算机。</p><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggVERcbiAgc3ViZ3JhcGggR3JvdW5kICBTdGF0aW9uXG4gIGduZFtST1MgRW5hYmxlZCBDb21wdXRlcl0gLS0tIHFnY1txR3JvdW5kQ29udHJvbF1cbiAgZW5kXG4gIGduZCAtLU1BVkxpbmsvVURQLS0-IHdbV2lGaV07XG4gIHFnYyAtLU1BVkxpbmstLT4gdztcbiAgc3ViZ3JhcGggVmVoaWNsZVxuICBjb21wW0NvbXBhbmlvbiBDb21wdXRlcl0gLS1NQVZMaW5rLS0-IHVhcnRbVUFSVCBBZGFwdGVyXVxuICB1YXJ0IC0tLSBBdXRvcGlsb3RcbiAgZW5kXG4gIHcgLS0tIGNvbXAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ" target="_blank" rel="noreferrer"><img src="https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggVERcbiAgc3ViZ3JhcGggR3JvdW5kICBTdGF0aW9uXG4gIGduZFtST1MgRW5hYmxlZCBDb21wdXRlcl0gLS0tIHFnY1txR3JvdW5kQ29udHJvbF1cbiAgZW5kXG4gIGduZCAtLU1BVkxpbmsvVURQLS0-IHdbV2lGaV07XG4gIHFnYyAtLU1BVkxpbmstLT4gdztcbiAgc3ViZ3JhcGggVmVoaWNsZVxuICBjb21wW0NvbXBhbmlvbiBDb21wdXRlcl0gLS1NQVZMaW5rLS0-IHVhcnRbVUFSVCBBZGFwdGVyXVxuICB1YXJ0IC0tLSBBdXRvcGlsb3RcbiAgZW5kXG4gIHcgLS0tIGNvbXAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ" alt="Mermaid graph: ROS"></a></p>',23)]))}const f=a(i,[["render",d]]);export{b as __pageData,f as default};
