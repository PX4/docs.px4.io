(window.webpackJsonp=window.webpackJsonp||[]).push([[402],{2659:function(t,a,e){"use strict";e.r(a);var o=e(19),s=Object(o.a)({},(function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"оновлення-завантажувача"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#оновлення-завантажувача"}},[t._v("#")]),t._v(" Оновлення завантажувача")]),t._v(" "),o("p",[t._v("Завантажувач PX4 використовується для завантаження прошивки для плат "),o("RouterLink",{attrs:{to:"/uk/flight_controller/pixhawk_series.html"}},[t._v("Pixhawk")]),t._v(" (PX4FMU, PX4IO).")],1),t._v(" "),o("p",[t._v("Зазвичай контролери Pixhawk поставляються з попередньо встановленою відповідною версією завантажувача. Однак у деяких випадках його може бути відсутній, або може бути присутня старіша версія, яку потрібно оновити, або плата може бути відключена і потребує стирання та перевстановлення завантажувача.")]),t._v(" "),o("p",[t._v("Ця тема пояснює, як побудувати завантажувач PX4 та кілька методів для його прошивки на плату.")]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),o("ul",[o("li",[t._v("Most boards will need to use the "),o("a",{attrs:{href:"#debug-probe-bootloader-update"}},[t._v("Debug Probe")]),t._v(" to update the bootloader.")]),t._v(" "),o("li",[t._v("On "),o("RouterLink",{attrs:{to:"/uk/flight_controller/pixhawk6x-rt.html"}},[t._v("FMUv6X-RT")]),t._v(" you can "),o("RouterLink",{attrs:{to:"/uk/advanced_config/bootloader_update_v6xrt.html"}},[t._v("install bootloader/unbrick boards via USB")]),t._v(". This is useful if you don't have a debug probe.")],1),t._v(" "),o("li",[t._v("On FMUv2 and some custom firmware (only) you can use "),o("a",{attrs:{href:"#qgc-bootloader-update"}},[t._v("QGC Bootloader Update")]),t._v(".")])])]),t._v(" "),o("h2",{attrs:{id:"building-the-px4-bootloader"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#building-the-px4-bootloader"}},[t._v("#")]),t._v(" Building the PX4 Bootloader")]),t._v(" "),o("h3",{attrs:{id:"px4-bootloader-fmuv6x-та-новіші"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#px4-bootloader-fmuv6x-та-новіші"}},[t._v("#")]),t._v(" PX4 Bootloader FMUv6X та новіші")]),t._v(" "),o("p",[t._v("Плати, що починаються з FMUv6X (STM32H7), використовують вбудований завантажувач PX4.")]),t._v(" "),o("p",[t._v("Це можна побудувати з каталогу "),o("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot",target:"_blank",rel:"noopener noreferrer"}},[t._v("PX4-Autopilot"),o("OutboundLink")],1),t._v(", використовуючи команду "),o("code",[t._v("make")]),t._v(" та конкретну для плати ціль з суфіксом "),o("code",[t._v("_bootloader")]),t._v(".")]),t._v(" "),o("p",[t._v("Для FMUv6X команда наступна:")]),t._v(" "),o("div",{staticClass:"language-sh extra-class"},[o("pre",{pre:!0,attrs:{class:"language-sh"}},[o("code",[o("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" px4_fmu-v6x_bootloader\n")])])]),o("p",[t._v("Це збудує бінарний файл завантажувача як "),o("code",[t._v("build/px4_fmu-v6x_bootloader/px4_fmu-v6x_bootloader.elf")]),t._v(", який можна прошити через SWD або DFU. Якщо ви збираєте завантажувач, вам вже повинні бути знайомі з одним із цих варіантів.")]),t._v(" "),o("p",[t._v("Якщо вам потрібний файл у форматі HEX замість ELF файлу, використовуйте objcopy:")]),t._v(" "),o("div",{staticClass:"language-sh extra-class"},[o("pre",{pre:!0,attrs:{class:"language-sh"}},[o("code",[t._v("arm-none-eabi-objcopy -O ihex build/px4_fmu-v6x_bootloader/px4_fmu-v6x_bootloader.elf px4_fmu-v6x_bootloader.hex\n")])])]),o("h3",{attrs:{id:"px4-bootloader-fmuv5x-та-раніші-версіі"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#px4-bootloader-fmuv5x-та-раніші-версіі"}},[t._v("#")]),t._v(" PX4 Bootloader FMUv5X та раніші версії")]),t._v(" "),o("p",[t._v("Плата PX4 до FMUv5X (до STM32H7) використовувала репозиторій "),o("a",{attrs:{href:"https://github.com/PX4/Bootloader",target:"_blank",rel:"noopener noreferrer"}},[t._v("завантажувача PX4"),o("OutboundLink")],1),t._v(".")]),t._v(" "),o("p",[t._v("Інструкції в README репозиторію пояснюють, як його використовувати.")]),t._v(" "),o("h2",{attrs:{id:"оновлення-завантажувача-debug-probe"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#оновлення-завантажувача-debug-probe"}},[t._v("#")]),t._v(" Оновлення завантажувача Debug Probe")]),t._v(" "),o("p",[t._v('Наступні кроки пояснюють, як ви можете "вручну" оновити завантажувач за допомогою сумісного '),o("RouterLink",{attrs:{to:"/uk/debug/swd_debug.html#debug-probes-for-px4-hardware"}},[t._v("Відладного пристрою")]),t._v(":")],1),t._v(" "),o("ol",[o("li",[o("p",[t._v("Отримайте бінарний файл, який містить завантажувальник (або від команди розробників, або "),o("a",{attrs:{href:"#building-the-px4-bootloader"}},[t._v("зіберіть його самостійно")]),t._v(").")])]),t._v(" "),o("li",[o("p",[t._v("Get a "),o("RouterLink",{attrs:{to:"/uk/debug/swd_debug.html#debug-probes-for-px4-hardware"}},[t._v("Debug Probe")]),t._v(". Підключіть зонд до комп'ютера за допомогою USB та налаштуйте "),o("code",[t._v("gdbserver")]),t._v(".")],1)]),t._v(" "),o("li",[o("p",[t._v("Перейдіть до каталогу, що містить бінарний файл, і запустіть команду для обраного вами завантажувача в терміналі:")]),t._v(" "),o("ul",[o("li",[o("p",[t._v("FMUv6X")]),t._v(" "),o("div",{staticClass:"language-sh extra-class"},[o("pre",{pre:!0,attrs:{class:"language-sh"}},[o("code",[t._v("arm-none-eabi-gdb px4_fmu-v6x_bootloader.elf\n")])])])]),t._v(" "),o("li",[o("p",[t._v("FMUv6X-RT")]),t._v(" "),o("div",{staticClass:"language-sh extra-class"},[o("pre",{pre:!0,attrs:{class:"language-sh"}},[o("code",[t._v("arm-none-eabi-gdb px4_fmu-v6xrt_bootloader.elf\n")])])])]),t._v(" "),o("li",[o("p",[t._v("FMUv5")]),t._v(" "),o("div",{staticClass:"language-sh extra-class"},[o("pre",{pre:!0,attrs:{class:"language-sh"}},[o("code",[t._v("arm-none-eabi-gdb px4fmuv5_bl.elf\n")])])])])])])]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),o("p",[t._v("H7 Завантажувачі з "),o("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot",target:"_blank",rel:"noopener noreferrer"}},[t._v("PX4/PX4-Autopilot"),o("OutboundLink")],1),t._v(" мають назву за шаблоном "),o("code",[t._v("*._bootloader.elf")]),t._v(". Завантажувачі з "),o("a",{attrs:{href:"https://github.com/PX4/PX4-Bootloader",target:"_blank",rel:"noopener noreferrer"}},[t._v("PX4/PX4-Bootloader"),o("OutboundLink")],1),t._v(" мають назву за шаблоном "),o("code",[t._v("*_bl.elf")]),t._v(".")])]),t._v(" "),o("ol",[o("li",[o("p",[t._v("Термінал "),o("em",[t._v("gdb")]),t._v(" з'являється, і він повинен відображати такий вивід:")]),t._v(" "),o("div",{staticClass:"language-sh extra-class"},[o("pre",{pre:!0,attrs:{class:"language-sh"}},[o("code",[t._v("GNU gdb "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("GNU Tools "),o("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" Arm Embedded Processors "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("-2017-q4-major"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.0")]),t._v(".50.20171128-git\nCopyright "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("C"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("2017")]),t._v(" Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" or later "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("http://gnu.org/licenses/gpl.html"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nThis is "),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" software: you are "),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\nType "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"show copying"')]),t._v("    and "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"show warranty"')]),t._v(" "),o("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" details.\nThis GDB was configured as "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"--host=x86_64-linux-gnu --target=arm-none-eabi"')]),o("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\nType "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"show configuration"')]),t._v(" "),o("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" configuration details.\nFor bug reporting instructions, please see:\n"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("http://www.gnu.org/software/gdb/bugs/"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(".\nFind the GDB manual and other documentation resources online at:\n"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("http://www.gnu.org/software/gdb/documentation/"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(".\nFor help, "),o("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"help"')]),o("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\nType "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"apropos word"')]),t._v(" to search "),o("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" commands related to "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"word"')]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nReading symbols from px4fmuv5_bl.elf"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".done.\n")])])])]),t._v(" "),o("li",[o("p",[t._v("Find your "),o("code",[t._v("<dronecode-probe-id>")]),t._v(" by running an "),o("code",[t._v("ls")]),t._v(" command in the "),o("strong",[t._v("/dev/serial/by-id")]),t._v(" directory.")])]),t._v(" "),o("li",[o("p",[t._v("Тепер підключіться до debug probe з наступною командою:")]),t._v(" "),o("div",{staticClass:"language-sh extra-class"},[o("pre",{pre:!0,attrs:{class:"language-sh"}},[o("code",[o("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" ext /dev/serial/by-id/"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("dronecode-probe-id"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])]),t._v(" "),o("li",[o("p",[t._v("Power on the Pixhawk with another USB cable and connect the probe to the "),o("code",[t._v("FMU-DEBUG")]),t._v(" port.")])])]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),o("p",[t._v("If using a Dronecode probe you may need to remove the case in order to connect to the "),o("code",[t._v("FMU-DEBUG")]),t._v(" port (e.g. on Pixhawk 4 you would do this using a T6 Torx screwdriver).")])]),t._v(" "),o("ol",[o("li",[o("p",[t._v("Use the following command to scan for the Pixhawk`s SWD and connect to it:")]),t._v(" "),o("div",{staticClass:"language-sh extra-class"},[o("pre",{pre:!0,attrs:{class:"language-sh"}},[o("code",[o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" mon swdp_scan\n"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" attach "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])])]),t._v(" "),o("li",[o("p",[t._v("Завантажте двійковий файл в Pixhawk:")]),t._v(" "),o("div",{staticClass:"language-sh extra-class"},[o("pre",{pre:!0,attrs:{class:"language-sh"}},[o("code",[o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" load\n")])])])])]),t._v(" "),o("p",[t._v("After the bootloader has updated you can "),o("RouterLink",{attrs:{to:"/uk/config/firmware.html"}},[t._v("Load PX4 Firmware")]),t._v(" using "),o("em",[t._v("QGroundControl")]),t._v(".")],1),t._v(" "),o("h2",{attrs:{id:"оновлення-завантажувача-qgc"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#оновлення-завантажувача-qgc"}},[t._v("#")]),t._v(" Оновлення завантажувача QGC")]),t._v(" "),o("p",[t._v("Найпростіший підхід - спочатку використовуйте "),o("em",[t._v("QGroundControl")]),t._v(", щоб встановити прошивку, яка містить потрібний/останній завантажувач. Ви можете ініціювати оновлення завантажувача при наступному перезавантаженні, встановивши параметр: "),o("RouterLink",{attrs:{to:"/uk/advanced_config/parameter_reference.html#SYS_BL_UPDATE"}},[t._v("SYS_BL_UPDATE")]),t._v(".")],1),t._v(" "),o("p",[t._v("Такий підхід можна використовувати лише у випадку, якщо параметр "),o("RouterLink",{attrs:{to:"/uk/advanced_config/parameter_reference.html#SYS_BL_UPDATE"}},[t._v("SYS_BL_UPDATE")]),t._v(" присутній у прошивці.")],1),t._v(" "),o("div",{staticClass:"custom-block warning"},[o("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),o("p",[t._v("Наразі бажаний завантажувач міститься лише в FMUv2 та деяких спеціальних програмних вибірках.")])]),t._v(" "),o("p",[t._v("Кроки такі:")]),t._v(" "),o("ol",[o("li",[o("p",[t._v("Вставте SD-карту (це дозволяє реєструвати журнали завантаження для відлагодження будь-яких проблем).")])]),t._v(" "),o("li",[o("p",[o("RouterLink",{attrs:{to:"/uk/config/firmware.html#custom"}},[t._v("Оновіть прошивку")]),t._v(" з образом, що містить новий/потрібний завантажувач.")],1),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("Note")])])])]),t._v(" "),o("p",[t._v("Оновлений завантажувач може бути постачений у власній прошивці (наприклад, від команди розробників), або він може бути включений у останню головну гілку.\n:::")]),t._v(" "),o("ol",[o("li",[t._v("Зачекайте, доки транспортний засіб перезавантажиться.")]),t._v(" "),o("li",[o("RouterLink",{attrs:{to:"/uk/advanced_config/parameters.html"}},[t._v("Знайдіть")]),t._v(" та увімкніть параметр "),o("RouterLink",{attrs:{to:"/uk/advanced_config/parameter_reference.html#SYS_BL_UPDATE"}},[t._v("SYS_BL_UPDATE")]),t._v(".")],1),t._v(" "),o("li",[t._v("Перезавантажте (відключіть / підключіть плату). The bootloader update will only take a few seconds.")])]),t._v(" "),o("p",[t._v("Зазвичай на цьому етапі ви можливо захочете "),o("RouterLink",{attrs:{to:"/uk/config/firmware.html"}},[t._v("оновити прошивку")]),t._v(" ще раз, використовуючи правильно/ново встановлений загрузчик.")],1),t._v(" "),o("p",[t._v("An specific example of this process for updating the FMUv2 bootloader is given below.")]),t._v(" "),o("h3",{attrs:{id:"оновлення-завантажувача-fmuv2"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#оновлення-завантажувача-fmuv2"}},[t._v("#")]),t._v(" Оновлення завантажувача FMUv2")]),t._v(" "),o("p",[t._v("Якщо "),o("em",[t._v("QGroundControl")]),t._v(" встановлює ціль FMUv2 (див. консоль під час встановлення), і у вас є новіша плата, вам може знадобитися оновити завантажувальник, щоб мати доступ до всієї пам'яті на вашому контролері польоту.")]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),o("p",[t._v("Ранні контролери польоту FMUv2 "),o("RouterLink",{attrs:{to:"/uk/flight_controller/pixhawk_series.html#fmu_versions"}},[t._v("Pixhawk-series")]),t._v(" мали "),o("RouterLink",{attrs:{to:"/uk/flight_controller/silicon_errata.html#fmuv2-pixhawk-silicon-errata"}},[t._v("апаратну проблему")]),t._v(", яка обмежувала їх використання 1 Мб флеш-пам’яті. Проблема виправлена на новіших платах, але вам може знадобитися оновити заводський завантажувальник, щоб встановити прошивку FMUv3 та мати доступ до всієї доступної пам'яті у 2 МБ.")],1)]),t._v(" "),o("p",[t._v("Щоб оновити завантажувач:")]),t._v(" "),o("ol",[o("li",[o("p",[t._v("Вставте карту SD (це дозволить вести журналювання завантаження для відлагодження будь-яких проблем).")])]),t._v(" "),o("li",[o("p",[o("RouterLink",{attrs:{to:"/uk/config/firmware.html"}},[t._v("Оновіть програмне забезпечення")]),t._v(" до версії PX4 "),o("em",[t._v("master")]),t._v(" (під час оновлення програмного забезпечення перевірте "),o("strong",[t._v("Розширені налаштування")]),t._v(" і виберіть "),o("strong",[t._v("Розробницьку збірку (master)")]),t._v(" із випадаючого списку). "),o("em",[t._v("QGroundControl")]),t._v(" автоматично виявить, що апаратне забезпечення підтримує FMUv2 і встановить відповідне програмне забезпечення.")],1),t._v(" "),o("p",[o("img",{attrs:{src:e(353),alt:"FMUv2 update"}})]),t._v(" "),o("p",[t._v("Зачекайте, доки  пристрій перезавантажиться.")])]),t._v(" "),o("li",[o("p",[o("RouterLink",{attrs:{to:"/uk/advanced_config/parameters.html"}},[t._v("Знайдіть та увімкніть")]),t._v(" параметр "),o("RouterLink",{attrs:{to:"/uk/advanced_config/parameter_reference.html#SYS_BL_UPDATE"}},[t._v("SYS_BL_UPDATE")]),t._v(".")],1)]),t._v(" "),o("li",[o("p",[t._v("Перезавантажте (відключіть / підключіть плату). Оновлення завантажувача займе лише кілька секунд.")])]),t._v(" "),o("li",[o("p",[t._v("Тоді знову "),o("RouterLink",{attrs:{to:"/uk/config/firmware.html"}},[t._v("Оновити програмне забезпечення")]),t._v(". На цей раз "),o("em",[t._v("QGroundControl")]),t._v(" повинен автоматично визначити обладнання як FMUv3 і відповідним чином оновити програмне забезпечення.")],1),t._v(" "),o("p",[o("img",{attrs:{src:e(462),alt:"FMUv3 update"}})])])]),t._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),o("p",[t._v("Якщо апаратне забезпечення має "),o("RouterLink",{attrs:{to:"/uk/flight_controller/silicon_errata.html#fmuv2-pixhawk-silicon-errata"}},[t._v("Помилки в кремнієвій мікросхемі")]),t._v(", воно все одно буде виявлене як FMUv2, і ви побачите, що FMUv2 було знову встановлено (у консолі). У цьому випадку ви не зможете встановити апаратне забезпечення FMUv3.")],1)]),t._v(" "),o("h2",{attrs:{id:"інші-плати-не-pixhawk"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#інші-плати-не-pixhawk"}},[t._v("#")]),t._v(" Інші плати (не Pixhawk)")]),t._v(" "),o("p",[t._v("Плати, які не є частиною серії "),o("RouterLink",{attrs:{to:"/uk/flight_controller/pixhawk_series.html"}},[t._v("Pixhawk")]),t._v(", матимуть власні механізми оновлення завантажувача.")],1),t._v(" "),o("p",[t._v("Для плат, які передвстановлені за допомогою Betaflight, дивіться "),o("RouterLink",{attrs:{to:"/uk/advanced_config/bootloader_update_from_betaflight.html"}},[t._v("Flash пусковика на системи Betaflight")]),t._v(".")],1)])}),[],!1,null,null,null);a.default=s.exports},353:function(t,a,e){t.exports=e.p+"assets/img/bootloader_update.bd69dc9b.jpg"},462:function(t,a,e){t.exports=e.p+"assets/img/bootloader_fmu_v3_update.138bc25e.jpg"}}]);