(window.webpackJsonp=window.webpackJsonp||[]).push([[1595],{3407:function(a,t,s){"use strict";s.r(t);var e=s(19),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"початковии-завантажувач-stm32"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#початковии-завантажувач-stm32"}},[a._v("#")]),a._v(" Початковий завантажувач STM32")]),a._v(" "),s("p",[a._v("Код для початкового завантажувача PX4 доступний на Github у репозиторії "),s("a",{attrs:{href:"https://github.com/px4/bootloader",target:"_blank",rel:"noopener noreferrer"}},[a._v("Bootloader"),s("OutboundLink")],1),a._v(".")]),a._v(" "),s("h2",{attrs:{id:"підтримувані-плати"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#підтримувані-плати"}},[a._v("#")]),a._v(" Підтримувані плати")]),a._v(" "),s("ul",[s("li",[a._v("FMUv2 (Pixhawk 1, STM32F4)")]),a._v(" "),s("li",[a._v("FMUv2 (Pixhawk 2, STM32F4)")]),a._v(" "),s("li",[a._v("FMUv4 (Pixracer 3 і Pixhawk 3 Pro, STM32F4)")]),a._v(" "),s("li",[a._v("FMUv5 (Pixhawk 4, STM32F7)")]),a._v(" "),s("li",[a._v("TAPv1 (TBA, STM32F4)")]),a._v(" "),s("li",[a._v("ASCv1 (TBA, STM32F4)")])]),a._v(" "),s("h2",{attrs:{id:"збираємо-початковии-завантажувач"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#збираємо-початковии-завантажувач"}},[a._v("#")]),a._v(" Збираємо початковий завантажувач")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/PX4/Bootloader.git\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" Bootloader\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" submodule init\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" submodule update\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v("\n")])])]),s("p",[a._v("Після цього кроку, розмаїття elf-файлів для усіх підтримуваних плат будуть присутні в директорії Bootloader.")]),a._v(" "),s("h2",{attrs:{id:"прошиваємо-початковии-завантажувач"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#прошиваємо-початковии-завантажувач"}},[a._v("#")]),a._v(" Прошиваємо початковий завантажувач")]),a._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[a._v("WARNING")]),a._v(" "),s("p",[a._v("Правильна послідовність живлення є критичною для деяких плат, щоб потім дозволити доступ JTAG / SWD. Виконайте ці кроки точно так, як описано.")])]),a._v(" "),s("p",[a._v("Інструкції нижче дійсні для Blackmagic / Dronecode адаптерів. Для інших JTAG адаптерів будуть потрібні інші, але подібні кроки. Розробники, які намагаються прошити завантажувач повинні мати необхідні знання. Якщо ви не знаєте, як це зробити, то ймовірно, слід переглянути, чи дійсно вам потрібно щось змінювати у початковому завантажувачі.")]),a._v(" "),s("p",[a._v("Послідовність наступна:")]),a._v(" "),s("ol",[s("li",[a._v("Від'єднати кабель JTAG")]),a._v(" "),s("li",[a._v("Під'єднайте USB-кабель живлення")]),a._v(" "),s("li",[a._v("Під'єднати кабель JTAG")])]),a._v(" "),s("h3",{attrs:{id:"black-magic-dronecode-адаптери"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#black-magic-dronecode-адаптери"}},[a._v("#")]),a._v(" Black Magic / Dronecode адаптери")]),a._v(" "),s("h4",{attrs:{id:"використовуємо-правильнии-послідовнии-порт"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#використовуємо-правильнии-послідовнии-порт"}},[a._v("#")]),a._v(" Використовуємо правильний послідовний порт")]),a._v(" "),s("ul",[s("li",[a._v("На LINUX: "),s("code",[a._v("/dev/serial/by-id/usb-Black_Sphere_XXX-if00")])]),a._v(" "),s("li",[a._v("На MAC OS: переконайтесь що використовуєте порт cu.xxx, а не порт tty.xxx: "),s("code",[a._v("tar ext /dev/tty.usbmodemDDEasdf")])])]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("\n        \n  \n")])])]),s("h3",{attrs:{id:""}},[s("a",{staticClass:"header-anchor",attrs:{href:"#"}},[a._v("#")])]),a._v(" "),s("p",[a._v("Наступні інструкції стосуються "),s("a",{attrs:{href:"https://www.segger.com/jlink-gdb-server.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("J-Link GDB server"),s("OutboundLink")],1),a._v(".")]),a._v(" "),s("h4",{attrs:{id:"попередня-підготовка"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#попередня-підготовка"}},[a._v("#")]),a._v(" Попередня підготовка")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.segger.com/downloads/jlink",target:"_blank",rel:"noopener noreferrer"}},[a._v("Завантажте програмне забезпечення J-Link"),s("OutboundLink")],1),a._v(" з сайту Segger та встановіть його за їхніми інструкціями.")]),a._v(" "),s("h4",{attrs:{id:"запустити-jlink-gdb-сервер"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#запустити-jlink-gdb-сервер"}},[a._v("#")]),a._v(" Запустити JLink GDB сервер")]),a._v(" "),s("p",[a._v("Команда використовується для запуску сервера для польотних контролерів що використовують STM32F427VI SoC:")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("\n")])])]),s("p",[s("code",[a._v("--device")]),a._v("/SoC є спільним для пристроїв:")]),a._v(" "),s("ul",[s("li"),a._v(" "),s("li"),a._v(" "),s("li"),a._v(" "),s("li")]),a._v(" "),s("h4",{attrs:{id:"під-єднаитесь-до-gdb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#під-єднаитесь-до-gdb"}},[a._v("#")]),a._v(" Під'єднайтесь до GDB")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("\n")])])]),s("h3",{attrs:{id:"усунення-несправностеи"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#усунення-несправностеи"}},[a._v("#")]),a._v(" Усунення несправностей")]),a._v(" "),s("p",[a._v("Якщо будь-який з наведених нижче команд не знайдено, ви або не використовуєте Blackmagic probe або його програмне забезпечення застаріло. Спершу оновіть прошивку адаптера.")]),a._v(" "),s("p",[a._v("Якщо Ви отримуєте наступне повідомлення про помилку:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("\n")])])]),s("p",[a._v("Відключити плату (лишивши JTAG підключеним) та запустіть")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("\n")])])]),s("p",[a._v("Це вимкне живлення пристрою й уможливить наступний цикл прошивки.")])])}),[],!1,null,null,null);t.default=r.exports}}]);