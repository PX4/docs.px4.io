(window.webpackJsonp=window.webpackJsonp||[]).push([[632],{1487:function(t,a,s){t.exports=s.p+"assets/img/ros2_modes_overview.1ec61112.svg"},3358:function(t,a,s){"use strict";s.r(a);var e=s(19),v=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"інтерфеис-керування-px4-ros-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#інтерфеис-керування-px4-ros-2"}},[t._v("#")]),t._v(" Інтерфейс керування PX4 ROS 2")]),t._v(" "),e("Badge",{attrs:{type:"warning",text:"main (PX4 v1.15)"}}),t._v(" "),e("Badge",{attrs:{type:"warning",text:"Experimental"}}),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("Експериментальні налаштування")]),t._v(" "),e("ul",[e("li",[t._v("Архітектура та основні інтерфейси для визначення режимів ROS 2 є значною мірою стабільними і перевіряються в ІК.\nБібліотека надає значні переваги в режимі офборду в поточному стані.")]),t._v(" "),e("li",[t._v("Лише кілька типів значень було врегульовано (інші все ще в розробці).\nВам можуть знадобитися внутрішні теми PX4, які можуть не залишитись серверно-сумісними з часом.")]),t._v(" "),e("li",[t._v("API не повністю задокументований.")])])]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/uk/ros2/px4_ros2_interface_lib.html"}},[t._v("PX4 ROS 2 Interface бібліотека")]),t._v(" - це бібліотека C++++, яка спрощує контроль PX4 з ROS 2.")],1),t._v(" "),e("p",[t._v("Розробники використовують бібліотеку для створення і динамічної реєстрації режимів, написаних за допомогою ROS 2.\nЦі режими динамічно реєструються в PX4 і здаються частиною PX4 для наземної станції або іншої зовнішньої системи.\nВони навіть можуть замінити стандартні режими в PX4 на покращені версії ROS 2, відновлюючи оригінальну версію, якщо режим ROS2 не вдасться.")]),t._v(" "),e("p",[t._v("Бібліотека також надає класи для надсилання різних типів налаштувань, починаючи від багаторівневих навігаційних завдань на високому рівні аж до прямого контролю приводу.\nЦі класи абстрагують внутрішні встановлені точки, які використовуються PX4, і, отже, їх можна використовувати для надання послідовного інтерфейсу ROS 2 для майбутніх версій PX4 і ROS.")]),t._v(" "),e("h2",{attrs:{id:"загальнии-огляд"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#загальнии-огляд"}},[t._v("#")]),t._v(" Загальний огляд")]),t._v(" "),e("p",[t._v("Ця діаграма надає концептуального уявлення про те, як режими інтерфейсу і режими керування будуть взаємодіяти з PX4.")]),t._v(" "),e("p",[e("img",{attrs:{src:s(1487),alt:"ROS2 modes overview diagram"}})]),t._v(" "),e("p",[t._v("Наступні розділи визначають та пояснюють терміни, що використовуються в діаграмі.")]),t._v(" "),e("h3",{attrs:{id:"означення"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#означення"}},[t._v("#")]),t._v(" Означення")]),t._v(" "),e("h4",{attrs:{id:"режим"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#режим"}},[t._v("#")]),t._v(" Режим")]),t._v(" "),e("p",[t._v("Режим визначений за допомогою бібліотеки інтерфейсу має такі властивості:")]),t._v(" "),e("ul",[e("li",[t._v("Режим - це компонент, який може передавати вказані точки автомобіля для керування рухом (такі як швидкість або прямі вимикачі).")]),t._v(" "),e("li",[t._v("Режим вибирає тип значень і відправляє його під час активності.\nВін може переключитися між різними типами множин.")]),t._v(" "),e("li",[t._v("Режим не може активувати інші режими, і він повинен бути активований користувачем (через RC/GCS), контролер польоту в безпечній ситуації "),e("em",[t._v("mode executor")]),t._v(", або деяких інших зовнішніх системах.")]),t._v(" "),e("li",[t._v("Має ім'я, яке відображається у GCS.")]),t._v(" "),e("li",[t._v("Можна налаштувати вимоги до його режиму (наприклад, що він вимагає достовірної оцінки позиції).")]),t._v(" "),e("li",[t._v("Режим може виконувати різні завдання, такі як польот до цілі, спуск лебідки, скидання вантажу та повернення назад.")]),t._v(" "),e("li",[t._v("Режим може замінити режим, визначений у PX4.")])]),t._v(" "),e("h4",{attrs:{id:"виконавець-режимів"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#виконавець-режимів"}},[t._v("#")]),t._v(" Виконавець Режимів")]),t._v(" "),e("p",[t._v("Виконавець режимів - це необов'язковий компонент для розкладання режимів.\nНаприклад, виконавець режимів для індивідуальної доставки вантажу або режиму обстеження може спочатку ініціювати злет, потім переключитися на індивідуальний режим, і коли він завершиться, ініціювати повернення на базу (RTL).")]),t._v(" "),e("p",[t._v("Зокрема, він має наступні властивості:")]),t._v(" "),e("ul",[e("li",[t._v("Виконавець режимів - це необов'язковий компонент, який знаходиться на рівень вище за режим.\nЦе скінченний автомат, який може активувати режими і чекати їх завершення.")]),t._v(" "),e("li",[t._v("Це може зробити лише поки він є відповідним.\nДля цього виконавець має лише один власний режим (і режим може належати лише одному виконавцю).\nЦей режим служить для активації виконавця: коли користувач вибирає режим, активується власник-виконавець, який може вибрати будь-який режим.\nВін залишається відповідальним до того моменту, поки користувач не змінить режими (через RC або з GCS), або не спрацює аварійний перехід в інший режим.\nЯкщо аварійна ситуація знімається, виконавець знову активується.")]),t._v(" "),e("li",[t._v("Це дозволяє існувати декільком виконавцям одночасно.")]),t._v(" "),e("li",[t._v("Виконувачі не можуть активувати інших виконавців.")]),t._v(" "),e("li",[t._v("У бібліотеці виконавець режимів завжди реалізується в комбінації з індивідуальним режимом.")])]),t._v(" "),e("div",{staticClass:"custom-block note"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),e("ul",[e("li",[t._v("Ці визначення гарантують, що користувач може в будь-який момент забрати контроль від індивідуального режиму або виконавця, командуючи переключення режиму через RC або GCS.\nВиконавець режимів є прозорим для користувача.")]),t._v(" "),e("li",[t._v("Виконавець режиму є прозорий для користувача.\nВін вибирається і активується опосередковано через власний режим, і тому режим має бути відповідно названий.")])])]),t._v(" "),e("h4",{attrs:{id:"перевизначення-конфігураціі"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#перевизначення-конфігураціі"}},[t._v("#")]),t._v(" Перевизначення конфігурації")]),t._v(" "),e("p",[t._v("Обидва режими і виконавці можуть визначати заміну конфігурації, дозволяючи персоналізацію певних поведінок, коли режим або виконавець активний.")]),t._v(" "),e("p",[t._v("Наразі реалізовано наступне:")]),t._v(" "),e("ul",[e("li",[e("em",[t._v("Вимкнення автоматичного роз'єднання")]),t._v(".\nЦе дозволяє здійснити посадку та знову злетіти (наприклад, для скидання вантажу).")]),t._v(" "),e("li",[e("em",[t._v("Можливість відкласти неістотні збої помилки")]),t._v(".\nЦе дозволяє виконавцю проводити дію без переривання через некритичні заходи безпеки.\nНаприклад, ігнорування заходу безпеки через низький заряд батареї, щоб операція з лебідкою могла бути завершена.")])]),t._v(" "),e("h3",{attrs:{id:"порівняння-з-управлінням-з-віддаленоі-платформи"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#порівняння-з-управлінням-з-віддаленоі-платформи"}},[t._v("#")]),t._v(" Порівняння з управлінням з віддаленої платформи")]),t._v(" "),e("p",[t._v("Вищезазначені концепції мають кілька переваг перед традиційним управлінням з віддаленої платформи:")]),t._v(" "),e("ul",[e("li",[t._v("Декілька вузлів або додатків можуть співіснувати і навіть працювати одночасно.\nАле лише один вузол може керувати транспортним засобом у певний момент, і цей вузол чітко визначений.")]),t._v(" "),e("li",[t._v("Режими мають відмінну назву і можуть бути відображені / вибрані в GCS.")]),t._v(" "),e("li",[t._v("Режими інтегровані з аварійною машиною стану та перевірками настроювання.")]),t._v(" "),e("li",[t._v("Типи установок, які можуть бути відправлені, чітко визначені.")]),t._v(" "),e("li",[t._v("Режими ROS 2 можуть замінити внутрішні режими контролера польоту (такі як режим повернення).")])]),t._v(" "),e("h2",{attrs:{id:"установка-та-першии-тест"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#установка-та-першии-тест"}},[t._v("#")]),t._v(" Установка та перший тест")]),t._v(" "),e("p",[t._v("Для початку роботи потрібно виконати наступні кроки:")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Переконайтеся, що у вас є працююче налаштування ROS 2 з px4_msgs у робочому просторі ROS 2.")])]),t._v(" "),e("li",[e("p",[t._v("Клонуйте репозиторій в робочий простір:")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code")])]),e("div",{staticClass:"custom-block note"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),e("p",[t._v("Для забезпечення сумісності, використовуйте останні "),e("em",[t._v("main")]),t._v(" гілки для PX4, "),e("em",[t._v("px4_msgs")]),t._v(" та бібліотеки.")])])]),t._v(" "),e("li",[e("p",[t._v("Побудуйте робочий простір:")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code")])])]),t._v(" "),e("li",[e("p",[t._v("У іншій оболонці запустіть PX4 SITL:")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code")])]),e("p",[t._v("(тут ми використовуємо Gazebo-Classic, але ви можете використовувати будь-яку модель або симулятор)")])]),t._v(" "),e("li",[e("p",[t._v("Запустіть агента micro XRCE в новій оболонці (після цього ви можете залишити його запущеним):")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code")])])]),t._v(" "),e("li",[e("p",[t._v("Запустіть QGroundControl.")]),t._v(" "),e("div",{staticClass:"custom-block note"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),e("p",[t._v("Використовувати QGroundControl Daily, яка підтримує динамічне оновлення списку режимів.")])])]),t._v(" "),e("li",[e("p",[t._v("Повернутись до терміналу 2 ROS, запустити один із прикладів:")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code")])]),e("p",[t._v("Ви повинні отримати на виході режим 'Мій ручний режим' зареєстрований:")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code")])])]),t._v(" "),e("li",[e("p",[t._v("На PX4 оболонці ви можете перевірити, що PX4 зареєстрував новий режим:")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code")])]),e("p",[t._v("Вихід має містити:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("div",{staticClass:"highlight-lines"},[e("br")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code")])])]),t._v(" "),e("li",[e("p",[t._v("У цій точці ви також повинні побачити режим в QGroundControl :")])]),t._v(" "),e("li",[e("p",[t._v("Виберіть режим, переконайтеся, що у вас є ручне джерело управління (фізичний або віртуальний джойстик), та озброєння транспорту.\nТоді режим активується, і він має вивести наступний вивід:")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code")])])]),t._v(" "),e("li",[e("p",[t._v("Тепер ви готові створити свій власний режим.")])])]),t._v(" "),e("h2",{attrs:{id:"як-користуватися-бібліотекою"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#як-користуватися-бібліотекою"}},[t._v("#")]),t._v(" Як користуватися бібліотекою")]),t._v(" "),e("p",[t._v("Наступні розділи описують конкретні функціональні можливості, які надає ця бібліотека.\nКрім того, можна підписуватися на будь-яку іншу тему PX4 або публікувати у неї.")]),t._v(" "),e("h3",{attrs:{id:"визначення-класу-режиму"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#визначення-класу-режиму"}},[t._v("#")]),t._v(" Визначення класу режиму")]),t._v(" "),e("p",[t._v("У цьому розділі розглядається приклад створення класу для власного режиму.")]),t._v(" "),e("p",[t._v("Для повного застосування перегляньте приклади в репозиторії Auterion/px4-ros2-interface-lib, такі як examples/cpp/modes/manual.")]),t._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("div",{staticClass:"highlight-lines"},[e("div",{staticClass:"highlighted"},[t._v(" ")])]),e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code")])]),e("ul",[e("li",[e("code",[t._v("[1]")]),t._v(": Спочатку ми створюємо клас, який успадковується від "),e("a",{attrs:{href:"https://auterion.github.io/px4-ros2-interface-lib/classpx4__ros2_1_1ModeBase.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("px4_ros2::ModeBase")]),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("li",[e("code",[t._v("[2]")]),t._v(": У конструкторі ми передаємо назву режиму. Це також дозволяє нам налаштувати деякі інші речі, наприклад, замінити внутрішній режим польоту.")]),t._v(" "),e("li",[e("code",[t._v("[3]")]),t._v(": Саме тут ми створюємо всі об'єкти, через які ми хочемо використовувати пізніше.\nЦе може бути RC на виведення, значення типу або телеметрія. "),e("code",[t._v("*this")]),t._v(" передається як "),e("code",[t._v("Контекст")]),t._v(" до кожного об'єкту, який асоціює об'єкт з режимом.")]),t._v(" "),e("li",[e("code",[t._v("[4]")]),t._v(": Кожен раз, коли режим активний, цей метод викликається регулярно (частота оновлення залежить від типу вказаної точки).\nОсь де ми можемо працювати і створювати нову установку.")])]),t._v(" "),e("p",[t._v("Після створення екземпляру цього режиму потрібно викликати mode->doRegister(), яке фактично реєструється з контролером польоту і повертає false у разі невдачі.\nУ разі використання виконавця режиму, doRegister() повинно бути викликано на виконавці режиму, а не на самому режимі.")]),t._v(" "),e("h3",{attrs:{id:"визначення-класу-виконавця-режиму"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#визначення-класу-виконавця-режиму"}},[t._v("#")]),t._v(" Визначення класу виконавця режиму")]),t._v(" "),e("p",[t._v("У цьому розділі розглядається приклад створення класу для власного режиму.")]),t._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("div",{staticClass:"highlight-lines"},[e("div",{staticClass:"highlighted"},[t._v(" ")])]),e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code")])]),e("ul",[e("li",[t._v("[1]: Спочатку ми створюємо клас, який успадковується від px4_ros2::ModeExecutorBase.")]),t._v(" "),e("li",[t._v("[2]: Конструктор приймає наш власний режим, який пов'язаний з виконавцем, і передає його в конструктор ModeExecutorBase.")]),t._v(" "),e("li",[t._v("[3]: Ми визначаємо перерахування для станів, через які ми хочемо пройти.")]),t._v(" "),e("li",[t._v("[4]: Метод onActivate викликається, коли виконавець стає активним.  На цій точці ми можемо почати проходити через наші стани.\nЯк ви це робите - це на ваш розсуд, у цьому прикладі використовується метод runState для виконання наступного стану.")]),t._v(" "),e("li",[t._v("[5]: При переході до стану ми викликаємо асинхронний метод від ModeExecutorBase для запуску бажаного режиму: run, takeoff, rtl і так далі.\nЦі методи передають функцію, яка викликається при завершенні; зворотний виклик надає аргумент Result, який вказує, чи вдалося виконання чи ні.\nУ разі успіху зворотний виклик запускає наступний стан.")]),t._v(" "),e("li",[t._v('[6]: Ми використовуємо метод scheduleMode(), щоб запустити "власний режим" виконавця, слідуючи тому ж шаблону, що й інші обробники станів.')])]),t._v(" "),e("h3",{attrs:{id:"типи-установок"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#типи-установок"}},[t._v("#")]),t._v(" Типи установок")]),t._v(" "),e("p",[t._v("Режим може вибрати тип(и) установки, які він хоче використовувати для керування транспортним засобом.\nВикористані типи також визначають сумісність з різними типами транспортних засобів.")]),t._v(" "),e("p",[t._v("Наступні розділи надають список підтримуваних типів установок:")]),t._v(" "),e("ul",[e("li",[t._v("GotoSetpointType: Плавне позиціонування та (за бажанням) керування курсом")]),t._v(" "),e("li",[t._v("DirectActuatorsSetpointType: Пряме керування моторами та установками сервоприводів польотних поверхонь")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("The other setpoint types are currently experimental, and can be found in: "),e("a",{attrs:{href:"https://github.com/Auterion/px4-ros2-interface-lib/tree/main/px4_ros2_cpp/include/px4_ros2/control/setpoint_types/experimental",target:"_blank",rel:"noopener noreferrer"}},[t._v("px4_ros2/control/setpoint_types/experimental"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("p",[t._v("Ви можете додати свої власні типи установок, додавши клас, який успадковується від px4_ros2::SetpointBase, встановлює прапорці конфігурації відповідно до того, що вимагає установка, а потім публікує будь-яку тему, що містить установку")]),t._v(" "),e("h4",{attrs:{id:"установка-переити-до-gotosetpointtype"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#установка-переити-до-gotosetpointtype"}},[t._v("#")]),t._v(' Установка "перейти до" (GotoSetpointType)')]),t._v(" "),e("div",{staticClass:"custom-block note"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),e("p",[t._v("Цей тип установки наразі підтримується лише для багтрикоптерів.")])])]),t._v(" "),e("p",[t._v("Плавне керування позицією та (за бажанням) керуванням установками курсу за допомогою типу установки px4_ros2::GotoSetpointType.\nТип установки транслюється до плавних позиційних та курсових вирівнювачів на основі FMU, сформульованих з оптимальним за часом, максимальною швидкістю зміни прискорення, з обмеженнями швидкості та прискорення.")]),t._v(" "),e("p",[t._v("Найбільш тривіальне використання полягає в простому введенні 3D-позиції в метод оновлення:")]),t._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code")])]),e("p",[t._v("У цьому випадку заголовок залишиться "),e("em",[t._v("uncontrolled")]),t._v(".\nДля додаткового контрольного заголовку, вкажіть його в якості другого вхідного аргументу:")]),t._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code")])]),e("p",[t._v("Додатковою особливістю установки цільової точки є динамічний контроль за межами швидкості плавних рухів (тобто максимальні горизонтальні та вертикальні швидкості трансляції, а також швидкість руху по курсу).\nЯкщо, як вище, не вказано, то плавники за замовчуванням приймуть максимальні значення за замовчуванням транспортного засобу (зазвичай встановлені на фізичні обмеження).\nПлавники можуть тільки зменшувати межі швидкості, але ніколи не збільшувати.")]),t._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code")])]),e("p",[t._v("Усі аргументи у методі оновлення, крім позиції, є зразками у вигляді std::optional"),e("float",[t._v(", що означає, що якщо хтось бажає обмежити швидкість руху по курсу, але не швидкості трансляції, це можливо за допомогою std::nullopt:")])],1),t._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code")])]),e("h4",{attrs:{id:"безпосереднє-значення-параметра-control-directactuatorssetpointtype"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#безпосереднє-значення-параметра-control-directactuatorssetpointtype"}},[t._v("#")]),t._v(" Безпосереднє значення параметра Control (DirectActuatorsSetpointType)")]),t._v(" "),e("p",[t._v("Клапани можна безпосередньо керувати, використовуючи тип встановлення px4_ros2::DirectActuatorsSetpointType.\nМотори і сервоприводи можна встановити незалежно один від одного.\nБудьте уважні, що призначення є транспортним засобом та специфікацією.\nНаприклад, для управління квадрокоптером потрібно встановити перші 4 мотори відповідно до його конфігурації виводу.")]),t._v(" "),e("div",{staticClass:"custom-block note"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),e("p",[t._v("Якщо ви хочете керувати клапаном, який не контролює рух транспортного засобу, але, наприклад, сервопривід навантаження, подивіться нижче.")])]),t._v(" "),e("h3",{attrs:{id:"керування-незалежним-клапаном-сервоприводом"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#керування-незалежним-клапаном-сервоприводом"}},[t._v("#")]),t._v(" Керування незалежним клапаном/сервоприводом")]),t._v(" "),e("p",[t._v("Якщо ви хочете керувати незалежним клапаном (сервоприводом), дотримуйтесь цих кроків:")]),t._v(" "),e("ol",[e("li",[t._v("Налаштуйте вивід")]),t._v(" "),e("li",[t._v("Створіть екземпляр px4_ros2::PeripheralActuatorControls у конструкторі вашого режиму.")]),t._v(" "),e("li",[t._v("Викличте метод set(), щоб керувати клапаном(-ами).\nЦе може бути зроблено незалежно від будь-яких активних встановлень.")])]),t._v(" "),e("h3",{attrs:{id:"телеметрія"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#телеметрія"}},[t._v("#")]),t._v(" Телеметрія")]),t._v(" "),e("p",[t._v("Ви можете отримати доступ до телеметрії PX4 безпосередньо через наступні класи:")]),t._v(" "),e("ul",[e("li"),t._v(" "),e("li"),t._v(" "),e("li")]),t._v(" "),e("p",[t._v("Наприклад, ви можете надати запит на поточну позицію автомобіля наступним чином:")]),t._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code")])]),e("div",{staticClass:"custom-block note"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),e("p",[t._v("Ці теми надають обгортку навколо внутрішніх тем PX4, що дозволяє бібліотеці підтримувати сумісність у випадку зміни внутрішніх тем.\nПеревірте px4_ros2/odometry для нових тем, і, звісно, ви можете використовувати будь-яку тему ROS 2, опубліковану з PX4.")])]),t._v(" "),e("h3",{attrs:{id:"аваріині-вимкнення-та-вимоги-до-режимів"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#аваріині-вимкнення-та-вимоги-до-режимів"}},[t._v("#")]),t._v(" Аварійні вимкнення та вимоги до режимів")]),t._v(" "),e("p",[t._v("Кожен режим має набір прапорців вимог.\nЦі прапорці, як правило, автоматично встановлюються в залежності від об'єктів, які використовуються в контексті режиму.\nНаприклад, коли додається керування вручну за допомогою коду нижче, прапорець вимог для керування вручну встановлюється:")]),t._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code")])]),e("p",[t._v("Зокрема, встановлення прапорця має наступні наслідки в PX4, якщо умова не виконується:")]),t._v(" "),e("ul",[e("li",[t._v("Озброєння неможливе, коли вибрано режим")]),t._v(" "),e("li",[t._v("коли вже озброєний, режим не можна вибрати")]),t._v(" "),e("li",[t._v("коли озброєний і обраний режим, відповідний аварійний режим спрацьовує (наприклад, втрата RC для вимоги до керування вручну).\nПеревірте "),e("RouterLink",{attrs:{to:"/uk/config/safety.html"}},[t._v("сторінку безпеки")]),t._v(", щоб налаштувати безпечну поведінку.\nАварійний режим також спрацьовує, коли режим аварійно завершується або стає несприйнятливим, коли він обраний.")],1)]),t._v(" "),e("p",[t._v("Ось відповідна блок-схема для прапорця керування вручну:")]),t._v(" "),e("p",[t._v("Можна вручну оновити будь-які вимоги до режиму після реєстрації.")]),t._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code")])]),e("h4",{attrs:{id:"відкладення-аваріиних-режимів"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#відкладення-аваріиних-режимів"}},[t._v("#")]),t._v(" Відкладення аварійних режимів")]),t._v(" "),e("p",[t._v("Режим або режим виконавця може тимчасово відкласти неістотні збої, викликаючи метод "),e("a",{attrs:{href:"https://auterion.github.io/px4-2-interface-lib/classpx4__ros2_1_1ModeExecutorBase.html#a16ec5be6e70e1d0625bf696c3e29ae",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("deferFailsafesSync()")]),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"призначення-режиму-для-rc-перемикача-або-діі-джоистика"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#призначення-режиму-для-rc-перемикача-або-діі-джоистика"}},[t._v("#")]),t._v(" Призначення режиму для RC-перемикача або дії джойстика")]),t._v(" "),e("p",[t._v("Зовнішні режими можуть бути призначені на "),e("RouterLink",{attrs:{to:"/uk/config/flight_mode.html"}},[t._v("RC перемикачі")]),t._v(" або дії джойстика.\nПри призначенні режиму для RC-перемикача вам потрібно знати індекс (тому що параметри метаданих не містять динамічне ім'я режиму).\nВикористовуйте статус "),e("code",[t._v("commander")]),t._v(", коли режим запущено, щоб отримати цю інформацію.")],1),t._v(" "),e("div",{staticClass:"language-plain extra-class"},[e("pre",{pre:!0,attrs:{class:"language-plain"}},[e("code")])]),e("p",[t._v("означає, що ви б обрали "),e("strong",[t._v("Зовнішній режим 1")]),t._v(" в QGC:")]),t._v(" "),e("div",{staticClass:"custom-block note"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),e("p",[t._v("PX4 забезпечує, що певний режим завжди призначається тому ж індексу, зберігаючи хеш назви режиму.\nThis makes it independent of startup ordering in case of multiple external modes.")])]),t._v(" "),e("h3",{attrs:{id:"заміна-внутрішнього-режиму"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#заміна-внутрішнього-режиму"}},[t._v("#")]),t._v(" Заміна внутрішнього режиму")]),t._v(" "),e("p",[t._v("Зовнішній режим може замінити існуючий внутрішній режим, наприклад, режим Повернення (RTL).\nПри цьому кожного разу, коли вибирається RTL (через користувача або ситуацію аварійного виклику), замість внутрішнього режиму використовується зовнішній. Внутрішній режим використовується лише як резервний випадок.\nВнутрішній режим використовується лише як резервний випадок, коли зовнішній стає недоступним або відмовляє.")]),t._v(" "),e("p",[t._v("Замінений режим можна встановити в налаштуваннях конструктора ModeBase:")]),t._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code")])])],1)}),[],!1,null,null,null);a.default=v.exports}}]);