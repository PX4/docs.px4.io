(window.webpackJsonp=window.webpackJsonp||[]).push([[226],{2666:function(t,s,a){"use strict";a.r(s);var e=a(19),_=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"компенсація-потужності-компасу"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#компенсація-потужності-компасу"}},[t._v("#")]),t._v(" Компенсація потужності компасу")]),t._v(" "),e("p",[t._v("Компаси (магнітометри) повинні бути встановлені якнайдалі від кабелів, які переносять великі струми, оскільки вони створюють магнітні поля, які можуть вплинути на показання компасу.")]),t._v(" "),e("p",[t._v("This topic explains how to compensate for the induced magnetic fields in the cases where moving the compass is not realistic.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Переміщення компасу подалі від кабелів, що переносять потужність, є найпростішим і найефективнішим способом вирішення цієї проблеми, оскільки сила магнітних полів зменшується квадратично з відстані від кабелю.")])]),t._v(" "),e("div",{staticClass:"custom-block note"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),e("p",[t._v("Процес продемонстрований для багатороторного вертольота, але є так само ефективним для інших типів транспортних засобів.")])]),t._v(" "),e("p",[e("a",{attrs:{id:"when"}})]),t._v(" "),e("h2",{attrs:{id:"коли-застосовна-компенсація-потужності"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#коли-застосовна-компенсація-потужності"}},[t._v("#")]),t._v(" Коли застосовна компенсація потужності?")]),t._v(" "),e("p",[t._v("Виконання компенсації потужності рекомендується лише у випадку, якщо виконуються всі наступні умови:")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Компас не може бути віддалений від кабелів, які переносять потужність.")])]),t._v(" "),e("li",[e("p",[t._v("Існує сильна кореляція між показаннями компасу та встановленим значенням тяги та/або поточним зарядом батареї.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(478),alt:"Corrupted mag"}})])]),t._v(" "),e("li",[e("p",[t._v("Кабелі дрона всі закріплені на місці / не рухаються (розраховані параметри компенсації будуть недійсними, якщо кабелі, які переносять струм, можуть рухатися).")])])]),t._v(" "),e("p",[e("a",{attrs:{id:"how"}})]),t._v(" "),e("h2",{attrs:{id:"як-компенсувати-компас"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#як-компенсувати-компас"}},[t._v("#")]),t._v(" Як компенсувати компас")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Переконайтеся, що ваш дрон працює на версії прошивки, що підтримує компенсацію потужності (поточний майстер або версії від v.1.11.0).")])]),t._v(" "),e("li",[e("p",[t._v("Виконайте "),e("RouterLink",{attrs:{to:"/uk/config/compass.html#compass-calibration"}},[t._v("стандартну калібрування компасу")]),t._v(".")],1)]),t._v(" "),e("li",[e("p",[t._v("Встановіть параметр "),e("RouterLink",{attrs:{to:"/uk/advanced_config/parameter_reference.html#SDLOG_MODE"}},[t._v("SDLOG_MODE")]),t._v(" на 2, щоб увімкнути журналювання даних після завантаження.")],1)]),t._v(" "),e("li",[e("p",[t._v("Встановіть прапорець параметра "),e("RouterLink",{attrs:{to:"/uk/advanced_config/parameter_reference.html#SDLOG_PROFILE"}},[t._v("SDLOG_PROFILE")]),t._v(" для "),e("em",[t._v("Порівняння датчиків")]),t._v(" (біт 6), щоб отримати більше точок даних.")],1)]),t._v(" "),e("li",[e("p",[t._v("Закріпіть дрон таким чином, щоб він не міг рухатися, та прикріпіть пропелери (щоб двигуни могли витягувати такий самий струм, як у повітрі). У цьому прикладі транспортний засіб закріплюється за допомогою ременів.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(479),alt:"strap"}})])]),t._v(" "),e("li",[e("p",[t._v("Увімкніть живлення транспортного засобу та переключіться у режим польоту "),e("RouterLink",{attrs:{to:"/uk/flight_modes_mc/acro.html"}},[t._v("ACRO")]),t._v(" (використання цього режиму забезпечує, що транспортний засіб не намагатиметься компенсувати рух, що виникає від ременів).")],1),t._v(" "),e("ul",[e("li",[t._v("Збройте транспортний засіб і повільно підніміть оберти двигунів до максимуму.")]),t._v(" "),e("li",[t._v("Повільно знизьте швидкість обертання двигунів до нуля.")]),t._v(" "),e("li",[t._v("Disarm the vehicle")])]),t._v(" "),e("div",{staticClass:"custom-block note"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")])])])]),t._v(" "),e("p",[t._v("Проведіть тест обережно і уважно моніторте вібрації.\n:::")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Отримайте ulog та скористайтеся Python-скриптом "),e("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/src/modules/sensors/vehicle_magnetometer/mag_compensation/python/mag_compensation.py",target:"_blank",rel:"noopener noreferrer"}},[t._v("mag_compensation.py"),e("OutboundLink")],1),t._v(", щоб ідентифікувати параметри компенсації.")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("python mag_compensation.py ~/path/to/log/logfile.ulg\n")])])]),e("div",{staticClass:"custom-block note"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")])])])]),t._v(" "),e("p",[t._v("Якщо ваш журнал не містить вимірювань поточного заряду батареї, вам потрібно закоментувати відповідні рядки у Python-скрипті, щоб він робив розрахунок тільки для тяги.\n:::")]),t._v(" "),e("ol",[e("li",[e("p",[t._v('Скрипт поверне ідентифікацію параметрів для тяги, а також для поточного і виведе їх у консоль. Цифри, які з\'являються зі скрипту, показують "якість підгонки" для кожного екземпляру компасу, а також те, як виглядатиме дані після компенсації за запропонованими значеннями. Якщо є вимірювання струму, використання компенсації поточного звичайно дає кращі результати. Ось приклад журналу, де відповідність струму добра, але параметри тяги непридатні, оскільки відношення не є лінійним.')]),t._v(" "),e("p",[e("img",{attrs:{src:a(480),alt:"line fit"}})])]),t._v(" "),e("li",[e("p",[t._v("Після ідентифікації параметрів, компенсацію потужності потрібно ввімкнути, встановивши "),e("RouterLink",{attrs:{to:"/uk/advanced_config/parameter_reference.html#CAL_MAG_COMP_TYP"}},[t._v("CAL_MAG_COMP_TYP")]),t._v(" на значення 1 (при використанні параметрів тяги) або 2 (при використанні параметрів струму). Додатково, параметри компенсації для кожної вісі кожного компасу повинні бути встановлені.")],1),t._v(" "),e("p",[e("img",{attrs:{src:a(481),alt:"comp params"}})])])])])}),[],!1,null,null,null);s.default=_.exports},478:function(t,s,a){t.exports=a.p+"assets/img/corrupted_mag.0d8dbed4.png"},479:function(t,s,a){t.exports=a.p+"assets/img/strap.5c76a824.png"},480:function(t,s,a){t.exports=a.p+"assets/img/line_fit.09ad1ed1.png"},481:function(t,s,a){t.exports=a.p+"assets/img/comp_params.25fa50a0.png"}}]);