(window.webpackJsonp=window.webpackJsonp||[]).push([[443],{1561:function(t,a,e){t.exports=e.p+"assets/img/px4_simulator_messages.f1161233.svg"},1562:function(t,a,e){t.exports=e.p+"assets/img/px4_sitl_overview.d5d197f2.svg"},3400:function(t,a,e){"use strict";e.r(a);var s=e(19),_=Object(s.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"симулятор"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#симулятор"}},[t._v("#")]),t._v(" Симулятор")]),t._v(" "),s("p",[t._v('Симулятори дозволяють польотному коду PX4 керувати комп\'ютерно змодельованим апаратом у змодельованому "світі". Ви можете взаємодіяти з цим апаратом так само, як і зі справжнім, використовуючи '),s("em",[t._v("QGroundControl")]),t._v(", позабортовий API або радіоконтролер/ігровий пульт.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Симуляція - це швидкий, простий, а головне, "),s("em",[t._v("безпечний")]),t._v(" спосіб протестувати зміни в коді PX4 перед тим, як спробувати літати в реальному світі. Це також хороший спосіб почати літати з PX4, якщо у вас ще немає апарату для експериментів.")])]),t._v(" "),s("p",[t._v("PX4 підтримує як симуляцію "),s("em",[t._v("Software In the Loop (SITL)")]),t._v(", де польотний стек працює на комп'ютері (або на тому ж комп'ютері, або на іншому комп'ютері в тій же мережі), так і симуляцію "),s("em",[t._v("Hardware In the Loop (HITL)")]),t._v(" з використанням симуляційної прошивки на реальній платі польотного контролера.")]),t._v(" "),s("p",[t._v("Інформація про доступні тренажери та способи їх налаштування наведена в наступному розділі. Інші розділи надають загальну інформацію про те, як працює симулятор, і не є обов'язковими для "),s("em",[t._v("використання")]),t._v(" симуляторів.")]),t._v(" "),s("h2",{attrs:{id:"підтримувані-симулятори"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#підтримувані-симулятори"}},[t._v("#")]),t._v(" Підтримувані симулятори")]),t._v(" "),s("p",[t._v("Наступні симулятори підтримуються основною командою розробників PX4.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Симулятор")]),t._v(" "),s("th",[t._v("Опис")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("RouterLink",{attrs:{to:"/uk/sim_gazebo_gz/"}},[t._v("Gazebo")])],1),t._v(" "),s("td",[s("p",[s("strong",[t._v("Ми дуже рекомендуємо цей тренажер.")])]),s("p",[t._v("Gazebo supersedes "),s("RouterLink",{attrs:{to:"/uk/sim_gazebo_classic/"}},[t._v("Gazebo Classic")]),t._v(", з більш досконалими моделями рендерингу, фізики та сенсорів. Це єдина версія Gazebo, доступна з Ubuntu Linux 22.04.")],1),s("p",[t._v("Потужне середовище 3D-симуляції, яке особливо підходить для тестування обходу перешкод та комп'ютерного зору. Він також може бути використаний для "),s("RouterLink",{attrs:{to:"/uk/simulation/multi-vehicle-simulation.html"}},[t._v("multi-vehicle simulation")]),t._v(" і зазвичай використовується з "),s("RouterLink",{attrs:{to:"/uk/simulation/ros_interface.html"}},[t._v("ROS")]),t._v(", набором інструментів для автоматизації керування апаратами. ")],1),s("p",[s("strong",[t._v(" Підтримувані апарати:")]),t._v(" Quad, Standard VTOL, Літак")])])]),t._v(" "),s("tr",[s("td",[s("RouterLink",{attrs:{to:"/uk/sim_gazebo_classic/"}},[t._v("Gazebo Classic")])],1),t._v(" "),s("td",[s("p",[s("strong",[t._v("Ми дуже рекомендуємо цей тренажер.")])]),s("p",[t._v("Потужне середовище 3D-симуляції, яке особливо підходить для тестування обходу перешкод та комп'ютерного зору. Він також може бути використаний для "),s("RouterLink",{attrs:{to:"/uk/simulation/multi-vehicle-simulation.html"}},[t._v("multi-vehicle simulation")]),t._v(" і зазвичай використовується з "),s("RouterLink",{attrs:{to:"/uk/simulation/ros_interface.html"}},[t._v("ROS")]),t._v(", набором інструментів для автоматизації керування апаратами.")],1),s("p",[s("strong",[t._v("Підтримувані апарати:")]),t._v(" Quad ("),s("RouterLink",{attrs:{to:"/uk/airframes/airframe_reference.html#copter_quadrotor_x_generic_quadcopter"}},[t._v("Iris")]),t._v(", Hex (Typhoon H480), "),s("RouterLink",{attrs:{to:"/uk/airframes/airframe_reference.html#vtol_standard_vtol_generic_standard_vtol"}},[t._v("Generic Standard VTOL (QuadPlane)")]),t._v(", Tailsitter, Plane, Rover, Submarine ")],1)])]),t._v(" "),s("tr",[s("td",[s("RouterLink",{attrs:{to:"/uk/sim_jmavsim/"}},[t._v("jMAVSim")])],1),t._v(" "),s("td",[t._v("Простий мультироторний симулятор, який дозволяє літати на "),s("em",[t._v("коптерах")]),t._v(" по симульованому світу. "),s("p",[t._v("Його легко налаштувати і можна використовувати для перевірки того, що ваш апарат може злітати, летіти, приземлятися і належним чином реагувати на різні несправності (наприклад, несправність GPS). Він також може бути використаний для [симуляції декількох апаратів] (../sim_jmavsim/multi_vehicle.md).")]),s("p",[s("strong",[t._v(" Підтримувані апарати:")]),t._v(" Quad")])])])])]),t._v(" "),s("p",[t._v("Існує також ряд "),s("RouterLink",{attrs:{to:"/uk/simulation/community_supported_simulators.html"}},[t._v("Тренажерів, що підтримуються спільнотою")]),t._v(".")],1),t._v(" "),s("hr"),t._v(" "),s("p",[t._v('Решта цієї теми - це "дещо загальний" опис того, як працює інфраструктура симуляції. Це не обовʼязково для '),s("em",[t._v("використання")]),t._v(" симуляторів.")]),t._v(" "),s("h2",{attrs:{id:"симулятор-mavlink-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#симулятор-mavlink-api"}},[t._v("#")]),t._v(" Симулятор MAVLink API")]),t._v(" "),s("p",[t._v("Всі симулятори, крім Gazebo, взаємодіють з PX4 за допомогою API симулятора MAVLink. Цей API визначає набір повідомлень MAVLink, які передають дані датчиків з модельованого світу в PX4 і повертають значення двигуна і приводу з польотного коду, які будуть застосовані до модельованого апарату. На зображенні нижче показано потік повідомлень.")]),t._v(" "),s("p",[s("img",{attrs:{src:e(1561),alt:"Симулятор MAVLink API"}})]),t._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("SITL-збірка PX4 використовує [SimulatorMavlink.cpp](https://github.com/PX4/PX4-Autopilot/blob/main/src/modules/simulation/simulator_mavlink/SimulatorMavlink.cpp) для обробки цих повідомлень, тоді як апаратна збірка у режимі HIL використовує [mavlink_receiver.cpp](https://github.com/PX4/PX4-Autopilot/blob/main/src/modules/mavlink/mavlink_receiver.cpp). Дані датчиків з симулятора записуються в теми PX4 uORB. Всі двигуни/приводи заблоковані, але внутрішнє програмне забезпечення повністю функціонує.")])]),t._v(" "),s("p",[t._v("Повідомлення описані нижче (див. посилання для більш детальної інформації).")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Повідомлення")]),t._v(" "),s("th",[t._v("Напрямок")]),t._v(" "),s("th",[t._v("Опис")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_MODE_FLAG_HIL_ENABLED",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_MODE:MAV_MODE_FLAG_HIL_ENABLED"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("NA")]),t._v(" "),s("td",[t._v("Прапорець режиму при використанні симуляції. Всі двигуни/приводи заблоковані, але внутрішнє програмне забезпечення повністю функціонує.")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#HIL_ACTUATOR_CONTROLS",target:"_blank",rel:"noopener noreferrer"}},[t._v("HIL_ACTUATOR_CONTROLS"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("PX4 -> Sim")]),t._v(" "),s("td",[t._v("Виходи керування PX4 (до двигунів, приводів).")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#HIL_SENSOR",target:"_blank",rel:"noopener noreferrer"}},[t._v("HIL_SENSOR"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("Sim -> PX4")]),t._v(" "),s("td",[t._v("Імітація показань IMU в одиницях СІ в рамі корпусу NED.")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#HIL_GPS",target:"_blank",rel:"noopener noreferrer"}},[t._v("HIL_GPS"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("Sim -> PX4")]),t._v(" "),s("td",[t._v("Симульоване значення датчика GPS RAW.")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#HIL_OPTICAL_FLOW",target:"_blank",rel:"noopener noreferrer"}},[t._v("HIL_OPTICAL_FLOW"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("Sim -> PX4")]),t._v(" "),s("td",[t._v("Імітація оптичного потоку від датчика потоку (наприклад, PX4FLOW або датчика оптичної миші)")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#HIL_STATE_QUATERNION",target:"_blank",rel:"noopener noreferrer"}},[t._v("HIL_STATE_QUATERNION"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("Sim -> PX4")]),t._v(" "),s("td",[t._v('Містить фактичне "змодельоване" положення апарату, орієнтацію, швидкість і т.д. Це може бути записано в журнал і співставлено з оцінками PX4 для аналізу і діагностики (наприклад, перевірка того, наскільки добре оцінювач працює для зашумлених (імітованих) вхідних сигналів датчика).')])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#HIL_RC_INPUTS_RAW",target:"_blank",rel:"noopener noreferrer"}},[t._v("HIL_RC_INPUTS_RAW"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("Sim -> PX4")]),t._v(" "),s("td",[t._v("Отримані RAW-значення каналів РК.")])])])]),t._v(" "),s("p",[t._v("Безпосереднє використання PX4 "),s("a",{attrs:{href:"https://gazebosim.org/docs",target:"_blank",rel:"noopener noreferrer"}},[t._v("Gazebo API"),s("OutboundLink")],1),t._v(" для взаємодії з "),s("RouterLink",{attrs:{to:"/uk/sim_gazebo_gz/"}},[t._v("Gazebo")]),t._v(" і MAVlink не потрібно.")],1),t._v(" "),s("h2",{attrs:{id:"порти-udp-px4-mavlink-за-замовчуванням"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#порти-udp-px4-mavlink-за-замовчуванням"}},[t._v("#")]),t._v(" Порти UDP PX4 MAVLink за замовчуванням")]),t._v(" "),s("p",[t._v("За замовчуванням PX4 використовує загальноприйняті порти UDP для зв'язку MAVLink з наземними станціями управління (наприклад, "),s("em",[t._v("QGroundControl")]),t._v("), позабортовими API (наприклад, MAVSDK, MAVROS) і API симуляторів (наприклад, Gazebo). Ці порти:")]),t._v(" "),s("ul",[s("li",[t._v("Віддалений UDP-порт PX4 "),s("strong",[t._v("14550")]),t._v(" використовується для зв'язку з наземними станціями управління. Очікується, що GCS прослуховуватиме з'єднання на цьому порту. "),s("em",[t._v("QGroundControl")]),t._v(" слухає цей порт за замовчуванням.")]),t._v(" "),s("li",[t._v("Віддалений UDP-порт PX4 "),s("strong",[t._v("14540")]),t._v(" використовується для зв'язку з зовнішніми API. Очікується, що зовнішні API будуть чекати на з'єднання через цей порт. :::note Для симуляцій з кількома апаратами використовується окремий віддалений порт для кожного екземпляра, який розподіляється послідовно від "),s("code",[t._v("14540")]),t._v(" до "),s("code",[t._v("14549")]),t._v(". (додаткові екземпляри використовують порт "),s("code",[t._v("14549")]),t._v(").\n:::")]),t._v(" "),s("li",[t._v("Для зв'язку з PX4 використовується локальний TCP-порт симулятора "),s("strong",[t._v("4560")]),t._v(". Симулятор слухає цей порт, і PX4 ініціює TCP-з'єднання з ним.")])]),t._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("Порти для GCS, зовнішніх API та симулятора визначаються скриптами запуску. Щоб дізнатися більше, див. розділ "),s("RouterLink",{attrs:{to:"/uk/concept/system_startup.html"}},[t._v("Запуск системи")]),t._v(".")],1)]),t._v(" "),s("h2",{attrs:{id:"середовище-симуляціі-sitl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#середовище-симуляціі-sitl"}},[t._v("#")]),t._v(" Середовище симуляції SITL")]),t._v(" "),s("p",[t._v("На схемі нижче показано типове середовище симуляції SITL для будь-якого з підтримуваних тренажерів, що використовують MAVLink (тобто всіх, окрім Gazebo).")]),t._v(" "),s("p",[s("img",{attrs:{src:e(1562),alt:"Огляд PX4 SITL"}})]),t._v(" "),s("p",[t._v("Різні частини системи з'єднуються через протокол UDP і можуть працювати як на одному комп'ютері, так і на іншому комп'ютері в тій самій мережі.")]),t._v(" "),s("ul",[s("li",[t._v("PX4 використовує спеціальний модуль для підключення до локального TCP-порту 4560 симулятора. Потім симулятори обмінюються інформацією з PX4 за допомогою "),s("a",{attrs:{href:"#simulator-mavlink-api"}},[t._v("Симулятор MAVLink API")]),t._v(", описаного вище. PX4 на SITL і симулятор можуть працювати як на одному комп'ютері, так і на різних комп'ютерах в одній мережі.")])]),t._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("Симулятори також можуть використовувати міст "),s("em",[t._v("uxrce-dds")]),t._v(" ("),s("RouterLink",{attrs:{to:"/uk/middleware/uxrce_dds.html"}},[t._v("XRCE-DDS")]),t._v(") для безпосередньої взаємодії з PX4 (тобто через "),s("RouterLink",{attrs:{to:"/uk/middleware/uorb.html"}},[t._v("UORB topics")]),t._v(", а не MAVLink). Цей підхід "),s("em",[t._v("може")]),t._v(" використовуватися Gazebo Classic для моделювання "),s("RouterLink",{attrs:{to:"/uk/sim_gazebo_classic/multi_vehicle_simulation.html#build-and-test-xrce-dds"}},[t._v("кількох апаратів")]),t._v(".")],1)]),t._v(" "),s("ul",[s("li",[t._v("PX4 використовує звичайний модуль MAVLink для підключення до наземних станцій і зовнішніх API розробників, таких як MAVSDK або ROS\n"),s("ul",[s("li",[t._v("Наземні станції слухають віддалений UDP-порт PX4: "),s("code",[t._v("14550")])]),t._v(" "),s("li",[t._v("Зовнішні API розробника слухають віддалений UDP-порт PX4: "),s("code",[t._v("14540")]),t._v(". Для симуляції декількох апаратів PX4 послідовно виділяє окремий віддалений порт для кожного екземпляра від "),s("code",[t._v("14540")]),t._v(" до "),s("code",[t._v("14549")]),t._v(" (додаткові екземпляри використовують порт "),s("code",[t._v("14549")]),t._v(").")])])]),t._v(" "),s("li",[t._v("PX4 визначає ряд "),s("em",[t._v("локальних")]),t._v(" UDP-портів ("),s("code",[t._v("14580")]),t._v(","),s("code",[t._v("18570")]),t._v('), які іноді використовуються при роботі в мережі з PX4, запущеним у контейнері або віртуальній машині. Вони не рекомендуються для "загального" використання і можуть змінюватися в майбутньому.')]),t._v(" "),s("li",[t._v("Послідовне з'єднання можна використовувати для підключення "),s("RouterLink",{attrs:{to:"/uk/config/joystick.html"}},[t._v("джойстика/геймпада")]),t._v(" через "),s("em",[t._v("QGroundControl")]),t._v(".")],1)]),t._v(" "),s("p",[t._v("Якщо ви використовуєте звичайну систему побудови SITL "),s("code",[t._v("для створення")]),t._v(" конфігураційних цілей (див. наступний розділ), то і SITL, і симулятор будуть запущені на одному комп'ютері, і наведені вище порти будуть автоматично налаштовані. Ви можете налаштувати додаткові UDP-з'єднання MAVLink та іншим чином змінити середовище моделювання у файлах конфігурації та ініціалізації збірки.")]),t._v(" "),s("h3",{attrs:{id:"запуск-створення-симуляціі-sitl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#запуск-створення-симуляціі-sitl"}},[t._v("#")]),t._v(" Запуск/створення симуляції SITL")]),t._v(" "),s("p",[t._v("Система збірки дозволяє дуже легко зібрати і запустити PX4 на SITL, активувати симулятор і з'єднати їх. Синтаксис (спрощений) виглядає наступним чином:")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" px4_sitl simulator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_vehicle-model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("де "),s("code",[t._v("simulator")]),t._v(" - це "),s("code",[t._v("gz")]),t._v(" (для Gazebo), "),s("code",[t._v("gazebo-classic")]),t._v(", "),s("code",[t._v("jmavsim")]),t._v(" або інший симулятор, а vehicle-model - це конкретний тип транспортного засобу, який підтримується цим симулятором ("),s("RouterLink",{attrs:{to:"/uk/sim_gazebo_gz/"}},[t._v("Gazebo")]),t._v(" та "),s("RouterLink",{attrs:{to:"/uk/sim_jmavsim/"}},[t._v("jMAVSim")]),t._v(" на момент написання статті підтримують лише мультикоптери, тоді як "),s("RouterLink",{attrs:{to:"/uk/sim_gazebo_classic/"}},[t._v("Gazebo Classic")]),t._v(" підтримує багато різних типів).")],1),t._v(" "),s("p",[t._v("Нижче наведено кілька прикладів, і їх набагато більше на окремих сторінках для кожного з симуляторів:")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Start Gazebo with the x500 multicopter")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" px4_sitl gz_x500\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Start Gazebo Classic with plane")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" px4_sitl gazebo-classic_plane\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Start Gazebo Classic with iris and optical flow")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" px4_sitl gazebo-classic_iris_opt_flow\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Start JMavSim with iris (default vehicle model)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" px4_sitl jmavsim\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# Start PX4 with no simulator (i.e. to use your own "custom" simulator)')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" px4_sitl none_iris\n")])])]),s("p",[t._v("Симуляцію можна додатково налаштувати за допомогою змінних середовища:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("PX4_ESTIMATOR")]),t._v(": Ця змінна визначає, який естіматор використовувати. Можливі варіанти: "),s("code",[t._v("ekf2")]),t._v(" (за замовчуванням), "),s("code",[t._v("lpe")]),t._v(" (застаріла). Його можна встановити через "),s("code",[t._v("export PX4_ESTIMATOR=lpe")]),t._v(" перед запуском симуляції.")])]),t._v(" "),s("p",[t._v("Описаний тут синтаксис є спрощеним, і існує багато інших опцій, які можна налаштувати за допомогою "),s("em",[t._v("make")]),t._v(" - наприклад, вказати, що ви бажаєте під'єднатися до IDE або дебаггера. Для отримання додаткової інформації дивіться: "),s("RouterLink",{attrs:{to:"/uk/dev_setup/building_px4.html#px4-make-build-targets"}},[t._v("Збірка коду > PX4 Make Build Targets")]),t._v(".")],1),t._v(" "),s("p",[s("a",{attrs:{id:"simulation_speed"}})]),t._v(" "),s("h3",{attrs:{id:"запуск-симуляціі-швидше-ніж-у-реальному-часі"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#запуск-симуляціі-швидше-ніж-у-реальному-часі"}},[t._v("#")]),t._v(" Запуск симуляції швидше, ніж у реальному часі")]),t._v(" "),s("p",[t._v("SITL можна запустити швидше або повільніше, ніж у реальному часі, використовуючи jMAVSim або Gazebo Classic.")]),t._v(" "),s("p",[t._v("Коефіцієнт швидкості задається за допомогою змінної оточення "),s("code",[t._v("PX4_SIM_SPEED_FACTOR")]),t._v(". Наприклад, запустити симуляцію jMAVSim зі швидкістю у 2 рази більшою за швидкість реального часу:")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PX4_SIM_SPEED_FACTOR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" px4_sitl jmavsim\n")])])]),s("p",[t._v("Запустити в половину реального часу:")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PX4_SIM_SPEED_FACTOR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" px4_sitl jmavsim\n")])])]),s("p",[t._v("Ви можете застосувати коефіцієнт до всіх запусків SITL у поточній сесії за допомогою "),s("code",[t._v("EXPORT")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PX4_SIM_SPEED_FACTOR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" px4_sitl jmavsim\n")])])]),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("У певний момент введення-виведення або процесор обмежать швидкість, яка можлива на вашому комп'ютері, і він буде сповільнюватися \"автоматично\".\nПотужні комп'ютери зазвичай можуть запускати симуляцію зі швидкістю близько 6-10 разів, для ноутбуків досягається швидкість близько 3-4 разів.")])]),t._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("Щоб PX4 не помічав тайм-аутів каналу передачі даних, збільште значення параметра "),s("RouterLink",{attrs:{to:"/uk/advanced_config/parameter_reference.html#COM_DL_LOSS_T"}},[t._v("COM_DL_LOSS_T")]),t._v(" пропорційно до швидкості моделювання. Наприклад, якщо "),s("code",[t._v("COM_DL_LOSS_T")]),t._v(" дорівнює 10 в реальному часі, при 10-кратному моделюванні швидкість збільшиться до 100.")],1)]),t._v(" "),s("h3",{attrs:{id:"симуляція-lockstep"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#симуляція-lockstep"}},[t._v("#")]),t._v(" Симуляція Lockstep")]),t._v(" "),s("p",[t._v("PX4 SITL і симулятори (jMAVSim або Gazebo Classic) налаштовані на роботу з кроком "),s("em",[t._v("lockstep")]),t._v(". Це означає, що PX4 і симулятор чекають один на одного для отримання повідомлень від датчиків і приводів, а не працюють зі своїми власними швидкостями.")]),t._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("Lockstep дозволяє "),s("a",{attrs:{href:"#simulation_speed"}},[t._v(" запускати симуляцію швидше або повільніше, ніж у реальному часі")]),t._v(", а також призупиняти її для того, щоб переходити між елементами коду.")])]),t._v(" "),s("p",[t._v("Послідовність кроків для lockstep наступна:")]),t._v(" "),s("ol",[s("li",[t._v("Симуляція надсилає повідомлення датчика "),s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#HIL_SENSOR",target:"_blank",rel:"noopener noreferrer"}},[t._v("HIL_SENSOR"),s("OutboundLink")],1),t._v(" з міткою часу "),s("code",[t._v("time_usec")]),t._v(" для оновлення стану та часу датчика PX4.")]),t._v(" "),s("li",[t._v("PX4 отримує це повідомлення, виконує одну ітерацію оцінювання стану, керування тощо і врешті-решт надсилає актуатору повідомлення "),s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#HIL_ACTUATOR_CONTROLS",target:"_blank",rel:"noopener noreferrer"}},[t._v("HIL_ACTUATOR_CONTROLS"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("li",[t._v("Симуляція чекає, поки не отримає повідомлення від приводу/двигуна, потім моделює фізику і обчислює наступне повідомлення від датчика, яке знову надсилається до PX4.")])]),t._v(" "),s("p",[t._v('Система починається з "вільного ходу", під час якого симуляція надсилає повідомлення від датчиків, зокрема про час, і, таким чином, запускає PX4, доки він не ініціалізується і не надішле відповідне повідомлення від приводу.')]),t._v(" "),s("h4",{attrs:{id:"вимкнення-lockstep-симуляціі"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#вимкнення-lockstep-симуляціі"}},[t._v("#")]),t._v(" Вимкнення Lockstep симуляції")]),t._v(" "),s("p",[t._v("Lockstep симуляцію можна вимкнути, якщо, наприклад, SITL потрібно використовувати з тренажером, який не підтримує цю функцію. У цьому випадку симулятор і PX4 використовують системний час хоста і не чекають один на одного.")]),t._v(" "),s("p",[t._v("Щоб вимкнути lockstep у PX4, виконайте "),s("code",[t._v("make px4_sitl_default boardconfig")]),t._v(" і встановіть символ "),s("code",[t._v("BOARD_NOLOCKSTEP")]),t._v(' "Force disable lockstep", який знаходиться під панеллю інструментів.')]),t._v(" "),s("p",[t._v("Щоб вимкнути lockstep у Gazebo, відредагуйте "),s("a",{attrs:{href:"https://github.com/PX4/PX4-SITL_gazebo-classic/blob/3062d287c322fabf1b41b8e33518eb449d4ac6ed/models/plane/plane.sdf#L449",target:"_blank",rel:"noopener noreferrer"}},[t._v("файл SDF моделі"),s("OutboundLink")],1),t._v(" і встановіть "),s("code",[t._v("<enable_lockstep>false</enable_lockstep>")]),t._v(".")]),t._v(" "),s("p",[t._v("Щоб вимкнути lockstep у jMAVSim, видаліть "),s("code",[t._v("-l")]),t._v(" у "),s("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/Tools/simulation/jsbsim/sitl_run.sh#L40",target:"_blank",rel:"noopener noreferrer"}},[t._v("sitl_run.sh"),s("OutboundLink")],1),t._v(" або іншим чином переконайтеся, що java-двійник запускається без прапора "),s("code",[t._v("-lockstep")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"сценаріі-запуску"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#сценаріі-запуску"}},[t._v("#")]),t._v(" Сценарії запуску")]),t._v(" "),s("p",[t._v("Scripts are used to control which parameter settings to use or which modules to start. Вони знаходяться у каталозі "),s("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/tree/main/ROMFS/px4fmu_common/init.d-posix",target:"_blank",rel:"noopener noreferrer"}},[t._v("ROMFS/px4fmu_common/init.d-posix"),s("OutboundLink")],1),t._v(", файл "),s("code",[t._v("rcS")]),t._v(" є основною точкою входу. Докладнішу інформацію наведено у розділі "),s("RouterLink",{attrs:{to:"/uk/concept/system_startup.html"}},[t._v("Запуск системи")]),t._v(".")],1),t._v(" "),s("h3",{attrs:{id:"імітація-збоів-та-відмов-датчиків-обладнання"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#імітація-збоів-та-відмов-датчиків-обладнання"}},[t._v("#")]),t._v(" Імітація збоїв та відмов датчиків/обладнання")]),t._v(" "),s("p",[s("RouterLink",{attrs:{to:"/uk/simulation/failsafes.html"}},[t._v("Імітація збоїв")]),t._v(" пояснює, як викликати збої безпеки, такі як відмова GPS і розряд акумулятора.")],1),t._v(" "),s("h2",{attrs:{id:"середовище-симуляціі-hitl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#середовище-симуляціі-hitl"}},[t._v("#")]),t._v(" Середовище симуляції HITL")]),t._v(" "),s("p",[t._v("За допомогою симуляції Hardware-in-the-Loop (HITL) звичайна прошивка PX4 запускається на реальному обладнанні. Середовище моделювання HITL задокументовано: "),s("RouterLink",{attrs:{to:"/uk/simulation/hitl.html"}},[t._v("HITL симуляція")]),t._v(".")],1),t._v(" "),s("h2",{attrs:{id:"інтеграція-джоистиків-геимпада"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#інтеграція-джоистиків-геимпада"}},[t._v("#")]),t._v(" Інтеграція джойстиків/геймпада")]),t._v(" "),s("p",[s("em",[t._v("QGroundControl")]),t._v(" для ПК може підключатися до USB-джойстика/геймпада і надсилати команди руху та натискання кнопок на PX4 через MAVLink. Це працює як на SITL, так і на HITL симуляціях, і дозволяє вам безпосередньо керувати симульованим апаратом. Якщо у вас немає джойстика, ви можете керувати апаратом за допомогою екранних віртуальних паличок QGroundControl.")]),t._v(" "),s("p",[t._v("Для отримання інформації про налаштування див. "),s("em",[t._v("Посібник користувача QGroundControl")]),t._v(":")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://docs.qgroundcontrol.com/master/en/SetupView/Joystick.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Налаштування пульта"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.qgroundcontrol.com/master/en/SettingsView/VirtualJoystick.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Віртуальний джойстик"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"camera-simulation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#camera-simulation"}},[t._v("#")]),t._v(" Camera Simulation")]),t._v(" "),s("p",[t._v("PX4 підтримує захоплення як нерухомих зображень, так і відео з симулятора "),s("RouterLink",{attrs:{to:"/uk/sim_gazebo_classic/"}},[t._v("Gazebo Classic")]),t._v(". Це можна ввімкнути/налаштувати, як описано в розділі "),s("RouterLink",{attrs:{to:"/uk/sim_gazebo_classic/#video-streaming"}},[t._v("Gazebo Glassic > Потокове відео")]),t._v(".")],1),t._v(" "),s("p",[t._v("Симуляція камери - це класичний gazebo плагін, який реалізує "),s("a",{attrs:{href:"https://mavlink.io/en/protocol/camera.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAVLink Camera Protocol"),s("OutboundLink")],1),t._v(". "),t._v(". PX4 з'єднується/інтегрується з цією камерою "),s("em",[t._v("точно так само")]),t._v(", як і з будь-якою іншою камерою MAVLink:")]),t._v(" "),s("ol",[s("li",[s("p",[s("RouterLink",{attrs:{to:"/uk/advanced_config/parameter_reference.html#TRIG_INTERFACE"}},[t._v("TRIG_INTERFACE")]),t._v(" має бути встановлено у "),s("code",[t._v("3")]),t._v(", щоб налаштувати драйвер тригера камери для використання з камерою MAVLink :::tip У цьому режимі драйвер просто надсилає повідомлення "),s("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#CAMERA_TRIGGER",target:"_blank",rel:"noopener noreferrer"}},[t._v("CAMERA_TRIGGER"),s("OutboundLink")],1),t._v(" щоразу, коли запитується захоплення зображення. Для отримання додаткової інформації див. "),s("RouterLink",{attrs:{to:"/uk/peripherals/camera.html"}},[t._v("Камера")]),t._v(".\n:::")],1)]),t._v(" "),s("li",[s("p",[t._v("PX4 повинен перенаправляти всі команди камери між GCS і (симулятором) MAVLink Camera. Ви можете зробити це, запустивши "),s("RouterLink",{attrs:{to:"/uk/modules/modules_communication.html#mavlink"}},[t._v("MAVLink")]),t._v(" з прапором "),s("code",[t._v("-f")]),t._v(", як показано на малюнку, вказавши UDP-порти для нового з'єднання.")],1),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("mavlink start -u "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("14558")]),t._v(" -o "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("14530")]),t._v(" -r "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4000")]),t._v(" -f -m camera\n")])])]),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")])])])]),t._v(" "),s("p",[t._v("Повідомлення MAVLink пересилатимуться не лише на камеру, але камера ігноруватиме ті, які вона вважає неважливими.\n:::")]),t._v(" "),s("p",[t._v("Інші симулятори можуть використовувати такий самий підхід для реалізації підтримки камери.")]),t._v(" "),s("h2",{attrs:{id:"запуск-симуляціі-на-віддаленому-сервері"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#запуск-симуляціі-на-віддаленому-сервері"}},[t._v("#")]),t._v(" Запуск симуляції на віддаленому сервері")]),t._v(" "),s("p",[t._v("Симулятор можна запустити на одному комп'ютері, а доступ до нього отримати з іншого комп'ютера в тій же мережі (або в іншій мережі з відповідною маршрутизацією). Це може бути корисно, наприклад, якщо ви хочете протестувати програму для безпілотника, що працює на реальному комп'ютері-компаньйоні на фоні змодельованого транспортного засобу.")]),t._v(" "),s("p",[t._v('Це не працює "з коробки", оскільки PX4 за замовчуванням не маршрутизує пакети на зовнішні інтерфейси (щоб уникнути спаму в мережі та втручання різних симуляцій одна в одну). Замість цього він спрямовує трафік всередину - на "localhost".')]),t._v(" "),s("p",[t._v("Існує декілька способів зробити UDP-пакети доступними на зовнішніх інтерфейсах, як описано нижче.")]),t._v(" "),s("h3",{attrs:{id:"використання-mavlink-router"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#використання-mavlink-router"}},[t._v("#")]),t._v(" Використання MAVLink Router")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/mavlink-router/mavlink-router",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mavlink-router"),s("OutboundLink")],1),t._v(" можна використовувати для маршрутизації пакетів з localhost на зовнішній інтерфейс.")]),t._v(" "),s("p",[t._v("Ви можете маршрутизувати пакети між SITL, запущеним на одному комп'ютері (що надсилає трафік MAVLink на localhost через UDP-порт 14550), і QGC, запущеним на іншому комп'ютері (наприклад, за адресою "),s("code",[t._v("10.73.41.30")]),t._v("):")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Запустіть "),s("em",[t._v("mavlink-router")]),t._v(" за допомогою наступної команди:")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("mavlink-routerd -e "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.73")]),t._v(".41.30:14550 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:14550\n")])])])]),t._v(" "),s("li",[s("p",[t._v("Використовуйте конфігураційний файл "),s("em",[t._v("mavlink-router")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("UdpEndpoint QGC")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Mode")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("Normal")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Address")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("10.73.41.30")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("14550")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("UdpEndpoint SIM")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Mode")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("Eavesdropping")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Address")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("14550")]),t._v("\n")])])])])]),t._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("Більш детальну інформацію про конфігурацію "),s("em",[t._v("mavlink-router")]),t._v(" можна знайти "),s("a",{attrs:{href:"https://github.com/mavlink-router/mavlink-router#running",target:"_blank",rel:"noopener noreferrer"}},[t._v("тут"),s("OutboundLink")],1),t._v(".")])]),t._v(" "),s("h3",{attrs:{id:"увімкнення-трансляціі-udp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#увімкнення-трансляціі-udp"}},[t._v("#")]),t._v(" Увімкнення трансляції UDP")]),t._v(" "),s("p",[s("RouterLink",{attrs:{to:"/uk/modules/modules_communication.html#mavlink_usage"}},[t._v("Mavlink module")]),t._v(" за замовчуванням маршрутизує до "),s("em",[t._v("localhost")]),t._v(", але ви можете увімкнути UDP-трансляцію за допомогою його опції "),s("code",[t._v("-p")]),t._v(". Будь-який віддалений комп'ютер у мережі може підключитися до симулятора, прослуховуючи відповідний порт (наприклад, 14550 для "),s("em",[t._v("QGroundControl")]),t._v(").")],1),t._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("UDP-трансляція забезпечує простий спосіб встановлення з'єднання, коли в мережі працює лише одна симуляція. Не використовуйте цей підхід, якщо у мережі запущено декілька симуляцій (ви можете замість цього  [publish to a specific address](#enable-streaming-to-specific-address)).")])]),t._v(" "),s("p",[t._v("Це слід зробити у відповідному конфігураційному файлі, де викликається "),s("code",[t._v("mavlink start")]),t._v(". Наприклад: "),s("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/ROMFS/px4fmu_common/init.d-posix/px4-rc.mavlink",target:"_blank",rel:"noopener noreferrer"}},[t._v("/ROMFS/px4fmu_common/init.d-posix/px4-rc.mavlink"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"увімкнення-стрімінгу-на-певну-адресу"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#увімкнення-стрімінгу-на-певну-адресу"}},[t._v("#")]),t._v(" Увімкнення стрімінгу на певну адресу")]),t._v(" "),s("p",[s("RouterLink",{attrs:{to:"/uk/modules/modules_communication.html#mavlink_usage"}},[t._v("Mavlink module")]),t._v(" за замовчуванням спрямовує на "),s("em",[t._v("localhost")]),t._v(", але ви можете вказати зовнішню IP-адресу для потокового передавання за допомогою його параметра "),s("code",[t._v("-t")]),t._v(". Вказаний віддалений комп'ютер може підключитися до симулятора, прослуховуючи відповідний порт (наприклад, 14550 для "),s("em",[t._v("QGroundControl")]),t._v(").")],1),t._v(" "),s("p",[t._v("Це слід зробити у різних конфігураційних файлах, де викликається "),s("code",[t._v("mavlink start")]),t._v(". Наприклад: "),s("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/ROMFS/px4fmu_common/init.d-posix/px4-rc.mavlink",target:"_blank",rel:"noopener noreferrer"}},[t._v("/ROMFS/px4fmu_common/init.d-posix/px4-rc.mavlink"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"тунелювання-по-ssh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#тунелювання-по-ssh"}},[t._v("#")]),t._v(" Тунелювання по SSH")]),t._v(" "),s("p",[t._v("Тунелювання SSH є гнучким варіантом, оскільки комп'ютер для моделювання та система, що його використовує, не обов'язково повинні знаходитися в одній мережі.")]),t._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("Ви також можете використовувати VPN для створення тунелю до зовнішнього інтерфейсу (в тій самій або іншій мережі).")])]),t._v(" "),s("p",[t._v("Одним із способів створення тунелю є використання параметрів тунелювання SSH. Сам тунель можна створити, виконавши наступну команду на "),s("em",[t._v("localhost")]),t._v(", де "),s("code",[t._v("remote.local")]),t._v(" - ім'я віддаленого комп'ютера:")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" -C -fR "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("14551")]),t._v(":localhost:14551 remote.local\n")])])]),s("p",[t._v("UDP-пакети потрібно перетворити на TCP-пакети, щоб їх можна було перенаправляти через SSH. За допомогою утиліти "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Netcat",target:"_blank",rel:"noopener noreferrer"}},[t._v("netcat"),s("OutboundLink")],1),t._v(" можна працювати по обидва боки тунелю - спочатку для перетворення пакетів з UDP в TCP, а потім назад в UDP на іншому кінці.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("QGC")]),t._v(" "),s("p",[t._v("must be running before executing "),s("em",[t._v("netcat")]),t._v(".")])]),t._v(" "),s("p",[t._v("На комп'ютері "),s("em",[t._v("QGroundControl")]),t._v(" трансляцію UDP-пакетів можна здійснити за допомогою наступних команд:")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkfifo")]),t._v(" /tmp/tcp2udp\nnetcat -lvp "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("14551")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" /tmp/tcp2udp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" netcat -u localhost "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("14550")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /tmp/tcp2udp\n")])])]),s("p",[t._v("Команда на стороні симулятора тунелю SSH:")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkfifo")]),t._v(" /tmp/udp2tcp\nnetcat -lvup "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("14550")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" /tmp/udp2tcp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" netcat localhost "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("14551")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /tmp/udp2tcp\n")])])]),s("p",[t._v("Номер порту "),s("code",[t._v("14550")]),t._v(" дійсний для підключення до QGroundControl або іншої GCS, але повинен бути скоригований для інших кінцевих точок (наприклад, API розробника тощо).")]),t._v(" "),s("p",[t._v("Теоретично тунель може працювати нескінченно довго, але з'єднання "),s("em",[t._v("netcat")]),t._v(" доведеться перезапустити, якщо є якась проблема.")]),t._v(" "),s("p",[t._v("Скрипт "),s("a",{attrs:{href:"https://raw.githubusercontent.com/ThunderFly-aerospace/sitl_gazebo/autogyro-sitl/scripts/QGC_remote_connect.bash",target:"_blank",rel:"noopener noreferrer"}},[t._v("QGC_remote_connect.bash"),s("OutboundLink")],1),t._v(" можна запустити на комп'ютері QGC для автоматичного налаштування/запуску вищевказаних інструкцій. Симуляція вже має бути запущена на віддаленому сервері, і ви повинні мати доступ по SSH до цього сервера.")])])}),[],!1,null,null,null);a.default=_.exports}}]);