(window.webpackJsonp=window.webpackJsonp||[]).push([[1613],{3441:function(a,t,n){"use strict";n.r(t);var e=n(19),s=Object(e.a)({},(function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"готуємо-драивер-послідовного-порту-до-користувацьких-налаштувань"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#готуємо-драивер-послідовного-порту-до-користувацьких-налаштувань"}},[a._v("#")]),a._v(" Готуємо драйвер Послідовного Порту до користувацьких налаштувань")]),a._v(" "),n("p",[a._v("Ця тема пояснює, як підготувати драйвер послідовного порту для того, щоб користувач міг налаштувати його (через параметри) для роботи на послідовних портах будь-якого політного контролера.")]),a._v(" "),n("h2",{attrs:{id:"попередні-вимоги"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#попередні-вимоги"}},[a._v("#")]),a._v(" Попередні вимоги")]),a._v(" "),n("p",[a._v("Очікується, що драйвер вже існує і запускається в командному рядку, використовуючи синтаксис команди:")]),a._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[a._v("\n")])])]),n("p",[a._v("де")]),a._v(" "),n("ul",[n("li",[n("code",[a._v("-d")]),a._v(": ім'я послідовного порту.")]),a._v(" "),n("li",[n("code",[a._v("-b")]),a._v(": швидкість бодів [baud rate] (необов'язково), якщо драйвер підтримує декілька варіантів швидкості бодів. Якщо підтримується, драйвер мусить дозволити вказати швидкість бодів і як просто число, і як параметр, з синтаксисом "),n("code",[a._v("-b p:<param_name>")]),a._v(" (що може бути передане через "),n("code",[a._v("px4_get_parameter_value()")]),a._v(") :::tip Дивіться "),n("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/src/drivers/gps/gps.cpp#L1023",target:"_blank",rel:"noopener noreferrer"}},[a._v("gps driver"),n("OutboundLink")],1),a._v(" як приклад.\n:::")])]),a._v(" "),n("h2",{attrs:{id:"робимо-драивер-налаштовуваним"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#робимо-драивер-налаштовуваним"}},[a._v("#")]),a._v(" Робимо драйвер налаштовуваним")]),a._v(" "),n("p",[a._v("Аби зробити драйвер налаштовуваним:")]),a._v(" "),n("ol",[n("li",[n("p",[a._v("Створіть конфігураційний файл модуля YAML:")]),a._v(" "),n("ul",[n("li",[n("p",[a._v("Додайте новий файл з іменем "),n("strong",[a._v("module.yaml")]),a._v(" у директорію з сорс кодом драйверу")])]),a._v(" "),n("li",[n("p",[a._v("Вставте наступний текст і підлаштуйте за потреби:")]),a._v(" "),n("div",{staticClass:"language-cmake extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cmake"}},[n("code",[a._v("module_name: uLanding Radar\nserial_config:\n    - command: ulanding_radar start -d "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("${")]),a._v("SERIAL_DEV"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" -b p:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("${")]),a._v("BAUD_PARAM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n      port_config_param:\n        name: SENS_ULAND_CFG\n        group: Sensors\n")])])]),n("p",[a._v("Повна документація модулів файлів конфігурації знаходиться у файлі  "),n("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/validation/module_schema.yaml",target:"_blank",rel:"noopener noreferrer"}},[a._v("validation/module_schema.yaml"),n("OutboundLink")],1),a._v(". Це також використовується для перевірки всіх файлів конфігурації в CI.\n:::")])])])]),a._v(" "),n("li",[n("p",[a._v("Додайте конфігурацію модулів в "),n("strong",[a._v("CMakeLists.txt")]),a._v(" файл драйвера модуль:")]),a._v(" "),n("div",{staticClass:"language-cmake extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cmake"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[a._v("px4_add_module")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n MODULE drivers__ulanding\n MAIN ulanding_radar\n SRCS\n     ulanding.cpp\n MODULE_CONFIG\n     module.yaml\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])])])])])}),[],!1,null,null,null);t.default=s.exports}}]);