(window.webpackJsonp=window.webpackJsonp||[]).push([[406],{2742:function(t,r,e){"use strict";e.r(r);var a=e(19),_=Object(a.a)({},(function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"розподіл-керування-змішування"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#розподіл-керування-змішування"}},[t._v("#")]),t._v(" Розподіл керування (змішування)")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),a("p",[t._v("Розподіл керування замінює застарілий підхід змішування, який використовувався в PX4 v1.13 або раніше. Документацію по PX4 v1.13 дивіться в: "),a("a",{attrs:{href:"https://docs.px4.io/v1.13/en/concept/mixing.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Змішування та приводи"),a("OutboundLink")],1),t._v(", "),a("a",{attrs:{href:"https://docs.px4.io/v1.13/en/concept/geometry_files.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Файли геометрії"),a("OutboundLink")],1),t._v(" та "),a("a",{attrs:{href:"https://docs.px4.io/v1.13/en/dev_airframes/adding_a_new_frame.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Додавання налаштувань нового планера"),a("OutboundLink")],1),t._v(".")])]),t._v(" "),a("p",[t._v("PX4 приймає бажані команди моменту та тяги від основних контролерів і перекладає їх у команди приводів, які керують двигунами чи сервоприводами.")]),t._v(" "),a("p",[t._v('Переклад залежить від фізичної геометрії планеру. Скажемо наприклад, за командою моменту "повернути праворуч":')]),t._v(" "),a("ul",[a("li",[t._v("Літак з одним сервоприводом на елерон накаже одному сервоприводу підняти, а іншому опустити їх.")]),t._v(" "),a("li",[t._v("Мультикоптер порине вправо змінивши швидкість всіх двигунів.")])]),t._v(" "),a("p",[t._v('PX4 відокремлює цю логіку перекладу, що називається "змішуванням", від контролера позиції/швидкості. Це гарантує, що основним контролерам не потрібна особлива обробка для кожної геометрії планерів і значно покращує повторне використання.')]),t._v(" "),a("p",[t._v("Крім того, PX4 абстрагує відображення функцій виводу до конкретних апаратних виходів. Це означає, що будь-який двигун або сервопривід може бути призначений майже на будь-який фізичний вивід.")]),t._v(" "),a("p",[a("img",{attrs:{src:e(655),alt:"Огляд змішування"}})]),t._v(" "),a("h2",{attrs:{id:"конвеєр-керування-приводами"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#конвеєр-керування-приводами"}},[t._v("#")]),t._v(" Конвеєр керування приводами")]),t._v(" "),a("p",[t._v("Огляд конвеєрів змішування в термінах модулів та uORB (натисніть для показу в повноекранному режимі):")]),t._v(" "),a("p",[a("img",{attrs:{src:e(656),alt:"Огляд конвеєра"}})]),t._v(" "),a("p",[t._v("Примітки:")]),t._v(" "),a("ul",[a("li",[t._v("Регулятор швидкості видає задані значення моменту та тяги")]),t._v(" "),a("li",[t._v("Модуль "),a("code",[t._v("control_allocator")]),t._v(":\n"),a("ul",[a("li",[t._v("обробляє різні геометрії на основі параметрів конфігурації")]),t._v(" "),a("li",[t._v("робить змішування")]),t._v(" "),a("li",[t._v("обробляє відмови двигунів")]),t._v(" "),a("li",[t._v("публікує сигнали керування двигуном та сервоприводами")]),t._v(" "),a("li",[t._v("публікує корекції для сервоприводів окремо щоб їх можна було додати як відхилення при  "),a("RouterLink",{attrs:{to:"/uk/config/actuators.html#actuator-testing"}},[t._v("перевірці приводів")]),t._v(" (використовуючи тестувальні повзунки).")],1)])]),t._v(" "),a("li",[t._v("Драйвери виходу:\n"),a("ul",[a("li",[t._v("обробляють апаратну ініціалізацію та оновлення")]),t._v(" "),a("li",[t._v("використовують поділювану бібліотеку "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/src/lib/mixer_module/",target:"_blank",rel:"noopener noreferrer"}},[t._v("src/libs/mixer_module"),a("OutboundLink")],1),t._v(". Драйвер визначає префікс параметру, наприклад "),a("code",[t._v("PWM_MAIN")]),t._v(", який бібліотека використовує для налаштування. Її головне завдання зробити вибірку з вхідних дані та призначити правильні дані на виходи засновуючись на встановлених користувачем значеннях параметрів "),a("code",[t._v("<param_prefix>_FUNCx")]),t._v(". Наприклад, якщо "),a("code",[t._v("PWM_MAIN_FUNC3")]),t._v(" встановлено у "),a("strong",[t._v("Motor 2")]),t._v(", це означає що на 2-й двигун з "),a("code",[t._v("actuator_motors")]),t._v(" встановлено 3-й вивід.")]),t._v(" "),a("li",[t._v("функції виводу визначаються у "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/src/lib/mixer_module/output_functions.yaml",target:"_blank",rel:"noopener noreferrer"}},[t._v("src/lib/mixer_module/output_functions.yaml"),a("OutboundLink")],1),t._v(".")])])]),t._v(" "),a("li",[t._v("Якщо ви хочете керувати виводом з MAVLink, встановіть відповідну вихідну функцію в "),a("strong",[t._v("Offboard Actuator Set x")]),t._v(", а потім відправте MAVLink команду "),a("a",{attrs:{href:"https://mavlink.io/en/messages/common.html#MAV_CMD_DO_SET_ACTUATOR",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAV_CMD_DO_SETUATOR"),a("OutboundLink")],1),t._v(".")])]),t._v(" "),a("h2",{attrs:{id:"додавання-новоі-геометріі-або-функціі-виводу"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#додавання-новоі-геометріі-або-функціі-виводу"}},[t._v("#")]),t._v(" Додавання нової геометрії або функції виводу")]),t._v(" "),a("p",[t._v("Дивіться "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/commit/5cdb6fbd8e1352dcb94bd58918da405f8ff930d7",target:"_blank",rel:"noopener noreferrer"}},[t._v("цей коміт"),a("OutboundLink")],1),t._v(" як додати нову геометрію. Інтерфейс QGC автоматично покаже правильний інтерфейс налаштування, коли в новій геометрії встановлено "),a("RouterLink",{attrs:{to:"/uk/advanced_config/parameter_reference.html#CA_AIRFRAME"}},[t._v("CA_AIRFRAME")]),t._v(".")],1),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/commit/a65533b46986e32254b64b7c92469afb8178e370",target:"_blank",rel:"noopener noreferrer"}},[t._v("Цей коміт"),a("OutboundLink")],1),t._v(" показує як додати нову функцію виходу. Будь-яка тема uORB може бути підписана і закріплена за функцією.")]),t._v(" "),a("p",[t._v("Зауважте що параметри для розподілу керування визначені у "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/src/modules/control_allocator/module.yaml",target:"_blank",rel:"noopener noreferrer"}},[t._v("src/modules/control_allocator/module.yaml"),a("OutboundLink")],1),t._v(" Схема для цього файлу є "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/validation/module_schema.yaml#L440=",target:"_blank",rel:"noopener noreferrer"}},[t._v("тут"),a("OutboundLink")],1),t._v(" (конкретніше, шукайте термін "),a("code",[t._v("mixer:")])]),t._v(" "),a("h2",{attrs:{id:"встановлення-геометріі-планеру-за-замовчуванням"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#встановлення-геометріі-планеру-за-замовчуванням"}},[t._v("#")]),t._v(" Встановлення геометрії планеру за замовчуванням")]),t._v(" "),a("p",[t._v("Коли "),a("RouterLink",{attrs:{to:"/uk/dev_airframes/adding_a_new_frame.html"}},[t._v("додаєте нові налаштування планера")]),t._v(", встановіть відповідне значення "),a("RouterLink",{attrs:{to:"/uk/advanced_config/parameter_reference.html#CA_AIRFRAME"}},[t._v("CA_AIRFRAME")]),t._v(" змішувача та інші значення за замовчуванням для геометрії.")],1),t._v(" "),a("p",[t._v("Ви можете це побачити наприклад, у файлі конфігурації планера "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/main/ROMFS/px4fmu_common/init.d/airframes/13200_generic_vtol_tailsitter",target:"_blank",rel:"noopener noreferrer"}},[t._v("13200_generic_vtol_tailsitter"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nparam set-default CA_AIRFRAME "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\nparam set-default CA_ROTOR_COUNT "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\nparam set-default CA_ROTOR0_KM -0.05\nparam set-default CA_ROTOR0_PY "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),a("h2",{attrs:{id:"налаштування-геометріі-та-виходів"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#налаштування-геометріі-та-виходів"}},[t._v("#")]),t._v(" Налаштування геометрії та виходів")]),t._v(" "),a("p",[t._v("Геометрія для плати та параметри за замовчуванням для рухомого засобу встановлюються (з файлу налаштувань планера) коли планер обирається у QGroundControl: "),a("RouterLink",{attrs:{to:"/uk/config/airframe.html"}},[t._v("Основне налаштування > Планери")]),t._v(".")],1),t._v(" "),a("p",[t._v("Параметри геометрії та відображення виводу для певних планерів та апаратного забезпечення польотних контролерів потім налаштовується у QGroundControl на екрані "),a("strong",[t._v("Приводи")]),t._v(": "),a("RouterLink",{attrs:{to:"/uk/config/actuators.html"}},[t._v("Базове налаштування > Налаштування та перевірка приводу")]),t._v(".")],1)])}),[],!1,null,null,null);r.default=_.exports},655:function(t,r,e){t.exports=e.p+"assets/img/mixing_overview.c98463d4.png"},656:function(t,r,e){t.exports=e.p+"assets/img/control_allocation_pipeline.445b582b.png"}}]);