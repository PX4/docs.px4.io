(window.webpackJsonp=window.webpackJsonp||[]).push([[503],{1756:function(e,t,n){"use strict";n.r(t);var s=n(19),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"system-notification-tunes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#system-notification-tunes"}},[e._v("#")]),e._v(" System Notification Tunes")]),e._v(" "),s("p",[e._v("PX4 defines a number of "),s("RouterLink",{attrs:{to:"/en/getting_started/tunes.html"}},[e._v("standard tones/tunes")]),e._v(" that are used to provide audio notification for important system states and problems (e.g. system startup, arming success, battery warnings, etc.)")],1),e._v(" "),s("p",[e._v("Tunes are specified using strings (in "),s("a",{attrs:{href:"http://artscene.textfiles.com/ansimusic/information/ansimtech.txt",target:"_blank",rel:"noopener noreferrer"}},[e._v("ANSI Music notation"),s("OutboundLink")],1),e._v(") and played by code using the "),s("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/tree/release/1.14/src/lib/tunes",target:"_blank",rel:"noopener noreferrer"}},[e._v("tunes"),s("OutboundLink")],1),e._v(" library.\nThe tunes library also contains the list of default system tunes - see "),s("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/release/1.14/src/lib/tunes/tune_definition.desc",target:"_blank",rel:"noopener noreferrer"}},[e._v("lib/tunes/tune_definition.desc"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("p",[e._v("PX4 also has a module that can be used to play (test) the default tunes or a user defined tune.")]),e._v(" "),s("p",[e._v("This topic provides general guidance on how to create your own tunes and add to/replace the system notification tones/tunes.")]),e._v(" "),s("h2",{attrs:{id:"creating-tunes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#creating-tunes"}},[e._v("#")]),e._v(" Creating Tunes")]),e._v(" "),s("p",[e._v("Tune strings are defined using "),s("a",{attrs:{href:"http://artscene.textfiles.com/ansimusic/information/ansimtech.txt",target:"_blank",rel:"noopener noreferrer"}},[e._v("ANSI Music notation"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),s("p",[e._v("More information about the format can be found in "),s("a",{attrs:{href:"https://en.wikibooks.org/wiki/QBasic/Appendix#PLAY",target:"_blank",rel:"noopener noreferrer"}},[e._v("QBasic PLAY statement"),s("OutboundLink")],1),e._v(" (Wikibooks) and has been reproduced in "),s("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/release/1.14/src/lib/tunes/tune_definition.desc",target:"_blank",rel:"noopener noreferrer"}},[e._v("tune_definition.desc"),s("OutboundLink")],1),e._v(".")])]),e._v(" "),s("p",[e._v("The easiest way to create a new tune is to use a music editor.\nThis allows you to edit the music and play it back on your computer, then export it to a format that can be played by PX4.")]),e._v(" "),s("p",[e._v("ANSI music was popular in the days of ANSI BBS systems, and so the best editing tools are DOS utilities.\nOn Windows, one option is to use "),s("em",[e._v("Melody Master")]),e._v(" within "),s("em",[e._v("Dosbox")]),e._v(".")]),e._v(" "),s("p",[e._v("The steps for using the software are:")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("Download "),s("a",{attrs:{href:"http://www.dosbox.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("DosBox"),s("OutboundLink")],1),e._v(" and install the app")])]),e._v(" "),s("li",[s("p",[e._v("Download "),s("a",{attrs:{href:"ftp://archives.thebbs.org/ansi_utilities/melody21.zip"}},[e._v("Melody Master")]),e._v(" and unzip into a new directory")])]),e._v(" "),s("li",[s("p",[e._v("Open the "),s("em",[e._v("Dosbox")]),e._v(" console")])]),e._v(" "),s("li",[s("p",[e._v("Mount the melody master directory in Dosbox as shown below:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("mount c C:\\<path_to_directory\\Melody21\n")])])])]),e._v(" "),s("li",[s("p",[e._v("Start "),s("em",[e._v("Melody Master")]),e._v(" with the following commands")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("c:\nstart\n")])])])]),e._v(" "),s("li",[s("p",[e._v("You will then have the option to click through a few screens, then press "),s("strong",[e._v("1")]),e._v(" to display "),s("em",[e._v("Melody Master")]),e._v(":\n"),s("img",{attrs:{src:n(465),alt:"Melody Master 2.1"}})]),e._v(" "),s("p",[e._v("The lower half of the screen provides helpful advice on keyboard shortcuts for using the tool (arrows for moving in stave, and numbers for selecting the note length, etc.).")])]),e._v(" "),s("li",[s("p",[e._v("When you're ready to save the music:")]),e._v(" "),s("ul",[s("li",[e._v("Press "),s("strong",[e._v("F2")]),e._v(" to give the tune a name and save it in the "),s("em",[e._v("/Music")]),e._v(" sub folder of your Melody Master installation.")]),e._v(" "),s("li",[e._v("Press "),s("strong",[e._v("F7")]),e._v(", the scroll down the list of output formats on the right to get to ANSI.\nThe file will be exported to the "),s("em",[e._v("root")]),e._v(" of the Melody Master directory (with the same name and a file-type specific extension).")])])]),e._v(" "),s("li",[s("p",[e._v("Open the file.\nThe output might look like this:")]),e._v(" "),s("p",[s("img",{attrs:{src:n(466),alt:"ANSI Output from file"}})])]),e._v(" "),s("li",[s("p",[e._v("The string that can be played in PX4 is the bit between "),s("code",[e._v("MNT")]),e._v(" and "),s("code",[e._v("P64")]),e._v(": "),s("code",[e._v("150L1O3DL16CL32<B>C<AEL16A")])])])]),e._v(" "),s("h2",{attrs:{id:"testing-tunes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#testing-tunes"}},[e._v("#")]),e._v(" Testing Tunes")]),e._v(" "),s("p",[e._v("When you're ready to try it out a new tune on PX4, use the "),s("RouterLink",{attrs:{to:"/en/modules/modules_system.html#tune-control"}},[e._v("tune_control")]),e._v(' library.\nFor example, to test the tune we "created" above you would enter the following command on a console or shell (e.g. the '),s("RouterLink",{attrs:{to:"/en/debug/mavlink_shell.html"}},[e._v("MAVLink Shell")]),e._v("):")],1),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("tune_control play -m "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"150L1O3DL16CL32<B>C<AEL16A"')]),e._v("\n")])])]),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),s("p",[e._v("Out of the box, the "),s("code",[e._v("tune_control")]),e._v(" is only present on real hardware (not the simulator).")])]),e._v(" "),s("h2",{attrs:{id:"replacing-existing-tunes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#replacing-existing-tunes"}},[e._v("#")]),e._v(" Replacing Existing Tunes")]),e._v(" "),s("p",[e._v("Tunes are defined within "),s("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/release/1.14/src/lib/tunes/tune_definition.desc",target:"_blank",rel:"noopener noreferrer"}},[e._v("tune_definition.desc"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("p",[e._v("If you just need to replace an existing tune, then you can replace the file in your own fork, and update the tune strings defined in "),s("code",[e._v("PX4_DEFINE_TUNE")]),e._v(".")]),e._v(" "),s("h2",{attrs:{id:"adding-a-new-tune"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adding-a-new-tune"}},[e._v("#")]),e._v(" Adding a New Tune")]),e._v(" "),s("p",[e._v("TBD.")])])}),[],!1,null,null,null);t.default=o.exports},465:function(e,t,n){e.exports=n.p+"assets/img/tunes_melody_master_2_1.48420adb.jpg"},466:function(e,t,n){e.exports=n.p+"assets/img/tune_musicmaker_ansi_output.99d0ff16.png"}}]);