(window.webpackJsonp=window.webpackJsonp||[]).push([[1801],{3267:function(t,e,a){"use strict";a.r(e);var s=a(19),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"自主避障"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自主避障"}},[t._v("#")]),t._v(" 自主避障")]),t._v(" "),a("p",[a("em",[t._v("自主避障")]),t._v(" 可以使飞机在沿预定路线前进时，能够自动绕开障碍物。")]),t._v(" "),a("p",[t._v("该功能需要运行计算机视觉软件的机载计算机。 该软件对期望路线重新规划，在导航绕开障碍物，并选取最佳路径。")]),t._v(" "),a("p",[t._v("自主避障适用于自动化模式，目前仅支持多旋翼飞行器的 "),a("a",{attrs:{href:"#mission_mode"}},[t._v("任务Missions")]),t._v(" 和 "),a("a",{attrs:{href:"#offboard_mode"}},[t._v("Offboard")]),t._v(" 模式。")]),t._v(" "),a("p",[t._v("本文将阐述怎样在这两种模式中设置自主避障功能。")]),t._v(" "),a("h2",{attrs:{id:"局限-能力"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#局限-能力"}},[t._v("#")]),t._v(" 局限 / 能力")]),t._v(" "),a("ul",[a("li",[t._v("自主避障的最大速度当前约为 3m/s（由于计算避障路径的开销）。")])]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),a("p",[t._v("Obstacle avoidance can use the "),a("em",[t._v("local planner")]),t._v(" (emits messages at ~30Hz and can move at around 3 m/s) or "),a("em",[t._v("global planner")]),t._v(" (emits messages at ~10Hz and mission speed with obstacle avoidance is around 1-1.5 m/s).")])]),t._v(" "),a("p",[a("a",{attrs:{id:"offboard_mode"}})]),t._v(" "),a("h2",{attrs:{id:"offboard模式避障"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#offboard模式避障"}},[t._v("#")]),t._v(" Offboard模式避障")]),t._v(" "),a("p",[t._v("PX4 在 "),a("RouterLink",{attrs:{to:"/zh/flight_modes/offboard.html"}},[t._v("Offboard 模式")]),t._v("中支持自主避障功能。")],1),t._v(" "),a("p",[t._v("期望路径来自在配套计算机上运行的一个 "),a("RouterLink",{attrs:{to:"/zh/ros/"}},[t._v("ROS")]),t._v(" 节点。 并传递给自主避障模块（另一个 ROS 节点）。 避障软件将规划路径通过 "),a("code",[t._v("SET_POSITION_TARGET_LOCAL_NED")]),t._v(" 消息流发送给飞行控制栈。")],1),t._v(" "),a("p",[t._v("PX4中唯一需要的配置是将 PX4 设置为 "),a("em",[t._v("Offboard 模式")]),t._v("。")]),t._v(" "),a("p",[t._v("机载计算机中的硬件设置和软/硬件配置在 Github 仓库 "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Avoidance",target:"_blank",rel:"noopener noreferrer"}},[t._v("PX4/avoidance"),a("OutboundLink")],1),t._v(" 中已经提供。")]),t._v(" "),a("p",[a("a",{attrs:{id:"mission_mode"}})]),t._v(" "),a("h2",{attrs:{id:"任务模式避障"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#任务模式避障"}},[t._v("#")]),t._v(" 任务模式避障")]),t._v(" "),a("p",[t._v("PX4支持 "),a("RouterLink",{attrs:{to:"/zh/flight_modes/mission.html"}},[t._v("任务模式")]),t._v(" 避障，需要使用一台独立的运行避障软件的机载计算机配合。")],1),t._v(" "),a("h3",{attrs:{id:"任务模式的变化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#任务模式的变化"}},[t._v("#")]),t._v(" 任务模式的变化")]),t._v(" "),a("p",[t._v("在开启自主避障功能时，任务模式的行为和原本规划的行为会有"),a("em",[t._v("些许不同")]),t._v("。")]),t._v(" "),a("p",[t._v("激活避障之后的不同之处有：")]),t._v(" "),a("ul",[a("li",[t._v("飞机距离目标航点小于阈值半径，即判定为抵达，不考虑航向。\n"),a("ul",[a("li",[t._v("在普通任务模式下，飞机必须沿某一航向抵达目标航点（比如从上一航点沿直线靠近）。 开启自主避障后该约束失效，因为避障算法完全控制了飞机的航向，并且飞机始终在当前视野中移动。")])])]),t._v(" "),a("li",[t._v("PX4 starts emitting a new current/next waypoint once the previous waypoint is reached (i.e. as soon as the vehicle enters its acceptance radius).")]),t._v(" "),a("li",[t._v("If a waypoint is "),a("em",[t._v("inside")]),t._v(" an obstacle it may be unreachable (and the mission will be stuck).\n"),a("ul",[a("li",[t._v("如果飞机在上一航点与当前航点连线上的投影经过了当前航点，阈值半径将被放大，当前航点将被标记为抵达。")]),t._v(" "),a("li",[t._v("If the vehicle is within the x-y acceptance radius, the altitude acceptance is modified such that the mission progresses (even if it is not in the altitude acceptance radius).")])])]),t._v(" "),a("li",[t._v("The original mission speed (as set in "),a("em",[t._v("QGroundControl")]),t._v("/PX4) is ignored. 速度将由避障软件决定：\n"),a("ul",[a("li",[a("em",[t._v("local planner")]),t._v(" mission speed is around 3 m/s.")]),t._v(" "),a("li",[a("em",[t._v("global planner")]),t._v(" mission speed is around 1-1.5 m/s.")])])])]),t._v(" "),a("p",[t._v("If PX4 stops receiving setpoint updates for more than half a second it will switch into "),a("RouterLink",{attrs:{to:"/zh/flight_modes_mc/hold.html"}},[t._v("Hold mode")]),t._v(".")],1),t._v(" "),a("h3",{attrs:{id:"px4-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#px4-配置"}},[t._v("#")]),t._v(" PX4 配置")]),t._v(" "),a("p",[t._v("PX4 通过 "),a("RouterLink",{attrs:{to:"/zh/advanced_config/parameters.html"}},[t._v("设置")]),t._v(" 参数 "),a("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#COM_OBS_AVOID"}},[t._v("COM_OBS_AVOID")]),t._v(" 为1 来使能自主避障功能。")],1),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),a("p",[a("code",[t._v("COM_OBS_AVOID")]),t._v(" 还使能了 "),a("RouterLink",{attrs:{to:"/zh/computer_vision/safe_landing.html"}},[t._v("安全着陆")]),t._v("，以及使用了 PX4 "),a("RouterLink",{attrs:{to:"/zh/computer_vision/path_planning_interface.html"}},[t._v("Path Planning Offboard Interface")]),t._v(" （轨迹接口）将外部路径规划服务与 PX4 集成的其他功能。")],1)]),t._v(" "),a("h2",{attrs:{id:"机载计算机设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#机载计算机设置"}},[t._v("#")]),t._v(" 机载计算机设置")]),t._v(" "),a("p",[t._v("Companion-side hardware setup and hardware/software configuration is provided in the "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Avoidance",target:"_blank",rel:"noopener noreferrer"}},[t._v("PX4/PX4-Avoidance"),a("OutboundLink")],1),t._v(" Github repo.")]),t._v(" "),a("p",[t._v("Obstacle avoidance in missions can use either the "),a("em",[t._v("local planner")]),t._v(" or "),a("em",[t._v("global planner")]),t._v(" (the local planner is recommended/better performing).")]),t._v(" "),a("p",[a("a",{attrs:{id:"interface"}})]),t._v(" "),a("h2",{attrs:{id:"自主避障接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自主避障接口"}},[t._v("#")]),t._v(" 自主避障接口")]),t._v(" "),a("p",[t._v("PX4 使用 "),a("RouterLink",{attrs:{to:"/zh/computer_vision/path_planning_interface.html"}},[t._v("Path Planning Offboard Interface")]),t._v(" 集成机载计算机中的路径规划服务（包括 "),a("RouterLink",{attrs:{to:"/zh/computer_vision/obstacle_avoidance.html#mission_mode"}},[t._v("任务中自主避障")]),t._v("，"),a("RouterLink",{attrs:{to:"/zh/computer_vision/safe_landing.html"}},[t._v("安全着陆")]),t._v(" 以及更多的服务）。")],1),t._v(" "),a("p",[t._v("The interface (messages sent) between PX4 and the companion are "),a("em",[t._v("exactly")]),t._v(" the same as for any other path planning services.")]),t._v(" "),a("h2",{attrs:{id:"支持的硬件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持的硬件"}},[t._v("#")]),t._v(" 支持的硬件")]),t._v(" "),a("p",[t._v("Tested companion computers and cameras are listed in "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Avoidance#run-on-hardware",target:"_blank",rel:"noopener noreferrer"}},[t._v("PX4/PX4-Avoidance"),a("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);e.default=r.exports}}]);