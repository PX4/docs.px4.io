(window.webpackJsonp=window.webpackJsonp||[]).push([[1764],{3183:function(e,t,r){"use strict";r.r(t);var a=r(19),o=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"long-distance-data-link-using-wifi-in-raw-mode"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#long-distance-data-link-using-wifi-in-raw-mode"}},[e._v("#")]),e._v(" Long-distance Data-link using WiFi in Raw Mode")]),e._v(" "),r("p",[e._v("UAV에서 동영상을 지상 컴퓨터로 전송하고 "),r("em",[e._v("QGroundControl")]),e._v("에 표출하기 위하여 카메라(Logitech C920 또는 RaspberryPi 카메라)가 있는 보조 컴퓨터 설정 방법을 설명합니다. It also provide a bidirectional "),r("RouterLink",{attrs:{to:"/ko/telemetry/"}},[e._v("telemetry")]),e._v(" link and TCP/IP tunnel for drone control during flight. If you manually control the drone with a Joystick from QGroundControl (which uses MAVLink) then you can use WFB-ng as single link for all drone communications (Video, MAVLink telemetry, remote control using a Joystick).")],1),e._v(" "),r("p",[e._v("This setup uses WiFi in unconnected (broadcast) mode and software from the "),r("a",{attrs:{href:"https://github.com/svpcom/wfb-ng",target:"_blank",rel:"noopener noreferrer"}},[e._v("WFB-ng project"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("div",{staticClass:"custom-block note"},[r("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),r("p",[e._v("Before using "),r("em",[e._v("WFB-ng")]),e._v(" check regulators allow this kind of WiFi use in your country.")])]),e._v(" "),r("h2",{attrs:{id:"wfb-ng-overview"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#wfb-ng-overview"}},[e._v("#")]),e._v(" WFB-ng Overview")]),e._v(" "),r("p",[e._v("The "),r("em",[e._v("WFB-ng project")]),e._v(" provides a data transport that use low-level WiFi packets to avoid the distance and latency limitations of the ordinary IEEE 802.11 stack.")]),e._v(" "),r("p",[e._v("The high level benefits of "),r("em",[e._v("WFB-ng")]),e._v(" include:")]),e._v(" "),r("ul",[r("li",[e._v("Low-latency video link.")]),e._v(" "),r("li",[e._v("Bidirectional telemetry link (MAVLink).")]),e._v(" "),r("li",[e._v("TCP/IP tunnel.")]),e._v(" "),r("li",[e._v("Automatic TX diversity - use multiple cards on the ground to avoid antenna tracker.")]),e._v(" "),r("li",[e._v("Full link encryption and authentication (using "),r("a",{attrs:{href:"https://download.libsodium.org/doc/",target:"_blank",rel:"noopener noreferrer"}},[e._v("libsodium"),r("OutboundLink")],1),e._v(").")]),e._v(" "),r("li",[e._v("Aggregation of MAVLink packets (pack small packets into batches before transmitting).")]),e._v(" "),r("li",[e._v("Enhanced "),r("a",{attrs:{href:"https://github.com/svpcom/wfb-ng-osd",target:"_blank",rel:"noopener noreferrer"}},[e._v("OSD"),r("OutboundLink")],1),e._v(" for Raspberry PI or generic linux desktop with gstreamer.")])]),e._v(" "),r("p",[e._v("추가 정보는 아래 "),r("a",{attrs:{href:"#faq"}},[e._v("FAQ")]),e._v("을 참고하십시오.")]),e._v(" "),r("h2",{attrs:{id:"하드웨어-설정"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#하드웨어-설정"}},[e._v("#")]),e._v(" 하드웨어 설정")]),e._v(" "),r("p",[e._v("하드웨어 설정은 다음과 같습니다.")]),e._v(" "),r("p",[e._v("On the UAV side:")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("Raspberry PI 3B/3B+/ZeroW")])]),e._v(" "),r("li",[r("p",[e._v("One of:")]),e._v(" "),r("ul",[r("li",[r("p",[r("a",{attrs:{href:"https://www.raspberrypi.org/products/camera-module-v2/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Raspberry Pi camera"),r("OutboundLink")],1),e._v(" connected via CSI.")])]),e._v(" "),r("li",[r("p",[r("a",{attrs:{href:"https://www.logitech.com/en-us/product/hd-pro-webcam-c920?crid=34",target:"_blank",rel:"noopener noreferrer"}},[e._v("Logitech camera C920"),r("OutboundLink")],1),e._v(" connected via USB")])])])])]),e._v(" "),r("ul",[r("li",[e._v("WiFi module  "),r("a",{attrs:{href:"https://www.alfa.com.tw/products_detail/1.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("ALPHA AWUS036ACH"),r("OutboundLink")],1),e._v(" or any other "),r("strong",[e._v("RTL8812au")]),e._v(" card.")])]),e._v(" "),r("p",[e._v("On the ground side:")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("One of:")]),e._v(" "),r("ul",[r("li",[e._v("Any computer with USB port and Linux (tested on ubuntu 18.04 x86-64)")]),e._v(" "),r("li",[e._v("Raspberry PI connected via Ethernet to computer running QGroundControl on any OS.")])])]),e._v(" "),r("li",[r("p",[e._v("WiFi module  "),r("a",{attrs:{href:"https://www.alfa.com.tw/products_detail/1.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("ALPHA AWUS036ACH"),r("OutboundLink")],1),e._v(" or any other "),r("strong",[e._v("RTL8812au")]),e._v(" card. See "),r("a",{attrs:{href:"https://github.com/svpcom/wfb-ng/wiki/WiFi-hardware",target:"_blank",rel:"noopener noreferrer"}},[e._v("WFB-ng wiki > WiFi hardware"),r("OutboundLink")],1),e._v(" for more information on supported modules.")])])]),e._v(" "),r("h2",{attrs:{id:"하드웨어-수정"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#하드웨어-수정"}},[e._v("#")]),e._v(" 하드웨어 수정")]),e._v(" "),r("p",[e._v("Alpha AWUS036ACH is a medium power card that uses a lot of current while transmitting. If you power it from ordinary USB2 it will reset the port on most "),r("strong",[e._v("ARM boards")]),e._v(". If you connect it to "),r("strong",[e._v("USB3")]),e._v(" port via "),r("strong",[e._v("native USB3 cable")]),e._v(" to a "),r("strong",[e._v("Linux laptop")]),e._v(" you can use it without modification.")]),e._v(" "),r("p",[e._v("For "),r("strong",[e._v("Raspberry PI")]),e._v(" (UAV or ground) it must be directly connected to 5V BEC (or high current power adapter in case of ground pi) in one of two ways:")]),e._v(" "),r("ul",[r("li",[e._v("Make a custom USB cable ([cut "),r("code",[e._v("+5V")]),e._v(" wire from USB plug and connect it to BEC])(https://electronics.stackexchange.com/questions/218500/usb-charge-and-data-separate-cables)")]),e._v(" "),r("li",[e._v("USB 포트 인근의 PCB 기판에서 <1>+5V</1> 선을 뽑아 BEC에 연결(동작 여부가 의심스럽다면 진행하지 마십시오 - 대신 자체 제작 케이블을 쓰십시오).")])]),e._v(" "),r("p",[e._v("You must also add a 470uF "),r("strong",[e._v("low ESR capacitor")]),e._v(" (like ESC has) between "),r("strong",[e._v("card +5v and ground")]),e._v(" to filter voltage spikes. You should integrate the capacitor with a custom USB cable. Without the capacitor you can get packet corruption or packet loss. 여러개의 접지선을 사용하면, "),r("a",{attrs:{href:"https://en.wikipedia.org/wiki/Ground_loop_%28electricity%29",target:"_blank",rel:"noopener noreferrer"}},[e._v("접지 루프"),r("OutboundLink")],1),e._v("가 나타날 수 있음을 명심하십시오.")]),e._v(" "),r("p",[r("strong",[e._v("But if you use special very high power cards from taobao/aliexpress then you MUST power it as described above in ANY case.")])]),e._v(" "),r("h3",{attrs:{id:"uav-configuration"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#uav-configuration"}},[e._v("#")]),e._v(" UAV configuration")]),e._v(" "),r("ol",[r("li",[e._v("Download Raspberry PI image from "),r("a",{attrs:{href:"https://github.com/svpcom/wfb-ng/releases/",target:"_blank",rel:"noopener noreferrer"}},[e._v("latest wfb-ng release"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("Flash it to the "),r("strong",[e._v("UAV")]),e._v(" Raspberry PI")]),e._v(" "),r("li",[e._v("Reboot it and ssh with standard credentials (pi/raspberry).")]),e._v(" "),r("li",[e._v("Run actions for "),r("strong",[e._v("air")]),e._v(" role as displayed in motd.")]),e._v(" "),r("li",[e._v("Setup camera pipeline. Open "),r("code",[e._v("/etc/systemd/system/fpv-camera.service")]),e._v(" and uncomment pipeline according to your camera (PI camera or Logitech camera)")]),e._v(" "),r("li",[e._v("Open "),r("code",[e._v("/etc/wifibroadcast.cfg")]),e._v(" and configure WiFi channel according to your antenna setup (or use default #165 for 5.8GHz)")]),e._v(" "),r("li",[e._v("Configure PX4 to output telemetry stream at speed 1500kbps (other UART speeds doesn't match well to RPI frequency dividers). Connect Pixhawk uart to Raspberry PI uart. In "),r("code",[e._v("/etc/wifibroadcast.cfg")]),e._v(" uncomment "),r("code",[e._v("peer = 'serial:ttyS0:1500000'")]),e._v(" in "),r("code",[e._v("[drone_mavlink]")]),e._v(" section.")])]),e._v(" "),r("h3",{attrs:{id:"using-a-linux-laptop-as-gcs-harder-than-using-a-raspi"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#using-a-linux-laptop-as-gcs-harder-than-using-a-raspi"}},[e._v("#")]),e._v(" Using a Linux Laptop as GCS (Harder than using a RasPi)")]),e._v(" "),r("ol",[r("li",[e._v("On "),r("strong",[e._v("ground")]),e._v(" Linux development computer:"),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("sudo apt install libpcap-dev libsodium-dev python3-all python3-twisted\ngit clone -b stable https://github.com/svpcom/wfb-ng.git\ncd wfb-ng && make deb && sudo apt install ./deb_dist/wfb-ng*.deb\n")])])])]),e._v(" "),r("li",[e._v("Follow "),r("a",{attrs:{href:"https://github.com/svpcom/wfb-ng/wiki/Setup-HOWTO",target:"_blank",rel:"noopener noreferrer"}},[e._v("Setup HOWTO"),r("OutboundLink")],1),e._v(" to complete installation")]),e._v(" "),r("li",[e._v("Don't forget to copy "),r("code",[e._v("/etc/gs.key")]),e._v(" from "),r("strong",[e._v("UAV")]),e._v(" side to "),r("strong",[e._v("ground")]),e._v(" side to bind two setups.")]),e._v(" "),r("li",[e._v("Also don't forget to use the same frequency channel as on the UAV side.")])]),e._v(" "),r("h3",{attrs:{id:"using-raspberry-pi-as-gcs-easier"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#using-raspberry-pi-as-gcs-easier"}},[e._v("#")]),e._v(" Using Raspberry PI as GCS (Easier)")]),e._v(" "),r("p",[e._v("If you have Windows, OSX, or don't want to setup WFB-ng to your Linux laptop then you can use the same prebuilt image and another Raspberry Pi:")]),e._v(" "),r("ol",[r("li",[e._v("Flash image to the "),r("strong",[e._v("ground")]),e._v(" Raspberry Pi.")]),e._v(" "),r("li",[e._v("Reboot it and SSH in with standard credentials (pi/raspberry).")]),e._v(" "),r("li",[e._v("Run actions for "),r("strong",[e._v("ground")]),e._v(" role as displayed in motd, but skip setup of "),r("code",[e._v("fpv-video")]),e._v(" service and "),r("code",[e._v("osd")]),e._v(" service.")]),e._v(" "),r("li",[e._v("Connect your laptop and ground RasPi via ethernet and configure IP addresses")]),e._v(" "),r("li",[e._v("Edit "),r("code",[e._v("/etc/wifibroadcast.cfg")]),e._v(" and set the IP address of the laptop in "),r("code",[e._v("[gs_mavlink]")]),e._v(" and "),r("code",[e._v("[gs_video]")]),e._v(" sections (replacing "),r("code",[e._v("127.0.0.1")]),e._v(").")])]),e._v(" "),r("h3",{attrs:{id:"qgroundcontrol-setup"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#qgroundcontrol-setup"}},[e._v("#")]),e._v(" QGroundControl Setup")]),e._v(" "),r("ol",[r("li",[e._v("Run "),r("em",[e._v("QGroundControl")]),e._v(" and set "),r("code",[e._v("RTP h264")]),e._v(" on port 5600 as video source")]),e._v(" "),r("li",[e._v("Use default settings (udp on port 14550) as mavlink source")])]),e._v(" "),r("h2",{attrs:{id:"라디오-설정-튜닝"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#라디오-설정-튜닝"}},[e._v("#")]),e._v(" 라디오 설정 튜닝")]),e._v(" "),r("p",[e._v("기본 설정으로 WFB는 라디오 채널 165(5825MHz), 너비 20MHz, 긴 GI가 있는 MCS #1(QPSK 1/2)을 사용합니다. WiiFi가 반이중 방식이기 때문에 총 "),r("strong",[e._v("양방향")]),e._v("에 대해 ~7mbit/s의 "),r("strong",[e._v("유효")]),e._v(" 속도(즉, FEC 및 패킷 인코딩 후 사용 가능한 속도)를 제공합니다. 따라서, 비디오 다운 스트림 720p@49fps(4mbit/s) + 2개의 전속 원격 측정 스트림(업링크 및 다운링크)에 적합합니다. If you need a higher bandwidth you can use other MCS index (for example 2 or greater)")]),e._v(" "),r("h2",{attrs:{id:"안테나와-다양성"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#안테나와-다양성"}},[e._v("#")]),e._v(" 안테나와 다양성")]),e._v(" "),r("p",[e._v("간단한 경우에는 선형(Wi-Fi 카드와 함께 제공됨) 또는 원형 리프("),r("a",{attrs:{href:"http://www.antenna-theory.com/antennas/cloverleaf.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("원편파 Coverleaf 안테나"),r("OutboundLink")],1),e._v(") 편파가 있는 무지향성 안테나를 사용할 수 있습니다. 장거리 통신 설정에는 지향성 또는 무지향성 안테나가 있는 여러 Wi-Fi 어댑터를 사용할 수 있습니다. 기본적으로 지원되는 어댑터들은 TX/RX 다양성(여러 NIC를 "),r("code",[e._v("/etc/default/wifibroadcast")]),e._v("에 추가하기만 하면 됨)을 지원합니다. WiFi 어댑터에 두 개의 안테나(예: Alfa AWU036ACH)가 있는 경우에는 TX 다양성은 "),r("a",{attrs:{href:"https://en.wikipedia.org/wiki/Space%E2%80%93time_block_code",target:"_blank",rel:"noopener noreferrer"}},[e._v("STBC"),r("OutboundLink")],1),e._v("를 통해 구현됩니다. Cards with 4 ports (like Alfa AWUS1900) are currently not supported.")]),e._v(" "),r("h2",{attrs:{id:"자주-묻는-질문"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#자주-묻는-질문"}},[e._v("#")]),e._v(" 자주 묻는 질문")]),e._v(" "),r("p",[r("strong",[e._v("Q:")]),e._v(" "),r("em",[e._v("What type of data can be transmitted using wfb-ng?")])]),e._v(" "),r("p",[r("strong",[e._v("A:")]),e._v(" Any UDP with packet size <= 1445. 예를 들어, RTP 또는 MAVLink로 전송하는 x264 데이터가 있습니다.")]),e._v(" "),r("p",[r("strong",[e._v("문:")]),e._v(" "),r("em",[e._v("전송을 보장하는 기술은 무엇입니까?")])]),e._v(" "),r("p",[r("strong",[e._v("A:")]),e._v(" Wifibroadcast uses FEC (forward error correction). 필요에 따라 (TX, RX에서 동시에!) 설정 값을 조율할 수 있습니다.")]),e._v(" "),r("p",[r("strong",[e._v("Q")]),e._v(" "),r("em",[e._v("How far I can fly and still connect?")])]),e._v(" "),r("p",[r("strong",[e._v("A")]),e._v(" It depends on your antennas and WiFi cards. With Alfa AWU036ACH and 20dBi patch antenna on the ground ~20km is possible.")]),e._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),r("p",[e._v("Don't use band that the RC TX operates on!\n만일 그대로 사용하려면 모델 손상을 막기 위해 RTL 속성을 설정하십시오.")])]),e._v(" "),r("p",[r("strong",[e._v("Q:")]),e._v(" "),r("em",[e._v("라즈베리파이만 지원되나요?")])]),e._v(" "),r("p",[r("strong",[e._v("A:")]),e._v(" WFB-ng is not tied to any GPU - it operates with UDP packets. But to get RTP stream you need a video encoder (which encodes raw data from camera to x264 stream), or you must use a camera with a hardware video codec like Logitech C920 or Ethernet security cameras.")]),e._v(" "),r("h4",{attrs:{id:"what-arm-boards-are-recommended-for-the-uav"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#what-arm-boards-are-recommended-for-the-uav"}},[e._v("#")]),e._v(" What ARM Boards are Recommended for the UAV?")]),e._v(" "),r("ul",[r("li",[e._v("RPI3b/3b+/ZeroW. Prebuilt images are available, but it supports only h264 video for CSI cameras.")]),e._v(" "),r("li",[e._v("Jetson Nano. It supports h264 and h265 but you need to setup it yourself according to "),r("a",{attrs:{href:"https://github.com/svpcom/wfb-ng/wiki/Setup-HOWTO",target:"_blank",rel:"noopener noreferrer"}},[e._v("Setup HOWTO"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("You can use any other Linux ARM board, but you need to use an Ethernet or USB camera with built-in hardware video codecs (such as Logitech C920).")]),e._v(" "),r("h2",{attrs:{id:"이론"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#이론"}},[e._v("#")]),e._v(" 이론")]),e._v(" "),r("p",[e._v("WFB-ng puts the WiFi cards into monitor mode. 이 모드를 사용하면 연관 없이 임의의 패킷을 송수신할 수 있으며, ACK 패킷을 기다릴 수 있습니다. "),r("a",{attrs:{href:"https://github.com/svpcom/wfb-ng/blob/master/doc/Analysis%20of%20Injection%20Capabilities%20and%20Media%20Access%20of%20IEEE%20802.11%20Hardware%20in%20Monitor%20Mode.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("Analysis of Injection Capabilities and Media Access of IEEE 802.11 Hardware in Monitor Mode"),r("OutboundLink")],1),e._v(" "),r("a",{attrs:{href:"https://github.com/ewa/802.11-data",target:"_blank",rel:"noopener noreferrer"}},[e._v("802.11 timings"),r("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=o.exports}}]);